"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5428],{45428:(Ye,$,u)=>{u.r($),u.d($,{ClientModule:()=>Et});var D=u(32174),ve=u(36507),ae=u(93677),t=u(11210),N=(u(24346),u(8236)),A=u(68472),L=u(71568),g=u(47561),E=u(57936),b=u(42786),M=u(72244),d=u(32236),I=u(90313),V=u(65597),B=u(46335),e=u(94650),q=u(46448),Z=u(62510),R=u(54463),k=u(27601),x=u(36895),ee=u(10805),te=u(2387),Q=u(56368),ie=u(9851),ne=u(24929),se=u(92634),re=u(68653),pe=u(42919),J=u(37415);const G=["addEmailInput"],le=["addressLinesComponent"],W=["addressline1Input"],he=["attributesComponent"],me=["cityInput"],Se=["clientNamevalid"],ge=["contactsphonecountrycodeDropDown"],Ce=["countryInput"],Oe=["countrycodeInput"],ye=["descriptionvalid"],oe=["emailInputValid"],be=["firstnameInput"],Ae=["lastnameInput"],Ne=["mobileInput"],Ee=["phoneInput"],Ie=["phonecountrycodeDropDown"],fe=["preferencesComponent"],De=["shortNameInput"],Le=["stateInput"],Me=["zipInput"];function we(_,U){if(1&_&&(e.TgZ(0,"p-accordionTab",70),e._UZ(1,"app-attribute-values",71,72),e.qZA()),2&_){const n=e.oxw();e.Q6J("selected",!0),e.xp6(1),e.Q6J("attributes",n.attributes)}}let ce=(()=>{class _ extends g.O{clientService;loggerService;navigationService;router;translateService;uiUtils;userService;commonservice;enterprisesService;route;tournamentsService;addEmailInput;addressLinesComponent;addressline1Input;attributesComponent;cityInput;clientNamevalid;contactsphonecountrycodeDropDown;countryInput;countrycodeInput;descriptionvalid;emailInputValid;firstnameInput;lastnameInput;mobileInput;phoneInput;phonecountrycodeDropDown;preferencesComponent;shortNameInput;stateInput;zipInput;ContactTypeDisplayName;ContactTypeName;ContactTypeObj;addressLine1;addressLine2;attributes=[];city;clientAttributes;clientName;clientShortName;clientSubTypeDisplayName;clientSubTypeName;clientSubTypeObj;clientSubTypeOptions;clientTypeOptions;contactEmail;contactTypeOptions;contactTypesDisplayName;contactTypesName;countryCodeDisplayName;countryCodeObj;countryCodeOptions;countryId;countryObj;countryOptions;countrycodeOptions;data;defaultClientSubType;defaultClientType;defaultClientTypeDisplayName;defaultClientTypeName;defaultClientTypeObj;defaultContactType;defaultCountryCode;defaultCountryCodeObj;defaultCountryId;defaultCountryName;defaultEmail;defaultEnterprise;defaultEnterpriseContact;defaultEnterpriseContactName;defaultEnterpriseContactObj;defaultObj;defaultStateId;defaultStatus;defaultstateName;description;disableSubmitBtn=!1;enterpriseContactOptions;enterpriseId;enterpriseName;enterpriseShortName;error;firstName;headerAction;imageError;imgFile;label;lastName;mobile;phoneNumber;phoneNumberExtension;preferObject;preferenceObj;stateObj;stateOptions;statusDisplayName;statusName;statusOptions;statusobj;zipcode;dataJsonObj={};constructor(n,s,a,o,p,X,j,K,f,Y,Ve){super(Y,K),this.clientService=n,this.loggerService=s,this.navigationService=a,this.router=o,this.translateService=p,this.uiUtils=X,this.userService=j,this.commonservice=K,this.enterprisesService=f,this.route=Y,this.tournamentsService=Ve}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.headerAction={BACK:!0},this.dataJsonObj.pageName=d.hf.CLIENT,this.enterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.getEnterpriseRecordById(),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(n=>{this.dataJsonObj.lookupCodesListJSON=n,this.getClientType(""),this.getClientSubType(""),this.getStatusOptions(""),this.getCountriesList("")}),this.getEnterpriseContact(""),this.getContactTypes()}getEnterpriseRecordById(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(n=>{this.enterpriseName=n.enterprise_name,this.defaultEnterprise=n._id,this.attributesList(this.enterpriseId),this.preferObject=n.preferences,this.enterpriseShortName=n.short_name,n.address&&!0===n.address[0].primary&&(n.address[0].enterprise_id=this.defaultEnterprise,this.data=n.address[0],this.label=this.data.address_label,this.addressLine1=this.data.address_line1,this.addressLine2=this.data.address_line2,this.defaultCountryName=this.lookupLanguageTranslations(this.data.country.lookup_id),this.countryObj=this.data.country,this.defaultStateId=this.data.state.state_id,this.defaultstateName=this.data.state.state_name,this.city=this.data.city,this.zipcode=this.data.ZIP,this.defaultEmail=this.data.email,this.defaultCountryCode=this.lookupLanguageTranslations(this.data.phone_country_code.lookup_id),this.defaultCountryCodeObj=this.data.phone_country_code,this.mobile=this.data.phone)},n=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseRecordById",n)})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseRecordById",n)}}changeClientName(n){try{this.error="",this.disableSubmitBtn=!1,this.clientName=n.value,this.description=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeClientName",s)}}changeClientShortName(n){try{this.error="",this.disableSubmitBtn=!1,this.clientShortName=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeClientShortName",s)}}getClientType(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.WORK_CLIENT_TYPES],"").then(s=>{this.clientTypeOptions=s,this.defaultClientType=s[0].ID,this.defaultClientTypeName=s[0].NAME,this.defaultClientTypeDisplayName=this.lookupLanguageTranslations(s[0].lookup_id)},s=>{this.loggerService.setLoggerError(this.constructor.name,"getClientType",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getClientType",s)}}changeClientType(n){try{n.value&&(this.defaultClientType=n.value,this.defaultClientTypeObj=this.clientTypeOptions.find(s=>s.ID===parseInt(this.defaultClientType,10)),this.defaultClientTypeName=this.defaultClientTypeObj.lookup_name,this.defaultClientTypeDisplayName=this.lookupLanguageTranslations(this.defaultClientTypeObj.lookup_id))}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeClientType",s)}}getClientSubType(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.WORK_CLIENT_SUBTYPES],"").then(s=>{this.clientSubTypeOptions=s,this.clientSubTypeDisplayName=this.lookupLanguageTranslations(s[0].lookup_id)},s=>{this.loggerService.setLoggerError(this.constructor.name,"getClientSubType",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getClientSubType",s)}}changeClientSubType(n){try{this.defaultClientSubType=n.value,this.clientSubTypeObj=this.clientSubTypeOptions.find(s=>s.ID===parseInt(this.defaultClientSubType,10)),this.clientSubTypeName=this.clientSubTypeObj.lookup_name,this.clientSubTypeDisplayName=this.lookupLanguageTranslations(this.clientSubTypeObj.lookup_id)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeClientSubType",s)}}getEnterpriseContact(n){try{this.clientService.getResourcesData(this.enterpriseId).then(s=>{this.enterpriseContactOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseContact",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseContact",s)}}changeEnterpriseContact(n){try{n.value&&(this.defaultEnterpriseContact=n.value,this.defaultEnterpriseContactObj=this.enterpriseContactOptions.find(s=>s.ID===parseInt(this.defaultEnterpriseContact,10)),this.defaultEnterpriseContactName=this.defaultEnterpriseContactObj.NAME)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeEnterpriseContact",s)}}getStatusOptions(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.WORK_CLIENT_STATUSES],n).then(s=>{this.statusOptions=s,this.defaultStatus=s[0].ID,this.statusName=s[0].lookup_name,this.statusDisplayName=this.lookupLanguageTranslations(s[0].lookup_id)},s=>{this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",s)}}changeStatus(n){try{this.defaultStatus=n.value,this.statusobj=this.statusOptions.find(s=>s.ID===parseInt(this.defaultStatus,10)),this.statusName=this.statusobj.lookup_name,this.statusDisplayName=this.lookupLanguageTranslations(this.statusobj.lookup_id)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeStatus",s)}}changeDescriptionName(n){try{this.description=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeDescriptionName",s)}}changeProfileImage(n){try{""===n.error?(this.imageError="",this.imgFile=n.value):this.imageError=n.error}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeProfileImage",s)}}changeLabel(n){try{this.label=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeLabel",s)}}changeAddressLine1(n){try{this.addressLine1=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeAddressLine1",s)}}changeAddressLine2(n){try{this.addressLine2=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeAddressLine2",s)}}getCountriesList(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.COUNTRIES],n).then(s=>{this.countryOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getCountriesList",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getCountriesList",s)}}changeCountry(n){try{n.NAME?(this.defaultCountryId=n.ID,this.countryObj=n,this.defaultCountryId=n.ID,this.defaultCountryName=this.countryObj.NAME,this.countryId=this.defaultCountryId,this.stateObj="",this.defaultStateId="",this.defaultstateName=""):(this.defaultCountryName="",this.defaultCountryId="")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCountry",s)}}getStateOptions(n){try{this.commonservice.getStatesList(this.countryId,n,this.enterpriseId).then(s=>{this.stateOptions=s.rows},s=>{this.loggerService.setLoggerError(this.constructor.name,"getStateOptions",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getStateOptions",s)}}changeState(n){try{n.NAME?(this.defaultstateName=n.NAME,this.defaultStateId=n.ID,this.stateObj=this.stateOptions.find(s=>s.ID===parseInt(this.defaultStateId,10)),this.defaultstateName=this.stateObj.NAME):(this.defaultstateName="",this.defaultStateId="")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeState",s)}}changeCity(n){try{this.city=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCity",s)}}changeZipcode(n){try{this.zipcode=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeZipcode",s)}}changeEmail(n){try{this.defaultEmail=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeEmail",s)}}getPhoneCountryCodes(n){try{this.defaultObj=[],this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.COUNTRY_CODES],n).then(s=>{this.countrycodeOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getPhoneCountryCodes",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getPhoneCountryCodes",s)}}changePhoneCountryCodes(n){try{n.NAME&&(this.defaultCountryCode=n.NAME,this.defaultCountryCodeObj=n)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changePhoneCountryCodes",s)}}changePhoneNo(n){try{this.mobile=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changePhoneNo",s)}}getContactTypes(){try{this.tournamentsService.getLookups(d.ox.CONTACT_TYPES,this.enterpriseId).then(n=>{this.contactTypeOptions=n,this.defaultContactType=n[0].ID,this.contactTypesName=n[0].NAME,this.contactTypesDisplayName=this.lookupLanguageTranslations(n[0].lookup_id),this.ContactTypeObj=n[0]},n=>{this.loggerService.setLoggerError(this.constructor.name,"getContactTypes",n)})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"getContactTypes",n)}}changeContactType(n){try{n.value&&(this.defaultContactType=n.value,this.ContactTypeObj=this.contactTypeOptions.find(s=>s.ID===parseInt(this.defaultContactType,10)),this.ContactTypeName=this.ContactTypeObj.NAME,this.ContactTypeDisplayName=this.lookupLanguageTranslations(this.ContactTypeObj.lookup_id))}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeContactType",s)}}changeFirstName(n){try{this.firstName=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeFirstName",s)}}changeLastName(n){try{this.lastName=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeLastName",s)}}changeContactEmail(n){try{this.contactEmail=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeContactEmail",s)}}getContactCountryCodes(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.COUNTRY_CODES],n).then(s=>{this.countryCodeOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getContactCountryCodes",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getContactCountryCodes",s)}}changeContactCountryCode(n){try{n.ID?(this.countryCodeObj=n,this.countryCodeDisplayName=this.countryCodeObj.NAME):this.countryCodeDisplayName=""}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeContactCountryCode",s)}}changeContactPhoneNo(n){try{this.phoneNumber=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeContactPhoneNo",s)}}changeExtension(n){try{this.phoneNumberExtension=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeExtension",s)}}getPreferencesObj(n){try{this.preferenceObj=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getPreferencesObj",s)}}attributesList(n){try{this.userService.AttributesList(n,d.ox.CLIENTS).then(s=>{this.attributes=s.rows},s=>{this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)}}createRecord(){try{if(this.clientName&&this.clientName.length<3)this.error=this.translateService.instant("COMMON_PAGE_TITLES.WORK_CLIENT")+" "+this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_MINIMUM_THREE_CHARACTERS");else if(!(this.clientNamevalid.isValid()&&this.shortNameInput.isValid()&&this.descriptionvalid.isValid()&&I.L.isEmpty(this.error)&&I.L.isEmpty(this.imageError)&&this.addressline1Input.isValid()&&this.countryInput.isValid()&&this.stateInput.isValid()&&this.cityInput.isValid()&&this.zipInput.isValid()&&this.addEmailInput.isValid()&&this.phonecountrycodeDropDown.isValid()&&this.mobileInput.isValid()&&this.firstnameInput.isValid()&&this.lastnameInput.isValid()&&this.emailInputValid.isValid()&&this.contactsphonecountrycodeDropDown.isValid()&&this.phoneInput.isValid()&&this.preferencesComponent.isValidPreferences())||this.attributes&&this.attributes.length>0&&!this.attributesComponent.isValidAttributes())!(this.clientNamevalid.isValid()&&this.shortNameInput.isValid()&&this.descriptionvalid.isValid())||this.addressline1Input.isValid()&&this.stateInput.isValid()&&this.cityInput.isValid()&&this.zipInput.isValid()&&this.addEmailInput.isValid()&&this.phonecountrycodeDropDown.isValid()&&this.mobileInput.isValid()?this.clientNamevalid.isValid()&&this.shortNameInput.isValid()&&this.descriptionvalid.isValid()&&(!this.firstnameInput.isValid()||!this.lastnameInput.isValid()||!this.emailInputValid.isValid()||!this.contactsphonecountrycodeDropDown.isValid()||!this.phoneInput.isValid())&&(this.error=this.translateService.instant("COMMON_BLOCK_TITLES.CONTACT_DETAILS")+""+this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NOBLANK")):this.error=this.translateService.instant("COMMON_BLOCK_TITLES.ADDRESS_DETAILS")+""+this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NOBLANK");else{this.disableSubmitBtn=!0;const n=this.preferencesComponent.preferenceObj(),s={enterprise:{enterprise_id:this.defaultEnterprise,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},clientAttributes:[],client_type:{lookup_id:this.defaultClientType,lookup_name:this.defaultClientTypeName},client_subtype:{lookup_id:this.defaultClientSubType?this.defaultClientSubType:"",lookup_name:this.clientSubTypeName?this.clientSubTypeName:""},enterprise_contact:{employee_id:this.defaultEnterpriseContact,employee_name:this.defaultEnterpriseContactName},status:{lookup_id:this.defaultStatus,lookup_name:this.statusName},preferences:n,client_name:this.clientName,client_short_name:this.clientShortName,description:this.description,address:{address_label:this.label,address_line1:this.addressLine1,address_line2:this.addressLine2,city:this.city,state:{state_id:this.defaultStateId,state_name:this.defaultstateName},ZIP:this.zipcode,country:{lookup_id:this.countryObj.lookup_id,lookup_name:this.countryObj.lookup_name},geo_coordinates:"",email:this.defaultEmail,phone_country_code:{lookup_id:this.defaultCountryCodeObj.lookup_id,lookup_name:this.defaultCountryCodeObj.lookup_name},phone:this.mobile},contact_details:{fname:this.firstName,lname:this.lastName,contact_type:{lookup_id:this.defaultContactType,lookup_name:this.contactTypesName},email:this.contactEmail,phone_country_code:this.countryCodeObj,phone:this.phoneNumber,phone_extn:this.phoneNumberExtension}};let a="";if(this.attributes&&this.attributes.length>0){const o=this.attributesComponent.getAttributeValues();o&&o.error?a=o.error:s.clientAttributes=o}else s.clientAttributes=[];this.imgFile=this.imgFile?this.commonservice.dataURItoImgBlob(this.imgFile,"image/jpeg"):"",I.L.isEmpty(a)&&this.clientService.create(s,this.imgFile).then(o=>{this.disableSubmitBtn=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},o=>{this.commonErrorCodes(JSON.parse(o))})}}catch(n){this.loggerService.setLoggerError(this.constructor.name,"createRecord",n)}}commonErrorCodes(n){409===JSON.parse(n[d.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(n){this.loggerService.setLoggerError(this.constructor.name,"cancel",n)}}pageheadeActionClick(n){"BACK"==n.value&&this.cancel()}static \u0275fac=function(s){return new(s||_)(e.Y36(A.a),e.Y36(b.m),e.Y36(q.f),e.Y36(Z.F0),e.Y36(R.sK),e.Y36(k.s),e.Y36(B.K),e.Y36(L.v),e.Y36(E.e),e.Y36(Z.gz),e.Y36(V.o))};static \u0275cmp=e.Xpm({type:_,selectors:[["app-client-create"]],viewQuery:function(s,a){if(1&s&&(e.Gf(G,5),e.Gf(le,5),e.Gf(W,5),e.Gf(he,5),e.Gf(me,5),e.Gf(Se,5),e.Gf(ge,5),e.Gf(Ce,5),e.Gf(Oe,5),e.Gf(ye,5),e.Gf(oe,5),e.Gf(be,5),e.Gf(Ae,5),e.Gf(Ne,5),e.Gf(Ee,5),e.Gf(Ie,5),e.Gf(fe,5),e.Gf(De,5),e.Gf(Le,5),e.Gf(Me,5)),2&s){let o;e.iGM(o=e.CRH())&&(a.addEmailInput=o.first),e.iGM(o=e.CRH())&&(a.addressLinesComponent=o.first),e.iGM(o=e.CRH())&&(a.addressline1Input=o.first),e.iGM(o=e.CRH())&&(a.attributesComponent=o.first),e.iGM(o=e.CRH())&&(a.cityInput=o.first),e.iGM(o=e.CRH())&&(a.clientNamevalid=o.first),e.iGM(o=e.CRH())&&(a.contactsphonecountrycodeDropDown=o.first),e.iGM(o=e.CRH())&&(a.countryInput=o.first),e.iGM(o=e.CRH())&&(a.countrycodeInput=o.first),e.iGM(o=e.CRH())&&(a.descriptionvalid=o.first),e.iGM(o=e.CRH())&&(a.emailInputValid=o.first),e.iGM(o=e.CRH())&&(a.firstnameInput=o.first),e.iGM(o=e.CRH())&&(a.lastnameInput=o.first),e.iGM(o=e.CRH())&&(a.mobileInput=o.first),e.iGM(o=e.CRH())&&(a.phoneInput=o.first),e.iGM(o=e.CRH())&&(a.phonecountrycodeDropDown=o.first),e.iGM(o=e.CRH())&&(a.preferencesComponent=o.first),e.iGM(o=e.CRH())&&(a.shortNameInput=o.first),e.iGM(o=e.CRH())&&(a.stateInput=o.first),e.iGM(o=e.CRH())&&(a.zipInput=o.first)}},features:[e._Bn([E.e,L.v,A.a,V.o]),e.qOj],decls:136,vars:151,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-lg-11","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-4"],["disabled","true","id","Clients-create-enterprisename",3,"label","value"],["autoCaseFlag","false","mandatory","true","id","Clients-create-Clientsname","disabled","false",3,"minlength","maxlength","label","value","valueChange"],["clientNamevalid",""],["autoCaseFlag","false","mandatory","true","id","Clients-create-Clientshortname","disabled","false",3,"maxlength","label","value","valueChange"],["shortNameInput",""],["mandatory","true","id","Clients-create-Clientstype",3,"label","options","defaultValue","valueChange"],["mandatory","false","id","Clients-create-Clientsubtype",3,"label","options","defaultValue","valueChange"],["mandatory","false","id","Clients-create-enterprisecontact",3,"label","options","defaultValue","valueChange"],[1,"col-lg-1","col-md-2","pdl-0","order-md-1"],["type","file","btnHide","true","action","create",1,"edit-pic",3,"valueChange"],[1,"col-md-3","order-md-1","order-2"],["mandatory","true","id","Clients-create-status",3,"label","options","maxlength","defaultValue","valueChange"],[1,"col-md-9","order-md-1","order-2"],["mandatory","true","disabled","false","id","Clients-create-description",3,"label","defaultvalue","maxlength","valueChange"],["descriptionvalid",""],[1,"col-md-12","text-end","mt-2","btns-group","order-md-1","order-2"],["className","btn btn-primary btn-sm","id","enterprise-create-createRecord",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","enterprise-create-cancel",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0","order-md-1","order-2"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["disabled","false","id","Clients-create-label",3,"label","value","valueChange"],["id","Clients-create-addressline1","mandatory","true","disabled","false",3,"label","value","valueChange"],["addressline1Input",""],["disabled","false","id","Clients-create-addressline2",3,"label","value","valueChange"],["mandatory","true","id","Clients-create-country",3,"label","options","defaultValue","selectedOption","searchValueChange"],["countryInput",""],["mandatory","true","id","Clients-create-state",3,"label","options","defaultValue","selectedOption","searchValueChange"],["stateInput",""],["mandatory","true","id","Clients-create-city","disabled","false",3,"label","value","valueChange"],["cityInput",""],["mandatory","true","id","Clients-create-zip","disabled","false","autoCaseFlag","false",3,"label","value","maxlength","valueChange"],["zipInput",""],["type","email","id","Clients-create-email","mandatory","true","disabled","false",3,"label","value","maxlength","valueChange"],["addEmailInput",""],["mandatory","false","id","Clients-create-phonecountrycode",3,"label","options","defaultValue","selectedOption","searchValueChange"],["phonecountrycodeDropDown",""],["type","mobile","mandatory","true","disabled","false","id","Clients-create-mobile",3,"label","maxlength","value","valueChange"],["mobileInput",""],["mandatory","true","id","Clients-create-contactType",3,"label","options","defaultValue","valueChange"],["mandatory","true","id","Clients-create-firstname","disabled","false",3,"label","value","maxlength","valueChange"],["firstnameInput",""],["mandatory","true","id","Clients-create-lastname","disabled","false",3,"label","value","maxlength","valueChange"],["lastnameInput",""],["mandatory","true","id","Clients-create-email","disabled","false","type","email",3,"label","value","maxlength","valueChange"],["emailInputValid",""],["mandatory","true","id","Clients-create-phonecountrycode",3,"label","options","selectedOption","searchValueChange"],["contactsphonecountrycodeDropDown",""],["mandatory","true","disabled","false","id","Clients-create-phonenumber",3,"label","value","minlength","maxlength","valueChange"],["phoneInput",""],["disabled","false","mandatory","false","id","Clients-create-phonenumberext",3,"label","value","maxlength","valueChange"],["id","createpreferencesId1",3,"selected"],[3,"defaultValue","valueChange"],["preferencesComponent",""],["header","Attributes","id","createpreferencesId1",3,"selected",4,"ngIf"],["header","Attributes","id","createpreferencesId1",3,"selected"],["action","Create",3,"attributes"],["attributesComponent",""]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11)(15,"app-input",13,14),e.NdJ("valueChange",function(p){return a.changeClientName(p)}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",11)(19,"app-input",15,16),e.NdJ("valueChange",function(p){return a.changeClientShortName(p)}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",11)(23,"app-dropdown-singleselect",17),e.NdJ("valueChange",function(p){return a.changeClientType(p)}),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",11)(26,"app-dropdown-singleselect",18),e.NdJ("valueChange",function(p){return a.changeClientSubType(p)}),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",11)(29,"app-dropdown-singleselect",19),e.NdJ("valueChange",function(p){return a.changeEnterpriseContact(p)}),e.ALo(30,"translate"),e.qZA()()()(),e.TgZ(31,"div",20)(32,"app-imageupload",21),e.NdJ("valueChange",function(p){return a.changeProfileImage(p)}),e.qZA()(),e.TgZ(33,"div",22)(34,"app-dropdown-singleselect",23),e.NdJ("valueChange",function(p){return a.changeStatus(p)}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",24)(37,"app-textarea",25,26),e.NdJ("valueChange",function(p){return a.changeDescriptionName(p)}),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",27)(41,"app-button",28),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"app-button",29),e.NdJ("buttonOnClick",function(){return a.cancel()}),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",30),e._uU(46),e.ALo(47,"translate"),e.qZA()()()()(),e.TgZ(48,"div",3)(49,"div",31)(50,"div",32)(51,"p-accordion",33)(52,"p-accordionTab",34)(53,"p-header",35)(54,"span"),e._uU(55),e.ALo(56,"translate"),e.qZA()(),e.TgZ(57,"div",8)(58,"div",11)(59,"app-input",36),e.NdJ("valueChange",function(p){return a.changeLabel(p)}),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",11)(62,"app-input",37,38),e.NdJ("valueChange",function(p){return a.changeAddressLine1(p)}),e.ALo(64,"translate"),e.qZA()(),e.TgZ(65,"div",11)(66,"app-input",39),e.NdJ("valueChange",function(p){return a.changeAddressLine2(p)}),e.ALo(67,"translate"),e.qZA()(),e.TgZ(68,"div",11)(69,"app-dropdown-search",40,41),e.NdJ("selectedOption",function(p){return a.changeCountry(p)})("searchValueChange",function(p){return a.getCountriesList(p)}),e.ALo(71,"translate"),e.qZA()(),e.TgZ(72,"div",11)(73,"app-dropdown-search",42,43),e.NdJ("selectedOption",function(p){return a.changeState(p)})("searchValueChange",function(p){return a.getStateOptions(p)}),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"div",11)(77,"app-input",44,45),e.NdJ("valueChange",function(p){return a.changeCity(p)}),e.ALo(79,"translate"),e.qZA()(),e.TgZ(80,"div",11)(81,"app-inputnumber",46,47),e.NdJ("valueChange",function(p){return a.changeZipcode(p)}),e.ALo(83,"translate"),e.qZA()(),e.TgZ(84,"div",11)(85,"app-input",48,49),e.NdJ("valueChange",function(p){return a.changeEmail(p)}),e.ALo(87,"translate"),e.qZA()(),e.TgZ(88,"div",11)(89,"app-dropdown-search",50,51),e.NdJ("selectedOption",function(p){return a.changePhoneCountryCodes(p)})("searchValueChange",function(p){return a.getPhoneCountryCodes(p)}),e.ALo(91,"translate"),e.qZA()(),e.TgZ(92,"div",11)(93,"app-inputnumber",52,53),e.NdJ("valueChange",function(p){return a.changePhoneNo(p)}),e.ALo(95,"translate"),e.qZA()()()(),e.TgZ(96,"p-accordionTab",34)(97,"p-header",35)(98,"span"),e._uU(99),e.ALo(100,"translate"),e.qZA()(),e.TgZ(101,"div",8)(102,"div",11)(103,"app-dropdown-singleselect",54),e.NdJ("valueChange",function(p){return a.changeContactType(p)}),e.ALo(104,"translate"),e.qZA()(),e.TgZ(105,"div",11)(106,"app-input",55,56),e.NdJ("valueChange",function(p){return a.changeFirstName(p)}),e.ALo(108,"translate"),e.qZA()(),e.TgZ(109,"div",11)(110,"app-input",57,58),e.NdJ("valueChange",function(p){return a.changeLastName(p)}),e.ALo(112,"translate"),e.qZA()(),e.TgZ(113,"div",11)(114,"app-input",59,60),e.NdJ("valueChange",function(p){return a.changeContactEmail(p)}),e.ALo(116,"translate"),e.qZA()(),e.TgZ(117,"div",11)(118,"app-dropdown-search",61,62),e.NdJ("selectedOption",function(p){return a.changeContactCountryCode(p)})("searchValueChange",function(p){return a.getContactCountryCodes(p)}),e.ALo(120,"translate"),e.qZA()(),e.TgZ(121,"div",11)(122,"app-inputnumber",63,64),e.NdJ("valueChange",function(p){return a.changeContactPhoneNo(p)}),e.ALo(124,"translate"),e.qZA()(),e.TgZ(125,"div",11)(126,"app-inputnumber",65),e.NdJ("valueChange",function(p){return a.changeExtension(p)}),e.ALo(127,"translate"),e.qZA()()()(),e.TgZ(128,"p-accordionTab",66)(129,"p-header",35)(130,"span"),e._uU(131),e.ALo(132,"translate"),e.qZA()(),e.TgZ(133,"app-preferences",67,68),e.NdJ("valueChange",function(p){return a.getPreferencesObj(p)}),e.qZA()(),e.YNc(135,we,3,2,"p-accordionTab",69),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(6),e.s9C("label",e.lcZ(13,89,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(17,91,"COMMON_PAGE_TITLES.WORK_CLIENT")),e.s9C("value",a.clientName),e.Q6J("minlength",3)("maxlength",120),e.xp6(4),e.s9C("label",e.lcZ(21,93,"WORK_CLIENTS.WORK_CLIENT_SHORT_NAME")),e.s9C("value",a.clientShortName),e.Q6J("maxlength",15),e.xp6(4),e.s9C("label",e.lcZ(24,95,"WORK_CLIENTS.WORK_CLIENT_TYPE")),e.s9C("defaultValue",a.defaultClientType),e.Q6J("options",a.clientTypeOptions),e.xp6(3),e.s9C("label",e.lcZ(27,97,"WORK_CLIENTS.WORK_CLIENT_SUBTYPE")),e.s9C("defaultValue",a.defaultClientSubType),e.Q6J("options",a.clientSubTypeOptions),e.xp6(3),e.s9C("label",e.lcZ(30,99,"WORK_CLIENTS.ENTERPRISE_CONTACT")),e.s9C("defaultValue",a.defaultEnterpriseContact),e.Q6J("options",a.enterpriseContactOptions),e.xp6(5),e.s9C("label",e.lcZ(35,101,"COMMON_FIELDS.STATUS")),e.s9C("defaultValue",a.defaultStatus),e.Q6J("options",a.statusOptions)("maxlength",40),e.xp6(3),e.s9C("label",e.lcZ(39,103,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.description),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(42,105,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(44,107,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(47,109,a.error)," "),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(56,111,"COMMON_BLOCK_TITLES.ADDRESS_DETAILS")),e.xp6(4),e.s9C("label",e.lcZ(60,113,"ENTERPRISES.LABEL")),e.s9C("value",a.label),e.xp6(3),e.s9C("label",e.lcZ(64,115,"COMMON_ADDRESS_BLOCK.ADDRESS_LINE1")),e.s9C("value",a.addressLine1),e.xp6(4),e.s9C("label",e.lcZ(67,117,"COMMON_ADDRESS_BLOCK.ADDRESS_LINE2")),e.s9C("value",a.addressLine2),e.xp6(3),e.s9C("label",e.lcZ(71,119,"COMMON_ADDRESS_BLOCK.COUNTRY")),e.s9C("defaultValue",a.defaultCountryName),e.Q6J("options",a.countryOptions),e.xp6(4),e.s9C("label",e.lcZ(75,121,"COMMON_ADDRESS_BLOCK.STATE")),e.s9C("defaultValue",a.defaultstateName),e.Q6J("options",a.stateOptions),e.xp6(4),e.s9C("label",e.lcZ(79,123,"COMMON_ADDRESS_BLOCK.CITY")),e.s9C("value",a.city),e.xp6(4),e.s9C("label",e.lcZ(83,125,"COMMON_ADDRESS_BLOCK.ZIP_CODE")),e.s9C("value",a.zipcode),e.Q6J("maxlength",6),e.xp6(4),e.s9C("label",e.lcZ(87,127,"COMMON_FIELDS.EMAIL")),e.s9C("value",a.defaultEmail),e.Q6J("maxlength",60),e.xp6(4),e.s9C("label",e.lcZ(91,129,"COMMON_ADDRESS_BLOCK.COUNTRY_CODE")),e.s9C("defaultValue",a.defaultCountryCode),e.Q6J("options",a.countrycodeOptions),e.xp6(4),e.s9C("label",e.lcZ(95,131,"COMMON_FIELDS.PHONE_NUMBER")),e.s9C("value",a.mobile),e.Q6J("maxlength",10),e.xp6(3),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(100,133,"COMMON_BLOCK_TITLES.CONTACT_DETAILS")),e.xp6(4),e.s9C("label",e.lcZ(104,135,"COMMON_ADDRESS_BLOCK.CONTACT_TYPE")),e.s9C("defaultValue",a.defaultContactType),e.Q6J("options",a.contactTypeOptions),e.xp6(3),e.s9C("label",e.lcZ(108,137,"COMMON_FIELDS.FIRST_NAME")),e.s9C("value",a.firstName),e.Q6J("maxlength",40),e.xp6(4),e.s9C("label",e.lcZ(112,139,"COMMON_FIELDS.LAST_NAME")),e.s9C("value",a.lastName),e.Q6J("maxlength",40),e.xp6(4),e.s9C("label",e.lcZ(116,141,"COMMON_FIELDS.EMAIL")),e.s9C("value",a.contactEmail),e.Q6J("maxlength",60),e.xp6(4),e.s9C("label",e.lcZ(120,143,"COMMON_ADDRESS_BLOCK.COUNTRY_CODE")),e.Q6J("options",a.countryCodeOptions),e.xp6(4),e.s9C("label",e.lcZ(124,145,"COMMON_FIELDS.PHONE_NUMBER")),e.s9C("value",a.phoneNumber),e.Q6J("minlength",10)("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(127,147,"COMMON_FIELDS.EXTENSION")),e.s9C("value",a.phoneNumberExtension),e.Q6J("maxlength",4),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(132,149,"COMMON_BLOCK_TITLES.PREFERENCES")),e.xp6(2),e.Q6J("defaultValue",a.preferObject),e.xp6(2),e.Q6J("ngIf",a.attributes&&a.attributes.length>0))},dependencies:[x.O5,ee.h4,D.UQ,D.US,te.r,Q.a,ie.k,ne.R,se.K,re.f,pe.C,M.h,N.$,J.q,R.X$]})}return _})();var H=u(42863),z=(u(62984),u(30578)),_e=u(11735),v=u(68896);const Ue=["addEmailInput"],c=["addressline1Input"],C=["cityInput"],i=["clientNamevalid"],l=["contactLinesComponent"],r=["contactsphonecountrycodeDropDown"],h=["countryInput"],m=["countrycodeInput"],S=["descriptionvalid"],T=["emailInput"],O=["emailInputValid"],y=["firstnameInput"],P=["lastnameInput"],w=["mobileInput"],F=["phoneInput"],de=["phonecountrycodeDropDown"],Te=["preferencesComponent"],Pe=["shortNameInput"],Be=["stateInput"],He=["zipInput"];function Ke(_,U){if(1&_&&(e.TgZ(0,"div",11),e._UZ(1,"app-input",73),e.ALo(2,"translate"),e.qZA()),2&_){const n=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("value",n.reasonEnabled)}}function Qe(_,U){if(1&_&&(e.TgZ(0,"div",11),e._UZ(1,"app-input",74),e.ALo(2,"translate"),e.qZA()),2&_){const n=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("value",n.defaultReasonDisabled)}}let We=(()=>{class _ extends g.O{apiEndPointUrl;clientService;columnsheaders;loggerService;navigationService;router;translateService;uiUtils;commonservice;enterprisesService;listingVariables;route;tournamentsService;addEmailInput;addressline1Input;cityInput;clientNamevalid;contactLinesComponent;contactsphonecountrycodeDropDown;countryInput;countrycodeInput;descriptionvalid;emailInput;emailInputValid;firstnameInput;lastnameInput;mobileInput;phoneInput;phonecountrycodeDropDown;preferencesComponent;shortNameInput;stateInput;zipInput;actionType;addressLine1;addressLine2;apiEndPoint;attachmentColumnHeaders=[];attachmentsData;city;clientName;clientShortName;clientViewData;contactCountryCodeDisplayName;contactCountryCodeName;contactDefaulCountryCode;contactEmail;contactTypeDisplayName;contactTypeName;contactTypeObj;contactTypeOptions;contactsCountryCodeObj;countryCodeOptions;countryId;countryObj;countryOptions;createdUser;creationDate;data;defaultContactType;defaultCountryCode;defaultCountryCodeObj;defaultCountryId;defaultCountryName;defaultReasonDisabled;defaultStateId;defaultStateName;description;disableSubmitBtn=!1;email;enterpriseId;error;firstName;headerAction;imageError;imgFile;imgFilepath;label;lastName;lastUpdateDate;lastUpdatedUser;mobile;object_type;phNoExtension;phone;phoneNumber;preferObject;preferenceObj;reasonEnabled;recordId;spinner=!0;stateObj;stateOptions;statusFlag=!0;zipCode;dataJsonObj={};enableImageDeleteValue=!0;constructor(n,s,a,o,p,X,j,K,f,Y,Ve,je,Je){super(je,f),this.apiEndPointUrl=n,this.clientService=s,this.columnsheaders=a,this.loggerService=o,this.navigationService=p,this.router=X,this.translateService=j,this.uiUtils=K,this.commonservice=f,this.enterprisesService=Y,this.listingVariables=Ve,this.route=je,this.tournamentsService=Je,this.route.params.subscribe(Fe=>{this.recordId=Fe.id})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=d.hf.CLIENT,this.headerAction={BACK:!0},this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.RECORD_HISTORY),this.apiEndPoint=localStorage.getItem(d.BU.S3_URL)?localStorage.getItem(d.BU.S3_URL):this.apiEndPointUrl,this.object_type=this.route.snapshot.data.object_type,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLENT",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE),this.attachmentColumnHeaders=this.columnsheaders.getAttachmentsColumnHeaders(),this.actionType=this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.EDIT)?d.In.EDIT:"",this.getRecordById(),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(n=>{this.dataJsonObj.lookupCodesListJSON=n,this.getCountriesList("")}),this.getContactTypeOptions(),this.getAttachmentsList()}getRecordById(){try{this.clientService.get(this.recordId).subscribe(n=>{this.clientViewData=n,this.clientName=this.clientViewData.client_name,this.label=this.clientViewData.address.address_label,this.addressLine1=this.clientViewData.address.address_line1,this.addressLine2=this.clientViewData.address.address_line2,this.defaultCountryName=this.lookupLanguageTranslations(this.clientViewData.address.country.lookup_id),this.countryObj=this.clientViewData.address.country,this.countryId=this.clientViewData.address.country.lookup_id,this.defaultStateName=this.clientViewData.address.state.state_name,this.defaultStateId=this.clientViewData.address.state.state_id,this.city=this.clientViewData.address.city,this.zipCode=this.clientViewData.address.ZIP,this.email=this.clientViewData.address.email,this.defaultContactType=this.clientViewData.contact_details.contact_type.lookup_id,this.contactTypeObj=this.clientViewData.contact_details.contact_type,this.firstName=this.clientViewData.contact_details.fname,this.lastName=this.clientViewData.contact_details.lname,this.contactEmail=this.clientViewData.contact_details.email,this.contactCountryCodeName=this.clientViewData.contact_details.phone_country_code.lookup_name,this.contactDefaulCountryCode=this.clientViewData.contact_details.phone_country_code.lookup_id,this.contactCountryCodeDisplayName=this.lookupLanguageTranslations(this.clientViewData.contact_details.phone_country_code.lookup_id),this.contactsCountryCodeObj=this.clientViewData.contact_details.phone_country_code,this.phoneNumber=this.clientViewData.contact_details.phone,this.phNoExtension=this.clientViewData.contact_details.phone_extn,this.defaultCountryCode=this.lookupLanguageTranslations(this.clientViewData.address.phone_country_code.lookup_id),this.defaultCountryCodeObj=this.clientViewData.address.phone_country_code,this.mobile=this.clientViewData.address.phone,this.description=this.clientViewData.description,this.createdUser=this.clientViewData.created_by,this.lastUpdatedUser=this.clientViewData.updated_by,this.preferObject=n.preferences,this.clientShortName=this.clientViewData.client_short_name,this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.ACTIVATE)&&this.clientViewData.status.lookup_name===d.A0.ACTIVE?(this.statusFlag=!0,this.reasonEnabled=this.clientViewData.reason_activate?this.lookupLanguageTranslations(this.clientViewData.reason_activate.lookup_id):""):(this.statusFlag=!1,this.defaultReasonDisabled=this.clientViewData.reason_inactivate?this.lookupLanguageTranslations(this.clientViewData.reason_inactivate.lookup_id):""),this.imgFilepath=this.clientViewData.client_icon_file_path&&this.clientViewData.client_icon?this.apiEndPoint+this.clientViewData.client_icon_file_path+"/"+this.clientViewData.client_icon:""},n=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",n)})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",n)}}changeDiscriptionName(n){try{this.description=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeDiscriptionName",s)}}changeClientName(n){try{this.error="",this.clientName=n.value,this.description=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeClientName",s)}}changeClientShortName(n){try{this.error="",this.clientShortName=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeShortClientName",s)}}chnageProfileImage(n){try{""===n.error?(this.imageError="",this.imgFile=n.value):this.imageError=n.error}catch(s){this.loggerService.setLoggerError(this.constructor.name,"chnageProfileImage",s)}}imageRemove(){try{this.imgFile="",this.imageError=""}catch(n){this.loggerService.setLoggerError(this.constructor.name,"imageRemove",n)}}changeLabel(n){try{this.label=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeLabel",s)}}changeAddressLine1(n){try{this.addressLine1=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeAddressLine1",s)}}changeAddressLine2(n){try{this.addressLine2=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeAddressLine2",s)}}getCountriesList(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.COUNTRIES],n).then(s=>{this.countryOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getCountriesList",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getCountriesList",s)}}changeCountry(n){try{n.NAME?(this.defaultCountryId=n.ID,this.countryObj=n,this.defaultCountryId=n.ID,this.defaultCountryName=this.countryObj.NAME,this.countryId=this.defaultCountryId,this.stateObj="",this.defaultStateId="",this.defaultStateName=""):(this.defaultCountryName="",this.defaultCountryId="")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCountry",s)}}getStateOptions(n){try{this.commonservice.getStatesList(this.countryId,n,this.enterpriseId).then(s=>{this.stateOptions=s.rows},s=>{this.loggerService.setLoggerError(this.constructor.name,"getStateOptions",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getStateOptions",s)}}changeState(n){try{n.NAME?(this.defaultStateName=n.NAME,this.defaultStateId=n.ID,this.stateObj=this.stateOptions.find(s=>s.ID===parseInt(this.defaultStateId,10)),this.defaultStateName=this.stateObj.NAME):(this.defaultStateName="",this.defaultStateId="")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeState",s)}}changeCity(n){try{this.city=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCity",s)}}changeZipcode(n){try{this.zipCode=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeZipcode",s)}}changeEmail(n){try{this.email=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeEmail",s)}}getPhoneCountryCode(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.COUNTRY_CODES],n).then(s=>{this.countryCodeOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getPhoneCountryCode",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getPhoneCountryCode",s)}}changeCountryCode(n){try{n.NAME&&(this.defaultCountryCode=n.NAME,this.defaultCountryCodeObj=n)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCountryCode",s)}}changeMobile(n){try{this.mobile=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeMobile",s)}}getContactTypeOptions(){try{this.tournamentsService.getLookups(d.ox.CONTACT_TYPES,this.enterpriseId).then(n=>{this.contactTypeOptions=n},n=>{this.loggerService.setLoggerError(this.constructor.name,"getContactTypeOptions",n)})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"getContactTypeOptions",n)}}changeContactType(n){try{n.value&&(this.defaultContactType=n.value,this.contactTypeObj=this.contactTypeOptions.find(s=>s.ID===parseInt(this.defaultContactType,10)),this.contactTypeName=this.contactTypeObj.NAME)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeContactType",s)}}getContactsCountryCodes(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.COUNTRY_CODES],n).then(s=>{this.countryCodeOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getContactsCountryCodes",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getContactsCountryCodes",s)}}getCountryCode(n){try{n.NAME&&(this.contactCountryCodeName=n.NAME,this.contactsCountryCodeObj=n)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getCountryCode",s)}}changeFirstName(n){try{this.firstName=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeFirstName",s)}}changeLastName(n){try{this.lastName=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeLastName",s)}}changeContactEmail(n){try{this.contactEmail=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeContactEmail",s)}}changePhoneNo(n){try{this.phoneNumber=n.value,10===this.phoneNumber.length&&(this.error="")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changePhoneNo",s)}}changeExternalPhoneNo(n){try{this.phNoExtension=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeFirstName",s)}}getAttachmentsList(){this.clientService.getAttachmentsList(this.object_type,this.recordId,"","","").then(n=>{if(n.rows.length>0)for(let s=0;s<n.rows.length;s++)n.rows[s].user_name=n.rows[s].f_name+", "+n.rows[s].l_name,n.rows[s].last_uploaded_date=this.commonservice.dbTimezoneFormat(n.rows[s].last_uploaded_date),this.attachmentsData=n.rows;else this.attachmentsData=[];this.listingVariables.totalRecords=n.totalCount,this.listingVariables.totalpages=n.pages,this.spinner=!1}).catch(n=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",n)})}changePreferencesObj(n){try{this.preferenceObj=n.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changePreferencesObj",s)}}updateRecord(){try{if(this.clientName&&this.clientName.length<3)this.error=this.translateService.instant("COMMON_PAGE_TITLES.WORK_CLIENT")+" "+this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_MINIMUM_THREE_CHARACTERS");else if(this.clientNamevalid.isValid()&&this.shortNameInput.isValid()&&this.descriptionvalid.isValid()&&I.L.isEmpty(this.error)&&I.L.isEmpty(this.imageError)&&this.addressline1Input.isValid()&&this.countryInput.isValid()&&this.stateInput.isValid()&&this.cityInput.isValid()&&this.zipInput.isValid()&&this.addEmailInput.isValid()&&this.firstnameInput.isValid()&&this.lastnameInput.isValid()&&this.emailInputValid.isValid()&&this.contactsphonecountrycodeDropDown.isValid()&&this.phoneInput.isValid()&&this.phonecountrycodeDropDown.isValid()&&this.mobileInput.isValid()&&this.preferencesComponent.isValidPreferences()){this.disableSubmitBtn=!0;const n=this.preferencesComponent.preferenceObj(),s={enterprise:this.clientViewData.enterprise,client_name:this.clientName,client_short_name:this.clientShortName,preferences:n,description:this.description,address:{address_label:this.label,address_line1:this.addressLine1,address_line2:this.addressLine2,city:this.city,state:{state_id:this.defaultStateId,state_name:this.defaultStateName},ZIP:this.zipCode,country:{lookup_id:this.countryObj.lookup_id,lookup_name:this.countryObj.lookup_name},geo_coordinates:"",email:this.email,phone_country_code:{lookup_id:this.defaultCountryCodeObj.lookup_id,lookup_name:this.defaultCountryCodeObj.lookup_name},phone:this.mobile},contact_details:{fname:this.firstName,lname:this.lastName,contact_type:this.contactTypeObj,email:this.contactEmail,phone_country_code:this.contactsCountryCodeObj,phone:this.phoneNumber,phone_extn:this.phNoExtension},original_client_icon:this.clientViewData.client_icon,client_icon:this.clientViewData.client_icon,client_icon_file_path:this.clientViewData.client_icon_file_path};this.imgFile=this.imgFile?this.commonservice.dataURItoImgBlob(this.imgFile,"image/jpeg"):"",this.clientService.update(s,this.recordId,this.imgFile).then(a=>{this.disableSubmitBtn=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},a=>{this.commonErrorCodes(JSON.parse(a))})}else!(this.clientNamevalid.isValid()&&this.shortNameInput.isValid()&&this.descriptionvalid.isValid())||this.addressline1Input.isValid()&&this.stateInput.isValid()&&this.cityInput.isValid()&&this.zipInput.isValid()&&this.addEmailInput.isValid()&&this.phonecountrycodeDropDown.isValid()&&this.mobileInput.isValid()?this.clientNamevalid.isValid()&&this.shortNameInput.isValid()&&this.descriptionvalid.isValid()&&(!this.firstnameInput.isValid()||!this.lastnameInput.isValid()||!this.emailInputValid.isValid()||!this.contactsphonecountrycodeDropDown.isValid()||!this.phoneInput.isValid())&&(this.error=this.translateService.instant("COMMON_BLOCK_TITLES.CONTACT_DETAILS")+""+this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NOBLANK")):this.error=this.translateService.instant("COMMON_BLOCK_TITLES.ADDRESS_DETAILS")+""+this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NOBLANK")}catch(n){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",n)}}commonErrorCodes(n){409===JSON.parse(n[d.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(n){this.loggerService.setLoggerError(this.constructor.name,"cancel",n)}}pageheadeActionClick(n){"BACK"==n.value&&this.cancel()}deleteImgClick(n){this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.DELETE)&&n.value==d.A0.DELETE&&(this.clientViewData.client_icon_file_path="")}static \u0275fac=function(s){return new(s||_)(e.Y36("apiEndPoint"),e.Y36(A.a),e.Y36(H.Y),e.Y36(b.m),e.Y36(q.f),e.Y36(Z.F0),e.Y36(R.sK),e.Y36(k.s),e.Y36(L.v),e.Y36(E.e),e.Y36(z.v),e.Y36(Z.gz),e.Y36(V.o))};static \u0275cmp=e.Xpm({type:_,selectors:[["app-client-edit"]],viewQuery:function(s,a){if(1&s&&(e.Gf(Ue,5),e.Gf(c,5),e.Gf(C,5),e.Gf(i,5),e.Gf(l,5),e.Gf(r,5),e.Gf(h,5),e.Gf(m,5),e.Gf(S,5),e.Gf(T,5),e.Gf(O,5),e.Gf(y,5),e.Gf(P,5),e.Gf(w,5),e.Gf(F,5),e.Gf(de,5),e.Gf(Te,5),e.Gf(Pe,5),e.Gf(Be,5),e.Gf(He,5)),2&s){let o;e.iGM(o=e.CRH())&&(a.addEmailInput=o.first),e.iGM(o=e.CRH())&&(a.addressline1Input=o.first),e.iGM(o=e.CRH())&&(a.cityInput=o.first),e.iGM(o=e.CRH())&&(a.clientNamevalid=o.first),e.iGM(o=e.CRH())&&(a.contactLinesComponent=o.first),e.iGM(o=e.CRH())&&(a.contactsphonecountrycodeDropDown=o.first),e.iGM(o=e.CRH())&&(a.countryInput=o.first),e.iGM(o=e.CRH())&&(a.countrycodeInput=o.first),e.iGM(o=e.CRH())&&(a.descriptionvalid=o.first),e.iGM(o=e.CRH())&&(a.emailInput=o.first),e.iGM(o=e.CRH())&&(a.emailInputValid=o.first),e.iGM(o=e.CRH())&&(a.firstnameInput=o.first),e.iGM(o=e.CRH())&&(a.lastnameInput=o.first),e.iGM(o=e.CRH())&&(a.mobileInput=o.first),e.iGM(o=e.CRH())&&(a.phoneInput=o.first),e.iGM(o=e.CRH())&&(a.phonecountrycodeDropDown=o.first),e.iGM(o=e.CRH())&&(a.preferencesComponent=o.first),e.iGM(o=e.CRH())&&(a.shortNameInput=o.first),e.iGM(o=e.CRH())&&(a.stateInput=o.first),e.iGM(o=e.CRH())&&(a.zipInput=o.first)}},features:[e._Bn([E.e,L.v,A.a,V.o,H.Y]),e.qOj],decls:141,vars:161,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-lg-11","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-4"],["disabled","true","id","clients-edit-enterprise",3,"label","value"],["autoCaseFlag","false","mandatory","true","disabled","false","id","clients-edit-clientname",3,"label","value","valueChange"],["clientNamevalid",""],["autoCaseFlag","false","mandatory","true","disabled","false","id","clients-edit-clientshortname",3,"label","value","valueChange"],["shortNameInput",""],["mandatory","true","disabled","true","id","clients-edit-clienttype",3,"label","value"],["mandatory","true","disabled","true","id","clients-edit-subtypes",3,"label","value"],["mandatory","true","disabled","true","id","clients-edit-status",3,"label","value"],["statusDropDown",""],["class","col-md-4",4,"ngIf"],["mandatory","false","disabled","true","id","clients-edit-clienttype",3,"label","value"],[1,"col-lg-1","col-md-2","pdl-0","order-md-1"],["type","file","btnHide","true","action","edit",1,"edit-pic",3,"enableImageDelete","defaultImage","imageName","valueChange","imageRemove","deleteClick"],[1,"col-md-10","order-md-1","order-2"],["mandatory","true","disabled","false","id","clients-edit-description",3,"label","defaultvalue","maxlength","valueChange"],["descriptionvalid",""],[1,"col-md-2","text-end","mt-2","btns-group","order-md-1","order-2"],["className","btn btn-primary btn-sm","id","enterprise-create-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","enterprise-create-cancel",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0","order-md-1","order-2"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["disabled","false","id","clients-edit-label",3,"label","value","valueChange"],["id","clients-edit-addressline1","mandatory","true","disabled","false",3,"label","value","valueChange"],["addressline1Input",""],["disabled","false","id","clients-edit-addressline2",3,"label","value","valueChange"],["mandatory","true","id","clients-edit-country",3,"label","options","defaultValue","selectedOption","searchValueChange"],["countryInput",""],["mandatory","true","id","clients-edit-state",3,"label","options","defaultValue","selectedOption","searchValueChange"],["stateInput",""],["mandatory","true","id","clients-edit-city","disabled","false",3,"label","value","valueChange"],["cityInput",""],["mandatory","true","id","clients-edit-zipcode","disabled","false","autoCaseFlag","false",3,"label","value","maxlength","valueChange"],["zipInput",""],["type","email","mandatory","true","id","clients-edit-email","disabled","false",3,"label","value","maxlength","valueChange"],["addEmailInput",""],["mandatory","false","id","clients-edit-countrycode","id","clients-edit-countrycode",3,"label","options","defaultValue","selectedOption","searchValueChange"],["phonecountrycodeDropDown",""],["type","mobile","mandatory","true","disabled","false","id","clients-edit-mobile",3,"label","maxlength","value","valueChange"],["mobileInput",""],["mandatory","true","id","clients-edit-contacttype",3,"label","options","defaultValue","valueChange"],["mandatory","true","id","clients-edit-firstname","disabled","false",3,"label","value","maxlength","valueChange"],["firstnameInput",""],["mandatory","true","id","clients-edit-lastname","disabled","false",3,"label","value","maxlength","valueChange"],["lastnameInput",""],["mandatory","true","id","clients-edit-email","disabled","false","type","email",3,"label","value","maxlength","valueChange"],["emailInputValid",""],["mandatory","true","id","enterprises-create-contactType",3,"label","options","defaultValue","selectedOption","searchValueChange"],["contactsphonecountrycodeDropDown",""],["mandatory","true","disabled","false",3,"label","value","minlength","maxlength","valueChange"],["phoneInput",""],["disabled","false","id","clients-edit-phoneext","mandatory","false",3,"label","value","maxlength","valueChange"],["id","createpreferencesId1",3,"selected"],[3,"defaultValue","valueChange"],["preferencesComponent",""],["id","editattachmentId"],[3,"header","data","totalpages","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["disabled","true","id","clients-edit-reasonactive",3,"label","value"],["disabled","true","id","clients-edit-reasoninactive",3,"label","value"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11)(15,"app-input",13,14),e.NdJ("valueChange",function(p){return a.changeClientName(p)}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",11)(19,"app-input",15,16),e.NdJ("valueChange",function(p){return a.changeClientShortName(p)}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",11),e._UZ(23,"app-input",17),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",11),e._UZ(26,"app-input",18),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",11),e._UZ(29,"app-input",19,20),e.ALo(31,"translate"),e.qZA(),e.YNc(32,Ke,3,4,"div",21),e.YNc(33,Qe,3,4,"div",21),e.TgZ(34,"div",11),e._UZ(35,"app-input",22),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"div",23)(38,"app-imageupload",24),e.NdJ("valueChange",function(p){return a.chnageProfileImage(p)})("imageRemove",function(){return a.imageRemove()})("deleteClick",function(p){return a.deleteImgClick(p)}),e.qZA()(),e.TgZ(39,"div",25)(40,"app-textarea",26,27),e.NdJ("valueChange",function(p){return a.changeDiscriptionName(p)}),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",28)(44,"app-button",29),e.NdJ("buttonOnClick",function(){return a.updateRecord()}),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"app-button",30),e.NdJ("buttonOnClick",function(){return a.cancel()}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",31),e._uU(49),e.ALo(50,"translate"),e.qZA()()()()(),e.TgZ(51,"div",3)(52,"div",32)(53,"div",33)(54,"p-accordion",34)(55,"p-accordionTab",35)(56,"p-header",36)(57,"span"),e._uU(58),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",8)(61,"div",11)(62,"app-input",37),e.NdJ("valueChange",function(p){return a.changeLabel(p)}),e.ALo(63,"translate"),e.qZA()(),e.TgZ(64,"div",11)(65,"app-input",38,39),e.NdJ("valueChange",function(p){return a.changeAddressLine1(p)}),e.ALo(67,"translate"),e.qZA()(),e.TgZ(68,"div",11)(69,"app-input",40),e.NdJ("valueChange",function(p){return a.changeAddressLine2(p)}),e.ALo(70,"translate"),e.qZA()(),e.TgZ(71,"div",11)(72,"app-dropdown-search",41,42),e.NdJ("selectedOption",function(p){return a.changeCountry(p)})("searchValueChange",function(p){return a.getCountriesList(p)}),e.ALo(74,"translate"),e.qZA()(),e.TgZ(75,"div",11)(76,"app-dropdown-search",43,44),e.NdJ("selectedOption",function(p){return a.changeState(p)})("searchValueChange",function(p){return a.getStateOptions(p)}),e.ALo(78,"translate"),e.qZA()(),e.TgZ(79,"div",11)(80,"app-input",45,46),e.NdJ("valueChange",function(p){return a.changeCity(p)}),e.ALo(82,"translate"),e.qZA()(),e.TgZ(83,"div",11)(84,"app-input",47,48),e.NdJ("valueChange",function(p){return a.changeZipcode(p)}),e.ALo(86,"translate"),e.qZA()(),e.TgZ(87,"div",11)(88,"app-input",49,50),e.NdJ("valueChange",function(p){return a.changeEmail(p)}),e.ALo(90,"translate"),e.qZA()(),e.TgZ(91,"div",11)(92,"app-dropdown-search",51,52),e.NdJ("selectedOption",function(p){return a.changeCountryCode(p)})("searchValueChange",function(p){return a.getPhoneCountryCode(p)}),e.ALo(94,"translate"),e.qZA()(),e.TgZ(95,"div",11)(96,"app-inputnumber",53,54),e.NdJ("valueChange",function(p){return a.changeMobile(p)}),e.ALo(98,"translate"),e.qZA()()()(),e.TgZ(99,"p-accordionTab",35)(100,"p-header",36)(101,"span"),e._uU(102),e.ALo(103,"translate"),e.qZA()(),e.TgZ(104,"div",8)(105,"div",11)(106,"app-dropdown-singleselect",55),e.NdJ("valueChange",function(p){return a.changeContactType(p)}),e.ALo(107,"translate"),e.qZA()(),e.TgZ(108,"div",11)(109,"app-input",56,57),e.NdJ("valueChange",function(p){return a.changeFirstName(p)}),e.ALo(111,"translate"),e.qZA()(),e.TgZ(112,"div",11)(113,"app-input",58,59),e.NdJ("valueChange",function(p){return a.changeLastName(p)}),e.ALo(115,"translate"),e.qZA()(),e.TgZ(116,"div",11)(117,"app-input",60,61),e.NdJ("valueChange",function(p){return a.changeContactEmail(p)}),e.ALo(119,"translate"),e.qZA()(),e.TgZ(120,"div",11)(121,"app-dropdown-search",62,63),e.NdJ("selectedOption",function(p){return a.getCountryCode(p)})("searchValueChange",function(p){return a.getPhoneCountryCode(p)}),e.ALo(123,"translate"),e.qZA()(),e.TgZ(124,"div",11)(125,"app-inputnumber",64,65),e.NdJ("valueChange",function(p){return a.changePhoneNo(p)}),e.ALo(127,"translate"),e.qZA()(),e.TgZ(128,"div",11)(129,"app-inputnumber",66),e.NdJ("valueChange",function(p){return a.changeFirstName(p)}),e.ALo(130,"translate"),e.qZA()()()(),e.TgZ(131,"p-accordionTab",67)(132,"p-header",36)(133,"span"),e._uU(134),e.ALo(135,"translate"),e.qZA()(),e.TgZ(136,"app-preferences",68,69),e.NdJ("valueChange",function(p){return a.changePreferencesObj(p)}),e.qZA()(),e.TgZ(138,"p-accordion",70),e._UZ(139,"app-attachment",71),e.qZA(),e._UZ(140,"app-recordhistory",72),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(6),e.s9C("label",e.lcZ(13,99,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.enterprise?null:a.clientViewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(17,101,"COMMON_PAGE_TITLES.WORK_CLIENT")),e.s9C("value",a.clientName),e.xp6(4),e.s9C("label",e.lcZ(21,103,"WORK_CLIENTS.WORK_CLIENT_SHORT_NAME")),e.s9C("value",a.clientShortName),e.xp6(4),e.s9C("label",e.lcZ(24,105,"WORK_CLIENTS.WORK_CLIENT_TYPE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.client_type?null:a.clientViewData.client_type.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(27,107,"WORK_CLIENTS.WORK_CLIENT_SUBTYPE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.client_subtype?null:a.clientViewData.client_subtype.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(31,109,"COMMON_FIELDS.STATUS")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.status?null:a.clientViewData.status.lookup_id)),e.xp6(3),e.Q6J("ngIf",!0===a.statusFlag),e.xp6(1),e.Q6J("ngIf",!1===a.statusFlag),e.xp6(2),e.s9C("label",e.lcZ(36,111,"WORK_CLIENTS.ENTERPRISE_CONTACT")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.enterprise_contact?null:a.clientViewData.enterprise_contact.employee_name),e.xp6(3),e.s9C("defaultImage",a.imgFilepath),e.s9C("imageName",null==a.clientViewData?null:a.clientViewData.client_short_name),e.Q6J("enableImageDelete",a.enableImageDeleteValue),e.xp6(2),e.s9C("label",e.lcZ(42,113,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.description),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(45,115,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(47,117,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(50,119,a.error)," "),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(59,121,"COMMON_BLOCK_TITLES.ADDRESS_DETAILS")),e.xp6(4),e.s9C("label",e.lcZ(63,123,"ENTERPRISES.LABEL")),e.s9C("value",a.label),e.xp6(3),e.s9C("label",e.lcZ(67,125,"COMMON_ADDRESS_BLOCK.ADDRESS_LINE1")),e.s9C("value",a.addressLine1),e.xp6(4),e.s9C("label",e.lcZ(70,127,"COMMON_ADDRESS_BLOCK.ADDRESS_LINE2")),e.s9C("value",a.addressLine2),e.xp6(3),e.s9C("label",e.lcZ(74,129,"COMMON_ADDRESS_BLOCK.COUNTRY")),e.s9C("defaultValue",a.defaultCountryName),e.Q6J("options",a.countryOptions),e.xp6(4),e.s9C("label",e.lcZ(78,131,"COMMON_ADDRESS_BLOCK.STATE")),e.s9C("defaultValue",a.defaultStateName),e.Q6J("options",a.stateOptions),e.xp6(4),e.s9C("label",e.lcZ(82,133,"COMMON_ADDRESS_BLOCK.CITY")),e.s9C("value",a.city),e.xp6(4),e.s9C("label",e.lcZ(86,135,"COMMON_ADDRESS_BLOCK.ZIP_CODE")),e.s9C("value",a.zipCode),e.Q6J("maxlength",6),e.xp6(4),e.s9C("label",e.lcZ(90,137,"COMMON_FIELDS.EMAIL")),e.s9C("value",a.email),e.Q6J("maxlength",60),e.xp6(4),e.s9C("label",e.lcZ(94,139,"COMMON_ADDRESS_BLOCK.COUNTRY_CODE")),e.s9C("defaultValue",a.defaultCountryCode),e.Q6J("options",a.countryCodeOptions),e.xp6(4),e.s9C("label",e.lcZ(98,141,"COMMON_FIELDS.PHONE_NUMBER")),e.s9C("value",a.mobile),e.Q6J("maxlength",10),e.xp6(3),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(103,143,"COMMON_BLOCK_TITLES.CONTACT_DETAILS")),e.xp6(4),e.s9C("label",e.lcZ(107,145,"COMMON_ADDRESS_BLOCK.CONTACT_TYPE")),e.s9C("defaultValue",a.defaultContactType),e.Q6J("options",a.contactTypeOptions),e.xp6(3),e.s9C("label",e.lcZ(111,147,"COMMON_FIELDS.FIRST_NAME")),e.s9C("value",a.firstName),e.Q6J("maxlength",40),e.xp6(4),e.s9C("label",e.lcZ(115,149,"COMMON_FIELDS.LAST_NAME")),e.s9C("value",a.lastName),e.Q6J("maxlength",40),e.xp6(4),e.s9C("label",e.lcZ(119,151,"COMMON_FIELDS.EMAIL")),e.s9C("value",a.contactEmail),e.Q6J("maxlength",60),e.xp6(4),e.s9C("label",e.lcZ(123,153,"COMMON_ADDRESS_BLOCK.COUNTRY_CODE")),e.s9C("defaultValue",a.contactCountryCodeDisplayName),e.Q6J("options",a.countryCodeOptions),e.xp6(4),e.s9C("label",e.lcZ(127,155,"COMMON_FIELDS.PHONE_NUMBER")),e.s9C("value",a.phoneNumber),e.Q6J("minlength",10)("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(130,157,"COMMON_FIELDS.EXTENSION")),e.s9C("value",a.phNoExtension),e.Q6J("maxlength",4),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(135,159,"COMMON_BLOCK_TITLES.PREFERENCES")),e.xp6(2),e.Q6J("defaultValue",a.preferObject),e.xp6(3),e.Q6J("header",a.attachmentColumnHeaders)("data",a.attachmentsData)("totalpages",a.listingVariables.totalpages)("totalRecords",a.listingVariables.totalRecords)("objectType",a.object_type)("objectId",a.recordId)("actionType",a.actionType)("spinner",a.spinner),e.xp6(1),e.Q6J("createdBy",a.createdUser)("lastUpdatedBy",a.lastUpdatedUser)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",null==a.clientViewData?null:a.clientViewData.createdAt)("lastUpdatedDate",null==a.clientViewData?null:a.clientViewData.updatedAt))},dependencies:[x.O5,ee.h4,D.UQ,D.US,te.r,Q.a,ie.k,ne.R,se.K,re.f,pe.C,_e.W,v.Y,M.h,J.q,R.X$]})}return _})();var ke=u(15861),ze=u(71238);const Xe=["activedropdown"];function $e(_,U){if(1&_&&e._UZ(0,"app-pageheader",52),2&_){const n=e.oxw();e.Q6J("pageName",n.dataJsonObj.pageName)("pageTitle",n.dataJsonObj.pageTitle)("selectedMenuId",null==n.dataJsonObj.queryParamsObj?null:n.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==n.dataJsonObj.queryParamsObj?null:n.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0)}}function xe(_,U){if(1&_&&(e.TgZ(0,"div",11),e._UZ(1,"app-input",53),e.ALo(2,"translate"),e.qZA()),2&_){const n=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("value",n.reasonActiveInput)}}function et(_,U){if(1&_){const n=e.EpF();e.TgZ(0,"div",11)(1,"app-dropdown-singleselect",54,55),e.NdJ("valueChange",function(a){e.CHM(n);const o=e.oxw();return e.KtG(o.changeReasonActive(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&_){const n=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("defaultValue",n.reasonActiveDrop),e.Q6J("options",n.reasonActiveOptions)}}function tt(_,U){if(1&_){const n=e.EpF();e.TgZ(0,"div",11)(1,"app-dropdown-singleselect",56,55),e.NdJ("valueChange",function(a){e.CHM(n);const o=e.oxw();return e.KtG(o.changeReasonInactive(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&_){const n=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("defaultValue",n.reasonInactiveDrop),e.Q6J("options",n.reasonInactiveOptions)}}function at(_,U){if(1&_&&(e.TgZ(0,"div",11),e._UZ(1,"app-input",57),e.ALo(2,"translate"),e.qZA()),2&_){const n=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("value",n.reasonInactiveInput)}}function it(_,U){if(1&_){const n=e.EpF();e.TgZ(0,"app-button",62),e.NdJ("buttonOnClick",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.updateRecord())}),e.ALo(1,"translate"),e.qZA()}2&_&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_ACTIVATE"))}function nt(_,U){if(1&_){const n=e.EpF();e.TgZ(0,"app-button",63),e.NdJ("buttonOnClick",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.updateRecord())}),e.ALo(1,"translate"),e.qZA()}2&_&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_INACTIVATE"))}function st(_,U){if(1&_){const n=e.EpF();e.TgZ(0,"app-button",64),e.NdJ("buttonOnClick",function(){e.CHM(n);const a=e.oxw(2);return e.KtG(a.closeButton())}),e.ALo(1,"translate"),e.qZA()}2&_&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_CANCEL"))}function rt(_,U){if(1&_&&(e.TgZ(0,"div",58),e.YNc(1,it,2,3,"app-button",59),e.YNc(2,nt,2,3,"app-button",60),e.YNc(3,st,2,3,"app-button",61),e.qZA()),2&_){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",!1===n.reasonActiveDisable&&!1===n.reasonViewEnable),e.xp6(1),e.Q6J("ngIf",!1===n.reasonInactiveDisable&&!0===n.reasonViewEnable),e.xp6(1),e.Q6J("ngIf",!1===n.reasonActiveDisable||!1===n.reasonInactiveDisable)}}function lt(_,U){if(1&_){const n=e.EpF();e.TgZ(0,"div",58)(1,"app-button",65),e.NdJ("buttonOnClick",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.closeButton())}),e.ALo(2,"translate"),e.qZA()()}2&_&&(e.xp6(1),e.s9C("label",e.lcZ(2,1,"COMMON_BUTTONS.BUTTON_CLOSE")))}function ot(_,U){if(1&_&&(e.TgZ(0,"p-accordionTab",66)(1,"p-header",28)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"app-attribute-values",67,68),e.qZA()),2&_){const n=e.oxw();e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(4,4,"COMMON_PAGE_TITLES.ATTRIBUTES")),e.xp6(2),e.Q6J("viewAttributes",n.viewattributes)("attributes",n.attributes)}}let qe=(()=>{class _ extends g.O{apiEndPointUrl;ColumnHeader;loggerService;navigationService;router;clientService;translateService;uiUtils;_sharedService;commonService;enterprisesService;listingVariables;route;userService;activedropdown;actionType;apiEndPoint;attachmentColumnHeaders;attachmentsData;attributes=[];clientEditObj=new ct;clientName;clientStatusName;clientViewData;createdUser;creationDate;defaultStatus;enterpriseId;error;imgFilepath;lastUpdateDate;lastUpdatedUser;objectType;reasonActivName;reasonActiveDisable=!0;reasonActiveDisplayName;reasonActiveDrop;reasonActiveInput;reasonActiveObj;reasonActiveOptions;reasonInactiveDisable=!0;reasonInactiveDisplayName;reasonInactiveDrop;reasonInactiveInput;reasonInactiveName;reasonInactiveObj;reasonInactiveOptions;reasonViewEnable;recordId;spinner=!0;status;statusDisplayName;statusName;statusObj;statusOptions;statusPageTitle=!1;totalRecords;url;viewAttributes=[];dataJsonObj={};constructor(n,s,a,o,p,X,j,K,f,Y,Ve,je,Je,Fe){super(Je,Y),this.apiEndPointUrl=n,this.ColumnHeader=s,this.loggerService=a,this.navigationService=o,this.router=p,this.clientService=X,this.translateService=j,this.uiUtils=K,this._sharedService=f,this.commonService=Y,this.enterprisesService=Ve,this.listingVariables=je,this.route=Je,this.userService=Fe,this.route.params.subscribe(Ze=>{this.recordId=Ze.id}),this.route.queryParams.subscribe(Ze=>{this.dataJsonObj.queryParamsObj={defaultView:Ze.defaultView,selectedMenuId:Ze.selectedMenuId,selectedSubMenuId:Ze.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=d.hf.CLIENT,this.apiEndPoint=localStorage.getItem(d.BU.S3_URL)?localStorage.getItem(d.BU.S3_URL):this.apiEndPointUrl,this.objectType=this.route.snapshot.data.object_type,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.url=this.router.url.split("/")[4],this.getRecordById(this.recordId),this.enterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE),this.dataJsonObj.langConfJSON={},this.getLanguageJSONData(),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(s=>{this.dataJsonObj.lookupCodesListJSON=s,this.getReasonActiveOptions(this.enterpriseId),this.getReasonInactiveOptions(this.enterpriseId)}),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.RECORD_HISTORY),this.actionType=this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.VIEW)?d.In.VIEW:"",this.attachmentColumnHeaders=this.ColumnHeader.getAttachmentsColumnHeaders(),this.getAttachmentsList(),this.dataJsonObj.selectedPage=d.hf.CLIENT,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(n){var s=this;return(0,ke.Z)(function*(){for(let a of n)s.dataJsonObj[a.storingFieldName]=yield s.commonService.getDynamicJson(s.enterpriseId,a.folderName,a.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(n){try{this.clientService.get(this.recordId).subscribe(s=>{this.clientViewData=s,this.clientName=this.clientViewData.client_short_name,this.commonService.setCurrentPageTitle(this.clientName,this.recordId),this.createdUser=this.clientViewData.created_by,this.lastUpdatedUser=this.clientViewData.updated_by,this.dataJsonObj.defaultLanguage=this.dataJsonObj.langConfJSON[this.clientViewData?.preferences?.default_language?.language_id]?this.dataJsonObj.langConfJSON[this.clientViewData?.preferences?.default_language?.language_id].language_display_name:"",this.imgFilepath=this.clientViewData.client_icon_file_path&&this.clientViewData.client_icon?this.apiEndPoint+this.clientViewData.client_icon_file_path+"/"+this.clientViewData.client_icon:"",this.clientViewData.clientAttributes&&(this.viewAttributes=this.clientViewData.clientAttributes,this.attributesList(this.enterpriseId)),this.status=this.clientViewData.status.lookup_name,this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.ACTIVATE)&&this.status===d.A0.ACTIVE?this.reasonViewEnable=!0:this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.INACTIVATE)&&this.status===d.A0.INACTIVE&&(this.reasonViewEnable=!1),this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.ACTIVATE)&&"status"===this.url&&this.status===d.A0.ACTIVE&&(this.reasonInactiveDisable=!1,this.statusPageTitle=!0,this.reasonViewEnable=!0,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:this.clientViewData.client_short_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.reasonActiveInput=this.clientViewData.reason_activate?this.lookupLanguageTranslations(this.clientViewData.reason_activate.lookup_id):""),this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.INACTIVATE)&&"status"===this.url&&this.status===d.A0.INACTIVE&&(this.reasonActiveDisable=!1,this.statusPageTitle=!0,this.reasonViewEnable=!1,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:this.clientViewData.client_short_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.reasonInactiveInput=this.clientViewData.reason_inactivate?this.lookupLanguageTranslations(this.clientViewData.reason_inactivate.lookup_id):""),this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.ACTIVATE)&&this.status===d.A0.ACTIVE?this.reasonActiveInput=this.clientViewData.reason_activate?this.lookupLanguageTranslations(this.clientViewData.reason_activate.lookup_id):"":this.reasonInactiveInput=this.lookupLanguageTranslations(this.clientViewData.reason_inactivate.lookup_id)},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)}}getReasonActiveOptions(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.REASONS_ENTERPRISE_ACTIVATE],"").then(s=>{this.reasonActiveOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getReasonActiveOptions",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getReasonActiveOptions",s)}}changeReasonActive(n){try{this.reasonActiveDrop=n.value,this.reasonActiveObj=this.reasonActiveOptions.find(s=>s.ID===parseInt(this.reasonActiveDrop,10)),this.reasonActivName=this.reasonActiveObj.NAME,this.reasonActiveDisplayName=this.lookupLanguageTranslations(this.reasonActiveObj.lookup_id),this.clientStatusName="Active",this.getStatusOptions()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeReasonActive",s)}}getReasonInactiveOptions(n){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.REASONS_ENTERPRISE_INACTIVATE],"").then(s=>{this.reasonInactiveOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getReasonInactiveOptions",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getReasonInactiveOptions",s)}}changeReasonInactive(n){try{this.reasonInactiveDrop=n.value,this.reasonInactiveObj=this.reasonInactiveOptions.find(s=>s.ID===parseInt(this.reasonInactiveDrop,10)),this.reasonInactiveName=this.reasonInactiveObj.NAME,this.reasonInactiveDisplayName=this.lookupLanguageTranslations(this.reasonInactiveObj.lookup_id),this.clientStatusName="Inactive",this.getStatusOptions()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeReasonInactive",s)}}getStatusOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.WORK_CLIENT_STATUSES],"").then(n=>{this.statusOptions=n,this.statusObj=this.statusOptions.find(s=>s.NAME===this.clientStatusName),this.statusDisplayName=this.lookupLanguageTranslations(this.statusObj.lookup_id),this.statusName=this.statusObj.NAME},n=>{this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",n)})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",n)}}changeStatus(n){try{this.defaultStatus=n.value,this.statusObj=this.statusOptions.find(s=>s.ID===parseInt(this.defaultStatus,10)),this.statusName=this.statusObj.lookup_name,this.statusDisplayName=this.lookupLanguageTranslations(this.statusObj.lookup_id)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeStatus",s)}}getAttachmentsList(){this.clientService.getAttachmentsList(this.objectType,this.recordId,"","","").then(n=>{if(this._sharedService.emitChangeLoaders(!1),n.rows.length>0)for(let s=0;s<n.rows.length;s++)n.rows[s].user_name=n.rows[s].f_name+", "+n.rows[s].l_name,n.rows[s].last_uploaded_date=this.commonService.dbTimezoneFormat(n.rows[s].last_uploaded_date),this.attachmentsData=n.rows;else this.attachmentsData=[];this.totalRecords=n.totalCount,this.spinner=!1}).catch(n=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",n)})}attributesList(n){try{this.userService.AttributesList(n,d.ox.CLIENTS).then(s=>{this.attributes=s.rows},s=>{this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)}}updateRecord(){try{this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.ACTIVATE)&&!1===this.reasonActiveDisable&&!1===this.reasonViewEnable?this.activedropdown.isValid()&&(this.clientEditObj.reason_activate=this.reasonActiveObj,this.clientEditObj.reason_inactivate=this.reasonInactiveObj,this.clientEditObj.status=this.statusObj,this.clientService.patch(this.clientEditObj,this.recordId).then(n=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE"),this.commonService.redirectToPreviousUrl()},n=>{this.commonErrorCodes(JSON.parse(n))})):this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.INACTIVATE)&&this.activedropdown.isValid()&&(this.clientEditObj.reason_activate=this.reasonActiveObj,this.clientEditObj.reason_inactivate=this.reasonInactiveObj,this.clientEditObj.status=this.statusObj,this.clientService.patch(this.clientEditObj,this.recordId).then(n=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.commonService.redirectToPreviousUrl()},n=>{this.commonErrorCodes(JSON.parse(n))}))}catch(n){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",n)}}getLanguageJSONData(){var n=this;return(0,ke.Z)(function*(){n.dataJsonObj.langConfJSON=yield n.commonService.getLanguagesJsonData(n.enterpriseId)})()}commonErrorCodes(n){const s=JSON.parse(n[d.BU.STATUS]);switch(s){case 500:case 404:default:break;case 409:this.error="COMMON_STATUS_CODES."+s}}closeButton(){try{this.commonService.redirectToPreviousUrl()}catch(n){this.loggerService.setLoggerError(this.constructor.name,"closeButton",n)}}static \u0275fac=function(s){return new(s||_)(e.Y36("apiEndPoint"),e.Y36(H.Y),e.Y36(b.m),e.Y36(q.f),e.Y36(Z.F0),e.Y36(A.a),e.Y36(R.sK),e.Y36(k.s),e.Y36(ze.F),e.Y36(L.v),e.Y36(E.e),e.Y36(z.v),e.Y36(Z.gz),e.Y36(B.K))};static \u0275cmp=e.Xpm({type:_,selectors:[["app-client-view"]],viewQuery:function(s,a){if(1&s&&e.Gf(Xe,5),2&s){let o;e.iGM(o=e.CRH())&&(a.activedropdown=o.first)}},features:[e._Bn([z.v,E.e,A.a,L.v,H.Y,k.s,B.K]),e.qOj],decls:148,vars:172,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],["class","subpage-header-title w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu",4,"ngIf"],[1,"card-body"],[1,"row","form-bs"],[1,"col-lg-11","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-4"],["disabled","true","id","clients-view-enterprisename",3,"label","value"],["disabled","true","id","clients-view-clientname",3,"label","value"],["disabled","true","id","clients-view-clientshortname",3,"label","value"],["disabled","true","id","clients-view-clienttype",3,"label","value"],["disabled","true","id","clients-view-clientsubtype",3,"label","value"],["mandatory","false","disabled","true","id","clients-view-status",3,"label","value"],["class","col-md-4",4,"ngIf"],[1,"col-lg-1","col-md-2","pdl-0","order-md-1"],[1,"thumbnail-view",3,"defaultImage","imageName"],[1,"col-md-10","order-md-1","order-2"],["mandatory","true","disabled","true","id","clients-view-description",3,"label","defaultvalue"],["class","col-md-2 text-end mt-2 order-md-1 order-2",4,"ngIf"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["disabled","true","id","clients-view-label",3,"label","value"],["disabled","true","id","clients-view-addressline1",3,"label","value"],["disabled","true","id","clients-view-addressline2",3,"label","value"],["disabled","true","id","clients-view-country",3,"label","value"],["disabled","true","id","clients-view-state",3,"label","value"],["mandatory","true","disabled","true","id","clients-view-city",3,"label","value"],["mandatory","true","disabled","true","id","clients-view-zipcode",3,"label","value"],["type","email","disabled","true","id","clients-view-email",3,"label","value"],["mandatory","false","disabled","true","id","clients-view-countrycode",3,"label","value"],["type","mobile","mandatory","true","disabled","true","id","clients-view-mobilenumber",3,"label","maxlength","value"],["disabled","true","id","clients-view-contacttype",3,"label","value"],["disabled","true","id","clients-view-firstname",3,"label","value"],["disabled","true","id","clients-view-lastname",3,"label","value"],["disabled","true","id","clients-view-email",3,"label","value"],["disabled","true","id","clients-view-countrycode",3,"label","value"],["disabled","true","id","clients-view-phonenumber",3,"label","value"],["disabled","true","id","clients-view-phonenumberext",3,"label","value"],["id","viewContactPointsId",3,"selected"],["disabled","true",3,"label","value"],["id","createpreferencesId1",3,"selected",4,"ngIf"],["id","viewattachmentId"],[3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["disabled","true","id","client-view-reasonactive",3,"label","value"],["disabled","false","mandatory","true","id","clients-view-reasonactive",3,"label","defaultValue","options","valueChange"],["activedropdown",""],["disabled","false","mandatory","true","id","clients-view-reasoninactive",3,"label","defaultValue","options","valueChange"],["disabled","true","id","clients-view-reasoninactive",3,"label","value"],[1,"col-md-2","text-end","mt-2","order-md-1","order-2"],["id","clients-view-activate","className","btn btn-primary btn-sm","class","mgr-5",3,"label","buttonOnClick",4,"ngIf"],["id","clients-view-inactivate","className","btn btn-primary btn-sm","class","mgr-5",3,"label","buttonOnClick",4,"ngIf"],["id","clients-view-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick",4,"ngIf"],["id","clients-view-activate","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["id","clients-view-inactivate","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["id","clients-view-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","clients-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","createpreferencesId1",3,"selected"],["action","View","disabled","true",3,"viewAttributes","attributes"],["attributesComponent",""]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.YNc(6,$e,1,6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11),e._UZ(15,"app-input",13),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-input",14),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",11),e._UZ(21,"app-input",15),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",11),e._UZ(24,"app-input",16),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",11),e._UZ(27,"app-input",17),e.ALo(28,"translate"),e.qZA(),e.YNc(29,xe,3,4,"div",18),e.YNc(30,et,4,5,"div",18),e.YNc(31,tt,4,5,"div",18),e.YNc(32,at,3,4,"div",18),e.TgZ(33,"div",11),e._UZ(34,"app-input",15),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"div",19)(37,"div"),e._UZ(38,"app-imageupload",20),e.qZA()(),e.TgZ(39,"div",21),e._UZ(40,"app-textarea",22),e.ALo(41,"translate"),e.qZA(),e.YNc(42,rt,4,3,"div",23),e.YNc(43,lt,3,3,"div",23),e.qZA()()()(),e.TgZ(44,"div",3)(45,"div",24)(46,"div",25)(47,"p-accordion",26)(48,"p-accordionTab",27)(49,"p-header",28)(50,"span"),e._uU(51),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",8)(54,"div",11),e._UZ(55,"app-input",29),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"div",11),e._UZ(58,"app-input",30),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"div",11),e._UZ(61,"app-input",31),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"div",11),e._UZ(64,"app-input",32),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"div",11),e._UZ(67,"app-input",33),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"div",11),e._UZ(70,"app-input",34),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"div",11),e._UZ(73,"app-input",35),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"div",11),e._UZ(76,"app-input",36),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"div",11),e._UZ(79,"app-input",37),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"div",11),e._UZ(82,"app-inputnumber",38),e.ALo(83,"translate"),e.qZA()()(),e.TgZ(84,"p-accordionTab",27)(85,"p-header",28)(86,"span"),e._uU(87),e.ALo(88,"translate"),e.qZA()(),e.TgZ(89,"div",8)(90,"div",11),e._UZ(91,"app-input",39),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"div",11),e._UZ(94,"app-input",40),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"div",11),e._UZ(97,"app-input",41),e.ALo(98,"translate"),e.qZA(),e.TgZ(99,"div",11),e._UZ(100,"app-input",42),e.ALo(101,"translate"),e.qZA(),e.TgZ(102,"div",11),e._UZ(103,"app-input",43),e.ALo(104,"translate"),e.qZA(),e.TgZ(105,"div",11),e._UZ(106,"app-inputnumber",44),e.ALo(107,"translate"),e.qZA(),e.TgZ(108,"div",11),e._UZ(109,"app-input",45),e.ALo(110,"translate"),e.qZA()()(),e.TgZ(111,"p-accordionTab",46)(112,"p-header",28)(113,"span"),e._uU(114),e.ALo(115,"translate"),e.qZA()(),e.TgZ(116,"div",8)(117,"div",11),e._UZ(118,"app-input",47),e.ALo(119,"translate"),e.qZA(),e.TgZ(120,"div",11),e._UZ(121,"app-input",47),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"div",11),e._UZ(124,"app-input",47),e.ALo(125,"translate"),e.qZA(),e.TgZ(126,"div",11),e._UZ(127,"app-input",47),e.ALo(128,"translate"),e.qZA(),e.TgZ(129,"div",11),e._UZ(130,"app-input",47),e.ALo(131,"translate"),e.qZA(),e.TgZ(132,"div",11),e._UZ(133,"app-input",47),e.ALo(134,"translate"),e.qZA(),e.TgZ(135,"div",11),e._UZ(136,"app-input",47),e.ALo(137,"translate"),e.qZA(),e.TgZ(138,"div",11),e._UZ(139,"app-input",47),e.ALo(140,"translate"),e.qZA(),e.TgZ(141,"div",11),e._UZ(142,"app-input",47),e.ALo(143,"translate"),e.qZA()()(),e.YNc(144,ot,7,6,"p-accordionTab",48),e.TgZ(145,"p-accordion",49),e._UZ(146,"app-attachment",50),e.qZA(),e._UZ(147,"app-recordhistory",51),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("ngIf",!1===a.statusPageTitle),e.xp6(6),e.s9C("label",e.lcZ(13,98,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.enterprise?null:a.clientViewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(16,100,"COMMON_PAGE_TITLES.WORK_CLIENT")),e.s9C("value",null==a.clientViewData?null:a.clientViewData.client_name),e.xp6(3),e.s9C("label",e.lcZ(19,102,"WORK_CLIENTS.WORK_CLIENT_SHORT_NAME")),e.s9C("value",null==a.clientViewData?null:a.clientViewData.client_short_name),e.xp6(3),e.s9C("label",e.lcZ(22,104,"WORK_CLIENTS.WORK_CLIENT_TYPE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.client_type?null:a.clientViewData.client_type.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(25,106,"WORK_CLIENTS.WORK_CLIENT_SUBTYPE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.client_subtype?null:a.clientViewData.client_subtype.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(28,108,"COMMON_FIELDS.STATUS")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.status?null:a.clientViewData.status.lookup_id)),e.xp6(2),e.Q6J("ngIf",!0===a.reasonViewEnable),e.xp6(1),e.Q6J("ngIf",!1===a.reasonActiveDisable&&!1===a.reasonViewEnable),e.xp6(1),e.Q6J("ngIf",!1===a.reasonInactiveDisable&&!0===a.reasonViewEnable),e.xp6(1),e.Q6J("ngIf",!1===a.reasonViewEnable),e.xp6(2),e.s9C("label",e.lcZ(35,110,"WORK_CLIENTS.ENTERPRISE_CONTACT")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.enterprise_contact?null:a.clientViewData.enterprise_contact.employee_name),e.xp6(4),e.s9C("defaultImage",a.imgFilepath),e.s9C("imageName",null==a.clientViewData?null:a.clientViewData.client_short_name),e.xp6(2),e.s9C("label",e.lcZ(41,112,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",null==a.clientViewData?null:a.clientViewData.description),e.xp6(2),e.Q6J("ngIf",!1===a.reasonActiveDisable||!1===a.reasonInactiveDisable),e.xp6(1),e.Q6J("ngIf",!0===a.reasonActiveDisable&&!0===a.reasonInactiveDisable),e.xp6(4),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(52,114,"COMMON_BLOCK_TITLES.ADDRESS_DETAILS")),e.xp6(4),e.s9C("label",e.lcZ(56,116,"ENTERPRISES.LABEL")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address?null:a.clientViewData.address.address_label),e.xp6(3),e.s9C("label",e.lcZ(59,118,"COMMON_ADDRESS_BLOCK.ADDRESS_LINE1")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address?null:a.clientViewData.address.address_line1),e.xp6(3),e.s9C("label",e.lcZ(62,120,"COMMON_ADDRESS_BLOCK.ADDRESS_LINE2")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address?null:a.clientViewData.address.address_line2),e.xp6(3),e.s9C("label",e.lcZ(65,122,"COMMON_ADDRESS_BLOCK.COUNTRY")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.address||null==a.clientViewData.address.country?null:a.clientViewData.address.country.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(68,124,"COMMON_ADDRESS_BLOCK.STATE")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address||null==a.clientViewData.address.state?null:a.clientViewData.address.state.state_name),e.xp6(3),e.s9C("label",e.lcZ(71,126,"COMMON_ADDRESS_BLOCK.CITY")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address?null:a.clientViewData.address.city),e.xp6(3),e.s9C("label",e.lcZ(74,128,"COMMON_ADDRESS_BLOCK.ZIP_CODE")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address?null:a.clientViewData.address.ZIP),e.xp6(3),e.s9C("label",e.lcZ(77,130,"COMMON_FIELDS.EMAIL")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address?null:a.clientViewData.address.email),e.xp6(3),e.s9C("label",e.lcZ(80,132,"COMMON_ADDRESS_BLOCK.COUNTRY_CODE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.address.phone_country_code?null:a.clientViewData.address.phone_country_code.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(83,134,"COMMON_FIELDS.PHONE_NUMBER")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.address?null:a.clientViewData.address.phone),e.Q6J("maxlength",10),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(88,136,"COMMON_BLOCK_TITLES.CONTACT_DETAILS")),e.xp6(4),e.s9C("label",e.lcZ(92,138,"COMMON_ADDRESS_BLOCK.CONTACT_TYPE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.contact_details||null==a.clientViewData.contact_details.contact_type?null:a.clientViewData.contact_details.contact_type.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(95,140,"COMMON_FIELDS.FIRST_NAME")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.contact_details?null:a.clientViewData.contact_details.fname),e.xp6(3),e.s9C("label",e.lcZ(98,142,"COMMON_FIELDS.LAST_NAME")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.contact_details?null:a.clientViewData.contact_details.lname),e.xp6(3),e.s9C("label",e.lcZ(101,144,"COMMON_FIELDS.EMAIL")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.contact_details?null:a.clientViewData.contact_details.email),e.xp6(3),e.s9C("label",e.lcZ(104,146,"COMMON_ADDRESS_BLOCK.COUNTRY_CODE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.contact_details||null==a.clientViewData.contact_details.phone_country_code?null:a.clientViewData.contact_details.phone_country_code.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(107,148,"COMMON_FIELDS.PHONE_NUMBER")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.contact_details?null:a.clientViewData.contact_details.phone),e.xp6(3),e.s9C("label",e.lcZ(110,150,"COMMON_FIELDS.EXTENSION")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.contact_details?null:a.clientViewData.contact_details.phone_extn),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(115,152,"COMMON_BLOCK_TITLES.PREFERENCES")),e.xp6(4),e.s9C("label",e.lcZ(119,154,"PREFERENCES.TIMEZONE")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.preferences||null==a.clientViewData.preferences.default_timezone?null:a.clientViewData.preferences.default_timezone.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(122,156,"PREFERENCES.THEME")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.preferences||null==a.clientViewData.preferences.default_theme?null:a.clientViewData.preferences.default_theme.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(125,158,"PREFERENCES.FONT_FAMILY")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.preferences||null==a.clientViewData.preferences.default_font?null:a.clientViewData.preferences.default_font.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(128,160,"PREFERENCES.FONT_SIZE")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.preferences?null:a.clientViewData.preferences.default_font_size),e.xp6(3),e.s9C("label",e.lcZ(131,162,"PREFERENCES.LANGUAGE")),e.s9C("value",a.dataJsonObj.defaultLanguage),e.xp6(3),e.s9C("label",e.lcZ(134,164,"COMMON_FIELDS.CURRENCY")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.preferences||null==a.clientViewData.preferences.default_currency?null:a.clientViewData.preferences.default_currency.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(137,166,"PREFERENCES.CURRENCY_FORMAT")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.preferences||null==a.clientViewData.preferences.default_currency_format?null:a.clientViewData.preferences.default_currency_format.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(140,168,"PREFERENCES.DATE_FORMAT")),e.s9C("value",a.lookupLanguageTranslations(null==a.clientViewData||null==a.clientViewData.preferences||null==a.clientViewData.preferences.default_date_format?null:a.clientViewData.preferences.default_date_format.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(143,170,"PREFERENCES.ROWS_PER_PAGE")),e.s9C("value",null==a.clientViewData||null==a.clientViewData.preferences?null:a.clientViewData.preferences.default_rows_per_page),e.xp6(2),e.Q6J("ngIf",a.attributes.length>0),e.xp6(2),e.Q6J("header",a.attachmentColumnHeaders)("data",a.attachmentsData)("totalRecords",a.totalRecords)("objectType",a.objectType)("objectId",a.recordId)("actionType",a.actionType)("spinner",a.spinner),e.xp6(1),e.Q6J("createdBy",a.createdUser)("lastUpdatedBy",a.lastUpdatedUser)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",null==a.clientViewData?null:a.clientViewData.createdAt)("lastUpdatedDate",null==a.clientViewData?null:a.clientViewData.updatedAt))},dependencies:[x.O5,ee.h4,D.UQ,D.US,te.r,Q.a,ie.k,ne.R,se.K,re.f,_e.W,v.Y,N.$,J.q,R.X$]})}return _})();class ct{reason_activate;reason_inactivate;status}var dt=u(28168),ut=u(70057),pt=u(88425);const ht=["datatableComponent"];let mt=(()=>{class _ extends g.O{ColumnHeader;actionSheetController;clientService;loggerService;router;translateService;commonService;listingVariables;route;datatableComponent;actions;clientMobileList;defaultPageName="workClients";enterpriseId;fabMobileactions;forcerefresh;isFilterClicked=!1;listServiceSubscribe;listdata;mobileroutesArray=[];noDuplicates=void 0;show=!0;searchString;status;statusObj;tableColumnheaders;dataJsonObj={};constructor(n,s,a,o,p,X,j,K,f){super(f,j),this.ColumnHeader=n,this.actionSheetController=s,this.clientService=a,this.loggerService=o,this.router=p,this.translateService=X,this.commonService=j,this.listingVariables=K,this.route=f,this.route.queryParams.subscribe(Y=>{this.dataJsonObj.queryParamsObj={defaultView:Y.default_view,selectedMenuId:Y.selectedMenuId,selectedSubMenuId:Y.selectedSubMenuId}})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=d.hf.CLIENT,this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:d.hf,pageSettingEnum:d.AM,pageSettingFieldsEnum:d.In},this.enterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE),this.tableColumnheaders=this.ColumnHeader.getClientsColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.defaultPageName="workClients",this.commonService.currentEvent.subscribe(n=>{"workclients"===n&&(this.forcerefresh=!0)}),this.actions={VIEW:this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.VIEW),EDIT:this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.EDIT),ACTIVATE:this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.ACTIVATE),INACTIVATE:this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.INACTIVATE)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:d.gL.URL,redirectURL:"/workclients/clients/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.FILTERS)}ngOnDestroy(){this.listServiceSubscribe&&(this.listServiceSubscribe.unsubscribe(),this.listServiceSubscribe=void 0)}getAllRecords(){try{const n=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.status=this.statusObj,this.listServiceSubscribe&&(this.listServiceSubscribe.unsubscribe(),this.listServiceSubscribe=void 0),this.listServiceSubscribe=this.clientService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,this.status,this.isFilterClicked,this.forcerefresh,n,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(a=>{if(this.forcerefresh||(this.listServiceSubscribe.unsubscribe(),this.listServiceSubscribe=void 0),this.forcerefresh&&(this.clientMobileList=[]),a.rows.length>0){this.clientMobileList&&this.clientMobileList.length>0||(this.clientMobileList=[]);for(let o=0;o<a.rows.length;o++){a.rows[o].shortName=a.rows[o].client_short_name;const p={url:`clients/${a.rows[o]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},X=p.queryParams&&Object.keys(p.queryParams).length>0?`${p.url}?${JSON.stringify(p.queryParams)}`:p.url;if(a.rows[o].client_short_name=`<a class="enable" id="client_short_name${a.rows[o]._id}" href=${X}>${a.rows[o].client_short_name}`,a.rows[o].enterprise.short_name='<a class="enable" id="enterprise.short_name'+a.rows[o]._id+'" href="enterprises/enterprises/'+a.rows[o].enterprise.enterprise_id+'/view" >'+a.rows[o].enterprise.short_name,a.rows[o].address)for(let f=0;f<a.rows[o].address.length;f++)!0===a.rows[o].address[f].primary&&(a.rows[o].address.country=this.lookupLanguageTranslations(a.rows[o].address[f].country.lookup_id),a.rows[o].address.state=a.rows[o].address[f].state.state_name,a.rows[o].address.city=a.rows[o].address[f].city);const j={url:`/workclients/clients/${a.rows[o]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},K=j.queryParams&&Object.keys(j.queryParams).length>0?`${j.url}?${JSON.stringify(j.queryParams)}`:j.url;a.rows[o].client_name=`<a class="enable" id="client_name${a.rows[o]._id}" href=${K}>${a.rows[o].client_name}`,a.rows[o].imageName=a.rows[o].shortName,a.rows[o].imageDisplay=a.rows[o].client_icon_file_path&&a.rows[o].client_icon?a.rows[o].client_icon_file_path+"/"+a.rows[o].client_icon:null,a.rows[o].isEnabledText=this.lookupLanguageTranslations(a.rows[o].status.lookup_id),this.clientMobileList=this.clientMobileList.filter(f=>f._id!==a.rows[o]._id),this.clientMobileList.push(a.rows[o])}a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.listdata=this.listdata.concat(a.rows)):this.listdata=a.rows}else this.listdata=[],this.clientMobileList=[]},a=>{this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",n)}}getSearchResult(n){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=n,this.getAllRecords(),this.datatableComponent.reset()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",s)}}searchClose(){try{this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}catch(n){this.loggerService.setLoggerError(this.constructor.name,"searchClose",n)}}loadPageData(n){this.listingVariables.pageNumbers=n.listingVariables.pageNumbers,n.clearMobileData&&(this.clientMobileList=this.noDuplicates),n.isPaginationChange&&(this.dataJsonObj.selectedFilter=n.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=n.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=n.selectedAdvancedSearchObj),this.getAllRecords()}createClient(){try{this.router.navigate(["/workclients/clients/create"])}catch(n){this.loggerService.setLoggerError(this.constructor.name,"createClient",n)}}onActionClicked(n){try{n.action===d.A0.EDIT?(this.router.navigate(["/workclients/clients/"+n.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("clients")):n.action===d.A0.VIEW?this.commonService.redirectToUrl(["..",n._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):(n.action===d.A0.ACTIVATE||n.action===d.A0.INACTIVATE)&&(this.router.navigate(["/workclients/clients/"+n.data._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("clients"))}catch(s){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",s)}}mobileEventAction(n){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.ACTIVATE)&&n.status.lookup_name===d.oP.INACTIVE&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{this.router.navigate(["/workclients/clients/"+n._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("clients")}}),this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["/workclients/clients/"+n._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("clients")}}),this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.INACTIVATE)&&n.status.lookup_name===d.oP.ACTIVE&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{this.router.navigate(["/workclients/clients/"+n._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("clients")}}),this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.VIEW)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",n._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.presentActionSheet(n)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"presentActionSheet",s)}}presentActionSheet(n){var s=this;return(0,ke.Z)(function*(){try{yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileroutesArray})).present()}catch(a){s.loggerService.setLoggerError(s.constructor.name,"mobileEventAction",a)}})()}onItemClicked(n){try{this.roleRightsValidationByPage(d.hf.CLIENT,d.AM.ACTIONS,d.In.VIEW)&&this.commonService.redirectToUrl(["..",n._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"onItemClicked",s)}}getchangeEvent(n){n&&"success"===n.value&&(this.forcerefresh=!0,this.getAllRecords())}statsData(n){this.isFilterClicked=!0,this.statusObj=n.value,this.forcerefresh=!0,this.datatableComponent.reset(),this.clientMobileList=[],this.getAllRecords()}selectedViewType(n){this.dataJsonObj.selectedDisplayView=n}selectedFilterType(n){n?this.dataJsonObj.selectedFilter=n:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(n){}advancedSearchFilterClicked(n){this.dataJsonObj.selectedAdvancedSearchObj=n}onHeaderItemClick(n){switch(n.type){case"search":this.getSearchResult(n.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(n.event);break;case"filters":this.selectedFilterType(n.event);break;case"advanced_search":this.advancedSearchFilterClicked(n.event);break;case"page_actions":this.onPageLevelActionClicked(n.event)}}static \u0275fac=function(s){return new(s||_)(e.Y36(H.Y),e.Y36(ut.BX),e.Y36(A.a),e.Y36(b.m),e.Y36(Z.F0),e.Y36(R.sK),e.Y36(L.v),e.Y36(z.v),e.Y36(Z.gz))};static \u0275cmp=e.Xpm({type:_,selectors:[["app-clients-list"]],viewQuery:function(s,a){if(1&s&&e.Gf(ht,5),2&s){let o;e.iGM(o=e.CRH())&&(a.datatableComponent=o.first)}},features:[e._Bn([H.Y,z.v,A.a]),e.qOj],decls:9,vars:28,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",3,"header","actions","totalRecords","data","mobileListData","paginator","expand","statsShow","showRights","statsSearch","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(p){return a.onHeaderItemClick(p)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(p){return a.onActionClicked(p)})("itemClickEvent",function(p){return a.onItemClicked(p)})("redirectionEvent",function(p){return a.mobileEventAction(p)})("changeStats",function(p){return a.statsData(p)})("loadPageData",function(p){return a.loadPageData(p)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(p){return a.onPageLevelActionClicked(p)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.tableColumnheaders)("actions",a.actions)("totalRecords",a.listingVariables.totalRecords)("data",a.listdata)("mobileListData",a.clientMobileList)("paginator",!0)("expand",!1)("statsShow",a.show)("showRights",a.roleRightsValidationByPage(a.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.CLIENT,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",a.searchString)("listingVariables",a.listingVariables)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[dt.n,J.q,pt.y]})}return _})();var gt=u(35877),Ct=u(32957);const bt=[{path:"",data:{title:"clients"},children:[{path:"",redirectTo:"workclients/list",pathMatch:"full"},{path:"workclients/list",component:mt,canActivate:[t.P],data:{object_type:d.hf.CLIENT,responsibilityParam:d.bP.MENUS+"."+d.w1.CLIENTS+"."+d.bP.SUBMENUS+"."+d.w1.CLIENTS+"."+d.Iu.ENABLED,pageName:d.hf.CLIENT}},{path:"clients/create",component:ce,canActivate:[t.P],data:{object_type:d.hf.CLIENT,responsibilityParam:d.bP.MENUS+"."+d.w1.CLIENTS+"."+d.bP.SUBMENUS+"."+d.w1.CLIENTS+"."+d.In.CREATE,pageName:d.hf.CLIENT,pageSetting:d.AM.ACTIONS,settingField:d.In.CREATE}},{path:"clients/:id/edit",component:We,canActivate:[t.P],data:{object_type:d.hf.CLIENT,responsibilityParam:d.bP.MENUS+"."+d.w1.CLIENTS+"."+d.bP.SUBMENUS+"."+d.w1.CLIENTS+"."+d.In.EDIT,pageName:d.hf.CLIENT,pageSetting:d.AM.ACTIONS,settingField:d.In.EDIT}},{path:"clients/:id/view",component:qe,canActivate:[t.P],data:{object_type:d.hf.CLIENT,responsibilityParam:d.bP.MENUS+"."+d.w1.CLIENTS+"."+d.bP.SUBMENUS+"."+d.w1.CLIENTS+"."+d.In.VIEW,pageName:d.hf.CLIENT,pageSetting:d.AM.ACTIONS,settingField:d.In.VIEW}},{path:"clients/:id/status",canActivate:[t.P],component:qe,data:{object_type:d.hf.CLIENT,responsibilityParam:d.bP.MENUS+"."+d.w1.CLIENTS+"."+d.bP.SUBMENUS+"."+d.w1.CLIENTS+"."+d.In.VIEW,pageName:d.hf.CLIENT,pageSetting:d.AM.ACTIONS,settingField:d.In.VIEW}},{path:":parentId/workclientbillsandpayments",loadChildren:()=>Promise.resolve().then(u.bind(u,36507)).then(_=>_.ClientBillsandpaymentsModule)},{path:":parentId/workclientcontracts",loadChildren:()=>Promise.resolve().then(u.bind(u,93677)).then(_=>_.ClientContractsModule)},{path:":parentId/activities",loadChildren:()=>Promise.resolve().then(u.bind(u,75896)).then(_=>_.ActivitiesModule)},{path:":parentId/workprojects",loadChildren:()=>Promise.resolve().then(u.bind(u,46502)).then(_=>_.WorkProjectsModule)},{path:":parentId/worktasks",loadChildren:()=>Promise.resolve().then(u.bind(u,36923)).then(_=>_.WorkTasksModule)},{path:":parentId/worktasks/create",component:gt.u,data:{object_type:d.hf.CLIENTS,title:"Client Work Task Create",responsibilityParam:d.bP.MENUS+"."+d.w1.CLIENTS+"."+d.bP.SUBMENUS+"."+d.w1.CLIENT_WORK_TASKS+"."+d.In.CREATE}},{path:":parentId/worktasks/edit",component:Ct.S,data:{object_type:d.hf.CLIENTS,title:"Client Work Task Edit",responsibilityParam:d.bP.MENUS+"."+d.w1.CLIENTS+"."+d.bP.SUBMENUS+"."+d.w1.CLIENT_WORK_TASKS+"."+d.In.EDIT}},{path:":parentId/worktickets",loadChildren:()=>Promise.resolve().then(u.bind(u,29892)).then(_=>_.WorkTicketsModule)},{path:":parentId/workeffortlogs",loadChildren:()=>Promise.resolve().then(u.bind(u,48465)).then(_=>_.EffortLogsModule)}]}];let _t=(()=>{class _{static \u0275fac=function(s){return new(s||_)};static \u0275mod=e.oAB({type:_});static \u0275inj=e.cJS({imports:[Z.Bz.forChild(bt),Z.Bz]})}return _})();var Ge=u(24006),Tt=u(10841),vt=u(46502),St=u(36923),Ot=u(29892),yt=u(32137),At=u(93144),Nt=u(65673);let Et=(()=>{class _{static \u0275fac=function(s){return new(s||_)};static \u0275mod=e.oAB({type:_});static \u0275inj=e.cJS({imports:[_t,x.ez,R.aw,Ge.u5,Ge.UX,At.U$,D.fx,Nt.Q,yt.D,Tt.ii,ae.ClientContractsModule,ve.ClientBillsandpaymentsModule,vt.WorkProjectsModule,Ot.WorkTicketsModule,St.WorkTasksModule]})}return _})()},36507:(Ye,$,u)=>{u.r($),u.d($,{ClientBillsandpaymentsModule:()=>_e});var D=u(32174),ve=u(75875),ae=u(90313),t=u(94650);let ue=(()=>{class v{authService;constructor(c){this.authService=c}getAll(c,C,i,l,r,h,m,S,T,O,y,P){const w=y||"",F=h?"&condition="+h:"",de=ae.L.isEmpty(P)?"":"&advSearchString="+JSON.stringify(P);return ae.L.isEmpty(F)?this.authService.getApiCall("api/v1/clientbillsandpayments?skip="+C+"&limit="+i+"&sort="+l+"&type=list&search="+c+"&enterprise.enterprise_id="+r+"&client_id="+O+T+de+w):this.authService.getApiCall("api/v1/clientbillsandpayments?skip="+C+"&limit="+i+"&sort="+l+"&type=list&search="+c+"&enterprise.enterprise_id="+r+"&client_id="+O+F+(m?"&invoice_payment_status.lookup_name="+m:"")+T+de+w)}get(c){return this.authService.getApiCall("api/v1/clientbillsandpayments/"+c)}getBillsAndPaymentsEditData(c,C){return new Promise((i,l)=>{this.authService.putApiCall("api/v1/clientbillsandpayments/"+c,C).subscribe(r=>{i(r)},r=>{l(r)})})}deleteBillsAndPaymentsViewData(c){return new Promise((C,i)=>{this.authService.deleteApiCall("api/v1/clientbillsandpayments/"+c).subscribe(l=>{C(l)},l=>{i(l)})})}static \u0275fac=function(C){return new(C||v)(t.LFG(ve.e))};static \u0275prov=t.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var N=u(42863),A=u(71568),L=u(47561),g=u(38077),E=u(42786),b=u(32236),M=u(71238),d=u(46448),I=u(62510),V=u(54463),B=u(30578),e=u(27601),q=u(10805),Z=u(2387),R=u(56368),k=u(9851),x=u(92634),ee=u(11735),te=u(68896),Q=u(37415);const ie=["TxnAmountInput"],ne=["bankTxId"],se=["currencyDropdown"],re=["gateWay"],pe=["midInput"],J=["orderIdInput"],G=["paymentmodeDropdown"],le=["respCode"],W=["respMsg"],he=["txnDate"],me=["txnInput"];let Se=(()=>{class v extends L.O{_sharedService;columnsheaders;loggerService;navigationService;router;translateService;billsandpaymentsservice;commonService;listingVariables;route;uiUtils;TxnAmountInput;bankTxId;currencyDropdown;gateWay;midInput;orderIdInput;paymentmodeDropdown;respCode;respMsg;txnDate;txnInput;actionType;amountDue;attachmentColumnHeaders;attachmentsData;bankTrxId;billsAndPaymentsViewData;createdBy;creationDate;currency;currencyObj;currencyOptions;endDate;enterpriseId;enterpriseName;enterpriseObj;gatewayName;invoiceDate;invoiceNumber;invoiceStatus;lastUpdatedDate;midId;objectType;orderId;paidDate;paymentMode;paymentModeObj;paymentOptions;periodType;periodTypeObj;recordData;recordId;rescode;resmsg;spinner=!0;startDate;status;statusObj;trxAmount;txn;txnAmount;updatedBy;dataJsonObj={};constructor(c,C,i,l,r,h,m,S,T,O,y){super(O,S),this._sharedService=c,this.columnsheaders=C,this.loggerService=i,this.navigationService=l,this.router=r,this.translateService=h,this.billsandpaymentsservice=m,this.commonService=S,this.listingVariables=T,this.route=O,this.uiUtils=y,this.route.params.subscribe(P=>{this.recordId=P.id,this.recordData=this.recordId.split("$")})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=b.hf.CLIENT_BILLS_AND_PAYMENTS,this.objectType=this.route.snapshot.data.object_type,this.commonService.trackView(b.sn.CLIENT_BILLSANDPAYMENTS_EDIT),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(b.hf.CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.RECORD_HISTORY),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.getRecordById(),this.actionType=b.In.EDIT,this.attachmentColumnHeaders=this.columnsheaders.getAttachmentsColumnHeaders(),this.getAttachmentsList()}getRecordById(){try{this.billsandpaymentsservice.get(this.recordData).subscribe(c=>{this.billsAndPaymentsViewData=c,this.orderId=this.billsAndPaymentsViewData.order_id,this.midId=this.billsAndPaymentsViewData.mid,this.txn=this.billsAndPaymentsViewData.trx_id,this.txnAmount=this.billsAndPaymentsViewData.txn_amount,this.billsAndPaymentsViewData.payment_mode&&(this.paymentMode=this.billsAndPaymentsViewData.payment_mode.lookup_id),this.billsAndPaymentsViewData.invoice_currency_code&&(this.currency=this.billsAndPaymentsViewData.invoice_currency_code.lookup_id),this.trxAmount=this.billsAndPaymentsViewData.txn_amount,this.rescode=this.billsAndPaymentsViewData.respcode,this.resmsg=this.billsAndPaymentsViewData.respmsg,this.gatewayName=this.billsAndPaymentsViewData.gatewayname,this.bankTrxId=this.billsAndPaymentsViewData.banktrx_id,this.enterpriseName=this.billsAndPaymentsViewData.enterprise.short_name,this.enterpriseId=this.billsAndPaymentsViewData.enterprise.enterprise_id,this.enterpriseObj=this.billsAndPaymentsViewData.enterprise,this.invoiceNumber=this.billsAndPaymentsViewData.invoice_number,this.billsAndPaymentsViewData.invoice_period_type&&(this.periodType=this.lookupLanguageTranslations(this.billsAndPaymentsViewData.invoice_period_type.lookup_id)),this.periodTypeObj=this.billsAndPaymentsViewData.invoice_period_type,this.amountDue=this.billsAndPaymentsViewData.amount_due,this.status=this.lookupLanguageTranslations(this.billsAndPaymentsViewData.invoice_payment_status.lookup_id),this.statusObj=this.billsAndPaymentsViewData.invoice_payment_status,this.startDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_start_date),this.endDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_end_date),this.invoiceDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_date),this.paidDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.txn_date),this.createdBy=this.billsAndPaymentsViewData.created_by,this.updatedBy=this.billsAndPaymentsViewData.updated_by,this.invoiceStatus=this.lookupLanguageTranslations(this.billsAndPaymentsViewData.invoice_payment_status.lookup_id),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(C=>{this.dataJsonObj.lookupCodesListJSON=C,this.getCurrency(),this.getPaymentModes()})},c=>{this.loggerService.setLoggerError(this.constructor.name,"get",c)})}catch(c){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",c)}}cancelBtn(){this.commonService.redirectToPreviousUrl()}changeOrderNumber(c){this.orderId=c.value}changeTxn(c){this.txn=c.value}changeMid(c){this.midId=c.value}changeTxnAmount(c){this.txnAmount=c.value}changePaymentMode(c){this.paymentMode=c.value}changeCurrency(c){this.currency=c.value}getPaymentModes(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[b.ox.BILLING_CYCLES],"").then(c=>{this.paymentOptions=c}).catch(c=>{this.loggerService.setLoggerError(this.constructor.name,"getPaymentModes",c)})}changePaymentModeOptions(c){c.value&&(this.paymentMode=c.value,this.paymentModeObj=this.paymentOptions.find(C=>C.ID===parseInt(this.paymentMode,10)))}getCurrency(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[b.ox.CURRENCIES],"").then(c=>{this.currencyOptions=c,this.currencyObj=c[0]}).catch(c=>{this.loggerService.setLoggerError(this.constructor.name,"getCurrency",c)})}changeCurrencyOptions(c){c.value&&(this.currency=c.value,this.currencyObj=this.currencyOptions.find(C=>C.ID===parseInt(this.currency,10)))}changeTrxAmount(c){this.trxAmount=c.value}changeRescode(c){this.rescode=c.value}changeResmsg(c){this.resmsg=c.value}changeGatewayName(c){this.gatewayName=c.value}changeBankTrxId(c){this.bankTrxId=c.value}getTrxDate(c){this.paidDate=c.value}updateRecord(){try{this.orderIdInput.isValid()&&this.midInput.isValid()&&this.txnInput.isValid()&&this.TxnAmountInput.isValid()&&this.paymentmodeDropdown.isValid()&&this.currencyDropdown.isValid()&&this.txnDate.isValid()&&this.respCode.isValid()&&this.respMsg.isValid()&&this.gateWay.isValid()&&this.bankTxId.isValid()&&this.billsandpaymentsservice.getBillsAndPaymentsEditData(this.recordData,{enterprise:this.enterpriseObj,invoice_period_type:this.periodTypeObj,invoice_currency_code:this.currencyObj,invoice_payment_status:this.statusObj,invoice_number:this.invoiceNumber,invoice_period_start_date:this.startDate,invoice_period_end_date:this.endDate,invoice_date:this.invoiceDate,respcode:this.rescode,respmsg:this.resmsg,amount_due:this.amountDue,order_id:this.orderId,mid:this.midId,trx_id:this.txn,txn_amount:this.txnAmount,payment_mode:this.paymentModeObj,txn_date:this.paidDate,banktrx_id:this.bankTrxId,gatewayname:this.gatewayName}).then(C=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()}).catch(C=>{this.loggerService.setLoggerError(this.constructor.name,"update",C)})}catch(c){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",c)}}getAttachmentsList(){try{this.commonService.getAttachmentsList(this.objectType,this.recordId,"","","").then(c=>{if(this._sharedService.emitChangeLoaders(!1),c.rows.length>0)for(let C=0;C<c.rows.length;C++)c.rows[C].user_name=c.rows[C].f_name+", "+c.rows[C].l_name,c.rows[C].last_uploaded_date=this.commonService.dbTimezoneFormat(c.rows[C].last_uploaded_date),this.attachmentsData=c.rows;else this.attachmentsData=[];this.listingVariables.totalRecords=c.totalCount,this.listingVariables.totalpages=c.pages,this.spinner=!1}).catch(c=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",c)})}catch(c){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",c)}}static \u0275fac=function(C){return new(C||v)(t.Y36(M.F),t.Y36(N.Y),t.Y36(E.m),t.Y36(d.f),t.Y36(I.F0),t.Y36(V.sK),t.Y36(ue),t.Y36(A.v),t.Y36(B.v),t.Y36(I.gz),t.Y36(e.s))};static \u0275cmp=t.Xpm({type:v,selectors:[["app-clientbillsandpayments-edit"]],viewQuery:function(C,i){if(1&C&&(t.Gf(ie,5),t.Gf(ne,5),t.Gf(se,5),t.Gf(re,5),t.Gf(pe,5),t.Gf(J,5),t.Gf(G,5),t.Gf(le,5),t.Gf(W,5),t.Gf(he,5),t.Gf(me,5)),2&C){let l;t.iGM(l=t.CRH())&&(i.TxnAmountInput=l.first),t.iGM(l=t.CRH())&&(i.bankTxId=l.first),t.iGM(l=t.CRH())&&(i.currencyDropdown=l.first),t.iGM(l=t.CRH())&&(i.gateWay=l.first),t.iGM(l=t.CRH())&&(i.midInput=l.first),t.iGM(l=t.CRH())&&(i.orderIdInput=l.first),t.iGM(l=t.CRH())&&(i.paymentmodeDropdown=l.first),t.iGM(l=t.CRH())&&(i.respCode=l.first),t.iGM(l=t.CRH())&&(i.respMsg=l.first),t.iGM(l=t.CRH())&&(i.txnDate=l.first),t.iGM(l=t.CRH())&&(i.txnInput=l.first)}},features:[t._Bn([N.Y]),t.qOj],decls:98,vars:111,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","clientbillsandpayments-edit-enterprisename",3,"label","value"],["disabled","true","id","clientbillsandpayments-edit-invoicenumber",3,"label","value"],["disabled","true","id","clientbillsandpayments-edit-invoicedate",3,"label","value"],["disabled","true","id","clientbillsandpayments-edit-periodtype",3,"label","value"],["disabled","true","id","clientbillsandpayments-edit-startdate",3,"label","value"],["disabled","true","id","clientbillsandpayments-edit-enddate",3,"label","value"],["disabled","true","id","clientbillsandpayments-edit-amountdue",3,"label","value"],["disabled","true","id","clientbillsandpayments-edit-paymentstatus",3,"label","value"],[1,"col-md-4","text-end","mt-2"],["id","clientbillsandpayments-edit-submit","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["id","clientbillsandpayments-edit-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["id","clientbillsandpayments-edit-orderid","disabled","false","mandatory","true",3,"label","value","valueChange"],["orderIdInput",""],["disabled","false","mandatory","true","id","clientbillsandpayments-edit-mid",3,"label","value","valueChange"],["midInput",""],["disabled","false","mandatory","true","id","clientbillsandpayments-edit-txnid",3,"label","value","valueChange"],["txnInput",""],["id","clientbillsandpayments-edit-txnamount","disabled","false","mandatory","true",3,"label","value","valueChange"],["TxnAmountInput",""],["mandatory","true","id","clientbillsandpayments-edit-paymentmode",3,"label","options","defaultValue","valueChange"],["paymentmodeDropdown",""],["mandatory","true","id","clientbillsandpayments-edit-currency",3,"label","options","defaultValue","valueChange"],["currencyDropdown",""],["id","clientbillsandpayments-edit-txndate","mandatory","true","dateformat","dd-MMM-yyyy","disabled","false",3,"placeholder","defaultDate","dateChangeValue"],["txnDate",""],["id","clientbillsandpayments-edit-respcode","disabled","false","mandatory","true",3,"label","value","maxlength","valueChange"],["respCode",""],["id","clientbillsandpayments-edit-respmsg","disabled","false","mandatory","true",3,"label","value","valueChange"],["respMsg",""],["disabled","false","mandatory","true","id","clientbillsandpayments-edit-gateway",3,"label","value","valueChange"],["gateWay",""],["disabled","false","mandatory","true","id","clientbillsandpayments-edit-banktxnid",3,"label","value","valueChange"],["bankTxId",""],["disabled","true","id","clientbillsandpayments-edit-status",3,"label","value"],["id","viewattachmentId"],[3,"header","data","totalpages","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(C,i){1&C&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"app-pageheader",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9),t._UZ(10,"app-input",10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-input",11),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",9),t._UZ(16,"app-input",12),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",9),t._UZ(19,"app-input",13),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",9),t._UZ(22,"app-input",14),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",9),t._UZ(25,"app-input",15),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",9),t._UZ(28,"app-input",16),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",9),t._UZ(31,"app-input",17),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",18)(34,"app-button",19),t.NdJ("buttonOnClick",function(){return i.updateRecord()}),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"app-button",20),t.NdJ("buttonOnClick",function(){return i.cancelBtn()}),t.ALo(37,"translate"),t.qZA()()()()()(),t.TgZ(38,"div",3)(39,"div",21)(40,"div",22)(41,"p-accordion",23)(42,"p-accordionTab",24)(43,"p-header",25)(44,"span"),t._uU(45),t.ALo(46,"translate"),t.qZA()(),t.TgZ(47,"div",8)(48,"div",9)(49,"app-inputnumber",26,27),t.NdJ("valueChange",function(r){return i.changeOrderNumber(r)}),t.ALo(51,"translate"),t.qZA()(),t.TgZ(52,"div",9)(53,"app-input",28,29),t.NdJ("valueChange",function(r){return i.changeMid(r)}),t.ALo(55,"translate"),t.qZA()(),t.TgZ(56,"div",9)(57,"app-input",30,31),t.NdJ("valueChange",function(r){return i.changeTxn(r)}),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",9)(61,"app-inputnumber",32,33),t.NdJ("valueChange",function(r){return i.changeTxnAmount(r)}),t.ALo(63,"translate"),t.qZA()(),t.TgZ(64,"div",9)(65,"app-dropdown-singleselect",34,35),t.NdJ("valueChange",function(r){return i.changePaymentModeOptions(r)}),t.ALo(67,"translate"),t.qZA()(),t.TgZ(68,"div",9)(69,"app-dropdown-singleselect",36,37),t.NdJ("valueChange",function(r){return i.changeCurrencyOptions(r)}),t.ALo(71,"translate"),t.qZA()(),t.TgZ(72,"div",9)(73,"app-datepicker",38,39),t.NdJ("dateChangeValue",function(r){return i.getTrxDate(r)}),t.ALo(75,"translate"),t.qZA()(),t.TgZ(76,"div",9)(77,"app-inputnumber",40,41),t.NdJ("valueChange",function(r){return i.changeRescode(r)}),t.ALo(79,"translate"),t.qZA()(),t.TgZ(80,"div",9)(81,"app-input",42,43),t.NdJ("valueChange",function(r){return i.changeResmsg(r)}),t.ALo(83,"translate"),t.qZA()(),t.TgZ(84,"div",9)(85,"app-input",44,45),t.NdJ("valueChange",function(r){return i.changeGatewayName(r)}),t.ALo(87,"translate"),t.qZA()(),t.TgZ(88,"div",9)(89,"app-input",46,47),t.NdJ("valueChange",function(r){return i.changeBankTrxId(r)}),t.ALo(91,"translate"),t.qZA()(),t.TgZ(92,"div",9),t._UZ(93,"app-input",48),t.ALo(94,"translate"),t.qZA()()(),t.TgZ(95,"p-accordion",49),t._UZ(96,"app-attachment",50),t.qZA(),t._UZ(97,"app-recordhistory",51),t.qZA()()()()()()()),2&C&&(t.xp6(6),t.Q6J("pageName",i.dataJsonObj.pageName)("pageTitle",i.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),t.xp6(4),t.s9C("label",t.lcZ(11,65,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",i.enterpriseName),t.xp6(3),t.s9C("label",t.lcZ(14,67,"BANK_DETAILS.INVOICE_NUMBER")),t.s9C("value",i.invoiceNumber),t.xp6(3),t.s9C("label",t.lcZ(17,69,"BILLS_AND_PAYMENTS.INVOICE_DATE")),t.s9C("value",i.invoiceDate),t.xp6(3),t.s9C("label",t.lcZ(20,71,"BILLS_AND_PAYMENTS.PERIOD_TYPE")),t.s9C("value",i.periodType),t.xp6(3),t.s9C("label",t.lcZ(23,73,"BILLS_AND_PAYMENTS.PERIOD_START_DATE")),t.s9C("value",i.startDate),t.xp6(3),t.s9C("label",t.lcZ(26,75,"BILLS_AND_PAYMENTS.PERIOD_END_DATE")),t.s9C("value",i.endDate),t.xp6(3),t.s9C("label",t.lcZ(29,77,"BILLS_AND_PAYMENTS.AMOUNT_DUE")),t.s9C("value",i.amountDue),t.xp6(3),t.s9C("label",t.lcZ(32,79,"COMMON_FIELDS.STATUS")),t.s9C("value",i.status),t.xp6(3),t.s9C("label",t.lcZ(35,81,"COMMON_BUTTONS.BUTTON_SUBMIT")),t.xp6(2),t.s9C("label",t.lcZ(37,83,"COMMON_BUTTONS.BUTTON_CANCEL")),t.xp6(5),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("selected",!0),t.xp6(3),t.Oqu(t.lcZ(46,85,"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS")),t.xp6(4),t.s9C("label",t.lcZ(51,87,"BANK_DETAILS.ORDER_ID")),t.s9C("value",i.orderId),t.xp6(4),t.s9C("label",t.lcZ(55,89,"BANK_DETAILS.MERCHANT_IDENTIFIER")),t.s9C("value",i.midId),t.xp6(4),t.s9C("label",t.lcZ(59,91,"BANK_DETAILS.TXN_ID")),t.s9C("value",i.txn),t.xp6(4),t.s9C("label",t.lcZ(63,93,"BANK_DETAILS.TXN_AMOUNT")),t.s9C("value",i.txnAmount),t.xp6(4),t.s9C("label",t.lcZ(67,95,"BANK_DETAILS.PAYMENT_MODE")),t.s9C("defaultValue",i.paymentMode),t.Q6J("options",i.paymentOptions),t.xp6(4),t.s9C("label",t.lcZ(71,97,"COMMON_FIELDS.CURRENCY")),t.s9C("defaultValue",i.currency),t.Q6J("options",i.currencyOptions),t.xp6(4),t.s9C("placeholder",t.lcZ(75,99,"BANK_DETAILS.TXN_DATE")),t.s9C("defaultDate",i.paidDate),t.xp6(4),t.s9C("label",t.lcZ(79,101,"BANK_DETAILS.RESP_CODE")),t.s9C("value",i.rescode),t.Q6J("maxlength",10),t.xp6(4),t.s9C("label",t.lcZ(83,103,"BANK_DETAILS.RESP_MSG")),t.s9C("value",i.resmsg),t.xp6(4),t.s9C("label",t.lcZ(87,105,"BANK_DETAILS.GATEWAY_NAME")),t.s9C("value",i.gatewayName),t.xp6(4),t.s9C("label",t.lcZ(91,107,"BANK_DETAILS.BANK_TXN_ID")),t.s9C("value",i.bankTrxId),t.xp6(4),t.s9C("label",t.lcZ(94,109,"COMMON_FIELDS.STATUS")),t.s9C("value",i.invoiceStatus),t.xp6(3),t.Q6J("header",i.attachmentColumnHeaders)("data",i.attachmentsData)("totalpages",i.listingVariables.totalpages)("totalRecords",i.listingVariables.totalRecords)("objectType",i.objectType)("objectId",i.recordId)("actionType",i.actionType)("spinner",i.spinner),t.xp6(1),t.Q6J("createdBy",i.createdBy)("lastUpdatedBy",i.updatedBy)("showrecordhistory",i.dataJsonObj.showrecordhistory)("creationDate",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.createdAt)("lastUpdatedDate",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.updatedAt))},dependencies:[q.h4,D.UQ,D.US,Z.r,R.a,k.k,g.Q,x.K,ee.W,te.Y,Q.q,V.X$]})}return v})();var ge=u(15861),Ce=u(35226),Oe=u.n(Ce),ye=u(28168),oe=u(34942),be=u(70057),Ae=u(88425);const Ne=["datatableComponent"];let Ee=(()=>{class v extends L.O{ColumnHeader;actionSheetController;loggerService;router;translateService;billsandpaymentsservice;commonService;listingVariables;route;uiUtils;datatableComponent;searchValueChange=new t.vpe;actions;activeObj;billsAndPaymentsId;billsAndPaymentsMobileListData;billsAndPaymentsStatsObj=new Ie;clientBillsAndPaymentsListData;clientBillsAndPaymentsObj;enterpriseId;eventClickData;isFilterClicked=!1;mobileRoutesArray;noDuplicates=void 0;parentId;show=!0;searchString;statsBillsAndPaymentsListData;status;statusObj;statusObjs;tableColumnHeaders;dataJsonObj={};constructor(c,C,i,l,r,h,m,S,T,O){super(T,m),this.ColumnHeader=c,this.actionSheetController=C,this.loggerService=i,this.router=l,this.translateService=r,this.billsandpaymentsservice=h,this.commonService=m,this.listingVariables=S,this.route=T,this.uiUtils=O,this.route.params.subscribe(y=>{this.parentId=y.parentId}),this.route.queryParams.subscribe(y=>{this.dataJsonObj.queryParamsObj={defaultView:y.default_view,selectedMenuId:y.selectedMenuId,selectedSubMenuId:y.selectedSubMenuId}})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=b.hf.CLIENT_BILLS_AND_PAYMENTS,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:b.hf,pageSettingEnum:b.AM,pageSettingFieldsEnum:b.In},this.commonService.trackView(b.sn.CLIENT_BILLSANDPAYMENTS_LIST),this.enterpriseId=localStorage.getItem(b.BU.SELECTED_ENTERPRISE),this.tableColumnHeaders=this.ColumnHeader.getClientBillsAndPayments(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.actions={EDIT:this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.EDIT),VIEW:this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.VIEW),DELETE:this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.DELETE)},this.show=this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.STATS),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:b.gL.URL,redirectURL:"",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.FILTERS)}ionViewWillEnter(){this.statsBillsAndPaymentsListData=oe.h.getClientBillsAndPaymentsListStats(this.isFilterClicked,this.eventClickData)}getAllRecords(){try{const c=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.status=this.statusObj,this.activeObj=this.statusObjs,this.enterpriseId=localStorage.getItem(b.BU.SELECTED_ENTERPRISE),this.billsandpaymentsservice.getAll(this.searchString,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.enterpriseId,this.status,this.activeObj,this.isFilterClicked,c,this.parentId,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(i=>{if(i.rows.length>0){this.billsAndPaymentsMobileListData&&this.billsAndPaymentsMobileListData.length>0||(this.billsAndPaymentsMobileListData=[]);for(let l=0;l<i.rows.length;l++)i.rows[l].imageName=i.rows[l].enterprise.short_name,i.rows[l].enterprise.short_name='<a class="enable" id="enterprise.short_name'+i.rows[l]._id+'" href="enterprises/enterprises/'+i.rows[l].enterprise.enterprise_id+'/view">'+i.rows[l].enterprise.short_name,i.rows[l].amount_due=i.rows[l].amount_due.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),i.rows[l].invoice_period_start_date=this.commonService.dbTimezoneFormat(i.rows[l].invoice_period_start_date),i.rows[l].invoice_period_end_date=this.commonService.dbTimezoneFormat(i.rows[l].invoice_period_end_date),i.rows[l].invoice_date=this.commonService.dbTimezoneFormat(i.rows[l].invoice_date),i.rows[l].txn_date=this.commonService.dbTimezoneFormat(i.rows[l].txn_date),this.billsAndPaymentsMobileListData=this.billsAndPaymentsMobileListData.filter(r=>r._id!==i.rows[l]._id),this.billsAndPaymentsMobileListData.push(i.rows[l]),this.listingVariables.totalRecords=i.totalCount,this.listingVariables.totalpages=i.pages;i.totalCount&&(this.listingVariables.totalRecords=i.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=i.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.clientBillsAndPaymentsListData=this.clientBillsAndPaymentsListData.concat(i.rows)):this.clientBillsAndPaymentsListData=i.rows}else this.clientBillsAndPaymentsListData=[],this.billsAndPaymentsMobileListData=[];this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS=i.totalCount,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_ACTIVE=i.ActiveCount,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_CLOSED=i.InActiveCount,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_60_DAYS=i.Activity60,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_120_DAYS=i.Activity120,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_365_DAYS=i.Activity365,this.statsDisabled(this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_ACTIVE,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_CLOSED,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_60_DAYS,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_120_DAYS,this.billsAndPaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_365_DAYS)},i=>{this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",i)})}catch(c){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",c)}}loadPageData(c){this.listingVariables.pageNumbers=c.listingVariables.pageNumbers,c.clearMobileData&&(this.billsAndPaymentsMobileListData=this.noDuplicates),c.isPaginationChange&&(this.dataJsonObj.selectedFilter=c.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=c.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=c.selectedAdvancedSearchObj),this.getAllRecords()}getSearchResult(c){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=c,this.datatableComponent.reset(),this.getAllRecords(),this.searchValueChange.emit(c)}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.datatableComponent.reset(),this.getAllRecords(),this.searchValueChange.emit("")}onActionClicked(c){this.billsAndPaymentsId=c.data._id,c.action===b.A0.EDIT?(this.router.navigate(["/workclients/"+this.billsAndPaymentsId+"/billsandpayments/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("billsandpayments")):c.action===b.A0.VIEW?this.commonService.redirectToUrl(["..",c.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):c.action===b.A0.DELETE&&this.delete(this.billsAndPaymentsId)}delete(c){try{Oe().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_RECORD_DELETE"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(C=>{C.value?this.billsandpaymentsservice.deleteBillsAndPaymentsViewData(c).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_DELETE"),this.billsAndPaymentsMobileListData=this.noDuplicates,this.router.routeReuseStrategy.clearModuleRouteCache("billsandpayments"),this.getAllRecords()}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"delete",i)}):(this.billsAndPaymentsMobileListData=this.noDuplicates,this.getAllRecords())})}catch(C){this.loggerService.setLoggerError(this.constructor.name,"delete",C)}}getRedirectBillsandPayments(c){this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.VIEW)&&this.commonService.redirectToUrl(["..",c._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}mobileEventAction(c){this.mobileRoutesArray=[],this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.DELETE)&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_DELETE"),handler:()=>{this.delete(c._id)}}),this.roleRightsValidationByPage(b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.EDIT)&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["/workclients/"+c._id+"/billsandpayments/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("clientbillsandpayments")}}),this.presentActionSheet(c)}presentActionSheet(c){var C=this;return(0,ge.Z)(function*(){yield(yield C.actionSheetController.create({cssClass:"actionsheet",buttons:C.mobileRoutesArray})).present()})()}toggle(){this.show=!this.show}statsDisabled(c,C,i,l,r,h){try{this.clientBillsAndPaymentsObj=[],this.clientBillsAndPaymentsObj.push(0!==c?{value1:"TOTAL_BILLS_AND_PAYMENTS"}:{value1:""}),this.clientBillsAndPaymentsObj.push(0!==C?{value2:"TOTAL_BILLS_AND_PAYMENTS_ACTIVE"}:{value2:""}),this.clientBillsAndPaymentsObj.push(0!==i?{value3:"TOTAL_BILLS_AND_PAYMENTS_CLOSED"}:{value3:""}),this.clientBillsAndPaymentsObj.push(0!==l?{value4:"TOTAL_BILLS_AND_PAYMENTS_60_DAYS"}:{value4:""}),this.clientBillsAndPaymentsObj.push(0!==r?{value5:"TOTAL_BILLS_AND_PAYMENTS_120_DAYS"}:{value5:""}),this.clientBillsAndPaymentsObj.push(0!==h?{value6:"TOTAL_BILLS_AND_PAYMENTS_365_DAYS"}:{value6:""}),this.statsBillsAndPaymentsListData=oe.h.getClientBillsAndPaymentsListStatsDisabled(this.isFilterClicked,"",this.clientBillsAndPaymentsObj)}catch(m){this.loggerService.setLoggerError(this.constructor.name,"statsDisabled",m)}}statsData(c){try{this.statusObj=c.value,this.isFilterClicked=!0,this.listingVariables.pageNumbers=1,this.billsAndPaymentsMobileListData=[],this.datatableComponent.reset(),this.getAllRecords()}catch(C){this.loggerService.setLoggerError(this.constructor.name,"statsData",C)}}selectedViewType(c){this.dataJsonObj.selectedDisplayView=c}selectedFilterType(c){c?this.dataJsonObj.selectedFilter=c:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(c){}advancedSearchFilterClicked(c){this.dataJsonObj.selectedAdvancedSearchObj=c}onHeaderItemClick(c){switch(c.type){case"search":this.getSearchResult(c.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(c.event);break;case"filters":this.selectedFilterType(c.event);break;case"advanced_search":this.advancedSearchFilterClicked(c.event);break;case"page_actions":this.onPageLevelActionClicked(c.event)}}static \u0275fac=function(C){return new(C||v)(t.Y36(N.Y),t.Y36(be.BX),t.Y36(E.m),t.Y36(I.F0),t.Y36(V.sK),t.Y36(ue),t.Y36(A.v),t.Y36(B.v),t.Y36(I.gz),t.Y36(e.s))};static \u0275cmp=t.Xpm({type:v,selectors:[["app-clientbillsandpayments-list"]],viewQuery:function(C,i){if(1&C&&t.Gf(Ne,5),2&C){let l;t.iGM(l=t.CRH())&&(i.datatableComponent=l.first)}},outputs:{searchValueChange:"searchValueChange"},features:[t._Bn([B.v,N.Y]),t.qOj],decls:9,vars:32,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",1,"",3,"actions","header","totalRecords","totalPages","paginator","mobileListData","data","expand","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(C,i){1&C&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),t.NdJ("headerItemClick",function(r){return i.onHeaderItemClick(r)}),t.qZA()(),t.TgZ(4,"div",4)(5,"app-datatable",5,6),t.NdJ("actionClicked",function(r){return i.onActionClicked(r)})("itemClickEvent",function(r){return i.getRedirectBillsandPayments(r)})("redirectionEvent",function(r){return i.mobileEventAction(r)})("changeStats",function(r){return i.statsData(r)})("loadPageData",function(r){return i.loadPageData(r)}),t.qZA(),t.TgZ(7,"div",7)(8,"app-page-actions",8),t.NdJ("selectedAction",function(r){return i.onPageLevelActionClicked(r)}),t.qZA()()()()()),2&C&&(t.xp6(3),t.Q6J("pageName",i.dataJsonObj.pageName)("defaultView",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",i.dataJsonObj.pageActionsList)("pageTitle",i.dataJsonObj.pageTitle)("selectedMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),t.xp6(2),t.Q6J("actions",i.actions)("header",i.tableColumnHeaders)("totalRecords",i.listingVariables.totalRecords)("totalPages",i.listingVariables.totalpages)("paginator",!0)("mobileListData",i.billsAndPaymentsMobileListData)("data",i.clientBillsAndPaymentsListData)("expand",!1)("statsDisplay",i.statsBillsAndPaymentsListData)("statData",i.billsAndPaymentsStatsObj)("statusDisplay",i.statusObj)("statsShow",i.show)("showRights",i.roleRightsValidationByPage(i.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.CLIENT_BILLS_AND_PAYMENTS,i.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,i.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",i.searchString)("listingVariables",i.listingVariables)("selectedDisplayViewType",i.dataJsonObj.selectedDisplayView)("selectedFilterType",i.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",i.dataJsonObj.selectedAdvancedSearchObj)("pageName",i.dataJsonObj.pageName)("selectedMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedSubMenuId),t.xp6(3),t.Q6J("isFabDisplay",!0)("actionsList",i.dataJsonObj.pageActionsList))},dependencies:[ye.n,Q.q,Ae.y]})}return v})();class Ie{TOTAL_BILLS_AND_PAYMENTS;TOTAL_BILLS_AND_PAYMENTS_ACTIVE;TOTAL_BILLS_AND_PAYMENTS_CLOSED;TOTAL_BILLS_AND_PAYMENTS_60_DAYS;TOTAL_BILLS_AND_PAYMENTS_120_DAYS;TOTAL_BILLS_AND_PAYMENTS_365_DAYS}const De=[{path:"",data:{title:"clientbillsandpayments"},children:[{path:"",redirectTo:"workclientsworkclientbillsandpayments-list",pathMatch:"full"},{path:"workclientsworkclientbillsandpayments-list",component:Ee,data:{object_type:b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,title:"",responsibilityParam:b.bP.MENUS+"."+b.w1.CLIENTS+"."+b.bP.SUBMENUS+"."+b.w1.CLIENT_BILLS_AND_PAYMENTS+"."+b.Iu.ENABLED,pageName:b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS}},{path:":id/billsandpayments/view",component:(()=>{class v extends L.O{_sharedService;columnsheaders;loggerService;navigationService;router;translateService;billsandpaymentsservice;commonService;route;actionType;attachmentColumnHeaders;attachmentsData;billsAndPaymentsViewData;createdBy;creationDate;endDate;invoiceDate;lastUpdatedDate;objectType;paidDate;recordData;recordId;spinner=!0;startDate;totalRecords;updatedBy;dataJsonObj={};constructor(c,C,i,l,r,h,m,S,T){super(T,S),this._sharedService=c,this.columnsheaders=C,this.loggerService=i,this.navigationService=l,this.router=r,this.translateService=h,this.billsandpaymentsservice=m,this.commonService=S,this.route=T,this.route.params.subscribe(O=>{this.recordId=O.id,this.recordData=this.recordId.split("$")}),this.route.queryParams.subscribe(O=>{this.dataJsonObj.queryParamsObj={defaultView:O.defaultView,selectedMenuId:O.selectedMenuId,selectedSubMenuId:O.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=b.hf.CLIENT_BILLS_AND_PAYMENTS,this.objectType=this.route.snapshot.data.object_type,this.commonService.trackView(b.sn.CLIENT_BILLSANDPAYMENTS_VIEW),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(b.hf.CLIENT_BILLS_AND_PAYMENTS,b.AM.ACTIONS,b.In.RECORD_HISTORY),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.getRecordById(),this.actionType=b.In.VIEW,this.attachmentColumnHeaders=this.columnsheaders.getAttachmentsColumnHeaders(),this.getAttachmentsList(),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(b.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=b.hf.CLIENT_BILLS_AND_PAYMENTS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(c){var C=this;return(0,ge.Z)(function*(){for(let i of c)C.dataJsonObj[i.storingFieldName]=yield C.commonService.getDynamicJson(C.dataJsonObj.enterpriseId,i.folderName,i.jsonType);C.dataJsonObj.selectedObj={},C.dataJsonObj.selectedObj.recordId=C.recordId,C.dataJsonObj.selectedObj.pageObj=C.dataJsonObj.menuDataJson.filter(i=>i.menu_page.page_name===C.dataJsonObj.selectedPage),C.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(){try{this.billsandpaymentsservice.get(this.recordData).subscribe(c=>{this.billsAndPaymentsViewData=c,this.startDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_start_date),this.endDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_end_date),this.invoiceDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_date),this.paidDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.txn_date),this.createdBy=this.billsAndPaymentsViewData.created_by,this.updatedBy=this.billsAndPaymentsViewData.updated_by},c=>{this.loggerService.setLoggerError(this.constructor.name,"get",c)})}catch(c){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",c)}}cancelBtn(){this.commonService.redirectToPreviousUrl()}getAttachmentsList(){try{this.commonService.getAttachmentsList(this.objectType,this.recordId,"","","").then(c=>{if(this._sharedService.emitChangeLoaders(!1),c.rows.length>0)for(let C=0;C<c.rows.length;C++)c.rows[C].user_name=c.rows[C].f_name+", "+c.rows[C].l_name,c.rows[C].last_uploaded_date=this.commonService.dbTimezoneFormat(c.rows[C].last_uploaded_date),this.attachmentsData=c.rows;else this.attachmentsData=[];this.totalRecords=c.totalCount,this.spinner=!1}).catch(c=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",c)})}catch(c){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",c)}}static \u0275fac=function(C){return new(C||v)(t.Y36(M.F),t.Y36(N.Y),t.Y36(E.m),t.Y36(d.f),t.Y36(I.F0),t.Y36(V.sK),t.Y36(ue),t.Y36(A.v),t.Y36(I.gz))};static \u0275cmp=t.Xpm({type:v,selectors:[["app-clientbillsandpayments-view"]],features:[t._Bn([N.Y]),t.qOj],decls:85,vars:106,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","clientbillsandpayments-view-enterprisename",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-invoicenumber",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-invoicedate",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-periodtype",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-startdate",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-enddate",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-amountdue",3,"label","value"],["id","clientbillsandpayments-view-paymentstatus","disabled","true",3,"label","value"],[1,"col-md-4","text-end","mt-2"],["id","clientbillsandpayments-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["id","clientbillsandpayments-view-orderid","disabled","true",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-mid",3,"label","value"],["disabled","true","id","clientbillsandpayments-view-txnid",3,"label","value"],["id","clientbillsandpayments-view-txnamount","disabled","true",3,"label","value"],["id","clientbillsandpayments-view-paymentmode","disabled","true",3,"label","value"],["id","clientbillsandpayments-view-currency","disabled","true",3,"label","value"],["disabled","true","id","billsandpayments-view-txndate",3,"label","value"],["id","clientbillsandpayments-view-respcode","disabled","true",3,"label","value"],["id","clientbillsandpayments-view-respmsg","disabled","true",3,"label","value"],["id","clientbillsandpayments-view-gateway","disabled","true",3,"label","value"],["id","clientbillsandpayments-view-banktxnid","disabled","true",3,"label","value"],["id","clientbillsandpayments-view-status","disabled","true",3,"label","value"],["id","viewattachmentId"],[3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(C,i){1&C&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"app-pageheader",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9),t._UZ(10,"app-input",10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-input",11),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",9),t._UZ(16,"app-input",12),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",9),t._UZ(19,"app-input",13),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",9),t._UZ(22,"app-input",14),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",9),t._UZ(25,"app-input",15),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",9),t._UZ(28,"app-input",16),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",9),t._UZ(31,"app-input",17),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",18)(34,"app-button",19),t.NdJ("buttonOnClick",function(){return i.cancelBtn()}),t.ALo(35,"translate"),t.qZA()()()()()(),t.TgZ(36,"div",3)(37,"div",20)(38,"div",21)(39,"p-accordion",22)(40,"p-accordionTab",23)(41,"p-header",24)(42,"span"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"div",8)(46,"div",9),t._UZ(47,"app-input",25),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",9),t._UZ(50,"app-input",26),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",9),t._UZ(53,"app-input",27),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"div",9),t._UZ(56,"app-input",28),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"div",9),t._UZ(59,"app-input",29),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"div",9),t._UZ(62,"app-input",30),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",9),t._UZ(65,"app-input",31),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"div",9),t._UZ(68,"app-input",32),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"div",9),t._UZ(71,"app-input",33),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"div",9),t._UZ(74,"app-input",34),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"div",9),t._UZ(77,"app-input",35),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"div",9),t._UZ(80,"app-input",36),t.ALo(81,"translate"),t.qZA()()(),t.TgZ(82,"p-accordion",37),t._UZ(83,"app-attachment",38),t.qZA(),t._UZ(84,"app-recordhistory",39),t.qZA()()()()()()()),2&C&&(t.xp6(6),t.Q6J("pageName",i.dataJsonObj.pageName)("pageTitle",i.dataJsonObj.pageTitle)("selectedMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),t.xp6(4),t.s9C("label",t.lcZ(11,62,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.enterprise.short_name),t.xp6(3),t.s9C("label",t.lcZ(14,64,"BANK_DETAILS.INVOICE_NUMBER")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.invoice_number),t.xp6(3),t.s9C("label",t.lcZ(17,66,"BILLS_AND_PAYMENTS.INVOICE_DATE")),t.s9C("value",i.invoiceDate),t.xp6(3),t.s9C("label",t.lcZ(20,68,"BILLS_AND_PAYMENTS.PERIOD_TYPE")),t.s9C("value",i.lookupLanguageTranslations(null==i.billsAndPaymentsViewData||null==i.billsAndPaymentsViewData.invoice_period_type?null:i.billsAndPaymentsViewData.invoice_period_type.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(23,70,"BILLS_AND_PAYMENTS.PERIOD_START_DATE")),t.s9C("value",i.startDate),t.xp6(3),t.s9C("label",t.lcZ(26,72,"BILLS_AND_PAYMENTS.PERIOD_END_DATE")),t.s9C("value",i.endDate),t.xp6(3),t.s9C("label",t.lcZ(29,74,"BILLS_AND_PAYMENTS.AMOUNT_DUE")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.amount_due),t.xp6(3),t.s9C("label",t.lcZ(32,76,"COMMON_FIELDS.STATUS")),t.s9C("value",i.lookupLanguageTranslations(null==i.billsAndPaymentsViewData||null==i.billsAndPaymentsViewData.invoice_payment_status?null:i.billsAndPaymentsViewData.invoice_payment_status.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(35,78,"COMMON_BUTTONS.BUTTON_CLOSE")),t.xp6(5),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("selected",!0),t.xp6(3),t.Oqu(t.lcZ(44,80,"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS")),t.xp6(4),t.s9C("label",t.lcZ(48,82,"BANK_DETAILS.ORDER_ID")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.order_id),t.xp6(3),t.s9C("label",t.lcZ(51,84,"BANK_DETAILS.MERCHANT_IDENTIFIER")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.mid),t.xp6(3),t.s9C("label",t.lcZ(54,86,"BANK_DETAILS.TXN_ID")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.trx_id),t.xp6(3),t.s9C("label",t.lcZ(57,88,"BANK_DETAILS.TXN_AMOUNT")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.txn_amount),t.xp6(3),t.s9C("label",t.lcZ(60,90,"BANK_DETAILS.PAYMENT_MODE")),t.s9C("value",i.lookupLanguageTranslations(null==i.billsAndPaymentsViewData||null==i.billsAndPaymentsViewData.payment_mode?null:i.billsAndPaymentsViewData.payment_mode.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(63,92,"COMMON_FIELDS.CURRENCY")),t.s9C("value",i.lookupLanguageTranslations(null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.invoice_currency_code.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(66,94,"BANK_DETAILS.TXN_DATE")),t.s9C("value",i.paidDate),t.xp6(3),t.s9C("label",t.lcZ(69,96,"BANK_DETAILS.RESP_CODE")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.respcode),t.xp6(3),t.s9C("label",t.lcZ(72,98,"BANK_DETAILS.RESP_MSG")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.respmsg),t.xp6(3),t.s9C("label",t.lcZ(75,100,"BANK_DETAILS.GATEWAY_NAME")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.gatewayname),t.xp6(3),t.s9C("label",t.lcZ(78,102,"BANK_DETAILS.BANK_TXN_ID")),t.s9C("value",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.banktrx_id),t.xp6(3),t.s9C("label",t.lcZ(81,104,"COMMON_FIELDS.STATUS")),t.s9C("value",i.lookupLanguageTranslations(null==i.billsAndPaymentsViewData||null==i.billsAndPaymentsViewData.invoice_payment_status?null:i.billsAndPaymentsViewData.invoice_payment_status.lookup_id)),t.xp6(3),t.Q6J("header",i.attachmentColumnHeaders)("data",i.attachmentsData)("totalRecords",i.totalRecords)("objectType",i.objectType)("objectId",i.recordId)("actionType",i.actionType)("spinner",i.spinner),t.xp6(1),t.Q6J("createdBy",i.createdBy)("lastUpdatedBy",i.updatedBy)("showrecordhistory",i.dataJsonObj.showrecordhistory)("creationDate",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.createdAt)("lastUpdatedDate",null==i.billsAndPaymentsViewData?null:i.billsAndPaymentsViewData.updatedAt))},dependencies:[q.h4,D.UQ,D.US,Z.r,R.a,ee.W,te.Y,Q.q,V.X$]})}return v})(),data:{object_type:b.hf.CLIENT_BILLS_AND_PAYMENTS,title:"",responsibilityParam:b.bP.MENUS+"."+b.w1.CLIENTS+"."+b.bP.SUBMENUS+"."+b.w1.CLIENT_BILLS_AND_PAYMENTS+"."+b.In.VIEW,pageName:b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,pageSetting:b.AM.ACTIONS,settingField:b.In.VIEW}},{path:":id/billsandpayments/edit",component:Se,data:{object_type:b.hf.CLIENT_BILLS_AND_PAYMENTS,title:"",responsibilityParam:b.bP.MENUS+"."+b.w1.CLIENTS+"."+b.bP.SUBMENUS+"."+b.w1.CLIENT_BILLS_AND_PAYMENTS+"."+b.In.EDIT,pageName:b.hf.WORK_CLIENT_BILLS_AND_PAYMENTS,pageSetting:b.AM.ACTIONS,settingField:b.In.EDIT}}]}];let Le=(()=>{class v{static \u0275fac=function(C){return new(C||v)};static \u0275mod=t.oAB({type:v});static \u0275inj=t.cJS({imports:[I.Bz.forChild(De),I.Bz]})}return v})();var Me=u(36895),we=u(32137),ce=u(24006),H=u(83748),Re=u(93144),z=u(65673);let _e=(()=>{class v{static \u0275fac=function(C){return new(C||v)};static \u0275mod=t.oAB({type:v});static \u0275inj=t.cJS({imports:[Le,Me.ez,V.aw,ce.u5,ce.UX,Re.U$,D.fx,z.Q,we.D,H.v]})}return v})()},93677:(Ye,$,u)=>{u.r($),u.d($,{ClientContractsModule:()=>Ue});var D=u(32174),ve=u(75875),ae=u(90313),t=u(94650),ue=u(80529);let N=(()=>{class c{http;authService;constructor(i,l){this.http=i,this.authService=l}getAll(i,l,r,h,m,S,T,O,y,P,w,F){const de=w||"",Te=S?"&condition="+S:"",Pe=ae.L.isEmpty(F)?"":"&advSearchString="+JSON.stringify(F);return ae.L.isEmpty(Te)?this.authService.getApiCall("api/v1/clientcontracts?&enterprise.enterprise_id="+i+"&client.client_id="+P+"&skip="+l+"&limit="+r+"&sort="+h+"&type=list&search="+m+y+Pe+de):this.authService.getApiCall("api/v1/clientcontracts?&enterprise.enterprise_id="+i+"&client.client_id="+P+"&skip="+l+"&limit="+r+"&sort="+h+"&type=list&search="+m+Te+(O?"&is"+O+"=true":"")+y+Pe+de)}get(i){return this.authService.getApiCall("api/v1/clientcontracts/"+i)}update(i,l){return new Promise((r,h)=>{this.authService.putApiCall("api/v1/clientcontracts/"+i,l).subscribe(m=>{r(m)},m=>{h(m)})})}create(i){return new Promise((l,r)=>{this.authService.postApiCall("api/v1/clientcontracts/",i).subscribe(h=>{l(h)},h=>{r(h)})})}getClientsList(i){return new Promise((l,r)=>{this.authService.getApiCall("api/v1/clients?type=drop&enterprise.enterprise_id="+i).subscribe(h=>{l(h)},h=>{r(h)})})}getclientName(i){return new Promise((l,r)=>{this.authService.getApiCall("api/v1/clients/"+i).subscribe(h=>{l(h)},h=>{r(h)})})}getEnterprisesViewData(i){return new Promise((l,r)=>{this.authService.getApiCall("api/v1/enterprises/"+i).subscribe(h=>{l(h)},h=>{r(h)})})}static \u0275fac=function(l){return new(l||c)(t.LFG(ue.eN),t.LFG(ve.e))};static \u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();var A=u(71568),L=u(42786),g=u(32236),E=u(27601),b=u(46448),M=u(62510),d=u(54463),I=u(2387),V=u(56368),B=u(93837),e=u(38077),q=u(24929),Z=u(92634),R=u(42919),k=u(37415);const x=["clientName"],ee=["contractNameInput"],te=["contractTypeInput"],Q=["currencyInput"],ie=["descriptionText"],ne=["payTermsInput"],se=["periodAmountInput"];let re=(()=>{class c{contractService;loggerService;navigationService;router;translateService;uiUtils;commonService;route;clientName;contractNameInput;contractTypeInput;currencyInput;descriptionText;payTermsInput;periodAmountInput;checkboxOptions;clientId;clientOptions;contractCreateObj=new pe;contractName;contractTypeObj;contractTypeOptions;currencyObj;currencyOptions;defaultClient;defaultClientObj;defaultContractType;defaultCurrency;defaultDescription;defaultPaymentTerms;defaultPeriodAmount;defaultTimeZone;description;endDate;enterpriseId;enterpriseName;enterpriseShortName;error1;error;headerAction;isEnabled=!0;loginUserDateFormat;paymentTermsObj;paymentTermsOptions;recordId;startDate;timeZoneOptions;utcTimeZone;utcTimeZoneString;dataJsonObj={};constructor(i,l,r,h,m,S,T,O){this.contractService=i,this.loggerService=l,this.navigationService=r,this.router=h,this.translateService=m,this.uiUtils=S,this.commonService=T,this.route=O,this.route.params.subscribe(y=>{this.clientId=y.parentId})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.headerAction={BACK:!0},this.dataJsonObj.pageName=g.hf.CLIENT_CONTRACTS,this.commonService.trackView(g.sn.CLIENT_CONTRACT_CREATE),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT_CONTRACT",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=localStorage.getItem(g.BU.SELECTED_ENTERPRISE),this.getEnterpriseRecordbyId(),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}];const i=JSON.parse(localStorage.getItem(g.BU.TIMEZONE_OBJ));this.defaultTimeZone=i.lookup_name;const h=i.description.split("(UTC")[1].split(")");this.utcTimeZone=h[0],this.utcTimeZoneString=h[0].toString();const m=JSON.parse(localStorage.getItem(g.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=m.lookup_name,this.startDate=new Date,this.endDate=new Date,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(S=>{this.dataJsonObj.lookupCodesListJSON=S,this.getContractTypeOptions(""),this.getPaymentTermsOptions(""),this.getTimeZoneOptions(this.defaultTimeZone),this.getCurrenciesOptions("")}),this.getClientContract()}getEnterpriseRecordbyId(){try{this.contractService.getEnterprisesViewData(this.enterpriseId).then(i=>{this.enterpriseName=i.enterprise_name,this.enterpriseId=i._id,this.enterpriseShortName=i.short_name}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseRecordbyId",i)}}changeContractName(i){this.contractName=i.value,this.defaultDescription=i.value}changeStartDate(i){this.startDate=i.value,this.error1=""}changeEndDate(i){this.endDate=i.value,this.error1=""}changePeriodAmount(i){this.defaultPeriodAmount=i.value}changeDescription(i){this.defaultDescription=i.value}getContractTypeOptions(i){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[g.ox.CONTRACT_TYPES],i).then(l=>{this.contractTypeOptions=l}).catch(l=>{this.loggerService.setLoggerError(this.constructor.name,"getContractTypeOptions",l)})}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getContractTypeOptions",l)}}changeContractType(i){this.defaultContractType=i.NAME,this.contractTypeObj=i}getPaymentTermsOptions(i){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[g.ox.BILLING_CYCLES],i).then(l=>{this.paymentTermsOptions=l}).catch(l=>{this.loggerService.setLoggerError(this.constructor.name,"getPaymentTermsOptions",l)})}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getPaymentTermsOptions",l)}}changePaymentTerms(i){this.defaultPaymentTerms=i.NAME,this.paymentTermsObj=i}getTimeZoneOptions(i){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[g.ox.TIME_ZONES],i).then(l=>{if(this.timeZoneOptions=l,this.timeZoneOptions.length>0){for(let r=0;r<this.timeZoneOptions.length;r++)this.timeZoneOptions[r].NAME=this.timeZoneOptions[r].NAME+" - "+this.timeZoneOptions[r].description;this.timeZoneOptions=this.timeZoneOptions}}).catch(l=>{this.loggerService.setLoggerError(this.constructor.name,"getTimeZoneOptions",l)})}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getTimeZoneOptions",l)}}getClientContract(){try{this.contractService.getclientName(this.clientId).then(i=>{this.defaultClient=i.client_name,this.defaultClientObj=i},i=>{this.loggerService.setLoggerError(this.constructor.name,"getClientContract",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getClientContract",i)}}changeTimeZone(i){try{this.defaultTimeZone=i.lookup_name;const h=i.description.split("(UTC")[1].split(")");this.utcTimeZone=h[0],this.utcTimeZoneString=h[0].toString()}catch(l){this.loggerService.setLoggerError(this.constructor.name,"changeTimeZone",l)}}getCurrenciesOptions(i){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[g.ox.CURRENCIES],i).then(l=>{if(this.currencyOptions=l,this.currencyOptions.length>0){for(let r=0;r<this.currencyOptions.length;r++)this.currencyOptions[r].NAME=this.currencyOptions[r].lookup_display_name+" - "+this.currencyOptions[r].description;this.currencyOptions=this.currencyOptions}}).catch(l=>{this.loggerService.setLoggerError(this.constructor.name,"getCurrenciesOptions",l)})}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getCurrenciesOptions",l)}}changeCurrency(i){this.defaultCurrency=i.lookup_name,this.currencyObj=i}changeEnabledValue(i){i&&(this.isEnabled=i.value)}cancel(){this.commonService.redirectToPreviousUrl()}createRecord(){try{new Date(this.endDate)<new Date(this.startDate)?this.error1=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START"):this.contractNameInput.isValid()&&this.contractTypeInput.isValid()&&this.payTermsInput.isValid()&&this.periodAmountInput.isValid()&&this.currencyInput.isValid()&&this.descriptionText.isValid()&&(this.contractCreateObj.enterprise={enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},this.contractCreateObj.start_date=this.commonService.convertToUtcTimeZone(this.startDate,this.utcTimeZoneString),this.contractCreateObj.end_date=this.commonService.convertToUtcTimeZone(this.endDate,this.utcTimeZoneString),this.contractCreateObj.amount_per_period=this.defaultPeriodAmount,this.contractCreateObj.description=this.defaultDescription,this.contractCreateObj.currency_code=this.currencyObj,this.contractCreateObj.contract_type=this.contractTypeObj,this.contractCreateObj.payment_terms=this.paymentTermsObj,this.contractCreateObj.contract_name=this.contractName,this.contractCreateObj.client={client_id:this.defaultClientObj._id,client_name:this.defaultClientObj.client_name},this.contractCreateObj.is_enabled=this.isEnabled,this.contractService.create(this.contractCreateObj).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.router.routeReuseStrategy.clearModuleRouteCache("clientcontracts"),this.close()},i=>{this.commonErrorCodes(JSON.parse(i)),this.loggerService.setLoggerError(this.constructor.name,"create",i)}))}catch(i){this.loggerService.setLoggerError(this.constructor.name,"createRecord",i)}}commonErrorCodes(i){switch(JSON.parse(i[g.BU.STATUS])){case 500:case 404:default:break;case 409:this.error=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_CONTRACT_ALREADY_EXIST")}}close(){this.commonService.redirectToPreviousUrl()}pageheadeActionClick(i){"BACK"==i.value&&this.close()}static \u0275fac=function(l){return new(l||c)(t.Y36(N),t.Y36(L.m),t.Y36(b.f),t.Y36(M.F0),t.Y36(d.sK),t.Y36(E.s),t.Y36(A.v),t.Y36(M.gz))};static \u0275cmp=t.Xpm({type:c,selectors:[["app-clientcontract-create"]],viewQuery:function(l,r){if(1&l&&(t.Gf(x,5),t.Gf(ee,5),t.Gf(te,5),t.Gf(Q,5),t.Gf(ie,5),t.Gf(ne,5),t.Gf(se,5)),2&l){let h;t.iGM(h=t.CRH())&&(r.clientName=h.first),t.iGM(h=t.CRH())&&(r.contractNameInput=h.first),t.iGM(h=t.CRH())&&(r.contractTypeInput=h.first),t.iGM(h=t.CRH())&&(r.currencyInput=h.first),t.iGM(h=t.CRH())&&(r.descriptionText=h.first),t.iGM(h=t.CRH())&&(r.payTermsInput=h.first),t.iGM(h=t.CRH())&&(r.periodAmountInput=h.first)}},features:[t._Bn([N,E.s])],decls:63,vars:70,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["mandatory","true","disabled","true","id","clientcontracts-create-enterprisename",3,"label","value"],["mandatory","true","autoCaseFlag","false","disabled","false","id","clientcontracts-create-contractname",3,"label","minlength","maxlength","value","valueChange"],["contractNameInput",""],["disabled","true","id","clientcontracts-view-clientname",3,"label","value"],["mandatory","true","id","clientcontracts-create-type",3,"label","options","defaultValue","selectedOption","searchValueChange"],["contractTypeInput",""],[1,"row"],[1,"col-8","col-md-8","pe-0"],["mandatory","true","dateformat","dd-MMM-yyyy","disabled","false","id","clientcontracts-create-start-date",3,"placeholder","defaultDate","dateChangeValue"],[1,"col-4","col-md-4","ps-2"],["id","clientcontracts-create-timezone",3,"label","options","defaultValue","selectedOption","searchValueChange"],["mandatory","true","dateformat","dd-MMM-yyyy","disabled","false","id","clientcontracts-create-end-date",3,"placeholder","defaultDate","dateChangeValue"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],["mandatory","true","id","clientcontracts-create-paymentterms",3,"label","options","defaultValue","selectedOption","searchValueChange"],["payTermsInput",""],["inputType","number","mandatory","true","disabled","false","id","clientcontracts-create-periodamount",3,"label","maxlength","value","valueChange"],["periodAmountInput",""],[1,"col-md-3"],["mandatory","true","mandatory","true","id","clientcontracts-create-currency",3,"label","options","defaultValue","selectedOption","searchValueChange"],["currencyInput",""],[1,"col-md-1","d-flex","align-items-center"],["label","","id","clientcontracts-create-enabled","mandatory","false",3,"options","checked","valueChange"],[1,"col-lg-12","col-md-9"],["mandatory","true","disabled","false","id","clientcontracts-create-notes",3,"label","defaultvalue","maxlength","valueChange"],["descriptionText",""],[1,"col-md-12","text-end","mt-2","btns-group","pdl-0"],["className","btn btn-primary btn-sm","id","clientcontracts-create-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","clientcontracts-create-cancel",3,"label","buttonOnClick"]],template:function(l,r){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"app-pageheader",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9),t._UZ(10,"app-input",10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",9)(13,"app-input",11,12),t.NdJ("valueChange",function(m){return r.changeContractName(m)}),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"div",9),t._UZ(17,"app-input",13),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",9)(20,"app-dropdown-search",14,15),t.NdJ("selectedOption",function(m){return r.changeContractType(m)})("searchValueChange",function(m){return r.getContractTypeOptions(m)}),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"div",9)(24,"div",16)(25,"div",17)(26,"app-datepicker",18),t.NdJ("dateChangeValue",function(m){return r.changeStartDate(m)}),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"div",19)(29,"app-dropdown-search",20),t.NdJ("selectedOption",function(m){return r.changeTimeZone(m)})("searchValueChange",function(m){return r.getTimeZoneOptions(m)}),t.ALo(30,"translate"),t.qZA()()()(),t.TgZ(31,"div",9)(32,"app-datepicker",21),t.NdJ("dateChangeValue",function(m){return r.changeEndDate(m)}),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",22),t._uU(35),t.ALo(36,"translate"),t.qZA()(),t.TgZ(37,"div",9)(38,"app-dropdown-search",23,24),t.NdJ("selectedOption",function(m){return r.changePaymentTerms(m)})("searchValueChange",function(m){return r.getPaymentTermsOptions(m)}),t.ALo(40,"translate"),t.qZA()(),t.TgZ(41,"div",9)(42,"app-inputnumber",25,26),t.NdJ("valueChange",function(m){return r.changePeriodAmount(m)}),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"div",27)(46,"app-dropdown-search",28,29),t.NdJ("selectedOption",function(m){return r.changeCurrency(m)})("searchValueChange",function(m){return r.getCurrenciesOptions(m)}),t.ALo(48,"translate"),t.qZA()(),t.TgZ(49,"div",30)(50,"app-checkbox",31),t.NdJ("valueChange",function(m){return r.changeEnabledValue(m)}),t.qZA()(),t.TgZ(51,"div",32)(52,"app-textarea",33,34),t.NdJ("valueChange",function(m){return r.changeDescription(m)}),t.ALo(54,"translate"),t.qZA()(),t.TgZ(55,"div",22),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"div",35)(59,"app-button",36),t.NdJ("buttonOnClick",function(){return r.createRecord()}),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"app-button",37),t.NdJ("buttonOnClick",function(){return r.cancel()}),t.ALo(62,"translate"),t.qZA()()()()()()()()()),2&l&&(t.xp6(6),t.Q6J("pageName",r.dataJsonObj.pageName)("pageTitle",r.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),t.xp6(4),t.s9C("label",t.lcZ(11,40,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",r.enterpriseShortName),t.xp6(3),t.s9C("label",t.lcZ(15,42,"CONTRACTS.CONTRACT_NAME")),t.s9C("value",r.contractName),t.Q6J("minlength",3)("maxlength",120),t.xp6(4),t.s9C("label",t.lcZ(18,44,"COMMON_PAGE_TITLES.WORK_CLIENT")),t.s9C("value",r.defaultClient),t.xp6(3),t.s9C("label",t.lcZ(22,46,"COMMON_FIELDS.TYPE")),t.s9C("defaultValue",r.defaultContractType),t.Q6J("options",r.contractTypeOptions),t.xp6(6),t.s9C("placeholder",t.lcZ(27,48,"COMMON_FIELDS.START_DATE")),t.s9C("defaultDate",r.startDate),t.xp6(3),t.s9C("label",t.lcZ(30,50,"PREFERENCES.TIMEZONE")),t.s9C("defaultValue",r.defaultTimeZone),t.Q6J("options",r.timeZoneOptions),t.xp6(3),t.s9C("placeholder",t.lcZ(33,52,"COMMON_FIELDS.END_DATE")),t.s9C("defaultDate",r.endDate),t.xp6(3),t.hij(" ",t.lcZ(36,54,r.error1)," "),t.xp6(3),t.s9C("label",t.lcZ(40,56,"CONTRACTS.PAYMENT_TERMS")),t.s9C("defaultValue",r.defaultPaymentTerms),t.Q6J("options",r.paymentTermsOptions),t.xp6(4),t.s9C("label",t.lcZ(44,58,"CONTRACTS.PERIOD_AMOUNT")),t.s9C("value",r.defaultPeriodAmount),t.Q6J("maxlength",5),t.xp6(4),t.s9C("label",t.lcZ(48,60,"COMMON_FIELDS.CURRENCY")),t.s9C("defaultValue",r.defaultCurrency),t.Q6J("options",r.currencyOptions),t.xp6(4),t.Q6J("options",r.checkboxOptions)("checked",r.isEnabled),t.xp6(2),t.s9C("label",t.lcZ(54,62,"COMMON_FIELDS.NOTES")),t.s9C("defaultvalue",r.defaultDescription),t.Q6J("maxlength",2e3),t.xp6(4),t.hij(" ",t.lcZ(57,64,r.error)," "),t.xp6(3),t.s9C("label",t.lcZ(60,66,"COMMON_BUTTONS.BUTTON_SUBMIT")),t.xp6(2),t.s9C("label",t.lcZ(62,68,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[I.r,V.a,B.b,e.Q,q.R,Z.K,R.C,k.q,d.X$]})}return c})();class pe{amount_per_period;client;contract_name;contract_number;contract_type;currency_code;description;end_date;enterprise;is_enabled;licensing_mode;payment_terms;start_date}var J=u(15439),G=u(42863),le=u(47561),W=u(30578),he=u(11735),me=u(68896);let Se=(()=>{class c extends le.O{Contractservice;columnsheaders;loggerService;navigationService;router;uiUtils;commonService;route;translateService;actionType;attachmentColumnHeaders=[];attachmentsData;checkboxOptions;contractCreateObj;contractEditObj=new ge;contractViewData;createdUser;creationDate;defaultContractNumber;defaultEndDate;defaultStartDate;defaultTimeZone;description;enterpriseData;enterpriseId;enterpriseName;enterpriseShortName;error;isEnabled;lastUpdateDate;lastUpdatedUser;loginUserDateFormat;objectType;periodAmount;recordId;spinner=!0;startDate;statsEndData;statsFlag=!1;timeZoneOptions;totalRecords;utcTimeZone;utcTimeZoneString;dataJsonObj={};constructor(i,l,r,h,m,S,T,O,y){super(O,T),this.Contractservice=i,this.columnsheaders=l,this.loggerService=r,this.navigationService=h,this.router=m,this.uiUtils=S,this.commonService=T,this.route=O,this.translateService=y}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=g.hf.CLIENT_CONTRACTS,this.commonService.trackView(g.sn.CLIENT_CONTRACT_EDIT),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.RECORD_HISTORY),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT_CONTRACT",value:this.dataJsonObj.sportRecordData.display_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}];const i=JSON.parse(localStorage.getItem(g.BU.TIMEZONE_OBJ));this.defaultTimeZone=i.lookup_name;const h=i.description.split("(UTC")[1].split(")");this.utcTimeZone=h[0],this.objectType=this.route.snapshot.data.object_type,this.utcTimeZoneString=h[0].toString();const m=JSON.parse(localStorage.getItem(g.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(m.lookup_id),this.attachmentColumnHeaders=this.columnsheaders.getAttachmentsColumnHeaders(),this.actionType=g.In.EDIT,this.route.params.subscribe(S=>{this.recordId=S.id}),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.getRecordById(this.recordId),this.getAttachmentsList()}getRecordById(i){try{this.Contractservice.get(i).subscribe(l=>{this.contractViewData=l,this.enterpriseData=this.contractViewData.enterprise,this.enterpriseId=this.contractViewData.enterprise.enterprise_id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(r=>{this.dataJsonObj.lookupCodesListJSON=r,this.getTimeZoneOptions(this.defaultTimeZone)}),this.enterpriseName=this.contractViewData.enterprise.enterprise_name,this.enterpriseShortName=this.contractViewData.enterprise.short_name,this.defaultContractNumber=this.contractViewData.contract_number,this.statsEndData=this.contractViewData.end_date,this.defaultStartDate=J(this.contractViewData.start_date).format(this.loginUserDateFormat),this.startDate=this.contractViewData.start_date,this.defaultEndDate=J(this.contractViewData.end_date).format("YYYY-MM-DD"),this.periodAmount=this.contractViewData.amount_per_period.toLocaleString(void 0,{minimumFractionDigits:2}),this.createdUser=this.contractViewData.created_by,this.lastUpdatedUser=this.contractViewData.updated_by,this.isEnabled=this.contractViewData.is_enabled},l=>{this.loggerService.setLoggerError(this.constructor.name,"get",l)})}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",l)}}cancel(){this.commonService.redirectToPreviousUrl()}changeEnabledvalue(i){i&&(this.isEnabled=i.value)}getAttachmentsList(){this.commonService.getAttachmentsList(this.objectType,this.recordId,"","","").then(i=>{if(i.rows.length>0)for(let l=0;l<i.rows.length;l++)i.rows[l].user_name=i.rows[l].f_name+", "+i.rows[l].l_name,i.rows[l].last_uploaded_date=this.commonService.dbTimezoneFormat(i.rows[l].last_uploaded_date),this.attachmentsData=i.rows;else this.attachmentsData=[];this.totalRecords=i.totalCount,this.spinner=!1}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",i)})}getTimeZoneOptions(i){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[g.ox.TIME_ZONES],i).then(l=>{if(this.timeZoneOptions=l,this.timeZoneOptions.length>0){for(let r=0;r<this.timeZoneOptions.length;r++)this.timeZoneOptions[r].NAME=this.timeZoneOptions[r].NAME+" - "+this.timeZoneOptions[r].description;this.timeZoneOptions=this.timeZoneOptions}}).catch(l=>{this.loggerService.setLoggerError(this.constructor.name,"getTimeZoneOptions",l)})}changeTimeZone(i){try{this.defaultTimeZone=i.lookup_name;const h=i.description.split("(UTC")[1].split(")");this.utcTimeZone=h[0],this.utcTimeZoneString=h[0].toString()}catch(l){this.loggerService.setLoggerError(this.constructor.name,"changeTimeZone",l)}}changeEndDate(i){this.statsFlag=!0,this.defaultEndDate=i.value,this.error=""}updateRecord(){try{new Date(this.defaultEndDate)<new Date(this.startDate)?this.error=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START"):(this.contractEditObj.enterprise={enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},this.contractEditObj.is_enabled=this.isEnabled,this.contractEditObj.end_date=!0===this.statsFlag?this.commonService.convertToUtcTimeZone(this.defaultEndDate,this.utcTimeZoneString):this.statsEndData,this.Contractservice.update(this.recordId,this.contractEditObj).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},i=>{this.commonErrorCodes(JSON.parse(i)),this.loggerService.setLoggerError(this.constructor.name,"update",i)}))}catch(i){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",i)}}commonErrorCodes(i){409===JSON.parse(i[g.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_CONTRACT_ALREADY_EXIST"))}static \u0275fac=function(l){return new(l||c)(t.Y36(N),t.Y36(G.Y),t.Y36(L.m),t.Y36(b.f),t.Y36(M.F0),t.Y36(E.s),t.Y36(A.v),t.Y36(M.gz),t.Y36(d.sK))};static \u0275cmp=t.Xpm({type:c,selectors:[["app-clientcontract-edit"]],features:[t._Bn([W.v,A.v,E.s,N,G.Y]),t.qOj],decls:64,vars:78,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["mandatory","true","disabled","true","id","clientcontracts-edit-enterprisename",3,"label","value"],["disabled","true","id","clientcontracts-edit-contractname",3,"label","value"],["disabled","true","id","clientcontracts-view-clientname",3,"label","value"],["disabled","true","id","clientcontracts-edit-contractid",3,"label","value"],["mandatory","false","disabled","true","mandatory","true","id","clientcontracts-edit-type",3,"label","value"],["mandatory","false","disabled","true","mandatory","true","id","clientcontracts-edit-startdate",3,"label","value"],[1,"row"],[1,"col-8","col-md-8","pe-0"],["mandatory","true","dateformat","dd-MMM-yyyy","disabled","false","id","clientcontracts-edit-enddate",3,"placeholder","defaultDate","dateChangeValue"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"col-4","col-md-4","ps-2"],["id","clientcontracts-edit-timezone",3,"label","options","defaultValue","selectedOption","searchValueChange"],["mandatory","false","disabled","true","mandatory","true","id","clientcontracts-edit-paymentterms",3,"label","value"],["mandatory","true","id","clientcontracts-edit-periodamount","disabled","true",3,"label","value"],["mandatory","false","mandatory","true","id","clientcontracts-edit-currency","disabled","true",3,"label","value"],[1,"col-md-8"],["mandatory","false","disabled","true","id","clientcontracts-edit-notes",3,"label","defaultvalue","maxlength"],[1,"col-md-2","d-flex","align-items-center"],["label","","id","clientcontracts-edit-enabled","mandatory","false",3,"options","checked","valueChange"],[1,"col-md-10","text-end","mt-2","btns-group"],["className","btn btn-primary btn-sm","id","clientcontracts-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","clientcontracts-edit-cancel",3,"label","buttonOnClick"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],["id","editattachmentId"],[3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","creationDate","showrecordhistory","lastUpdatedDate"]],template:function(l,r){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"app-pageheader",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9),t._UZ(10,"app-input",10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-input",11),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",9),t._UZ(16,"app-input",12),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",9),t._UZ(19,"app-input",13),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",9),t._UZ(22,"app-input",14),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",9),t._UZ(25,"app-input",15),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",9)(28,"div",16)(29,"div",17)(30,"app-datepicker",18),t.NdJ("dateChangeValue",function(m){return r.changeEndDate(m)}),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",19),t._uU(33),t.ALo(34,"translate"),t.qZA()(),t.TgZ(35,"div",20)(36,"app-dropdown-search",21),t.NdJ("selectedOption",function(m){return r.changeTimeZone(m)})("searchValueChange",function(m){return r.getTimeZoneOptions(m)}),t.ALo(37,"translate"),t.qZA()()()(),t.TgZ(38,"div",9),t._UZ(39,"app-input",22),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"div",9),t._UZ(42,"app-input",23),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"div",9),t._UZ(45,"app-input",24),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",25),t._UZ(48,"app-textarea",26),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"div",27)(51,"app-checkbox",28),t.NdJ("valueChange",function(m){return r.changeEnabledvalue(m)}),t.qZA()(),t.TgZ(52,"div",29)(53,"app-button",30),t.NdJ("buttonOnClick",function(){return r.updateRecord()}),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"app-button",31),t.NdJ("buttonOnClick",function(){return r.cancel()}),t.ALo(56,"translate"),t.qZA()()()()()(),t.TgZ(57,"div",3)(58,"div",32)(59,"div",33)(60,"p-accordion",34)(61,"p-accordion",35),t._UZ(62,"app-attachment",36),t.qZA(),t._UZ(63,"app-recordhistory",37),t.qZA()()()()()()()),2&l&&(t.xp6(6),t.Q6J("pageName",r.dataJsonObj.pageName)("pageTitle",r.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),t.xp6(4),t.s9C("label",t.lcZ(11,48,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",r.enterpriseShortName),t.xp6(3),t.s9C("label",t.lcZ(14,50,"CONTRACTS.CONTRACT_NAME")),t.s9C("value",null==r.contractViewData?null:r.contractViewData.contract_name),t.xp6(3),t.s9C("label",t.lcZ(17,52,"COMMON_PAGE_TITLES.WORK_CLIENT")),t.s9C("value",null==r.contractViewData?null:r.contractViewData.client.client_name),t.xp6(3),t.s9C("label",t.lcZ(20,54,"CONTRACTS.CONTRACT_NUMBER")),t.s9C("value",null==r.contractViewData?null:r.contractViewData.contract_number),t.xp6(3),t.s9C("label",t.lcZ(23,56,"COMMON_FIELDS.TYPE")),t.s9C("value",r.lookupLanguageTranslations(null==r.contractViewData||null==r.contractViewData.contract_type?null:r.contractViewData.contract_type.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(26,58,"COMMON_FIELDS.START_DATE")),t.s9C("value",r.defaultStartDate),t.xp6(5),t.s9C("placeholder",t.lcZ(31,60,"COMMON_FIELDS.END_DATE")),t.s9C("defaultDate",r.defaultEndDate),t.xp6(3),t.hij(" ",t.lcZ(34,62,r.error)," "),t.xp6(3),t.s9C("label",t.lcZ(37,64,"PREFERENCES.TIMEZONE")),t.s9C("defaultValue",r.defaultTimeZone),t.Q6J("options",r.timeZoneOptions),t.xp6(3),t.s9C("label",t.lcZ(40,66,"CONTRACTS.PAYMENT_TERMS")),t.s9C("value",r.lookupLanguageTranslations(null==r.contractViewData||null==r.contractViewData.payment_terms?null:r.contractViewData.payment_terms.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(43,68,"CONTRACTS.PERIOD_AMOUNT")),t.s9C("value",r.periodAmount),t.xp6(3),t.s9C("label",t.lcZ(46,70,"COMMON_FIELDS.CURRENCY")),t.s9C("value",r.lookupLanguageTranslations(null==r.contractViewData||null==r.contractViewData.currency_code?null:r.contractViewData.currency_code.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(49,72,"COMMON_FIELDS.NOTES")),t.s9C("defaultvalue",null==r.contractViewData?null:r.contractViewData.description),t.Q6J("maxlength",2e3),t.xp6(3),t.Q6J("options",r.checkboxOptions)("checked",r.isEnabled),t.xp6(2),t.s9C("label",t.lcZ(54,74,"COMMON_BUTTONS.BUTTON_SUBMIT")),t.xp6(2),t.s9C("label",t.lcZ(56,76,"COMMON_BUTTONS.BUTTON_CANCEL")),t.xp6(5),t.Q6J("multiple",!0),t.xp6(2),t.Q6J("header",r.attachmentColumnHeaders)("data",r.attachmentsData)("totalRecords",r.totalRecords)("objectType",r.objectType)("objectId",r.recordId)("actionType",r.actionType)("spinner",r.spinner),t.xp6(1),t.Q6J("createdBy",r.createdUser)("lastUpdatedBy",r.lastUpdatedUser)("creationDate",null==r.contractViewData?null:r.contractViewData.createdAt)("showrecordhistory",r.dataJsonObj.showrecordhistory)("lastUpdatedDate",null==r.contractViewData?null:r.contractViewData.updatedAt))},dependencies:[D.UQ,I.r,V.a,B.b,e.Q,q.R,R.C,he.W,me.Y,k.q,d.X$]})}return c})();class ge{end_date;enterprise;is_enabled}var Ce=u(15861),Oe=u(71238);let ye=(()=>{class c extends le.O{apiEndPointUrl;_sharedService;columnsheaders;loggerService;navigationService;router;translateService;Contractservice;commonService;listingVariables;route;actionType;apiEndPoint;attachmentColumnHeaders;attachmentsData;checkboxOptions;contractNumber;contractViewData;createdUser;creationDate;defaultTimeZone;endDate;isEnabled;lastUpdateDate;lastUpdatedUser;loginUserDateFormat;objectType;periodAmount;show;recordId;spinner=!0;startDate;totalRecords;utcTimeZone;utcTimeZoneString;dataJsonObj={};constructor(i,l,r,h,m,S,T,O,y,P,w){super(w,y),this.apiEndPointUrl=i,this._sharedService=l,this.columnsheaders=r,this.loggerService=h,this.navigationService=m,this.router=S,this.translateService=T,this.Contractservice=O,this.commonService=y,this.listingVariables=P,this.route=w,this.route.queryParams.subscribe(F=>{this.dataJsonObj.queryParamsObj={defaultView:F.defaultView,selectedMenuId:F.selectedMenuId,selectedSubMenuId:F.selectedSubMenuId}})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=g.hf.CLIENT_CONTRACTS,this.apiEndPoint=localStorage.getItem(g.BU.S3_URL)?localStorage.getItem(g.BU.S3_URL):this.apiEndPointUrl,this.commonService.trackView(g.sn.CLIENT_CONTRACT_VIEW),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.RECORD_HISTORY),this.show=!0,this.objectType=this.route.snapshot.data.object_type,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_CLIENT_CONTRACT",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.route.params.subscribe(T=>{this.recordId=T.id}),this._sharedService.emitChangeLoaders(!0),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}];const i=JSON.parse(localStorage.getItem(g.BU.TIMEZONE_OBJ));this.defaultTimeZone=i.lookup_name;const h=i.description.split("(UTC")[1].split(")");this.utcTimeZone=h[0],this.utcTimeZoneString=h[0].toString();const m=JSON.parse(localStorage.getItem(g.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(m.lookup_id),this.getRecordById(this.recordId),this.actionType=g.In.VIEW,this.attachmentColumnHeaders=this.columnsheaders.getAttachmentsColumnHeaders(),this.getAttachmentsList(),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(g.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=g.hf.CLIENT_CONTRACTS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(i){var l=this;return(0,Ce.Z)(function*(){for(let r of i)l.dataJsonObj[r.storingFieldName]=yield l.commonService.getDynamicJson(l.dataJsonObj.enterpriseId,r.folderName,r.jsonType);l.dataJsonObj.selectedObj={},l.dataJsonObj.selectedObj.recordId=l.recordId,l.dataJsonObj.selectedObj.pageObj=l.dataJsonObj.menuDataJson.filter(r=>r.menu_page.page_name===l.dataJsonObj.selectedPage),l.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(i){try{this.Contractservice.get(i).subscribe(l=>{this.contractViewData=l,this.contractNumber=this.contractViewData.contract_number,this.startDate=J(this.contractViewData.start_date).format(this.loginUserDateFormat),this.endDate=J(this.contractViewData.end_date).format(this.loginUserDateFormat),this.periodAmount=this.contractViewData.amount_per_period.toLocaleString(void 0,{minimumFractionDigits:2}),this.creationDate=this.contractViewData.createdAt,this.createdUser=this.contractViewData.created_by,this.lastUpdatedUser=this.contractViewData.updated_by,this.lastUpdateDate=this.contractViewData.updatedAt,this.isEnabled=this.contractViewData.is_enabled},l=>{this.loggerService.setLoggerError(this.constructor.name,"get",l)})}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",l)}}getAttachmentsList(){try{this.commonService.getAttachmentsList(this.objectType,this.recordId,"","","").then(i=>{if(this._sharedService.emitChangeLoaders(!1),i.rows.length>0)for(let l=0;l<i.rows.length;l++)i.rows[l].user_name=i.rows[l].f_name+", "+i.rows[l].l_name,i.rows[l].last_uploaded_date=this.commonService.dbTimezoneFormat(i.rows[l].last_uploaded_date),this.attachmentsData=i.rows;else this.attachmentsData=[];this.totalRecords=i.totalCount,this.spinner=!1}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",i)}}close(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(l){return new(l||c)(t.Y36("apiEndPoint"),t.Y36(Oe.F),t.Y36(G.Y),t.Y36(L.m),t.Y36(b.f),t.Y36(M.F0),t.Y36(d.sK),t.Y36(N),t.Y36(A.v),t.Y36(W.v),t.Y36(M.gz))};static \u0275cmp=t.Xpm({type:c,selectors:[["app-clientcontract-view"]],features:[t._Bn([W.v,A.v,G.Y,E.s,N]),t.qOj],decls:54,vars:69,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","contracts-view-enterprisesname",3,"label","value"],["disabled","true","id","clientcontracts-view-contractname",3,"label","value"],["disabled","true","id","clientcontracts-view-clientname",3,"label","value"],["disabled","true","id","clientcontracts-view-contractID",3,"label","value"],["disabled","true","id","clientcontracts-view-type",3,"label","value"],["disabled","true","id","clientcontracts-view-satrtdate",3,"label","value"],["disabled","true","id","clientcontracts-view-enddate",3,"label","value"],["disabled","true","id","clientcontracts-view-paymentterms",3,"label","value"],["disabled","true","id","clientcontracts-view-periodamount",3,"label","value"],["disabled","true","id","clientcontracts-view-currency",3,"label","value"],[1,"col-md-1","d-flex","align-items-center"],["label","","disabled","true","id","clientcontracts-view-enabled","mandatory","false",3,"options","checked"],[1,"col-md-10"],["mandatory","false","disabled","true","id","clientcontracts-view-notes",3,"label","defaultvalue","maxlength"],[1,"col-md-2","text-end","mt-2"],["id","clientcontracts-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],["id","viewattachmentId"],[3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(l,r){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"app-pageheader",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9),t._UZ(10,"app-input",10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-input",11),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",9),t._UZ(16,"app-input",12),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",9),t._UZ(19,"app-input",13),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",9),t._UZ(22,"app-input",14),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",9),t._UZ(25,"app-input",15),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",9),t._UZ(28,"app-input",16),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",9),t._UZ(31,"app-input",17),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",9),t._UZ(34,"app-input",18),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"div",9),t._UZ(37,"app-input",19),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"div",20),t._UZ(40,"app-checkbox",21),t.qZA(),t.TgZ(41,"div",22),t._UZ(42,"app-textarea",23),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"div",24)(45,"app-button",25),t.NdJ("buttonOnClick",function(){return r.close()}),t.ALo(46,"translate"),t.qZA()()()()()(),t.TgZ(47,"div",3)(48,"div",4)(49,"div",26)(50,"p-accordion",27)(51,"p-accordion",28),t._UZ(52,"app-attachment",29),t.qZA(),t._UZ(53,"app-recordhistory",30),t.qZA()()()()()()()),2&l&&(t.xp6(6),t.Q6J("pageName",r.dataJsonObj.pageName)("pageTitle",r.dataJsonObj.pageTitle)("selectedMenuId",null==r.dataJsonObj.queryParamsObj?null:r.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==r.dataJsonObj.queryParamsObj?null:r.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),t.xp6(4),t.s9C("label",t.lcZ(11,45,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",null==r.contractViewData||null==r.contractViewData.enterprise?null:r.contractViewData.enterprise.short_name),t.xp6(3),t.s9C("label",t.lcZ(14,47,"CONTRACTS.CONTRACT_NAME")),t.s9C("value",null==r.contractViewData?null:r.contractViewData.contract_name),t.xp6(3),t.s9C("label",t.lcZ(17,49,"COMMON_PAGE_TITLES.WORK_CLIENT")),t.s9C("value",null==r.contractViewData?null:r.contractViewData.client.client_name),t.xp6(3),t.s9C("label",t.lcZ(20,51,"CONTRACTS.CONTRACT_NUMBER")),t.s9C("value",null==r.contractViewData?null:r.contractViewData.contract_number),t.xp6(3),t.s9C("label",t.lcZ(23,53,"COMMON_FIELDS.TYPE")),t.s9C("value",r.lookupLanguageTranslations(null==r.contractViewData?null:r.contractViewData.contract_type.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(26,55,"COMMON_FIELDS.START_DATE")),t.s9C("value",r.startDate),t.xp6(3),t.s9C("label",t.lcZ(29,57,"COMMON_FIELDS.END_DATE")),t.s9C("value",r.endDate),t.xp6(3),t.s9C("label",t.lcZ(32,59,"CONTRACTS.PAYMENT_TERMS")),t.s9C("value",r.lookupLanguageTranslations(null==r.contractViewData?null:r.contractViewData.payment_terms.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(35,61,"CONTRACTS.PERIOD_AMOUNT")),t.s9C("value",r.periodAmount),t.xp6(3),t.s9C("label",t.lcZ(38,63,"COMMON_FIELDS.CURRENCY")),t.s9C("value",r.lookupLanguageTranslations(null==r.contractViewData?null:r.contractViewData.currency_code.lookup_id)),t.xp6(3),t.Q6J("options",r.checkboxOptions)("checked",r.isEnabled),t.xp6(2),t.s9C("label",t.lcZ(43,65,"COMMON_FIELDS.NOTES")),t.s9C("defaultvalue",null==r.contractViewData?null:r.contractViewData.description),t.Q6J("maxlength",2e3),t.xp6(3),t.s9C("label",t.lcZ(46,67,"COMMON_BUTTONS.BUTTON_CLOSE")),t.xp6(5),t.Q6J("multiple",!0),t.xp6(2),t.Q6J("header",r.attachmentColumnHeaders)("data",r.attachmentsData)("totalRecords",r.totalRecords)("objectType",r.objectType)("objectId",r.recordId)("actionType",r.actionType)("spinner",r.spinner),t.xp6(1),t.Q6J("createdBy",r.createdUser)("lastUpdatedBy",r.lastUpdatedUser)("showrecordhistory",r.dataJsonObj.showrecordhistory)("creationDate",r.creationDate)("lastUpdatedDate",r.lastUpdateDate))},dependencies:[D.UQ,I.r,V.a,B.b,q.R,he.W,me.Y,k.q,d.X$]})}return c})();var oe=u(28168),be=u(34942),Ae=u(70057),Ne=u(88425);const Ee=["datatableComponent"];let Ie=(()=>{class c extends le.O{ColumnHeader;Contractservice;actionSheetController;loggerService;router;translateService;uiUtils;commonService;listingVariables;route;datatablecomponent;actionBoolean;actionSheet;actionStatus;actions;activeObj;checkId;clientContractObj;contractsListData;contractsMobileListData;contractsStatsObj=new fe;datatableComponent;enabledFlag=!1;enterpriseId;eventClickData;header;isFilterClicked=!1;loginUserDateFormat;mobileRoutesArray=[];noDuplicates=void 0;objectType;parentId;show=!0;searchString;statsContractsListData;status;statusObj;statusObjs;userId;value;dataJsonObj={};set data(i){this.value=i,this.value&&(this.userId=this.value.userId,this.enterpriseId=this.value.enterpriseId,this.enabledFlag=!0,this.getAllRecords())}constructor(i,l,r,h,m,S,T,O,y,P){super(P,O),this.ColumnHeader=i,this.Contractservice=l,this.actionSheetController=r,this.loggerService=h,this.router=m,this.translateService=S,this.uiUtils=T,this.commonService=O,this.listingVariables=y,this.route=P,this.route.params.subscribe(w=>{this.parentId=w.parentId}),this.route.queryParams.subscribe(w=>{this.dataJsonObj.queryParamsObj={defaultView:w.default_view,selectedMenuId:w.selectedMenuId,selectedSubMenuId:w.selectedSubMenuId}})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=g.hf.CLIENT_CONTRACTS,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.WORK_CLIENT_CONTRACT",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:g.hf,pageSettingEnum:g.AM,pageSettingFieldsEnum:g.In},this.commonService.trackView(g.sn.CLIENT_CONTRACT_LIST),this.objectType=this.route.snapshot.data.object_type,this.enterpriseId=localStorage.getItem(g.BU.SELECTED_ENTERPRISE);const i=JSON.parse(localStorage.getItem(g.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(i.lookup_id),this.header=this.ColumnHeader.getClientContractColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.actionBoolean=!(!this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.ACTIVATE)||!this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.INACTIVATE)),this.actions={EDIT:this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.EDIT),CHECKBOX:this.actionBoolean},this.show=this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.STATS),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.FILTERS)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:g.gL.URL,redirectURL:"/workclients/"+this.parentId+"/workclientcontracts/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.FILTERS)}ionViewWillEnter(){this.statsContractsListData=be.h.getClientContractsListStats(this.isFilterClicked,this.eventClickData)}getSearchResult(i){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=i,this.getAllRecords(),this.datatablecomponent.reset()}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatablecomponent.reset()}getAllRecords(){try{const i=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.status=this.statusObj,this.activeObj=this.statusObjs,this.Contractservice.getAll(this.enterpriseId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.status,this.isFilterClicked,this.activeObj,i,this.parentId,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(r=>{if(r.rows.length>0){this.contractsMobileListData&&this.contractsMobileListData.length>0||(this.contractsMobileListData=[]);for(let h=0;h<r.rows.length;h++){r.rows[h].imageName=r.rows[h].contract_name,r.rows[h].start_date=J(r.rows[h].start_date).format(this.loginUserDateFormat),r.rows[h].end_date=J(r.rows[h].end_date).format(this.loginUserDateFormat);const m={url:`workclients/${r.rows[h]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},S=m.queryParams&&Object.keys(m.queryParams).length>0?`${m.url}?${JSON.stringify(m.queryParams)}`:m.url;r.rows[h].contract_number=`<a class="enable" id="contract_number${r.rows[h]._id}" href=${S}>${r.rows[h].contract_number}`,r.rows[h].enterprise.short_name=r.rows[h].enterprise.short_name,r.rows[h].payment_terms.lookup_id=r.rows[h].payment_terms.lookup_id,r.rows[h].is_enabled=!0===r.rows[h].is_enabled?"Yes":"No",this.contractsMobileListData=this.contractsMobileListData.filter(T=>T._id!==r.rows[h]._id),this.contractsMobileListData.push(r.rows[h])}r.totalCount&&(this.listingVariables.totalRecords=r.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=r.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.contractsListData=this.contractsListData.concat(r.rows)):this.contractsListData=r.rows}else this.contractsListData=[],this.contractsMobileListData=[]},r=>{this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",r)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",i)}}loadPageData(i){this.listingVariables.pageNumbers=i.listingVariables.pageNumbers,i.clearMobileData&&(this.contractsMobileListData=this.noDuplicates),i.isPaginationChange&&(this.dataJsonObj.selectedFilter=i.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=i.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=i.selectedAdvancedSearchObj),this.getAllRecords()}toggle(){this.show=!this.show}onActionClicked(i){i.action===g.A0.EDIT?(this.router.navigate(["/workclients/"+i.data._id+"/contracts/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("clientcontracts")):i.action===g.A0.CHECKBOX&&(this.actionStatus=i.data.isEnabled,this.checkId=i.data._id,this.Contractservice.update(this.checkId,{is_enabled:this.actionStatus,enterprise:{enterprise_id:i.data.enterprise.enterprise_id,enterprise_name:i.data.enterprise.enterprise_name,short_name:i.data.enterprise.short_name}}).then(r=>{this.uiUtils.displaytoastMessage(!0===this.actionStatus?"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE":"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("clientcontracts"),this.getAllRecords()}).catch(r=>{this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",r)}))}mobileEventAction(i){this.mobileRoutesArray=[],!1===i.isEnabled&&!0===this.actionBoolean&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{this.actionStatus=!i.isEnabled,this.checkId=i._id,this.Contractservice.update(this.checkId,{is_enabled:this.actionStatus,enterprise:{enterprise_id:i.enterprise.enterprise_id,enterprise_name:i.enterprise.enterprise_name,short_name:i.enterprise.short_name}}).then(r=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("clientcontracts"),this.getAllRecords()})}}),this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.EDIT)&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["/workclients/"+i._id+"/contracts/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("clientcontracts")}}),!0===i.isEnabled&&!0===this.actionBoolean&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{this.actionStatus=!i.isEnabled,this.checkId=i._id,this.Contractservice.update(this.checkId,{is_enabled:this.actionStatus,enterprise:{enterprise_id:i.enterprise.enterprise_id,enterprise_name:i.enterprise.enterprise_name,short_name:i.enterprise.short_name}}).then(r=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("clientcontracts"),this.getAllRecords()})}}),this.roleRightsValidationByPage(g.hf.CLIENT_CONTRACTS,g.AM.ACTIONS,g.In.VIEW)&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",i._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.actionSheet&&this.actionSheet.dismiss(),this.presentActionSheet(i)}presentActionSheet(i){var l=this;return(0,Ce.Z)(function*(){try{l.mobileRoutesArray.length>0?(l.actionSheet=yield l.actionSheetController.create({cssClass:"actionsheet",buttons:l.mobileRoutesArray}),yield l.actionSheet.present()):l.uiUtils.displayWarningMessage(l.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_PERFORM_ACTIONS"))}catch(r){l.loggerService.setLoggerError(l.constructor.name,"presentActionSheet",r)}})()}create(){this.router.navigate(["/workclients/"+this.parentId+"/workclientcontracts/create"])}statsDisabled(i,l,r,h,m,S){try{this.clientContractObj=[],this.clientContractObj.push(0!==i?{value1:"TOTAL_CONTRACTS"}:{value1:""}),this.clientContractObj.push(0!==l?{value2:"TOTAL_CONTRACTS_ACTIVE"}:{value2:""}),this.clientContractObj.push(0!==r?{value3:"TOTAL_CONTRACTS_CLOSED"}:{value3:""}),this.clientContractObj.push(0!==h?{value4:"TOTAL_CONTRACTS_IN_LAST_60_DAYS"}:{value4:""}),this.clientContractObj.push(0!==m?{value5:"TOTAL_CONTRACTS_IN_LAST_120_DAYS"}:{value5:""}),this.clientContractObj.push(0!==S?{value6:"TOTAL_CONTRACTS_IN_LAST_365_DAYS"}:{value6:""}),this.statsContractsListData=be.h.getClientContractsListStatsDisabled(this.isFilterClicked,"",this.clientContractObj)}catch(T){this.loggerService.setLoggerError(this.constructor.name,"statsDisabled",T)}}statsData(i){try{this.isFilterClicked=!0,this.statusObj=i.value,this.listingVariables.pageNumbers=1,this.datatablecomponent.reset(),this.contractsMobileListData=[],this.getAllRecords()}catch(l){this.loggerService.setLoggerError(this.constructor.name,"statsData",l)}}selectedViewType(i){this.dataJsonObj.selectedDisplayView=i}selectedFilterType(i){i?this.dataJsonObj.selectedFilter=i:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(i){}advancedSearchFilterClicked(i){this.dataJsonObj.selectedAdvancedSearchObj=i}onHeaderItemClick(i){switch(i.type){case"search":this.getSearchResult(i.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(i.event);break;case"filters":this.selectedFilterType(i.event);break;case"advanced_search":this.advancedSearchFilterClicked(i.event);break;case"page_actions":this.onPageLevelActionClicked(i.event)}}static \u0275fac=function(l){return new(l||c)(t.Y36(G.Y),t.Y36(N),t.Y36(Ae.BX),t.Y36(L.m),t.Y36(M.F0),t.Y36(d.sK),t.Y36(E.s),t.Y36(A.v),t.Y36(W.v),t.Y36(M.gz))};static \u0275cmp=t.Xpm({type:c,selectors:[["app-clientcontracts-list"]],viewQuery:function(l,r){if(1&l&&t.Gf(Ee,5),2&l){let h;t.iGM(h=t.CRH())&&(r.datatablecomponent=h.first)}},inputs:{data:"data"},features:[t._Bn([W.v,G.Y,N,E.s,oe.n]),t.qOj],decls:9,vars:32,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",1,"",3,"header","totalRecords","actions","data","expand","totalPages","paginator","mobileListData","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","redirectionEvent","actionClicked","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(l,r){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),t.NdJ("headerItemClick",function(m){return r.onHeaderItemClick(m)}),t.qZA()(),t.TgZ(4,"div",4)(5,"app-datatable",5,6),t.NdJ("redirectionEvent",function(m){return r.mobileEventAction(m)})("actionClicked",function(m){return r.onActionClicked(m)})("changeStats",function(m){return r.statsData(m)})("loadPageData",function(m){return r.loadPageData(m)}),t.qZA(),t.TgZ(7,"div",7)(8,"app-page-actions",8),t.NdJ("selectedAction",function(m){return r.onPageLevelActionClicked(m)}),t.qZA()()()()()),2&l&&(t.xp6(3),t.Q6J("pageName",r.dataJsonObj.pageName)("defaultView",null==r.dataJsonObj.queryParamsObj?null:r.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",r.dataJsonObj.pageActionsList)("pageTitle",r.dataJsonObj.pageTitle)("selectedMenuId",null==r.dataJsonObj.queryParamsObj?null:r.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==r.dataJsonObj.queryParamsObj?null:r.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),t.xp6(2),t.Q6J("header",r.header)("totalRecords",r.listingVariables.totalRecords)("actions",r.actions)("data",r.contractsListData)("expand",!1)("totalPages",r.listingVariables.totalpages)("paginator",!0)("mobileListData",r.contractsMobileListData)("statsDisplay",r.statsContractsListData)("statData",r.contractsStatsObj)("statusDisplay",r.statusObj)("statsShow",r.show)("showRights",r.roleRightsValidationByPage(r.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.CLIENT_CONTRACTS,r.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,r.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",r.searchString)("listingVariables",r.listingVariables)("selectedDisplayViewType",r.dataJsonObj.selectedDisplayView)("selectedFilterType",r.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",r.dataJsonObj.selectedAdvancedSearchObj)("pageName",r.dataJsonObj.pageName)("selectedMenuId",null==r.dataJsonObj.queryParamsObj?null:r.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==r.dataJsonObj.queryParamsObj?null:r.dataJsonObj.queryParamsObj.selectedSubMenuId),t.xp6(3),t.Q6J("isFabDisplay",!0)("actionsList",r.dataJsonObj.pageActionsList))},dependencies:[oe.n,k.q,Ne.y]})}return c})();class fe{TOTAL_CONTRACTS;TOTAL_CONTRACTS_ACTIVE;TOTAL_CONTRACTS_CLOSED;TOTAL_CONTRACTS_IN_LAST_60_DAYS;TOTAL_CONTRACTS_IN_LAST_120_DAYS;TOTAL_CONTRACTS_IN_LAST_365_DAYS}const De=[{path:"",data:{title:"contracts"},children:[{path:"",redirectTo:"workclientsworkclientcontracts-list",pathMatch:"full"},{path:"workclientsworkclientcontracts-list",component:Ie,data:{object_type:g.hf.CLIENT_CONTRACTS,title:"",responsibilityParam:g.bP.MENUS+"."+g.w1.CLIENTS+"."+g.bP.SUBMENUS+"."+g.w1.CLIENT_CONTRACTS+"."+g.Iu.ENABLED,pageName:g.hf.CLIENT_CONTRACTS}},{path:":id/contracts/edit",component:Se,data:{object_type:g.hf.CLIENT_CONTRACTS,title:"",responsibilityParam:g.bP.MENUS+"."+g.w1.CLIENTS+"."+g.bP.SUBMENUS+"."+g.w1.CLIENT_CONTRACTS+"."+g.In.EDIT,pageName:g.hf.CLIENT_BILLS_AND_PAYMENTS,pageSetting:g.AM.ACTIONS,settingField:g.In.EDIT}},{path:"create",component:re,data:{object_type:g.hf.CLIENT_CONTRACTS,title:"",responsibilityParam:g.bP.MENUS+"."+g.w1.CLIENTS+"."+g.bP.SUBMENUS+"."+g.w1.CLIENT_CONTRACTS+"."+g.In.CREATE,pageName:g.hf.CLIENT_CONTRACTS,pageSetting:g.AM.ACTIONS,settingField:g.In.CREATE}},{path:":id/contracts/view",component:ye,data:{object_type:g.hf.CLIENT_CONTRACTS,title:"",responsibilityParam:g.bP.MENUS+"."+g.w1.CLIENTS+"."+g.bP.SUBMENUS+"."+g.w1.CLIENT_CONTRACTS+"."+g.In.VIEW,pageName:g.hf.CLIENT_CONTRACTS,pageSetting:g.AM.ACTIONS,settingField:g.In.VIEW}}]}];let Le=(()=>{class c{static \u0275fac=function(l){return new(l||c)};static \u0275mod=t.oAB({type:c});static \u0275inj=t.cJS({imports:[M.Bz.forChild(De),M.Bz]})}return c})();var Me=u(36895),we=u(32137),ce=u(24006),H=u(3848),Re=u(83748),z=u(10841),_e=u(93144),v=u(65673);let Ue=(()=>{class c{static \u0275fac=function(l){return new(l||c)};static \u0275mod=t.oAB({type:c});static \u0275inj=t.cJS({imports:[Me.ez,d.aw,ce.u5,ce.UX,_e.U$,D.fx,we.D,Le,z.ii,v.Q,H.Nh,Re.v]})}return c})()}}]);