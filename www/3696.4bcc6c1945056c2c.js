"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3696],{3696:(W,g,c)=>{c.r(g),c.d(g,{EventRegistrationsModule:()=>z});var E=c(36895),O=c(93144),f=c(32174),b=c(54463),T=c(65673),I=c(11210),N=c(15861),i=(c(8236),c(32236)),C=c(71568),L=c(27750),v=c(30578),A=c(42786),R=c(46335),D=c(15439),y=c(35226),S=c.n(y),n=c(94650),_=c(62510),M=c(27601),j=c(58153),J=c(37415);const w=["reasonCancel"],U=["transcationTypeValid"],V=["bankNameValid"],B=["Checkamount"],P=["checkNumberValid"],k=["checkCurrency"],F=["cashCurrency"],G=["cashAmount"],x=["facilityAttributesComponent"];function Q(l,X){if(1&l){const t=n.EpF();n.TgZ(0,"div",3)(1,"app-pageheader",4),n.NdJ("headerItemClick",function(a){n.CHM(t);const o=n.oxw();return n.KtG(o.onHeaderItemClick(a))}),n.qZA()()}if(2&l){const t=n.oxw();n.xp6(1),n.Q6J("pageName",t.dataJsonObj.pageName)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1)("isEditActionEnable",t.dataJsonObj.isEditAction)}}const H=[{path:"",data:{title:"Event Registration Pages"},children:[{path:"",redirectTo:"eventregistrations-list",pathMatch:"full"},{path:"eventregistrations-list",canActivate:[I.P],component:(()=>{class l{eventRegistrationsService;loggerService;router;uiUtils;translateService;commonService;listingVariables;location;route;apiEndPointUrl;reasonCancel;transcationTypeValid;bankNameValid;Checkamount;checkNumberValid;checkCurrency;cashCurrency;cashAmount;facilityAttributesComponent;active;activeState="";addressLine1;addressLine2;adminState="";amount;apiEndPoint;attributes=[];bankName;cancelReg;blockState="";cancelReasonObj;channelId;checkNumber;checkStartDate;checkboxOptions;cityName;coordinatorsArr;coordinatorOptions;countryCode;countryCodeSplit;countryName;createdBy;creationDate;checkinFlag=!1;checkoutFlag=!1;currency;defaultReasonCancel;defaultTimeZone;description;duration;email;enterpriseActiveListData;enterpriseBlockedListData;enterpriseId;enterpriseInviteListData;enterpriseRejectListData;enterpriseRequestListData;enterpriseShortName;error;eventCancelObj;eventCoordinator;eventData;eventLocationDisplayName;eventName;eventObj;eventOwnerAutoregister;eventOwner;eventOwnerId;eventRequestData;eventTranscationType;eventTranscationTypeObj;eventType;eventsListData;facilityName;groupName=[];groupNameObj;groupNameOptions;header1;imgFilepath;industryTypeId;invite;inviteAll;inviteState="";lastUpdatedBy;lastUpdatedDate;merchantKey;merchantMid;mobileNumber;otherState="";pageTitle;payRegistrationFee=!0;paymentObj;purpose;reasonCancelOptions;reasonPaymentView=!1;reasonViewEnable=!1;recordData;recordId;registrationFee;reject;rejectState="";request;requestState="";resultObj=[];rowsPerPage;seatLimit;selectTabIndex;selectedEnterpriseId;showRequest;startDate;stateName;status;transactionTypeOptions;transcationDisplayname;transcationName;url;utcTimeZoneString;venue;viewAttributes=[];website;zipCode;hourOptions;selectedDays;selectedMinutes;selectedHours;selectedData;extendEndDate;defaultReasonExtend;extendReasonObj;durationList;reasonViewExtend=!1;durationOptions;closeDate;checkinDateTime;checkoutDateTime;loginUserId;inviteloginUserId;facilitiesViewData;facilityId;coordinatorObjOptions;facilityAttributes=[];viewFacilityAttributes=[];statuses=[i.t3.IS_ACTIVE,i.t3.IS_INVITED,i.t3.IS_CANCELED,i.t3.IS_REQUESTED,i.t3.IS_REJECTED,i.t3.IS_SELF_REJECTED,i.t3.IS_BLOCKED];bufferLimit;advancedReservationWindowInDays;earlyCheckinWindowInMins;expirationGracePeriodInMins;maxReservationWindowInHrs;timezoneOptions;userTimeZoneObj={};currentTime;enableAll=!1;statusForceRefreshJson={};statusJson={};countsJson={};durationObj;defaultDuration;dayOptions;hoursList;isLoginUserCoordinator;dataJsonObj={};totalEventRegnMembers;isSeatLimitExceeded=!1;totalSeatLimit;actions;userCurrentStatus;matTabEnable=!0;noDuplicates;constructor(t,e,a,o,s,r,d,h,m,p){this.eventRegistrationsService=t,this.loggerService=e,this.router=a,this.uiUtils=o,this.translateService=s,this.commonService=r,this.listingVariables=d,this.location=h,this.route=m,this.apiEndPointUrl=p,this.route.queryParams.subscribe(u=>{this.dataJsonObj.queryParamsObj={defaultView:u.defaultView,selectedMenuId:u.selectedMenuId,selectedSubMenuId:u.selectedSubMenuId,status:u.status}}),this.route.params.subscribe(u=>{this.recordId=u.parentId})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=i.hf.EVENT_REGISTRATIONS,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.REGISTRATIONS",value:"",showSubMenuDisplayName:!1}],this.apiEndPoint=localStorage.getItem(i.BU.S3_URL)?localStorage.getItem(i.BU.S3_URL):this.apiEndPointUrl,this.selectedEnterpriseId=localStorage.getItem(i.BU.SELECTED_ENTERPRISE),this.commonService.trackView(i.sn.EVENTS_VIEW),this.url=this.router.url.split("/")[4],this.dataJsonObj.advancedSearchObj={},this.userCurrentStatus={},this.dataJsonObj.tabsList=[{displayName:"COMMON_BLOCK_TITLES.ACTIVE",tabName:i.t3.ACTIVE,field:"is_active",membersCount:0},{displayName:"COMMON_BLOCK_TITLES.REQUESTED",tabName:i.t3.REQUESTED,field:"is_requested",membersCount:0},{displayName:"COMMON_BLOCK_TITLES.INVITED",tabName:i.t3.INVITED,field:"is_invited",membersCount:0},{displayName:"COMMON_BLOCK_TITLES.REJECTED",tabName:i.t3.REJECTED,field:"is_rejected",membersCount:0},{displayName:"COMMON_BLOCK_TITLES.CANCELED",tabName:i.t3.CANCELLED,field:"is_canceled",membersCount:0}],this.dataJsonObj.actionsList=[],this.loginUserId=parseInt(localStorage.getItem(i.BU.LOG_IN_USER_ID),10);const t=this.commonService.getLoginUserTimeZoneDateFormat();this.defaultTimeZone=t.dateFormat,this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(t.timeZoneDescription),this.userTimeZoneObj.timeZoneCode=t.timeZoneCode,this.rowsPerPage=this.listingVariables.rowsPerPage,this.checkStartDate=(new Date).toISOString(),this.dataJsonObj.headers=[[{headersort:"disableth",field:"user",header:this.translateService.instant("COMMON_PAGE_TITLES.PARTICIPANTS"),class:"w-300"},{headersort:"disableth",sortfield:"",field:"email",header:"COMMON_FIELDS.EMAIL",class:"w-200"},{headersort:"disableth",field:"mobile_number",header:this.translateService.instant("COMMON_FIELDS.PHONE_NUMBER"),class:"w-150"},{headersort:"disableth",sortfield:"ACTIONS",field:"COMMON_FIELDS.ACTIONS",header:"COMMON_FIELDS.ACTIONS",class:"w-60"}]],this.statusJson={is_active:"count_active_registrations",is_invited:"count_invited_registrations",is_requested:"count_requested_registrations",is_canceled:"count_cancelled_registrations",is_rejected:"count_rejected_registrations"},this.dataJsonObj.allRegistrationListData=[],this.dataJsonObj.allRegistrationMobileListData=[],this.getRecordById(),this.dataJsonObj.actionsList={CANCEL_PARTICIPATION:!0,CANCEL_REQUEST:!0,ACCEPT_REQUEST:!0,REJECT_REQUEST:!0,CANCEL_INVITE:!0,ACCEPT_INVITE:!0,REJECT_INVITE:!0,RESEND_INVITE:!0,UNDO:!0},this.dataJsonObj.selectedPage=i.hf.EVENTS,this.getDynamicJson([{folderName:i.sb.LOOKUP_CODES,jsonType:"view",storingFieldName:"lookupCodesViewJSON"}])}getDynamicJson(t){var e=this;return(0,N.Z)(function*(){for(let a of t)e.dataJsonObj[a.storingFieldName]=yield e.commonService.getDynamicJson(e.enterpriseId,a.folderName,a.jsonType)})()}getRecordById(){try{this.eventRegistrationsService.getTournamentEvents(this.recordId).subscribe(t=>{if(this.eventsListData=t,this.enterpriseId=this.eventsListData.enterprise.enterprise_id,this.commonService.setCurrentPageTitle(this.eventsListData.iot_event_name,this.recordId),this.eventName=this.eventsListData.iot_event_name,this.commonService.setCurrentPageTitle(this.eventName,this.recordId),this.enterpriseShortName=this.eventsListData.enterprise.short_name,this.eventOwnerId=this.eventsListData.organizer?.user_profile_id._id,this.coordinatorsArr=[],this.eventsListData.coordinators&&this.eventsListData.coordinators.length>0)for(let u=0;u<this.eventsListData.coordinators.length;u++)this.coordinatorsArr.push(this.eventsListData.coordinators[u].user_profile_id._id);if(this.isLoginUserCoordinator=-1!==this.coordinatorsArr.indexOf(this.loginUserId),this.eventOwnerId===this.loginUserId||this.isLoginUserCoordinator){this.dataJsonObj.isTabCountsEnabled=!0;for(let u of this.dataJsonObj.tabsList)switch(u.tabName){case i.t3.ACTIVE:u.membersCount=this.eventsListData.count_active_registrations;break;case i.t3.REQUESTED:u.membersCount=this.eventsListData.count_requested_registrations;break;case i.t3.INVITED:u.membersCount=this.eventsListData.count_invited_registrations;break;case i.t3.REJECTED:u.membersCount=this.eventsListData.count_rejected_registrations;break;case i.t3.CANCELLED:u.membersCount=this.eventsListData.count_cancelled_registrations}}this.inviteAll=this.eventsListData.invite_all;const a=this.displayDateFormatter(this.eventsListData.start_datetime,!1,!0).startDate,s=this.displayDateFormatter(this.eventsListData.end_datetime,!1,!0).startDate,d=this.displayDateFormatter((new Date).toISOString(),!1,!0).startDate,h=this.commonService.getUTCDateObj(a),m=this.commonService.getUTCDateObj(s),p=this.commonService.getUTCDateObj(d);this.eventsListData.is_canceled?(this.status=i.hf.CANCELED,this.eventsListData.status=this.toAddStatuses(!1,!1,!1,!0)):h<=p&&p<m?(this.status=i.hf.IN_PROGRESS,this.eventsListData.status=this.toAddStatuses(!1,!0,!1,!1)):p>=m?(this.status=i.hf.CLOSED,this.eventsListData.status=this.toAddStatuses(!1,!1,!0,!1)):h>p&&(this.status=i.hf.YET_TO_START,this.eventsListData.status=this.toAddStatuses(!0,!1,!1,!1)),this.userCurrentStatus=this.eventsListData.userEventRegistration?this.eventsListData.userEventRegistration.registration_status:"",this.purpose=this.eventsListData.event_purpose,this.description=this.eventsListData.description,this.eventsListData.reason_cancel&&this.eventsListData.reason_cancel.lookup_name&&(this.defaultReasonCancel=this.eventsListData.reason_cancel.lookup_name?this.lookupLanguageTranslations(this.eventsListData.reason_cancel.lookup_id):""),this.dataJsonObj.selectTabIndex=0,this.getDisplayActiosByTab(),this.getAllRecords()},t=>{this.loggerService.setLoggerError(this.constructor.name,"get",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)}}onSelectTab(t){this.dataJsonObj.selectTabIndex=t,this.listingVariables.pageNumbers=1,this.getAllRecords()}getDisplayActiosByTab(){this.dataJsonObj.displayActionsByTab={organizer:{[i.t3.REQUESTED]:["ACCEPT_REQUEST","REJECT_REQUEST"],[i.t3.INVITED]:["CANCEL_INVITE"],[i.t3.REJECTED]:["RESEND_INVITE"]},coordinator:{[i.t3.REQUESTED]:["ACCEPT_REQUEST","REJECT_REQUEST"],[i.t3.INVITED]:["CANCEL_INVITE"],[i.t3.REJECTED]:["RESEND_INVITE"]},[i.t3.REQUESTED]:["CANCEL_REQUEST"],[i.t3.INVITED]:["ACCEPT_INVITE","REJECT_INVITE"],[i.t3.REJECTED]:["UNDO"]}}getAllRecords(){try{const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);1==this.listingVariables.pageNumbers&&(this.dataJsonObj.allRegistrationListData=[],this.dataJsonObj.allRegistrationMobileListData=[]);const e=this.dataJsonObj.tabsList[this.dataJsonObj.selectTabIndex],a=e.tabName;this.inviteloginUserId=this.eventOwnerId===this.loginUserId||this.isLoginUserCoordinator||this.userCurrentStatus.is_active&&a===i.t3.ACTIVE?"":this.loginUserId;const o=!!this.statusForceRefreshJson[a];this.showSpinner(),this.eventRegistrationsService.getEventActiveViewData(this.recordId,e.field,this.enterpriseId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,t,this.inviteloginUserId,o).then(s=>{this.hideSpinner(),this.statusForceRefreshJson[a]=!1;for(let r=0;r<s.rows.length;r++){if(s.rows[r].eventOwnerId=this.eventOwnerId,s.rows[r].tabName=this.eventsListData.tabName,s.rows[r].isCoordinator=this.isLoginUserCoordinator,s.rows[r].accordionStatus=e.field,s.rows[r].status=this.eventsListData.status,s.rows[r].user=this.commonService.changeUserNameFormat(s.rows[r].user_profile.user_profile_id),s.rows[r].email=s.rows[r].user_profile?.user_profile_id?.email,s.rows[r].imageName=s.rows[r].user,s.rows[r].display_grid_title=s.rows[r].user,s.rows[r].imageDisplay=s.rows[r].user_profile?.user_profile_id?.user_image_path&&s.rows[r].user_profile?.user_profile_id?.user_image_name?s.rows[r].user_profile.user_profile_id.user_image_path+"/"+s.rows[r].user_profile.user_profile_id.user_image_name:null,s.rows[r].user_profile.user_profile_id.address.length>0&&(s.rows[r].city=s.rows[r].user_profile.user_profile_id.address[0].city,s.rows[r].state_name=s.rows[r].user_profile.user_profile_id.address[0].state.state_name,s.rows[r].user_profile.user_profile_id.address[0].country&&(s.rows[r].country=this.lookupLanguageTranslations(s.rows[r].user_profile.user_profile_id.address[0].country.lookup_id)),s.rows[r].user_profile.user_profile_id.address[0].mobile_country_code&&s.rows[r].user_profile.user_profile_id.address[0].mobile_number?3===s.rows[r].user_profile.user_profile_id.address[0].mobile_country_code.lookup_name.split("-").length?(this.countryCodeSplit=s.rows[r].user_profile.user_profile_id.address[0].mobile_country_code.lookup_name.split("-")[0]+"-"+s.rows[r].user_profile.user_profile_id.address[0].mobile_country_code.lookup_name.split("-")[1].trim(),s.rows[r].mobile_number=this.countryCodeSplit+"-"+s.rows[r].user_profile.user_profile_id.address[0].mobile_number):(this.countryCodeSplit=s.rows[r].user_profile.user_profile_id.address[0].mobile_country_code.lookup_name.split("-")[0].trim(),s.rows[r].mobile_number=this.countryCodeSplit+"-"+s.rows[r].user_profile.user_profile_id.address[0].mobile_number):s.rows[r].mobile_number=s.rows[r].user_profile.user_profile_id.address[0].mobile_number),a===i.t3.ACTIVE)s.rows[r].displayActionsList=s.rows[r].user_profile.user_profile_id._id===this.loginUserId?["CANCEL_PARTICIPATION"]:[];else if(this.dataJsonObj.displayActionsByTab){const d=this.eventOwnerId===this.loginUserId?"organizer":this.isLoginUserCoordinator?"coordinator":"";s.rows[r].displayActionsList=d?this.dataJsonObj.displayActionsByTab[d]&&this.dataJsonObj.displayActionsByTab[d][a]?this.dataJsonObj.displayActionsByTab[d][a]:[]:s.rows[r].user_profile.user_profile_id._id===this.loginUserId?this.dataJsonObj.displayActionsByTab[a]:[]}for(let d=0;d<this.statuses.length;d++)s.rows[r].registration_status[this.statuses[d]]&&(s.rows[r].registration_status_field=this.statuses[d]);this.dataJsonObj.allRegistrationMobileListData=this.dataJsonObj.allRegistrationMobileListData.filter(d=>d._id!==s.rows[r]._id),this.dataJsonObj.allRegistrationMobileListData.push(s.rows[r])}s.totalCount&&(this.listingVariables.totalRecords=s.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=s.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.dataJsonObj.allRegistrationListData=this.dataJsonObj.allRegistrationListData.concat(s.rows)):this.dataJsonObj.allRegistrationListData=s.rows},s=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getEventActivePagination",s)})}catch(t){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}loadPageData(t){this.dataJsonObj.forceRefresh=t.forceRefresh,this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.dataJsonObj.allRegistrationMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}onItemClicked(t){try{this.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"onItemClicked",e)}}toAddStatuses(t,e,a,o){return{is_yts:t,is_started:e,is_closed:a,is_canceled:o}}getGroupName(t){try{this.eventRegistrationsService.getGroupNames(this.enterpriseId,this.eventOwnerId,t).then(e=>{this.groupNameOptions=[];for(let a=0;a<e.length;a++)for(let o=0;o<this.groupName.length;o++)this.groupName[o]===e[a].ID&&this.groupNameOptions.push(e[a])},e=>{this.loggerService.setLoggerError(this.constructor.name,"getGroupName",e)})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"getGroupName",e)}}commonErrorCodes(t){const e=JSON.parse(t[i.BU.STATUS]);switch(e){case 500:case 404:default:break;case 409:this.error=t.error&&2024===JSON.parse(t.error.code)||t.error&&2020===JSON.parse(t.error.code)?t.error.message:"COMMON_STATUS_CODES."+e}}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",t)}}onActionClicked(t){try{if(t.action===i.A0.CANCEL_PARTICIPATION)this.cancelparticationClicked(t.data);else if(t.action===i.A0.CANCEL_REQUEST)this.cancelEventRequest(t.data);else if(t.action===i.A0.ACCEPT_REQUEST){const e={currentStatus:i.t3.IS_ACTIVE,previousStatus:t.data.registration_status_field,iot_event_id:t.data.iot_event_id,user_profile:t.data.user_profile,enterprise:t.data.enterprise,event_group:this.eventsListData.event_group?this.eventsListData.event_group:{}};this.commonService.validateAccess()?this.commonService.accessDeniedPopup():this.AcceptEvent(e,t.data._id)}else if(t.action===i.A0.REJECT_REQUEST)this.requestactions(t.data,i.t3.IS_REJECTED);else if(t.action===i.A0.CANCEL_INVITE)this.inviteAction({currentStatus:i.t3.IS_CANCELED,previousStatus:t.data.registration_status_field,iot_event_id:t.data.iot_event_id,user_profile:t.data.user_profile,enterprise:t.data.enterprise},i.t3.CANCELLED,t.data._id);else if(t.action===i.A0.ACCEPT_INVITE)this.commonService.numberWithCommas(this.eventsListData.registration_fee?this.eventsListData.registration_fee:0,2)==this.commonService.numberWithCommas(0,2)?this.inviteAction({currentStatus:i.t3.IS_ACTIVE,previousStatus:t.data.registration_status_field,iot_event_id:t.data.iot_event_id,user_profile:t.data.user_profile,enterprise:t.data.enterprise,event_start_date:this.eventsListData.start_datetime,event_end_date:this.eventsListData.end_datetime,duration:this.eventsListData.duration,event_group:this.eventsListData.event_group?this.eventsListData.event_group:{}},i.t3.ACTIVE,t.data._id):this.dataJsonObj.eventStatus=i.t3.ACTIVE;else if(t.action===i.A0.REJECT_INVITE)this.inviteAction({currentStatus:i.t3.IS_REJECTED,previousStatus:t.data.registration_status_field,iot_event_id:t.data.iot_event_id,user_profile:t.data.user_profile,enterprise:t.data.enterprise},i.t3.REJECTED,t.data._id);else if(t.action===i.A0.RESEND_INVITE){let e="";e=i.t3.IS_INVITED,this.inviteAction({currentStatus:e,previousStatus:t.data.registration_status_field,iot_event_id:t.data.iot_event_id,user_profile:t.data.user_profile,enterprise:t.data.enterprise},i.t3.INVITED,t.data._id)}else if(t.action===i.A0.UNDO){let e="";e=i.t3.IS_INVITED,this.inviteAction({currentStatus:e,previousStatus:t.data.registration_status_field,iot_event_id:t.data.iot_event_id,user_profile:t.data.user_profile,enterprise:t.data.enterprise},i.t3.INVITED,t.data._id,"UNDO")}}catch(e){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",e)}}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}getEventMembers(){try{this.eventRegistrationsService.geteventmember(this.recordId,this.loginUserId,localStorage.getItem(i.BU.LOG_IN_ENTERPRISE_ID)).then(t=>{this.resultObj=t.rows,this.resultObj.length&&this.resultObj.length>0?this.showRequest=!1:(this.showRequest=!0,this.matTabEnable=!1)},t=>{this.loggerService.setLoggerError(this.constructor.name,"getEventMembers",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getEventMembers",t)}}displayDateFormatter(t,e,a){try{const o=a?this.commonService.convertDateToUserTimeZone(t,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):t,s={startDate:"",endDate:""};if(s.startDate=this.commonService.convertDateToUserFormat(o,i.eZ.HOURS_MINS,!0,"",!1),e){const r=a?this.commonService.convertDateToUserTimeZone(t,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):t,d=D.utc(r).add(2,"hours");s.endDate=this.commonService.convertDateToUserFormat(d,i.eZ.HOURS_MINS,!0,"",!1)}return s}catch(o){this.loggerService.setLoggerError(this.constructor.name,"displayDateFormatter",o)}}lookupLanguageTranslations(t){return this.dataJsonObj.lookupCodesViewJSON?this.dataJsonObj.lookupCodesViewJSON[t+""]?.lookup_display_name:""}cancelparticationClicked(t){try{S().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_CANCEL_PARTICIPATION"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(e=>{if(e.value){const a={enterprise:t.enterprise,user_profile:{user_profile_id:t.user_profile.user_profile_id._id,f_name:t.user_profile.user_profile_id.f_name,l_name:t.user_profile.user_profile_id.l_name},iot_event_id:t.iot_event_id,currentStatus:i.t3.IS_CANCELED,previousStatus:t.registration_status_field};this.eventRegistrationsService.updatememberstatus(a,t._id).then(o=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CANCEL"),a.previousStatus&&a.currentStatus&&(this.statusJson[a.previousStatus]&&(this.active=this.countsJson[this.statusJson[a.previousStatus]]-1,this.countsJson[this.statusJson[a.previousStatus]]=this.countsJson[this.statusJson[a.previousStatus]]-1),this.statusJson[a.currentStatus]&&(this.cancelReg=this.countsJson[this.statusJson[a.currentStatus]]+1,this.countsJson[this.statusJson[a.currentStatus]]=this.countsJson[this.statusJson[a.currentStatus]]+1)),this.userCurrentStatus[a.previousStatus]=!1,this.userCurrentStatus[a.currentStatus]=!0;const s=this.dataJsonObj.tabsList.findIndex(r=>r.tabName==i.t3.CANCELLED);this.updateTabsCounts(this.dataJsonObj.selectTabIndex,s),this.onSelectTab(s)},o=>{this.commonErrorCodes(JSON.parse(o))})}})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"cancelparticationClicked",e)}}cancelEventRequest(t){try{const e={enterprise:t.enterprise,previousStatus:t.registration_status_field,currentStatus:i.t3.IS_CANCELED,event_group:t.event_group?t.event_group:{},user_profile:t.user_profile,iot_event_id:t.iot_event_id};this.eventRegistrationsService.rejectInvite(e,this.eventsListData._id).then(a=>{this.eventData&&this.dataJsonObj.eventStatus&&(this.dataJsonObj.eventStatus="");const o=this.dataJsonObj.selectTabIndex;this.updateTabsCounts(this.dataJsonObj.selectTabIndex,o),this.userCurrentStatus[e.previousStatus]=!1,this.userCurrentStatus[e.currentStatus]=!0,this.onSelectTab(o)},a=>{this.commonErrorCodes(JSON.parse(a))})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"cancelEventRequest",e)}}AcceptEvent(t,e){try{S().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_ACCEPT_REQUEST"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(a=>{a.value&&this.eventRegistrationsService.rejectInvite(t,e).then(o=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACCEPT");const s=this.dataJsonObj.tabsList.findIndex(r=>r.tabName==i.t3.ACTIVE);this.updateTabsCounts(this.dataJsonObj.selectTabIndex,s),this.userCurrentStatus[t.previousStatus]=!1,this.userCurrentStatus[t.currentStatus]=!0,this.onSelectTab(s)},o=>{this.commonErrorCodes(JSON.parse(o))})})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"AcceptEvent",a)}}requestactions(t,e){try{S().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_REJECT_REQUEST"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(a=>{if(a.value){const o={currentStatus:e,previousStatus:t.registration_status_field,iot_event_id:t.iot_event_id,user_profile:t.user_profile,enterprise:t.enterprise};this.eventRegistrationsService.updatememberstatus(o,t._id).then(s=>{const r=this.dataJsonObj.tabsList.findIndex(d=>d.tabName==i.t3.REJECTED);this.updateTabsCounts(this.dataJsonObj.selectTabIndex,r),this.userCurrentStatus[o.previousStatus]=!1,this.userCurrentStatus[o.currentStatus]=!0,this.onSelectTab(r)},s=>{this.commonErrorCodes(JSON.parse(s))})}})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"requestactions",a)}}inviteAction(t,e,a,o){try{let s="";e===i.t3.ACTIVE?s=this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_ACCEPT_INVITE"):e===i.t3.CANCELLED?s=this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_CANCEL_INVITE"):e===i.t3.REJECTED?s=this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_REJECT_INVITE"):e!==i.t3.INVITED||o?"UNDO"===o&&(s=this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_UNDO_STATUS")):s=this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_RESEND_INVITE"),S().fire({title:"",text:s,showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(r=>{r.value&&this.eventRegistrationsService.rejectInvite(t,a).then(d=>{const h=t.currentStatus!==i.t3.IS_CANCELED?this.dataJsonObj.tabsList.findIndex(m=>m.tabName==e):this.dataJsonObj.selectTabIndex;this.updateTabsCounts(this.dataJsonObj.selectTabIndex,h),this.userCurrentStatus[t.previousStatus]=!1,this.userCurrentStatus[t.currentStatus]=!0,this.onSelectTab(h)},d=>{this.commonErrorCodes(JSON.parse(d))})})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"inviteAction",s)}}updateTabsCounts(t,e){this.dataJsonObj.isTabCountsEnabled&&(this.dataJsonObj.tabsList[t].membersCount--,t!==e&&this.dataJsonObj.tabsList[e].membersCount++)}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}getSearchResult(t){}searchClose(){}static \u0275fac=function(e){return new(e||l)(n.Y36(L.P),n.Y36(A.m),n.Y36(_.F0),n.Y36(M.s),n.Y36(b.sK),n.Y36(C.v),n.Y36(v.v),n.Y36(E.Ye),n.Y36(_.gz),n.Y36("apiEndPoint"))};static \u0275cmp=n.Xpm({type:l,selectors:[["app-event-registrations-list"]],viewQuery:function(e,a){if(1&e&&(n.Gf(w,5),n.Gf(U,5),n.Gf(V,5),n.Gf(B,5),n.Gf(P,5),n.Gf(k,5),n.Gf(F,5),n.Gf(G,5),n.Gf(x,5)),2&e){let o;n.iGM(o=n.CRH())&&(a.reasonCancel=o.first),n.iGM(o=n.CRH())&&(a.transcationTypeValid=o.first),n.iGM(o=n.CRH())&&(a.bankNameValid=o.first),n.iGM(o=n.CRH())&&(a.Checkamount=o.first),n.iGM(o=n.CRH())&&(a.checkNumberValid=o.first),n.iGM(o=n.CRH())&&(a.checkCurrency=o.first),n.iGM(o=n.CRH())&&(a.cashCurrency=o.first),n.iGM(o=n.CRH())&&(a.cashAmount=o.first),n.iGM(o=n.CRH())&&(a.facilityAttributesComponent=o.first)}},features:[n._Bn([C.v,v.v,R.K])],decls:4,vars:1,consts:[[1,"container-fluid","mevents"],[1,"card","bd-0"],["class","card-header card-header-primary","id","stickyHeaderID",4,"ngIf"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","isEditActionEnable","headerItemClick"]],template:function(e,a){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,Q,2,8,"div",2),n._UZ(3,"app-event-registrations-tabs"),n.qZA()()),2&e&&(n.xp6(2),n.Q6J("ngIf",a.eventsListData))},dependencies:[E.O5,j.V,J.q]})}return l})(),data:{object_type:i.hf.EVENT_REGISTRATIONS,title:"Event Registrations Listing",pageName:i.hf.EVENT_REGISTRATIONS}}]}];let Y=(()=>{class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=n.oAB({type:l});static \u0275inj=n.cJS({imports:[_.Bz.forChild(H),_.Bz]})}return l})();var K=c(3848);let z=(()=>{class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=n.oAB({type:l});static \u0275inj=n.cJS({imports:[E.ez,T.Q,O.U$,f.fx,b.aw,Y,K.Nh]})}return l})()}}]);