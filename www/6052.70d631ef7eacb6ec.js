"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6052],{66052:(Ke,x,c)=>{c.r(x),c.d(x,{AlumniFeaturesModule:()=>Ge});var I=c(32174),L=c(11210),r=c(32236),v=c(42863),E=c(71568),M=c(47561),V=c(28168),P=c(75875),O=c(90313),e=c(94650),U=c(80529);let z=(()=>{class o{http;authService;constructor(a,s){this.http=a,this.authService=s}getAll(a,s,t,i,n,l,d,u,h,p){const m=h||"",g=O.L.isEmpty(p)?"":"&advSearchString="+JSON.stringify(p);return this.authService.getApiCall(!0===d?"api/v1/userattributes?type=list&attribute_name=DISTINCTION&enterprise.enterprise_id="+s+"&skip="+t+"&limit="+i+"&sort="+n+"&search="+a+(l?"&"+l+"=true":"")+u+g+m:"api/v1/userattributes?type=list&attribute_name=DISTINCTION&enterprise.enterprise_id="+s+"&skip="+t+"&limit="+i+"&sort="+n+"&search="+a+u+g+m)}static \u0275fac=function(s){return new(s||o)(e.LFG(U.eN),e.LFG(P.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var A=c(30578),D=c(42786),f=c(34942),_=c(27601),S=c(54463),b=c(62510),y=c(70057),j=c(36895),ie=c(24497),R=c(37415),F=c(88425);const re=["datatableComponent"];function ne(o,C){if(1&o){const a=e.EpF();e.TgZ(0,"div",10)(1,"app-stats",11),e.NdJ("status",function(t){e.CHM(a);const i=e.oxw();return e.KtG(i.statusData(t))}),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.Q6J("statsDisplay",a.statsdistalumnilistData)("data",a.distalumniStatsObj)("statusDisplay",a.statusObj)}}let oe=(()=>{class o extends M.O{columnsheaders;loggerService;translateService;commonService;distAlumniService;listingVariables;route;toastController;datatableComponent;distAlumniListData;distAlumniMobileListData;distalumniStatsObj=new le;enterpriseId;eventClickData;isFilterClicked=!1;noDuplicates=void 0;show=!0;searchString;statsObj;statsdistalumnilistData;status;statusObj;tableColumnHeaders;dataJsonObj={};constructor(a,s,t,i,n,l,d,u){super(d,i),this.columnsheaders=a,this.loggerService=s,this.translateService=t,this.commonService=i,this.distAlumniService=n,this.listingVariables=l,this.route=d,this.toastController=u,this.route.queryParams.subscribe(h=>{this.dataJsonObj.queryParamsObj={defaultView:h.default_view,selectedMenuId:h.selectedMenuId,selectedSubMenuId:h.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=r.hf.DIST_ALUMNI,this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:r.hf,pageSettingEnum:r.AM,pageSettingFieldsEnum:r.In},this.commonService.trackView(r.sn.DIST_ALUMNI_LIST),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.DIST_ALUMNI",value:"",showSubMenuDisplayName:!0}],document.getElementsByTagName("body"),this.tableColumnHeaders=this.columnsheaders.getDistAlumniColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.statsdistalumnilistData=f.h.getDistAlumniListStats(this.isFilterClicked,this.eventClickData),this.dataJsonObj.pageActionsList=[],this.dataJsonObj.addFiltersList=[],this.roleRightsValidationByPage(r.hf.DIST_ALUMNI,r.AM.ACTIONS,r.In.CREATE),this.roleRightsValidationByPage(r.hf.DIST_ALUMNI,r.AM.ACTIONS,r.In.FILTERS)}getSearchResult(a){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}getAllRecords(){this.status=this.statusObj,this.enterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE);const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView),s=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner();try{this.distAlumniService.getAll(this.searchString,this.enterpriseId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.status,this.isFilterClicked,a,s,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(this.hideSpinner(),t.rows.length>0){this.distAlumniMobileListData&&this.distAlumniMobileListData.length>0||(this.distAlumniMobileListData=[]);for(let i=0;i<t.rows.length;i++){if(t.rows[i].imageName=t.rows[i].user_profile.f_name+" "+t.rows[i].user_profile.l_name,t.rows[i].userdata=t.rows[i].userdata?t.rows[i].userdata[0]:"",t.rows[i].isEnabledText=t.rows[i].userdata.status?this.lookupLanguageTranslations(t.rows[i].userdata.status.lookup_id):"",t.rows[i].user_profile.f_name){const n={url:`users/users/${t.rows[i]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},l=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;t.rows[i].user_profile.f_name=`<a class="enable" id="user_profile.f_name${t.rows[i]._id}" href=${l}>${t.rows[i].user_profile.f_name}`}if(t.rows[i].user_profile.l_name){const n={url:`users/users/${t.rows[i]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},l=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;t.rows[i].user_profile.l_name=`<a class="enable" id="user_profile.l_name${t.rows[i]._id}" href=${l}>${t.rows[i].user_profile.l_name}`}t.rows[i].enterprise.short_name='<a class="enable" id="enterprise.short_name'+t.rows[i]._id+'" href="enterprises/enterprises/'+t.rows[i].enterprise.enterprise_id+'/view/" >'+t.rows[i].enterprise.short_name,this.distAlumniMobileListData=this.distAlumniMobileListData.filter(n=>n._id!==t.rows[i]._id),this.distAlumniMobileListData.push(t.rows[i])}t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.distAlumniListData=this.distAlumniListData.concat(t.rows)):this.distAlumniListData=t.rows}else this.distAlumniListData=[],this.distAlumniMobileListData=[];this.distalumniStatsObj.TOTAL_DIST_ALUMNI=t.totalCount,this.distalumniStatsObj.TOTAL_DIST_ALUMNI_ACTIVE=t.ActiveCount,this.distalumniStatsObj.TOTAL_DIST_ALUMNI_INACTIVE=t.InactiveCount,this.statsDisabled(this.distalumniStatsObj.TOTAL_DIST_ALUMNI,this.distalumniStatsObj.TOTAL_DIST_ALUMNI_ACTIVE,this.distalumniStatsObj.TOTAL_DIST_ALUMNI_INACTIVE)})}catch(t){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getDistAlumniListPagination",t)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.distAlumniMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}toggle(){this.show=!this.show}statsDisabled(a,s,t){this.statsObj=[],this.statsObj.push(0!==a?{value1:"TOTAL_DIST_ALUMNI"}:{value1:""}),this.statsObj.push(0!==s?{value2:"TOTAL_DIST_ALUMNI_ACTIVE"}:{value2:""}),this.statsObj.push(0!==t?{value3:"TOTAL_DIST_ALUMNI_INACTIVE"}:{value3:""}),this.statsdistalumnilistData=f.h.getDistAlumniListStatsDisabled(this.isFilterClicked,"",this.statsObj)}statusData(a){this.eventClickData=a.value,this.isFilterClicked=!this.isFilterClicked,this.statsdistalumnilistData=!0===this.isFilterClicked?f.h.getDistAlumniListStatsDisabled(this.isFilterClicked,a.value,""):f.h.getDistAlumniListStats(this.isFilterClicked,this.eventClickData),"TOTAL_DIST_ALUMNI"===a.value?this.statusObj="":"TOTAL_DIST_ALUMNI_ACTIVE"===a.value?this.statusObj=r.A0.ACTIVE:"TOTAL_DIST_ALUMNI_INACTIVE"===a.value&&(this.statusObj=r.A0.INACTIVE),this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.distAlumniMobileListData=[],this.getAllRecords()}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a||(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(s){return new(s||o)(e.Y36(v.Y),e.Y36(D.m),e.Y36(S.sK),e.Y36(E.v),e.Y36(z),e.Y36(A.v),e.Y36(b.gz),e.Y36(y.yF))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-distalumni-list"]],viewQuery:function(s,t){if(1&s&&e.Gf(re,5),2&s){let i;e.iGM(i=e.CRH())&&(t.datatableComponent=i.first)}},features:[e._Bn([z,A.v,v.Y,_.s]),e.qOj],decls:10,vars:32,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["class","statistics-body d-none d-lg-block",4,"ngIf"],[1,"",3,"header","data","totalPages","mobileListData","listingVariables","paginator","totalRecords","expand","statsDisplay","statData","statusDisplay","statsShow","showRights","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","status","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"],[1,"statistics-body","d-none","d-lg-block"],[3,"statsDisplay","data","statusDisplay","status"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(n){return t.onHeaderItemClick(n)}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,ne,2,3,"div",5),e.TgZ(6,"app-datatable",6,7),e.NdJ("status",function(n){return t.statusData(n)})("loadPageData",function(n){return t.loadPageData(n)}),e.qZA(),e.TgZ(8,"div",8)(9,"app-page-actions",9),e.NdJ("selectedAction",function(n){return t.onPageLevelActionClicked(n)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("ngIf",t.show&&t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.DIST_ALUMNI,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS)),e.xp6(1),e.Q6J("header",t.tableColumnHeaders)("data",t.distAlumniListData)("totalPages",t.listingVariables.totalpages)("mobileListData",t.distAlumniMobileListData)("listingVariables",t.listingVariables)("paginator",!0)("totalRecords",t.listingVariables.totalRecords)("expand",!1)("statsDisplay",t.statsdistalumnilistData)("statData",t.distalumniStatsObj)("statusDisplay",t.statusObj)("statsShow",t.show)("showRights",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.DIST_ALUMNI,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",t.dataJsonObj.showSpinner)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList))},dependencies:[j.O5,ie._,V.n,R.q,F.y]})}return o})();class le{TOTAL_DIST_ALUMNI;TOTAL_DIST_ALUMNI_ACTIVE;TOTAL_DIST_ALUMNI_INACTIVE}let X=(()=>{class o{http;authService;constructor(a,s){this.http=a,this.authService=s}getAll(a,s,t,i,n,l,d,u,h,p){const m=l?"&condition="+l:"",g=h||"",T=O.L.isEmpty(p)?"":"&advSearchString="+JSON.stringify(p);return this.authService.getApiCall(!0===d?"api/v1/userattributes?type=list&attribute_name=RANK_NUMBER&enterprise.enterprise_id="+s+"&skip="+t+"&limit="+i+"&sort="+n+"&search="+a+m+u+T+g:"api/v1/userattributes?type=list&attribute_name=RANK_NUMBER&enterprise.enterprise_id="+s+"&skip="+t+"&limit="+i+"&sort="+n+"&search="+a+u+T+g)}importRankers(a){return new Promise((s,t)=>{const i=new FormData;i.append("excelFile",a),this.authService.postApiCall("api/v1/userattributes/import",i).subscribe(n=>{s(n)},n=>{t(n)})})}reportlist(a){return this.authService.getReport(a)}static \u0275fac=function(s){return new(s||o)(e.LFG(U.eN),e.LFG(P.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var w=c(2387);const ce=["datatableComponent"];function de(o,C){if(1&o&&(e.TgZ(0,"div",31),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"a",32),e._uU(4," PigeonSuite-Pigeon-Rankers.xlsx "),e.qZA()()),2&o){const a=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"COMMON_FIELDS.PLEASE_DOWNLOAD")," "),e.xp6(2),e.s9C("download",a.usertemplatename)}}function he(o,C){if(1&o){const a=e.EpF();e.TgZ(0,"app-button",33),e.NdJ("buttonOnClick",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.importRankersData())}),e.ALo(1,"translate"),e.qZA()}2&o&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_UPLOAD"))}let ue=(()=>{class o extends M.O{columnsheaders;loggerService;router;translateService;uiUtils;commonService;listingVariables;rankerService;route;toastController;datatableComponent;enterpriseId;error;eventClickData;excelfile;filename;isFilterClicked=!1;noDuplicates=void 0;objectType;pageTitle;show=!0;rankerListData;rankersMobileListData;rankersStatsObj=new pe;searchString;statsObj;statsRankersListData;status;statusObj;tableColumnHeaders;usertemplatename;dataJsonObj={};constructor(a,s,t,i,n,l,d,u,h,p){super(h,l),this.columnsheaders=a,this.loggerService=s,this.router=t,this.translateService=i,this.uiUtils=n,this.commonService=l,this.listingVariables=d,this.rankerService=u,this.route=h,this.toastController=p,this.route.queryParams.subscribe(m=>{this.dataJsonObj.queryParamsObj={defaultView:m.default_view,selectedMenuId:m.selectedMenuId,selectedSubMenuId:m.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=r.hf.RANKERS,this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:r.hf,pageSettingEnum:r.AM,pageSettingFieldsEnum:r.In},this.commonService.trackView(r.sn.RANKERS_LIST),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.RANKERS",value:"",showSubMenuDisplayName:!0}],document.getElementsByTagName("body"),this.tableColumnHeaders=this.columnsheaders.getRankersColumnHeaders(),this.statsRankersListData=f.h.getRankersListStats(this.isFilterClicked,this.eventClickData),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageActionsList=[],this.dataJsonObj.addFiltersList=[],this.roleRightsValidationByPage(r.hf.RANKERS,r.AM.ACTIONS,r.In.CREATE),this.roleRightsValidationByPage(r.hf.RANKERS,r.AM.ACTIONS,r.In.FILTERS)}getAllRecords(){this.status=this.statusObj,this.enterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE);const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);try{const s=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.rankerService.getAll(this.searchString,this.enterpriseId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.status,this.isFilterClicked,a,s,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(this.hideSpinner(),t.rows.length>0){this.rankersMobileListData&&this.rankersMobileListData.length>0||(this.rankersMobileListData=[]);for(let i=0;i<t.rows.length;i++){if(t.rows[i].imageName=t.rows[i].user_profile.f_name+" "+t.rows[i].user_profile.l_name,t.rows[i].userdata&&t.rows[i].userdata[0]&&(t.rows[i].userdata=t.rows[i].userdata[0],t.rows[i].isEnabledText=t.rows[i].userdata.status?this.lookupLanguageTranslations(t.rows[i].userdata.status.lookup_id):""),t.rows[i].user_profile.f_name){const n={url:`users/users/${t.rows[i]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},l=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;t.rows[i].user_profile.f_name=`<a class="enable" id="f_name${t.rows[i]._id}" href=${l}>${t.rows[i].user_profile.f_name}`}if(t.rows[i].user_profile.l_name){const n={url:`users/users/${t.rows[i]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},l=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;t.rows[i].user_profile.l_name=`<a class="enable" id="l_name${t.rows[i]._id}" href=${l}>${t.rows[i].user_profile.l_name}`}t.rows[i].enterprise.short_name='<a class="enable" id="short_name'+t.rows[i]._id+'" href="enterprises/enterprises/'+t.rows[i].enterprise.enterprise_id+'/view/" >'+t.rows[i].enterprise.short_name,this.rankersMobileListData=this.rankersMobileListData.filter(n=>n._id!==t.rows[i]._id),this.rankersMobileListData.push(t.rows[i])}t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.rankerListData=this.rankerListData.concat(t.rows)):this.rankerListData=t.rows}else this.rankerListData=[],this.rankersMobileListData=[];this.rankersStatsObj.TOTAL_RANKERS=t.totalCount,this.rankersStatsObj.TOTAL_RANKERS_ACTIVE=t.ActiveCount,this.rankersStatsObj.TOTAL_RANKERS_INACTIVE=t.InactiveCount,this.statsDisabled(this.rankersStatsObj.TOTAL_RANKERS,this.rankersStatsObj.TOTAL_RANKERS_ACTIVE,this.rankersStatsObj.TOTAL_RANKERS_INACTIVE)})}catch(s){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",s)}}getSearchResult(a){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.rankersMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}toggle(){this.show=!this.show}openPopup(){this.excelfile="";const a=document.getElementById("excelfile");document.getElementById("importFile").innerHTML=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NO_FILE_CHOOSEN"),$("#exampleModal").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal"),this.error="",a.value=""}closePopup(){const a=document.getElementById("excelfile");$("#exampleModal").modal("hide"),this.error="",a.value=""}getExcelFile(a){if(a){this.error="";const s=a.target.files,t=document.getElementById("importFile");s.length>0?(this.excelfile=s[0],this.displayFileName(s[0].name)):(this.excelfile="",t.innerHTML=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NO_FILE_CHOOSEN"))}}displayFileName(a){const s=document.getElementById("importFile");let t=a;null!=t&&""!==t&&t.split(".")[0].length>25&&(t=t.split(".")[0].substring(0,25)+".."+t.split(".")[1]),s.innerHTML=t}importRankersData(){if(O.L.isEmpty(this.excelfile))this.error="COMMON_VALIDATION_MESSAGES.VALID_FILE_SELECT";else{const a=this.excelfile.type,s=a.substring(a.lastIndexOf("/"));if(-1==["/xls","/xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","/vnd.ms-excel","/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].indexOf(s))this.error="COMMON_VALIDATION_MESSAGES.VALID_FILETYPE";else try{this.rankerService.importRankers(this.excelfile).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE");const n=i.fileName;this.rankerService.reportlist(n).subscribe(l=>{this.downLoadFile(l,n,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet; /xls; /xlsx; /vnd.ms-excel; /vnd.openxmlformats-officedocument.spreadsheetml.sheet")},l=>{this.commonErrorCodes(JSON.parse(l))}),$("#exampleModal").modal("hide"),this.excelfile="",this.rankerListData=[],this.getAllRecords()},i=>{this.commonErrorCodes(JSON.parse(i))})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"importRankersData",i)}}}downLoadFile(a,s,t){const i=new Blob([a.body],{type:t}),n=document.createElement("a");n.href=URL.createObjectURL(i),this.filename=s.split("/").pop(),n.download=this.filename,document.body.appendChild(n),n.click()}commonErrorCodes(a){const s=JSON.parse(a[r.BU.STATUS]);409===s&&(this.error="COMMON_STATUS_CODES."+s)}statsDisabled(a,s,t){this.statsObj=[],this.statsObj.push(0!==a?{value1:"TOTAL_RANKERS"}:{value1:""}),this.statsObj.push(0!==s?{value2:"TOTAL_RANKERS_ACTIVE"}:{value2:""}),this.statsObj.push(0!==t?{value3:"TOTAL_RANKERS_INACTIVE"}:{value3:""}),this.statsRankersListData=f.h.getRankersListStatsDisabled(this.isFilterClicked,"",this.statsObj)}statusData(a){this.isFilterClicked=!0,this.statusObj=a.value,this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.rankersMobileListData=[],this.getAllRecords()}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a||(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}onPageLevelActionClicked(a){}static \u0275fac=function(s){return new(s||o)(e.Y36(v.Y),e.Y36(D.m),e.Y36(b.F0),e.Y36(S.sK),e.Y36(_.s),e.Y36(E.v),e.Y36(A.v),e.Y36(X),e.Y36(b.gz),e.Y36(y.yF))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-rankers-list"]],viewQuery:function(s,t){if(1&s&&e.Gf(ce,5),2&s){let i;e.iGM(i=e.CRH())&&(t.datatableComponent=i.first)}},features:[e._Bn([X,A.v,v.Y,_.s]),e.qOj],decls:36,vars:43,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],[1,"",3,"header","data","totalPages","listingVariables","mobileListData","paginator","totalRecords","expand","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"],[1,"datamodal"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"position-relative","w-100"],[1,"d-flex","align-items-center","justify-content-between"],[1,"popupsection-title","mgb-0"],["data-bs-dismiss","modal",1,"fas","fa-times","cursor-pointer"],[1,"modal-body"],[1,"col-md-12","form-bs","pd-0"],["id","profileimg",1,"file-return"],[1,"form-group","row","mgb-5"],["class","col-md-12  fleetftsub fw-600 text-center text-dark",4,"ngIf"],[1,"custom-file","mgb-10","fs-12"],["type","file","id","excelfile","accept","application/vnd.ms-excel","name","file-input",1,"form-control",3,"change"],["id","importFile","for","customFile",1,"custom-file-label"],[1,"error-msg","text-danger","mb-0","fs-xsmall"],[1,"modal-footer"],[1,"col-md-12","text-end","uploadcls","pd-0"],["className","btn btn-primary btn-sm","class","mgr-5","id","rankers-list-upload",3,"label","buttonOnClick",4,"ngIf"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","rankers-list-close",3,"label","buttonOnClick"],[1,"col-md-12","fleetftsub","fw-600","text-center","text-dark"],["href","assets/import_templates/Pigeon-ImportTemplate-Rankers.xlsx",3,"download"],["className","btn btn-primary btn-sm","id","rankers-list-upload",1,"mgr-5",3,"label","buttonOnClick"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(n){return t.onHeaderItemClick(n)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("changeStats",function(n){return t.statusData(n)})("loadPageData",function(n){return t.loadPageData(n)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(n){return t.onPageLevelActionClicked(n)}),e.qZA()()()()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"h5",16),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"i",17),e.qZA()()(),e.TgZ(20,"div",18)(21,"div",19),e._UZ(22,"div",20),e.TgZ(23,"div",21),e.YNc(24,de,5,4,"div",22),e.qZA(),e.TgZ(25,"div",23)(26,"input",24),e.NdJ("change",function(n){return t.getExcelFile(n)}),e.qZA(),e._UZ(27,"label",25),e.qZA(),e.TgZ(28,"p",26),e._uU(29),e.ALo(30,"translate"),e.qZA()()(),e.TgZ(31,"div",27)(32,"div",28),e.YNc(33,he,2,3,"app-button",29),e.TgZ(34,"app-button",30),e.NdJ("buttonOnClick",function(){return t.closePopup()}),e.ALo(35,"translate"),e.qZA()()()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",t.tableColumnHeaders)("data",t.rankerListData)("totalPages",t.listingVariables.totalpages)("listingVariables",t.listingVariables)("mobileListData",t.rankersMobileListData)("paginator",!0)("totalRecords",t.listingVariables.totalRecords)("expand",!1)("statsDisplay",t.statsRankersListData)("statData",t.rankersStatsObj)("statusDisplay",t.statusObj)("statsShow",t.show)("showRights",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.RANKERS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",t.searchString)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",t.dataJsonObj.showSpinner)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList),e.xp6(9),e.Oqu(e.lcZ(18,37,"COMMON_BUTTONS.BUTTON_IMPORT")),e.xp6(7),e.Q6J("ngIf",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.RANKERS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.IMPORT)),e.xp6(5),e.Oqu(e.lcZ(30,39,t.error)),e.xp6(4),e.Q6J("ngIf",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.RANKERS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.EXPORT)),e.xp6(1),e.s9C("label",e.lcZ(35,41,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[j.O5,w.r,V.n,R.q,F.y,S.X$]})}return o})();class pe{TOTAL_RANKERS;TOTAL_RANKERS_ACTIVE;TOTAL_RANKERS_INACTIVE}var Z=c(24346),B=c(8236),W=c(57936);let N=(()=>{class o{http;authService;userToken=localStorage.getItem(r.BU.TOKEN);constructor(a,s){this.http=a,this.authService=s}getAll(a,s,t,i,n,l,d,u,h,p){const m=l?"&condition="+l:"",g=h||"",T=O.L.isEmpty(p)?"":"&advSearchString="+JSON.stringify(p);return this.authService.getApiCall(!0===d?"api/v1/teachers?&enterprise.enterprise_id="+s+"&skip="+t+"&limit="+i+"&sort="+n+"&type=list&search="+a+m+u+T+g:"api/v1/teachers?&enterprise.enterprise_id="+s+"&skip="+t+"&limit="+i+"&sort="+n+"&type=list&search="+a+u+T+g)}create(a,s){return new Promise((t,i)=>{const n=new FormData;s&&n.append("teacherImage",s,"teacherImage"),n.append("teachersData",JSON.stringify(a)),this.authService.postApiCall("api/v1/teachers",n).subscribe(l=>{t(l)},l=>{i(l)})})}update(a,s,t){return new Promise((i,n)=>{const l=new FormData;t&&l.append("teacherImage",t,"teacherImage"),l.append("teachersData",JSON.stringify(s)),this.authService.putApiCall("api/v1/teachers/"+a,l).subscribe(d=>{i(d)},d=>{n(d)})})}get(a){return this.authService.getApiCall("api/v1/teachers/"+a)}patch(a,s){return new Promise((t,i)=>{this.authService.patchApiCall("api/v1/teachers/"+a,s).subscribe(n=>{t(n)},n=>{i(n)})})}AttributesList(a,s){return new Promise((t,i)=>{this.authService.getApiCall("api/v1/attributedefinitions?type=list&enterpriseId="+a+"&pageName="+s).subscribe(n=>{t(n)},n=>{i(n)})})}importTeachers(a){return new Promise((s,t)=>{const i=new FormData;i.append("excelFile",a),this.authService.postApiCall("api/v1/teachers/import",i).subscribe(n=>{s(n)},n=>{t(n)})})}reportlist(a){return this.authService.getReport(a)}static \u0275fac=function(s){return new(s||o)(e.LFG(U.eN),e.LFG(P.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var H=c(46335),q=c(46448),Y=c(56368),ee=c(9851),G=c(24929),Q=c(68653);const me=["addressLinesComponent"],ge=["attributesComponent"],be=["firstNameInput"],Se=["lastNameInput"],Te=["teacherAccountInput"];function Oe(o,C){if(1&o&&(e.TgZ(0,"p-accordionTab",35),e._UZ(1,"app-attribute-values",36,37),e.qZA()),2&o){const a=e.oxw();e.Q6J("selected",!0),e.xp6(1),e.Q6J("attributes",a.attributes)}}let _e=(()=>{class o extends M.O{loggerService;navigationService;router;translateService;uiUtils;userService;commonService;commonservice;enterprisesService;route;teacherService;toastController;addressLinesComponent;attributesComponent;firstNameInput;lastNameInput;teacherAccountInput;attributes=[];createTeacherObj=new Ce;data=[];defaultEnterprise;defaultStatus;defaultTeacherName;disableSubmitBtn;enterpriseId;enterpriseName;enterpriseShortName;error;firstName;gender;genderDisplayName;genderName;genderObj;genderOptions;headerAction;image;imageError;imgFile;lastName;nickName;primaryAddress;statusObj;statusOptions;statusdisplayname;statusname;dataJsonObj={};constructor(a,s,t,i,n,l,d,u,h,p,m,g){super(p,d),this.loggerService=a,this.navigationService=s,this.router=t,this.translateService=i,this.uiUtils=n,this.userService=l,this.commonService=d,this.commonservice=u,this.enterprisesService=h,this.route=p,this.teacherService=m,this.toastController=g}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.TEACHERS,this.headerAction={BACK:!0},this.enterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE),this.disableSubmitBtn=!1,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.TEACHER",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],document.getElementsByTagName("body"),this.commonService.trackView(r.sn.TEACHERS_CREATE),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(s=>{this.dataJsonObj.lookupCodesListJSON=s,this.getStatusOptions(),this.getGenderOptions()}),this.getEnterpriseRecordById(),this.attributesList(this.enterpriseId)}getEnterpriseRecordById(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(a=>{this.enterpriseName=a.enterprise_name,this.defaultEnterprise=a._id,this.enterpriseShortName=a.short_name},a=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseRecordById",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseRecordById",a)}}getStatusOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[r.ox.TEACHER_STATUSES],"").then(a=>{this.statusOptions=a,this.defaultStatus=a[0].ID,this.statusname=a[0].lookup_name},a=>{this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",a)}}getGenderOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[r.ox.GENDER],"").then(a=>{this.genderOptions=a,this.gender=a[0].ID,this.genderName=a[0].NAME},a=>{this.loggerService.setLoggerError(this.constructor.name,"getGenderOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getGenderOptions",a)}}changeTeacherName(a){try{a.value&&(this.defaultTeacherName=a.value,this.createTeacherObj.teacher_name=this.defaultTeacherName,this.error="")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeTeacherName",s)}}changeStatus(a){try{this.defaultStatus=a.value,this.statusObj=this.statusOptions.find(s=>s.ID===parseInt(this.defaultStatus,10)),this.statusname=this.statusObj.lookup_name,this.statusdisplayname=this.lookupLanguageTranslations(this.statusObj.lookup_id)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeStatus",s)}}clearErrorMessage(){this.error=""}changeFirstName(a){try{this.firstName=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeFirstName",s)}}changeLastName(a){try{this.lastName=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeLastName",s)}}changeNickName(a){try{this.nickName=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeNickName",s)}}changeGender(a){try{this.gender=a.value,this.genderObj=this.genderOptions.find(s=>s.ID===parseInt(this.gender,10)),this.genderName=this.genderObj.NAME,this.genderDisplayName=this.lookupLanguageTranslations(this.genderObj.lookup_id)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeGender",s)}}changeSummary(a){try{this.createTeacherObj.summary=a.value.trim().replace(/\s\s+/g," ")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeSummary",s)}}getProfileImage(a){try{""===a.error?(this.imageError="",this.imgFile=a.value):this.imageError=a.error}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getProfileImage",s)}}imageRemove(){try{this.imgFile="",this.imageError=""}catch(a){this.loggerService.setLoggerError(this.constructor.name,"imageRemove",a)}}attributesList(a){try{this.userService.AttributesList(a,r.ox.TEACHERS).then(s=>{this.attributes=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"AttributesList",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)}}createRecord(){try{const a=this.addressLinesComponent.addressDetails();for(let s=0;s<a.length;s++)!0===a[s].primary&&(this.primaryAddress=!0);if(this.teacherAccountInput.isValid()&&this.firstNameInput.isValid()&&this.lastNameInput.isValid()&&(!(this.attributes.length>0)||this.attributesComponent.isValidAttributes())&&O.L.isEmpty(this.imageError)&&O.L.isEmpty(this.error))if(a.length>0&&!0===this.primaryAddress){if(this.disableSubmitBtn=!0,this.createTeacherObj.enterprise={enterprise_id:this.defaultEnterprise,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},this.createTeacherObj.status={lookup_id:this.defaultStatus,lookup_name:this.statusname},this.createTeacherObj.f_name=this.firstName,this.createTeacherObj.l_name=this.lastName,this.createTeacherObj.nick_name=this.nickName,this.createTeacherObj.gender={lookup_id:this.gender,lookup_name:this.genderName},this.createTeacherObj.summary=this.createTeacherObj.summary,this.createTeacherObj.address=a,this.attributes.length>0){const t=this.attributesComponent.getAttributeValues();this.createTeacherObj.teacherAttributes=t}else this.createTeacherObj.teacherAttributes=[];this.imgFile=this.imgFile?this.commonservice.dataURItoImgBlob(this.imgFile,"image/jpeg"):"",this.teacherService.create(this.createTeacherObj,this.imgFile).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},t=>{this.commonErrorCodes(JSON.parse(t)),this.loggerService.setLoggerError(this.constructor.name,"createRecord",t)})}else this.addressLinesComponent.displayPrimaryAddrValidation()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createRecord",a)}}commonErrorCodes(a){const s=JSON.parse(a[r.BU.STATUS]);409===s&&(this.error="COMMON_STATUS_CODES."+s)}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",a)}}pageheadeActionClick(a){"BACK"==a.value&&this.cancelBtn()}static \u0275fac=function(s){return new(s||o)(e.Y36(D.m),e.Y36(q.f),e.Y36(b.F0),e.Y36(S.sK),e.Y36(_.s),e.Y36(H.K),e.Y36(E.v),e.Y36(E.v),e.Y36(W.e),e.Y36(b.gz),e.Y36(N),e.Y36(y.yF))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-teacher-create"]],viewQuery:function(s,t){if(1&s&&(e.Gf(me,5),e.Gf(ge,5),e.Gf(be,5),e.Gf(Se,5),e.Gf(Te,5)),2&s){let i;e.iGM(i=e.CRH())&&(t.addressLinesComponent=i.first),e.iGM(i=e.CRH())&&(t.attributesComponent=i.first),e.iGM(i=e.CRH())&&(t.firstNameInput=i.first),e.iGM(i=e.CRH())&&(t.lastNameInput=i.first),e.iGM(i=e.CRH())&&(t.teacherAccountInput=i.first)}},features:[e._Bn([N,_.s,E.v]),e.qOj],decls:57,vars:55,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-lg-11","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-3"],["disabled","true","id","teacher-create-enterprisename",3,"label","value"],["autoCaseFlag","false","disabled","false","mandatory","true","id","teacher-create-teachername",3,"label","minlength","maxlength","value","valueChange"],["teacherAccountInput",""],["mandatory","true","id","teacher-create-firstname","onkeypress","var key = window.event ? event.keyCode : event.which;if (event.keyCode == 44 || event.keyCode == 94)  return false; else return true;",3,"label","maxlength","value","valueChange"],["firstNameInput",""],["mandatory","true","id","teacher-create-lastname","onkeypress","var key = window.event ? event.keyCode : event.which;if (event.keyCode == 44 || event.keyCode == 94)  return false; else return true;",3,"label","maxlength","value","valueChange"],["lastNameInput",""],["mandatory","false","id","teacher-create-nickname","onkeypress","var key = window.event ? event.keyCode : event.which;if (event.keyCode == 44 || event.keyCode == 94)  return false; else return true;",3,"label","maxlength","value","valueChange"],["mandatory","true","disabled","false","id","teacher-create-gender",3,"label","defaultValue","options","valueChange"],["disabled","false","mandatory","true","id","teacher-create-status",3,"label","options","defaultValue","valueChange"],[1,"col-lg-1","col-md-2","pdl-0","order-md-1"],["type","file","btnHide","true","action","create",1,"edit-pic",3,"valueChange","imageRemove"],[1,"col-md-10","order-md-1","order-2"],["mandatory","false","disabled","false","id","teacher-create-summary",3,"label","maxlength","valueChange"],[1,"col-md-2","text-end","mt-2","mb-2","btns-group","order-md-1","order-2"],["id","teacher-create-submit","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","disabled","buttonOnClick"],["id","teacher-create-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"error-msg","col-md-2","text-danger","text-center","mb-0"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],["addressLinesComponent",""],["header","Attributes","id","createattributesId1",3,"selected",4,"ngIf"],["header","Attributes","id","createattributesId1",3,"selected"],["action","Create",3,"attributes"],["attributesComponent",""]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11)(15,"app-input",13,14),e.NdJ("valueChange",function(n){return t.changeTeacherName(n)}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",11)(19,"app-input",15,16),e.NdJ("valueChange",function(n){return t.changeFirstName(n)}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",11)(23,"app-input",17,18),e.NdJ("valueChange",function(n){return t.changeLastName(n)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",11)(27,"app-input",19),e.NdJ("valueChange",function(n){return t.changeNickName(n)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",11)(30,"app-dropdown-singleselect",20),e.NdJ("valueChange",function(n){return t.changeGender(n)}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",11)(33,"app-dropdown-singleselect",21),e.NdJ("valueChange",function(n){return t.changeStatus(n)}),e.ALo(34,"translate"),e.qZA()()()(),e.TgZ(35,"div",22)(36,"app-imageupload",23),e.NdJ("valueChange",function(n){return t.getProfileImage(n)})("imageRemove",function(){return t.imageRemove()}),e.qZA()(),e.TgZ(37,"div",24)(38,"app-textarea",25),e.NdJ("valueChange",function(n){return t.changeSummary(n)}),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",26)(41,"app-button",27),e.NdJ("buttonOnClick",function(){return t.createRecord()}),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"app-button",28),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(44,"translate"),e.qZA()()(),e.TgZ(45,"div",10)(46,"div",29),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",10)(50,"div",3)(51,"div",30)(52,"div",31)(53,"p-accordion",32),e._UZ(54,"app-addressdetails",null,33),e.YNc(56,Oe,3,2,"p-accordionTab",34),e.qZA()()()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(6),e.s9C("label",e.lcZ(13,33,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",t.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(17,35,"COMMON_PAGE_TITLES.TEACHER")),e.s9C("value",t.defaultTeacherName),e.Q6J("minlength",3)("maxlength",20),e.xp6(4),e.s9C("label",e.lcZ(21,37,"COMMON_FIELDS.FIRST_NAME")),e.s9C("value",t.firstName),e.Q6J("maxlength",20),e.xp6(4),e.s9C("label",e.lcZ(25,39,"COMMON_FIELDS.LAST_NAME")),e.s9C("value",t.lastName),e.Q6J("maxlength",20),e.xp6(4),e.s9C("label",e.lcZ(28,41,"USERS.NICK_NAME")),e.s9C("value",t.nickName),e.Q6J("maxlength",20),e.xp6(3),e.s9C("label",e.lcZ(31,43,"COMMON_FIELDS.GENDER")),e.s9C("defaultValue",t.gender),e.Q6J("options",t.genderOptions),e.xp6(3),e.s9C("label",e.lcZ(34,45,"COMMON_FIELDS.STATUS")),e.s9C("defaultValue",t.defaultStatus),e.Q6J("options",t.statusOptions),e.xp6(5),e.s9C("label",e.lcZ(39,47,"COMMON_FIELDS.SUMMARY")),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(42,49,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",t.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(44,51,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(48,53,t.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(3),e.Q6J("ngIf",t.attributes&&t.attributes.length>0))},dependencies:[I.UQ,I.US,j.O5,w.r,Y.a,ee.k,G.R,Q.f,Z.Q,B.$,R.q,S.X$]})}return o})();class Ce{address;enterprise;f_name;gender;l_name;nick_name;status;summary;teacherAttributes;teacher_image_name;teacher_image_path;teacher_name}var J=c(24006),Ae=c(71238),K=c(10805),te=c(11735);const ve=["addressLinesComponent"],Ee=["attributesComponent"],fe=["firstNameInput"],ye=["lastNameInput"],Ne=["teacherNameInput"];function Ie(o,C){if(1&o&&(e.TgZ(0,"p-accordionTab",37)(1,"p-header",38)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"app-attribute-values",39,40),e.qZA()),2&o){const a=e.oxw();e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(4,4,"COMMON_PAGE_TITLES.ATTRIBUTES")),e.xp6(2),e.Q6J("attributes",a.attributes)("savedattributes",a.savedattributes)}}let Le=(()=>{class o extends M.O{apiEndPointUrl;_sharedService;formBuilder;loggerService;navigationService;router;translateService;uiUtils;userService;commonService;enterprisesService;listingVariables;route;teacherService;toastController;addressLinesComponent;attributesComponent;firstNameInput;lastNameInput;teacherNameInput;apiEndPoint;attributes=[];attributesObj;count=0;countryCodeSplit;countryObj;createdBy;creationDate;data=[];defaultCountryCodeObj;enabled=!0;enterpriseId;enterpriseObj;error;firstFormGroup;firstName;gender;genderDisplayName;genderName;genderObj;genderOptions;imageError;imageName;imgFile;imgFilepath;isEnabled;lastName;lastUpdatedDate;nickName;phoneSplit;primaryAddress;recordId;savedattributes=[];state;stateObj;summary;teacherData;teacherEditObj=new je;teacherId;teacherName;updatedBy;dataJsonObj={};enableImageDeleteValue=!0;constructor(a,s,t,i,n,l,d,u,h,p,m,g,T,k,Qe){super(T,p),this.apiEndPointUrl=a,this._sharedService=s,this.formBuilder=t,this.loggerService=i,this.navigationService=n,this.router=l,this.translateService=d,this.uiUtils=u,this.userService=h,this.commonService=p,this.enterprisesService=m,this.listingVariables=g,this.route=T,this.teacherService=k,this.toastController=Qe}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.TEACHERS,this.apiEndPoint=localStorage.getItem(r.BU.S3_URL)?localStorage.getItem(r.BU.S3_URL):this.apiEndPointUrl,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.RECORD_HISTORY),this.commonService.trackView(r.sn.TEACHERS_EDIT),this.route.params.subscribe(a=>{this.recordId=a.id,this.getRecordById(this.recordId)}),this.firstFormGroup=this.formBuilder.group({firstCtrl:["",J.kI.required]})}getRecordById(a){try{this.teacherService.get(a).subscribe(s=>{this.teacherData=s,this.enterpriseId=s.enterprise.enterprise_id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(t=>{this.dataJsonObj.lookupCodesListJSON=t,this.getGenderOptions()}),this.enterpriseObj=s.enterprise,this._sharedService.emitChangeLoaders(!1),this.firstName=s.f_name,this.lastName=s.l_name,this.imageName=s.f_name+" "+s.l_name,this.teacherName=s.teacher_name,this.gender=s.gender.lookup_id,this.genderName=s.gender.lookup_name,this.genderDisplayName=this.lookupLanguageTranslations(s.gender.lookup_id),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.TEACHERS",value:this.teacherName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.updatedBy=this.teacherData.updated_by,this.createdBy=this.teacherData.created_by,this.imgFilepath=s.teacher_image_path&&s.teacher_image_name?this.apiEndPoint+s.teacher_image_path+"/"+s.teacher_image_name:null,this.teacherData.teacherAttributes&&(this.savedattributes=this.teacherData.teacherAttributes.rows);for(let t=0;t<s.address.length;t++)s.address[t].country_name=this.lookupLanguageTranslations(s.address[t].country.lookup_id),s.address[t].state_name=s.address[t].state.state_name,s.address[t].mobile_country_code&&(3===s.address[t].mobile_country_code.lookup_name.split("-").length?(this.countryCodeSplit=s.address[t].mobile_country_code.lookup_name.split("-")[0]+"-"+s.address[t].mobile_country_code.lookup_name.split("-")[1],this.phoneSplit=this.countryCodeSplit+"-"+s.address[t].mobile_number):(this.countryCodeSplit=s.address[t].mobile_country_code.lookup_name.split("-")[0],this.phoneSplit=this.countryCodeSplit+"-"+s.address[t].mobile_number)),!0===s.address[t].primary?(0===this.count&&(this.count+=1),s.address[t].isEnabled="Yes",this.enabled=!0,this.isEnabled="Yes"):(s.address[t].isEnabled="No",this.enabled=!1,this.isEnabled="No"),s.address[t].phone_number=this.phoneSplit,s.address[t].enterprise_id=this.enterpriseId,this.stateObj=s.address[t].state,this.countryObj=s.address[t].country,this.defaultCountryCodeObj=s.address[t].mobile_country_code;this.data=s.address,this.attributesList(this.enterpriseId)},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name," getRecordById",s)}}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",a)}}getGenderOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[r.ox.GENDER],"").then(a=>{this.genderOptions=a},a=>{this.loggerService.setLoggerError(this.constructor.name,"getGenderOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getGenderOptions",a)}}changeGender(a){try{this.gender=a.value,this.genderObj=this.genderOptions.find(s=>s.ID===parseInt(this.gender,10)),this.genderName=this.genderObj.NAME,this.genderDisplayName=this.lookupLanguageTranslations(this.genderObj.lookup_id)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeGender",s)}}clearErrorMessage(){this.error=""}changeFirstName(a){try{this.firstName=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeFirstName",s)}}changeTeacherName(a){try{this.teacherName=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeTeacherName",s)}}changeLastName(a){try{this.lastName=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeLastName",s)}}changeNickName(a){try{this.nickName=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeNickName",s)}}getProfileImage(a){try{""===a.error?(this.imageError="",this.imgFile=a.value):this.imageError=a.error}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getProfileImage",s)}}imageRemove(){try{this.imgFile="",this.imageError=""}catch(a){this.loggerService.setLoggerError(this.constructor.name,"imageRemove",a)}}changeSummary(a){try{this.teacherEditObj.summary=a.value.trim().replace(/\s\s+/g," ")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeSummary",s)}}attributesList(a){try{this.userService.AttributesList(a,r.ox.TEACHERS).then(s=>{this.attributes=s})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)}}seperateAttributeArrays(a){try{if(this.teacherEditObj.newTeacherAttributes=[],this.teacherEditObj.teacherAttributes=[],a.length>0)for(let s=0;s<a.length;s++)a[s]&&a[s]._id&&this.teacherEditObj.teacherAttributes.push(a[s]),!O.L.isEmpty(a[s].attribute_value)&&O.L.isEmpty(a[s]._id)&&this.teacherEditObj.newTeacherAttributes.push(a[s])}catch(s){this.loggerService.setLoggerError(this.constructor.name,"seperateAttributeArrays",s)}}updateRecord(){try{const a=this.addressLinesComponent.addressDetails();for(let s=0;s<a.length;s++)!0===a[s].primary&&(this.primaryAddress=!0);if(this.teacherNameInput.isValid()&&this.firstNameInput.isValid()&&this.lastNameInput.isValid()&&O.L.isEmpty(this.imageError)&&O.L.isEmpty(this.error)&&(!(this.attributes.length>0)||this.attributesComponent.isValidEditedAttributes()))if(a.length>0&&!0===this.primaryAddress){if(this.teacherEditObj.teacher_name=this.teacherName,this.teacherEditObj.f_name=this.firstName,this.teacherEditObj.l_name=this.lastName,this.teacherEditObj.nick_name=this.nickName,this.teacherEditObj.enterprise=this.enterpriseObj,this.teacherEditObj.gender={lookup_id:this.gender,lookup_name:this.genderName},this.attributes.length>0){const s=this.attributesComponent.getEditAttributeValues();this.seperateAttributeArrays(s)}else this.teacherEditObj.newTeacherAttributes=[],this.teacherEditObj.teacherAttributes=[];this.teacherEditObj.summary=this.teacherEditObj.summary,this.teacherEditObj.address=a,this.teacherEditObj.original_teacher_image_name=this.teacherData.teacher_image_name,this.imgFile=this.imgFile?this.commonService.dataURItoImgBlob(this.imgFile,"image/jpeg"):"",this.teacherService.update(this.recordId,this.teacherEditObj,this.imgFile).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},s=>{this.commonErrorCodes(JSON.parse(s)),this.loggerService.setLoggerError(this.constructor.name,"editTeacherData",s)})}else this.addressLinesComponent.displayPrimaryAddrValidation()}catch(a){this.loggerService.setLoggerError(this.constructor.name," updateRecord",a)}}commonErrorCodes(a){const s=JSON.parse(a[r.BU.STATUS]);switch(s){case 500:case 404:default:break;case 409:this.error="COMMON_STATUS_CODES."+s}}deleteImgClick(a){a.value==r.A0.DELETE&&(this.teacherData.teacher_image_path="")}static \u0275fac=function(s){return new(s||o)(e.Y36("apiEndPoint"),e.Y36(Ae.F),e.Y36(J.qu),e.Y36(D.m),e.Y36(q.f),e.Y36(b.F0),e.Y36(S.sK),e.Y36(_.s),e.Y36(H.K),e.Y36(E.v),e.Y36(W.e),e.Y36(A.v),e.Y36(b.gz),e.Y36(N),e.Y36(y.yF))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-teacher-edit"]],viewQuery:function(s,t){if(1&s&&(e.Gf(ve,5),e.Gf(Ee,5),e.Gf(fe,5),e.Gf(ye,5),e.Gf(Ne,5)),2&s){let i;e.iGM(i=e.CRH())&&(t.addressLinesComponent=i.first),e.iGM(i=e.CRH())&&(t.attributesComponent=i.first),e.iGM(i=e.CRH())&&(t.firstNameInput=i.first),e.iGM(i=e.CRH())&&(t.lastNameInput=i.first),e.iGM(i=e.CRH())&&(t.teacherNameInput=i.first)}},features:[e._Bn([N,_.s,v.Y,A.v]),e.qOj],decls:58,vars:62,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-lg-11","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-3"],["disabled","true","id","enterprise-create",3,"label","value"],["mandatory","true","id","teacher-edit-teacherName","onkeypress","var key = window.event ? event.keyCode : event.which;if (event.keyCode == 44 || event.keyCode == 94)  return false; else return true;",3,"label","maxlength","value","valueChange"],["teacherNameInput",""],["mandatory","true","id","teacher-edit-firstname","onkeypress","var key = window.event ? event.keyCode : event.which;if (event.keyCode == 44 || event.keyCode == 94)  return false; else return true;",3,"label","maxlength","value","valueChange"],["firstNameInput",""],["mandatory","true","id","teacher-edit-lastname","onkeypress","var key = window.event ? event.keyCode : event.which;if (event.keyCode == 44 || event.keyCode == 94)  return false; else return true;",3,"label","maxlength","value","valueChange"],["lastNameInput",""],["mandatory","false","id","teacher-edit-nickname","onkeypress","var key = window.event ? event.keyCode : event.which;if (event.keyCode == 44 || event.keyCode == 94)  return false; else return true;",3,"label","maxlength","value","valueChange"],["mandatory","true","disabled","false","id","teacher-edit-mobilenumber",3,"label","defaultValue","options","valueChange"],["disabled","true","id","teacher-edit-status",3,"label","value"],[1,"col-lg-1","col-md-2","pdl-0","order-md-1"],["type","file","btnHide","true","action","edit",1,"edit-pic",3,"enableImageDelete","defaultImage","imageName","valueChange","imageRemove","deleteClick"],[1,"col-md-10","order-md-1","order-2"],["mandatory","false","disabled","false","id","teacher-edit-summary",3,"label","maxlength","defaultvalue","valueChange"],[1,"col-md-2","text-end","mt-2","mb-2","order-md-1","order-2"],["id","teacher-edit-submit","className","btn btn-primary btn-sm","id","teacher-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["id","teacher-edit-cancel","className","btn btn-danger btn-sm","id","teacher-edit-cancel",3,"label","buttonOnClick"],[1,"text-danger","text-center","error-msg"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"defaultValue"],["addressLinesComponent",""],["id","createpreferencesId1",3,"selected",4,"ngIf"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","createpreferencesId1",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["action","Edit","disabled","true",3,"attributes","savedattributes"],["attributesComponent",""]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11)(15,"app-input",13,14),e.NdJ("valueChange",function(n){return t.changeTeacherName(n)}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",11)(19,"app-input",15,16),e.NdJ("valueChange",function(n){return t.changeFirstName(n)}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",11)(23,"app-input",17,18),e.NdJ("valueChange",function(n){return t.changeLastName(n)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",11)(27,"app-input",19),e.NdJ("valueChange",function(n){return t.changeNickName(n)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",11)(30,"app-dropdown-singleselect",20),e.NdJ("valueChange",function(n){return t.changeGender(n)}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",11),e._UZ(33,"app-input",21),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"div",22)(36,"app-imageupload",23),e.NdJ("valueChange",function(n){return t.getProfileImage(n)})("imageRemove",function(){return t.imageRemove()})("deleteClick",function(n){return t.deleteImgClick(n)}),e.qZA()(),e.TgZ(37,"div",24)(38,"app-textarea",25),e.NdJ("valueChange",function(n){return t.changeSummary(n)}),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",26)(41,"app-button",27),e.NdJ("buttonOnClick",function(){return t.updateRecord()}),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"app-button",28),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(44,"translate"),e.qZA()()(),e.TgZ(45,"div",10)(46,"div",29),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",10)(50,"div",3)(51,"div",30)(52,"div",31)(53,"p-accordion",32),e._UZ(54,"app-addressdetails",33,34),e.YNc(56,Ie,7,6,"p-accordionTab",35),e._UZ(57,"app-recordhistory",36),e.qZA()()()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(6),e.s9C("label",e.lcZ(13,40,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==t.teacherData||null==t.teacherData.enterprise?null:t.teacherData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(17,42,"COMMON_PAGE_TITLES.TEACHER")),e.s9C("value",t.teacherName),e.Q6J("maxlength",20),e.xp6(4),e.s9C("label",e.lcZ(21,44,"COMMON_FIELDS.FIRST_NAME")),e.s9C("value",t.firstName),e.Q6J("maxlength",20),e.xp6(4),e.s9C("label",e.lcZ(25,46,"COMMON_FIELDS.LAST_NAME")),e.s9C("value",t.lastName),e.Q6J("maxlength",20),e.xp6(4),e.s9C("label",e.lcZ(28,48,"USERS.NICK_NAME")),e.s9C("value",null==t.teacherData?null:t.teacherData.nick_name),e.Q6J("maxlength",20),e.xp6(3),e.s9C("label",e.lcZ(31,50,"COMMON_FIELDS.GENDER")),e.s9C("defaultValue",t.gender),e.Q6J("options",t.genderOptions),e.xp6(3),e.s9C("label",e.lcZ(34,52,"COMMON_FIELDS.STATUS")),e.s9C("value",t.lookupLanguageTranslations(null==t.teacherData||null==t.teacherData.status?null:t.teacherData.status.lookup_id)),e.xp6(3),e.s9C("defaultImage",t.imgFilepath),e.s9C("imageName",t.imageName),e.Q6J("enableImageDelete",t.enableImageDeleteValue),e.xp6(2),e.s9C("label",e.lcZ(39,54,"COMMON_FIELDS.SUMMARY")),e.s9C("defaultvalue",null==t.teacherData?null:t.teacherData.summary),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(42,56,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(44,58,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(48,60,t.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("defaultValue",t.data),e.xp6(2),e.Q6J("ngIf",t.attributes&&t.attributes.length>0),e.xp6(1),e.Q6J("createdBy",t.createdBy)("lastUpdatedBy",t.updatedBy)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.teacherData?null:t.teacherData.createdAt)("lastUpdatedDate",null==t.teacherData?null:t.teacherData.updatedAt))},dependencies:[I.UQ,I.US,K.h4,j.O5,w.r,Y.a,ee.k,G.R,Q.f,te.W,Z.Q,B.$,R.q,S.X$]})}return o})();class je{address;enterprise;f_name;gender;l_name;newTeacherAttributes;nick_name;original_teacher_image_name;summary;teacherAttributes;teacher_image_name;teacher_image_path;teacher_name}var ae=c(15861);function Me(o,C){if(1&o){const a=e.EpF();e.TgZ(0,"app-button",35),e.NdJ("buttonOnClick",function(){e.CHM(a);const t=e.oxw(2);return e.KtG(t.editRecord("ACTIVE"))}),e.ALo(1,"translate"),e.qZA()}2&o&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_INACTIVATE"))}function De(o,C){if(1&o){const a=e.EpF();e.TgZ(0,"app-button",35),e.NdJ("buttonOnClick",function(){e.CHM(a);const t=e.oxw(2);return e.KtG(t.editRecord("INACTIVE"))}),e.ALo(1,"translate"),e.qZA()}2&o&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_ACTIVATE"))}function Re(o,C){if(1&o){const a=e.EpF();e.TgZ(0,"div",32),e.YNc(1,Me,2,3,"app-button",33),e.YNc(2,De,2,3,"app-button",33),e.TgZ(3,"app-button",34),e.NdJ("buttonOnClick",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.closeBtn())}),e.ALo(4,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.Q6J("ngIf","ACTIVE"===(null==a.teacherViewData||null==a.teacherViewData.status?null:a.teacherViewData.status.lookup_name)),e.xp6(1),e.Q6J("ngIf","INACTIVE"===(null==a.teacherViewData||null==a.teacherViewData.status?null:a.teacherViewData.status.lookup_name)),e.xp6(1),e.s9C("label",e.lcZ(4,3,"COMMON_BUTTONS.BUTTON_CLOSE"))}}function we(o,C){if(1&o){const a=e.EpF();e.TgZ(0,"div")(1,"app-button",34),e.NdJ("buttonOnClick",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.closeBtn())}),e.ALo(2,"translate"),e.qZA()()}2&o&&(e.xp6(1),e.s9C("label",e.lcZ(2,1,"COMMON_BUTTONS.BUTTON_CLOSE")))}function ke(o,C){if(1&o&&(e.TgZ(0,"p-accordionTab",36)(1,"p-header",37)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"app-attribute-values",38,39),e.qZA()),2&o){const a=e.oxw();e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(4,4,"COMMON_PAGE_TITLES.ATTRIBUTES")),e.xp6(2),e.Q6J("viewAttributes",a.viewattributes)("attributes",a.attributes)}}let se=(()=>{class o extends M.O{apiEndPointUrl;ColumnHeader;loggerService;navigationService;router;translateService;uiUtils;commonService;listingVariables;route;teacherService;toastController;userService;activate;apiEndPoint;attributes=[];countryCodeSplit;createdBy;creationDate;data;enterpriseId;error;header;imageName;imgFilepath;lastUpdatedBy;lastUpdatedDate;phoneSplit;recordId;statusActive;statusButtons=!1;statusObj;statusOptions;statusPagetitle=!1;teacherAddresstListData;teacherEditObject=new Je;teacherId;teacherStatus;teacherViewData;teachersAddressMobileListData=[];url;viewattributes;dataJsonObj={};constructor(a,s,t,i,n,l,d,u,h,p,m,g,T){super(p,u),this.apiEndPointUrl=a,this.ColumnHeader=s,this.loggerService=t,this.navigationService=i,this.router=n,this.translateService=l,this.uiUtils=d,this.commonService=u,this.listingVariables=h,this.route=p,this.teacherService=m,this.toastController=g,this.userService=T,this.route.queryParams.subscribe(k=>{this.dataJsonObj.queryParamsObj={defaultView:k.defaultView,selectedMenuId:k.selectedMenuId,selectedSubMenuId:k.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.TEACHERS,this.route.params.subscribe(t=>{this.recordId=t.id,this.getRecordById(this.recordId),this.getRecordByAddressId(this.recordId)}),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.RECORD_HISTORY),this.apiEndPoint=localStorage.getItem(r.BU.S3_URL)?localStorage.getItem(r.BU.S3_URL):this.apiEndPointUrl,this.header=this.ColumnHeader.getTeacherAddressColumnHeaders(),this.url=this.router.url.split("/")[4],this.commonService.trackView(r.sn.TEACHERS_VIEW),document.getElementsByTagName("body"),this.dataJsonObj.selectedPage=r.hf.TEACHERS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getRecordById(a){try{this.teacherService.get(a).subscribe(s=>{this.teacherViewData=s,this.imageName=s.f_name+" "+s.l_name,this.enterpriseId=this.teacherViewData.enterprise.enterprise_id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(t=>{this.dataJsonObj.lookupCodesListJSON=t,this.getStatusOptions()}),this.lastUpdatedDate=this.teacherViewData.updatedAt,this.lastUpdatedBy=this.teacherViewData.updated_by,this.createdBy=this.teacherViewData.created_by,this.creationDate=this.teacherViewData.createdAt,this.teacherStatus=this.lookupLanguageTranslations(this.teacherViewData.status.lookup_id),"status"===this.url&&this.teacherViewData.status.lookup_name===r.oP.ACTIVE?(this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.TEACHERS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_INACTIVATE",value:"",showSubMenuDisplayName:!1}],this.statusPagetitle=!0,this.statusButtons=!0,this.statusActive=!0,this.statusObj=this.activate):"status"===this.url&&this.teacherViewData.status.lookup_name===r.oP.INACTIVE?(this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.TEACHERS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_ACTIVATE",value:"",showSubMenuDisplayName:!1}],this.statusPagetitle=!0,this.statusButtons=!0,this.statusActive=!1,this.statusObj=this.activate):this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.TEACHERS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.imgFilepath=this.teacherViewData.teacher_image_path&&this.teacherViewData.teacher_image_name?this.apiEndPoint+this.teacherViewData.teacher_image_path+"/"+this.teacherViewData.teacher_image_name:null,this.teacherViewData.teacherAttributes&&(this.viewattributes=this.teacherViewData.teacherAttributes.rows,this.attributesList(this.enterpriseId))},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)}}getDynamicJson(a){var s=this;return(0,ae.Z)(function*(){for(let t of a)s.dataJsonObj[t.storingFieldName]=yield s.commonService.getDynamicJson(s.enterpriseId,t.folderName,t.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(t=>t.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}attributesList(a){try{this.userService.AttributesList(a,r.ox.TEACHERS).then(s=>{this.attributes=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"attributesList",s)}}getRecordByAddressId(a){try{this.teacherService.get(a).subscribe(s=>{this.teacherAddresstListData=s.address;for(let t=0;t<s.address.length;t++)s.address[t].label=s.address[t].address_label,s.address[t].firstLineDisplay=s.address[t].address_line1+" "+s.address[t].address_line2,s.address[t].secondLineDisplay=s.address[t].country&&s.address[t].country.lookup_name?s.address[t].city+" "+s.address[t].state.state_name+" "+s.address[t].country.lookup_name+" "+s.address[t].ZIP:s.address[t].city+" "+s.address[t].state.state_name+" "+s.address[t].ZIP,s.address[t].enabled=!0===s.address[t].primary?"Yes":"No",s.address[t].mobile_country_code&&s.address[t].mobile_country_code.lookup_name&&s.address[t].mobile_number?(3===s.address[t].mobile_country_code.lookup_name.split("-").length?(this.countryCodeSplit=s.address[t].mobile_country_code.lookup_name.split("-")[0]+"-"+s.address[t].mobile_country_code.lookup_name.split("-")[1],this.phoneSplit=this.countryCodeSplit+"-"+s.address[t].mobile_number):(this.countryCodeSplit=s.address[t].mobile_country_code.lookup_name.split("-")[0],this.phoneSplit=this.countryCodeSplit+"-"+s.address[t].mobile_number),s.address[t].phone_number=this.phoneSplit):s.address[t].phone_number=s.address[t].mobile_number,s.address[t].thirdLineDisplay=s.address[t].email+" "+s.address[t].phone_number,this.teachersAddressMobileListData=this.teachersAddressMobileListData.filter(i=>i._id!==s.rows[t]._id),this.teachersAddressMobileListData.push(s.address[t])},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordByAddressId",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecordByAddressId",s)}}getStatusOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[r.ox.TEACHER_STATUSES],"").then(a=>{this.statusOptions=a,this.statusObj=this.statusOptions.find(this.teacherViewData.status.lookup_name===r.oP.INACTIVE?s=>s.lookup_name===r.oP.ACTIVE:s=>s.lookup_name===r.oP.INACTIVE)},a=>{this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",a)}}editRecord(a){try{this.teacherEditObject.status=this.statusObj,this.teacherService.patch(this.teacherViewData._id,this.teacherEditObject).then(s=>{a===r.oP.INACTIVE?(this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE"),this.commonService.redirectToPreviousUrl()):(this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.commonService.redirectToPreviousUrl())},s=>{this.commonErrorCodes(JSON.parse(s)),this.loggerService.setLoggerError(this.constructor.name,"editRecord",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"editRecord",s)}}commonErrorCodes(a){const s=JSON.parse(a[r.BU.STATUS]);switch(s){case 500:case 404:default:break;case 409:this.error="COMMON_STATUS_CODES."+s}}closeBtn(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"closeBtn",a)}}static \u0275fac=function(s){return new(s||o)(e.Y36("apiEndPoint"),e.Y36(v.Y),e.Y36(D.m),e.Y36(q.f),e.Y36(b.F0),e.Y36(S.sK),e.Y36(_.s),e.Y36(E.v),e.Y36(A.v),e.Y36(b.gz),e.Y36(N),e.Y36(y.yF),e.Y36(H.K))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-teacher-view"]],features:[e._Bn([N,K.YP,_.s,A.v,v.Y]),e.qOj],decls:51,vars:55,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-lg-11","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-3"],["disabled","true","id","teacher-view-enterprisename",3,"label","value"],["autoCaseFlag","false","disabled","true","mandatory","false","id","teacher-view-teachername",3,"label","minlength","maxlength","value"],["id","teacher-view-firstname","disabled","true",3,"label","value"],["id","teacher-view-lastname","disabled","true",3,"label","value"],["disabled","true","id","teacher-view-gender",3,"label","value"],["disabled","true","id","teacher-view-status",3,"label","value"],[1,"col-lg-1","col-md-2","pdl-0","order-md-1"],["type","file",1,"edit-pic",3,"defaultImage","imageName"],[1,"col-md-10","order-md-1","order-2"],["mandatory","false","disabled","true","id","teacher-view-summary",3,"label","defaultvalue"],["class","col-md-2 text-end mt-2 order-md-1 order-2",4,"ngIf"],[1,"col-md-2","text-end","mt-2","mb-2","order-md-1","order-2"],[4,"ngIf"],[1,"error-msg","text-danger","text-center","mb-0"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],["flag","view",3,"defaultValue"],["id","createpreferencesId1",3,"selected",4,"ngIf"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[1,"col-md-2","text-end","mt-2","order-md-1","order-2"],["id","teacher-create-submit","className","btn btn-primary btn-sm","class","mgr-5","id","teacher-edit-submit",3,"label","buttonOnClick",4,"ngIf"],["className","btn btn-danger btn-sm","id","teacher-view-close",3,"label","buttonOnClick"],["id","teacher-create-submit","className","btn btn-primary btn-sm","id","teacher-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["id","createpreferencesId1",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["action","View","disabled","true",3,"viewAttributes","attributes"],["attributesComponent",""]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11),e._UZ(15,"app-input",13),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-input",14),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",11),e._UZ(21,"app-input",15),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",11),e._UZ(24,"app-input",15),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",11),e._UZ(27,"app-input",16),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div",11),e._UZ(30,"app-input",17),e.ALo(31,"translate"),e.qZA()()(),e.TgZ(32,"div",18),e._UZ(33,"app-imageupload",19),e.qZA(),e.TgZ(34,"div",20),e._UZ(35,"app-textarea",21),e.ALo(36,"translate"),e.qZA(),e.YNc(37,Re,5,5,"div",22),e.TgZ(38,"div",23),e.YNc(39,we,3,3,"div",24),e.TgZ(40,"p",25),e._uU(41),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"div",10)(44,"div",3)(45,"div",26)(46,"div",27)(47,"p-accordion",28),e._UZ(48,"app-addressdetails",29),e.YNc(49,ke,7,6,"p-accordionTab",30),e._UZ(50,"app-recordhistory",31),e.qZA()()()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(6),e.s9C("label",e.lcZ(13,37,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==t.teacherViewData||null==t.teacherViewData.enterprise?null:t.teacherViewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(16,39,"COMMON_PAGE_TITLES.TEACHER")),e.s9C("value",null==t.teacherViewData?null:t.teacherViewData.teacher_name),e.Q6J("minlength",3)("maxlength",20),e.xp6(3),e.s9C("label",e.lcZ(19,41,"COMMON_FIELDS.FIRST_NAME")),e.s9C("value",null==t.teacherViewData?null:t.teacherViewData.f_name),e.xp6(3),e.s9C("label",e.lcZ(22,43,"COMMON_FIELDS.LAST_NAME")),e.s9C("value",null==t.teacherViewData?null:t.teacherViewData.l_name),e.xp6(3),e.s9C("label",e.lcZ(25,45,"USERS.NICK_NAME")),e.s9C("value",null==t.teacherViewData?null:t.teacherViewData.nick_name),e.xp6(3),e.s9C("label",e.lcZ(28,47,"COMMON_FIELDS.GENDER")),e.s9C("value",t.lookupLanguageTranslations(null==t.teacherViewData||null==t.teacherViewData.gender?null:t.teacherViewData.gender.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(31,49,"COMMON_FIELDS.STATUS")),e.s9C("value",t.teacherStatus),e.xp6(3),e.s9C("defaultImage",t.imgFilepath),e.s9C("imageName",t.imageName),e.xp6(2),e.s9C("label",e.lcZ(36,51,"COMMON_FIELDS.SUMMARY")),e.s9C("defaultvalue",null==t.teacherViewData?null:t.teacherViewData.summary),e.xp6(2),e.Q6J("ngIf",!0===t.statusButtons),e.xp6(2),e.Q6J("ngIf",!1===t.statusButtons),e.xp6(2),e.hij(" ",e.lcZ(42,53,t.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("defaultValue",t.teacherAddresstListData),e.xp6(1),e.Q6J("ngIf",t.attributes.length>0),e.xp6(1),e.Q6J("createdBy",t.createdBy)("lastUpdatedBy",t.lastUpdatedBy)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",t.creationDate)("lastUpdatedDate",t.lastUpdatedDate))},dependencies:[I.UQ,I.US,K.h4,j.O5,w.r,Y.a,G.R,Q.f,te.W,Z.Q,B.$,R.q,S.X$]})}return o})();class Je{status}const Ve=["datatableComponent"];function Pe(o,C){if(1&o&&(e.TgZ(0,"div",30),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"a",31),e._uU(4," PigeonSuite-Pigeon-Teachers.xlsx "),e.qZA()()),2&o){const a=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"COMMON_FIELDS.PLEASE_DOWNLOAD")," "),e.xp6(2),e.s9C("download",a.usertemplatename)}}function Ue(o,C){if(1&o){const a=e.EpF();e.TgZ(0,"app-button",32),e.NdJ("buttonOnClick",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.importTeachersData())}),e.ALo(1,"translate"),e.qZA()}2&o&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_UPLOAD"))}let Fe=(()=>{class o extends M.O{actionSheetController;columnsheaders;loggerService;router;translateService;uiUtils;commonService;listingVariables;route;teacherService;toastController;datatableComponent;actions;activeObj;enterpriseId;error;eventClickData;excelfile;fabMobileactions;filename;importsError;isFilterClicked=!1;mobileroutesArray;noDuplicates=!0;show=!0;searchString;statsObj;statsteacherslistData;status;statusObj;statusObjs;tableColumnHeaders;teacherListData;teachersMobileListData;teachersStatObj=new Ze;toastMessage;dataJsonObj={};constructor(a,s,t,i,n,l,d,u,h,p,m){super(h,d),this.actionSheetController=a,this.columnsheaders=s,this.loggerService=t,this.router=i,this.translateService=n,this.uiUtils=l,this.commonService=d,this.listingVariables=u,this.route=h,this.teacherService=p,this.toastController=m,this.route.queryParams.subscribe(g=>{this.dataJsonObj.queryParamsObj={defaultView:g.default_view,selectedMenuId:g.selectedMenuId,selectedSubMenuId:g.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=r.hf.TEACHERS,this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:r.hf,pageSettingEnum:r.AM,pageSettingFieldsEnum:r.In},this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:r.hf,pageSettingEnum:r.AM,pageSettingFieldsEnum:r.In},this.enterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.TEACHERS",value:"",showSubMenuDisplayName:!0}],document.getElementsByTagName("body"),this.tableColumnHeaders=this.columnsheaders.getTeachersColumnHeaders(),this.commonService.trackView(r.sn.TEACHERS_LIST),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.statsteacherslistData=f.h.getTeachersListStats(this.isFilterClicked,this.eventClickData),this.actions={EDIT:this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.EDIT),ACTIVATE:this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.ACTIVATE),INACTIVATE:this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.INACTIVATE)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:r.gL.URL,redirectURL:"/alumnifeatures/teachers/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.FILTERS)}ionViewWillEnter(){this.actions={EDIT:this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.EDIT),ACTIVATE:this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.ACTIVATE),INACTIVATE:this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.INACTIVATE)}}getAllRecords(){try{this.activeObj=this.statusObj;const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView),s=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.teacherService.getAll(this.searchString,this.enterpriseId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.activeObj,this.isFilterClicked,a,s,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(this.hideSpinner(),t.rows.length>0){this.teachersMobileListData&&this.teachersMobileListData.length>0||(this.teachersMobileListData=[]);for(let i=0;i<t.rows.length;i++){if(t.rows[i].imageDisplay=t.rows[i].teacher_image_path&&t.rows[i].teacher_image_name?t.rows[i].teacher_image_path+"/"+t.rows[i].teacher_image_name:null,t.rows[i].imageName=t.rows[i].teacher_name,t.rows[i].teacher_name){const n={url:`alumnifeatures/teachers/${t.rows[i]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},l=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;t.rows[i].teacher_name=`<a class="enable" id="teacher_name${t.rows[i]._id}" href=${l}>${t.rows[i].teacher_name}`}t.rows[i].enterprise.short_name='<a class="enable" id="enterprise.short_name'+i+'" href="enterprises/enterprises/'+t.rows[i].enterprise.enterprise_id+'/view/" >'+t.rows[i].enterprise.short_name,this.teachersMobileListData=this.teachersMobileListData.filter(n=>n._id!==t.rows[i]._id),this.teachersMobileListData.push(t.rows[i])}t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.teacherListData=this.teacherListData.concat(t.rows)):this.teacherListData=t.rows}else this.teacherListData=[],this.teachersMobileListData=[];this.teachersStatObj.TOTAL_TEACHERS=t.totalCount,this.teachersStatObj.TOTAL_TEACHERS_ACTIVE=t.ActiveCount,this.teachersStatObj.TOTAL_TEACHERS_INACTIVE=t.InActiveCount,this.statsDisabled(this.teachersStatObj.TOTAL_TEACHERS,this.teachersStatObj.TOTAL_TEACHERS_ACTIVE,this.teachersStatObj.TOTAL_TEACHERS_INACTIVE)},t=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)})}catch(a){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.teachersMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}getSearchResult(a){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",s)}}searchClose(){try{this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"searchClose",a)}}toggle(){this.show=!this.show}actionEvent(a){try{this.router.routeReuseStrategy.clearModuleRouteCache("teachers"),this.router.navigate(["/alumnifeatures/teachers/"+a._id+"/edit"])}catch(s){this.loggerService.setLoggerError(this.constructor.name,"actionEvent",s)}}teacherCheckboxActionEvent(a){this.router.routeReuseStrategy.clearModuleRouteCache("teachers"),this.router.navigate(["/alumnifeatures/teachers/"+a._id+"/status"])}createTeacher(){try{this.router.navigate(["/alumnifeatures/teachers/create"])}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createTeacher",a)}}onActionClicked(a){try{const s=a.data._id;a.action===r.A0.EDIT?this.router.navigate(["/alumnifeatures/teachers/"+s+"/edit"]):(a.action===r.A0.ACTIVATE||a.action===r.A0.INACTIVATE)&&(this.router.navigate(["/alumnifeatures/teachers/"+s+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("status"))}catch(s){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",s)}}getRedirectTeachers(a){try{this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.VIEW)&&this.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRedirectTeachers",s)}}mobileEventAction(a){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.ACTIVATE)&&a.status.lookup_name===r.oP.INACTIVE&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{this.router.navigate(["/alumnifeatures/teachers/"+a._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("teachers")}}),this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["/alumnifeatures/teachers/"+a._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("teachers")}}),this.roleRightsValidationByPage(r.hf.TEACHERS,r.AM.ACTIONS,r.In.INACTIVATE)&&a.status.lookup_name===r.oP.ACTIVE&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{this.router.navigate(["/alumnifeatures/teachers/"+a._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("teachers")}}),this.presentActionSheet(a)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",s)}}presentActionSheet(a){var s=this;return(0,ae.Z)(function*(){s.mobileroutesArray&&s.mobileroutesArray.length>0&&(yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileroutesArray})).present())})()}openPopup(){try{this.excelfile="";const a=document.getElementById("excelfile");document.getElementById("importFile").innerHTML=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NO_FILE_CHOOSEN"),$("#exampleModal").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal"),this.error="",a.value=""}catch(a){this.loggerService.setLoggerError(this.constructor.name,"openPopup",a)}}closePopup(){try{const a=document.getElementById("excelfile");$("#exampleModal").modal("hide"),this.error="",a.value=""}catch(a){this.loggerService.setLoggerError(this.constructor.name,"closePopup",a)}}getExcelFile(a){try{if(a){this.error="";const s=a.target.files,t=document.getElementById("importFile");s.length>0?(this.excelfile=s[0],this.displayFileName(s[0].name)):(this.excelfile="",t.innerHTML=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_NO_FILE_CHOOSEN"))}}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getExcelFile",s)}}displayFileName(a){try{const s=document.getElementById("importFile");let t=a;null!=t&&""!==t&&t.split(".")[0].length>25&&(t=t.split(".")[0].substring(0,25)+".."+t.split(".")[1]),s.innerHTML=t}catch(s){this.loggerService.setLoggerError(this.constructor.name,"displayFileName",s)}}importTeachersData(){try{if(O.L.isEmpty(this.excelfile))this.importsError="COMMON_VALIDATION_MESSAGES.VALID_FILETYPE";else{const a=this.excelfile.type,s=a.substring(a.lastIndexOf("/"));-1==["/xls","/xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","/vnd.ms-excel","/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].indexOf(s)?this.importsError="COMMON_VALIDATION_MESSAGES.VALID_FILETYPE":this.teacherService.importTeachers(this.excelfile).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.teacherService.reportlist(i.fileName).subscribe(l=>{this.downLoadFile(l,i.fileName,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet; /xls; /xlsx; /vnd.ms-excel; /vnd.openxmlformats-officedocument.spreadsheetml.sheet")},l=>{this.commonErrorCodes(JSON.parse(l))}),$("#exampleModal").modal("hide"),this.excelfile="",this.teacherListData=[],this.getAllRecords()},i=>{this.commonErrorCodes(JSON.parse(i)),this.loggerService.setLoggerError(this.constructor.name,"importTeachers",i)})}}catch(a){this.loggerService.setLoggerError(this.constructor.name,"importTeachersData",a)}}commonErrorCodes(a){switch(JSON.parse(a[r.BU.STATUS])){case 500:default:break;case 404:this.toastMessage=this.translateService.instant("COMMON_STATUS_CODES.404"),this.uiUtils.displayWarningMessage(this.toastMessage)}}downLoadFile(a,s,t){try{const i=new Blob([a.body],{type:t}),n=document.createElement("a");n.href=URL.createObjectURL(i),this.filename=s.split("/").pop(),n.download=this.filename,document.body.appendChild(n),n.click()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"downLoadFile",i)}}statsDisabled(a,s,t){try{this.statsObj=[],this.statsObj.push(0!==a?{value1:"TOTAL_TEACHERS"}:{value1:""}),this.statsObj.push(0!==s?{value2:"TOTAL_TEACHERS_ACTIVE"}:{value2:""}),this.statsObj.push(0!==t?{value3:"TOTAL_TEACHERS_INACTIVE"}:{value3:""}),this.statsteacherslistData=f.h.getTeachersListStatsDisabled(this.isFilterClicked,"",this.statsObj)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"statsDisabled",i)}}statusData(a){try{this.isFilterClicked=!0,this.statusObj=a.value,this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.teachersMobileListData=[],this.getAllRecords()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"statusData",s)}}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a||(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(s){return new(s||o)(e.Y36(y.BX),e.Y36(v.Y),e.Y36(D.m),e.Y36(b.F0),e.Y36(S.sK),e.Y36(_.s),e.Y36(E.v),e.Y36(A.v),e.Y36(b.gz),e.Y36(N),e.Y36(y.yF))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-teachers-list"]],viewQuery:function(s,t){if(1&s&&e.Gf(Ve,5),2&s){let i;e.iGM(i=e.CRH())&&(t.datatableComponent=i.first)}},features:[e._Bn([N,A.v,v.Y,_.s]),e.qOj],decls:34,vars:42,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],[1,"",3,"actions","header","paginator","listingVariables","totalPages","mobileListData","data","totalRecords","expand","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","itemClickEvent","actionClicked","buttonAction","status","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"],[1,"datamodal"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"position-relative","w-100"],[1,"d-flex","align-items-center","justify-content-between"],[1,"popupsection-title","mgb-0"],["data-bs-dismiss","modal",1,"fas","fa-times","cursor-pointer"],[1,"modal-body"],[1,"col-md-12","form-bs","pd-0"],[1,"form-group","row","mgb-5"],["class","col-md-12  fleetftsub fw-600 text-center text-dark",4,"ngIf"],[1,"custom-file","mgb-10","fs-12"],["type","file","id","excelfile","accept","application/vnd.ms-excel","name","file-input",1,"form-control",3,"change"],["id","importFile","for","customFile",1,"custom-file-label"],[1,"error-msg","text-danger","mb-0","fs-xsmall"],[1,"modal-footer"],[1,"col-md-12","text-end","uploadcls","pd-0"],["className","btn btn-primary btn-sm","class","mgr-5","id","teachers-list-import",3,"label","buttonOnClick",4,"ngIf"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","teachers-list-close",3,"label","buttonOnClick"],[1,"col-md-12","fleetftsub","fw-600","text-center","text-dark"],["href","assets/import_templates/Pigeon-ImportTemplate-Teachers.xlsx",3,"download"],["className","btn btn-primary btn-sm","id","teachers-list-import",1,"mgr-5",3,"label","buttonOnClick"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(n){return t.onHeaderItemClick(n)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("itemClickEvent",function(n){return t.getRedirectTeachers(n)})("actionClicked",function(n){return t.onActionClicked(n)})("buttonAction",function(n){return t.actionEvent(n)})("status",function(n){return t.teacherCheckboxActionEvent(n)})("redirectionEvent",function(n){return t.mobileEventAction(n)})("changeStats",function(n){return t.statusData(n)})("loadPageData",function(n){return t.loadPageData(n)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(n){return t.onPageLevelActionClicked(n)}),e.qZA()()()()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"h5",16),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"i",17),e.qZA()()(),e.TgZ(20,"div",18)(21,"div",19)(22,"div",20),e.YNc(23,Pe,5,4,"div",21),e.qZA(),e.TgZ(24,"div",22)(25,"input",23),e.NdJ("change",function(n){return t.getExcelFile(n)}),e.qZA(),e._UZ(26,"label",24),e.qZA(),e.TgZ(27,"p",25),e._uU(28),e.qZA()()(),e.TgZ(29,"div",26)(30,"div",27),e.YNc(31,Ue,2,3,"app-button",28),e.TgZ(32,"app-button",29),e.NdJ("buttonOnClick",function(){return t.closePopup()}),e.ALo(33,"translate"),e.qZA()()()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("actions",t.actions)("header",t.tableColumnHeaders)("paginator",!0)("listingVariables",t.listingVariables)("totalPages",t.listingVariables.totalpages)("mobileListData",t.teachersMobileListData)("data",t.teacherListData)("totalRecords",t.listingVariables.totalRecords)("expand",!1)("statsDisplay",t.statsteacherslistData)("statData",t.teachersStatObj)("statusDisplay",t.statusObj)("statsShow",t.show)("showRights",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.TEACHERS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",t.searchString)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",t.dataJsonObj.showSpinner)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList),e.xp6(9),e.Oqu(e.lcZ(18,38,"COMMON_BUTTONS.BUTTON_IMPORT")),e.xp6(6),e.Q6J("ngIf",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.TEACHERS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.IMPORT)),e.xp6(5),e.Oqu(t.importsError),e.xp6(3),e.Q6J("ngIf",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.TEACHERS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.EXPORT)),e.xp6(1),e.s9C("label",e.lcZ(33,40,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[j.O5,w.r,V.n,R.q,F.y,S.X$]})}return o})();class Ze{TOTAL_TEACHERS;TOTAL_TEACHERS_ACTIVE;TOTAL_TEACHERS_INACTIVE}const Be=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"rankers/list",component:ue,canActivate:[L.P],data:{module:r.w1.RANKERS,object_type:r.hf.RANKERS,title:"Rankers Listing",responsibilityParam:r.bP.MENUS+"."+r.w1.ALUMNI_FEATURES+"."+r.bP.SUBMENUS+"."+r.w1.RANKERS+"."+r.Iu.ENABLED,pageName:r.hf.RANKERS}},{path:"teachers/list",canActivate:[L.P],component:Fe,data:{object_type:r.hf.TEACHERS,title:"Teachers Listing",responsibilityParam:r.bP.MENUS+"."+r.w1.ALUMNI_FEATURES+"."+r.bP.SUBMENUS+"."+r.w1.TEACHERS+"."+r.Iu.ENABLED,pageName:r.hf.TEACHERS}},{path:"teachers/create",canActivate:[L.P],component:_e,data:{object_type:r.hf.TEACHERS,title:"Teacher Create",responsibilityParam:r.bP.MENUS+"."+r.w1.ALUMNI_FEATURES+"."+r.bP.SUBMENUS+"."+r.w1.TEACHERS+"."+r.In.CREATE,pageName:r.hf.TEACHERS,pageSetting:r.AM.ACTIONS,settingField:r.In.CREATE}},{path:"teachers/:id/view",component:se,canActivate:[L.P],data:{object_type:r.hf.TEACHERS,title:"Teacher View",responsibilityParam:r.bP.MENUS+"."+r.w1.ALUMNI_FEATURES+"."+r.bP.SUBMENUS+"."+r.w1.TEACHERS+"."+r.In.VIEW,pageName:r.hf.TEACHERS,pageSetting:r.AM.ACTIONS,settingField:r.In.VIEW}},{path:"teachers/:id/edit",component:Le,canActivate:[L.P],data:{object_type:r.hf.TEACHERS,title:"Teacher Edit",responsibilityParam:r.bP.MENUS+"."+r.w1.ALUMNI_FEATURES+"."+r.bP.SUBMENUS+"."+r.w1.TEACHERS+"."+r.In.EDIT,pageName:r.hf.TEACHERS,pageSetting:r.AM.ACTIONS,settingField:r.In.EDIT}},{path:"teachers/:id/status",canActivate:[L.P],component:se,data:{object_type:r.hf.TEACHERS,title:"Teacher Edit",responsibilityParam:r.bP.MENUS+"."+r.w1.ALUMNI_FEATURES+"."+r.bP.SUBMENUS+"."+r.w1.TEACHERS+"."+r.In.ACTIVATE,pageName:r.hf.TEACHERS,pageSetting:r.AM.ACTIONS,settingField:r.In.ACTIVATE}},{path:"distinguishedalumni/list",component:oe,canActivate:[L.P],data:{object_type:r.hf.DIST_ALUMNI,module:r.w1.MODULE_DIST_ALUMNI,responsibilityParam:r.bP.MENUS+"."+r.w1.ALUMNI_FEATURES+"."+r.bP.SUBMENUS+"."+r.w1.DISTALUMNI+"."+r.Iu.ENABLED,pageName:r.hf.DIST_ALUMNI}}];let He=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[b.Bz.forChild(Be),b.Bz]})}return o})();var qe=c(83748),Ye=c(65673);let Ge=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[I.fx,He,j.ez,J.u5,J.UX,qe.v,S.aw,Ye.Q,y.Pc.forRoot()]})}return o})()}}]);