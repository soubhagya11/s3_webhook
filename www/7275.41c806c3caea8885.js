"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7275],{7275:(it,G,p)=>{p.r(G),p.d(G,{ReportsModule:()=>st});var O=p(36895),g=p(24006),C=p(93144),T=p(54463),y=p(32174),X=p(32137),ee=p(3848),te=p(83748),b=p(62510),J=p(15861),n=p(32236),S=p(42863),L=p(71568),B=p(28168),R=p(30578),I=p(42786),ae=p(77232),se=p(75875),x=p(90313),e=p(94650),ie=p(80529);let v=(()=>{class o{authService;http;constructor(t,s){this.authService=t,this.http=s}getAll(t,s,a,i,r,u,m,_,h,c){const U=h||"",A=x.L.isEmpty(c)?"":"&advSearchString="+JSON.stringify(c);return this.authService.getApiCall("api/v1/reportsubmissions?report.report_id="+r+"&skip="+t+"&limit="+s+"&type=list&sort="+a+"&search="+i+"&enterprise.enterprise_id="+u+_+A+U,m)}reportParametersList(t){return new Promise((s,a)=>{this.authService.getApiCall("api/v1/reportparameters?type=list&report_id="+t).subscribe(i=>{s(i)},i=>{a(i)})})}reportParametersList1(t){return new Promise((s,a)=>{this.authService.getApiCall("api/v1/reportparameters?type=list&action=reRun&Id="+t).subscribe(i=>{s(i)},i=>{a(i)})})}submitget(t){return new Promise((s,a)=>{this.authService.getApiCall("api/v1/reports?type=list&generateReport=true&report_id="+t).subscribe(i=>{s(i)},i=>{a(i)})})}create(t){return new Promise((s,a)=>{this.authService.postApiCall("api/v1/reports/",t).subscribe(i=>{s(i)},i=>{a(i)})})}getLookupTypes(t,s){return new Promise((a,i)=>{this.authService.getApiCall("api/v1/lookupcodes?type=drop&enterprise.enterprise_id="+s+"&lookupType.lookup_type_name="+t).subscribe(r=>{a(r)},r=>{i(r)})})}getLookupscodes(t,s){return new Promise((a,i)=>{this.authService.getApiCall("api/v1/lookupcodes?type=drop&enterprise.enterprise_id="+t+"&lookupType.lookup_type_name="+s).subscribe(r=>{a(r)},r=>{i(r)})})}reportParametersListData(t,s,a){return new Promise((i,r)=>{this.authService.getApiCall("api/v1/reports?type=drop&tablename="+t+"&Column="+s+"&search="+a).subscribe(u=>{i(u)},u=>{r(u)})})}getReportViewData(t){return this.authService.getApiCall("api/v1/reports/"+t)}get(t){return this.authService.getApiCall("api/v1/reportsubmissions/"+t)}editWidgetData(t,s){return new Promise((a,i)=>{this.authService.putApiCall("api/v1/widgets/"+t,s).subscribe(r=>{a(r)},r=>{i(r)})})}getReportsList(t,s,a,i,r,u,m,_,h){const c=_||"",U=x.L.isEmpty(h)?"":"&advSearchString="+JSON.stringify(h);return this.authService.getApiCall("api/v1/reports?type=list&report_group.lookup_name="+t+"&skip="+s+"&limit="+a+"&sort="+i+"&search="+r+"&enterprise.enterprise_id="+u+m+c+U)}reportCancelRequest(t,s){return new Promise((a,i)=>{this.authService.patchApiCall("api/v1/reportsubmissions/"+t,s).subscribe(r=>{a(r)},r=>{i(r)})})}reportlist(t){return this.authService.getReport(t)}getStaticReport(){return new Promise((t,s)=>{this.http.get("assets/import_templates/Pigeon-ImportTemplate-Users.xlsx").subscribe(a=>{t(a)},a=>{s(a)})})}static \u0275fac=function(s){return new(s||o)(e.LFG(se.e),e.LFG(ie.eN))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var M=p(47561),q=p(70057),D=p(37415),Y=p(88425);const re=["datatableComponent"];let f=(()=>{class o extends M.O{route;router;commonService;translateService;columnsheaders;actionSheetController;loggerService;listingVariables;reportsService;datatableComponent;actions;listData;mobileRoutesArray=[];noDuplicates=void 0;objectType;pageTitle;reportsListData;reportsMobileListData;searchString;tableColumnheaders;enterpriseId;value;dataJsonObj={};constructor(t,s,a,i,r,u,m,_,h){super(t,a),this.route=t,this.router=s,this.commonService=a,this.translateService=i,this.columnsheaders=r,this.actionSheetController=u,this.loggerService=m,this.listingVariables=_,this.reportsService=h,this.route.queryParams.subscribe(c=>{this.dataJsonObj.queryParamsObj={defaultView:c.defaultView,selectedMenuId:c.selectedMenuId,selectedSubMenuId:c.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORTS,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.REPORTS",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.advancedSearchObj={},this.commonService.trackView(n.sn.REPORTS_LIST),this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.objectType=this.route.snapshot.data.object_type,document.getElementsByTagName("body"),this.tableColumnheaders=this.columnsheaders.getReportsColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.actions={GENERATE:this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.CREATE)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:n.gL.URL,redirectURL:"",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.FILTERS)}refresh(){this.reportsMobileListData=this.noDuplicates,this.reportsListData=[],this.translateService.use(localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE)).subscribe(t=>{const s=JSON.parse(localStorage.getItem(n.BU.MENU_CLICK_ITEM));this.pageTitle=this.translateService.instant("COMMON_FIELDS.ALL")+" "+(s.submenu_display_name?s.submenu_display_name:this.translateService.instant("COMMON_PAGE_TITLES.REPORTS"))}),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllFilteredRecords()}getAllFilteredRecords(){switch(this.tableColumnheaders=this.columnsheaders.getReportsColumnHeaders(),this.objectType){case n.hf.ALL:this.value="",this.getAllRecords(this.value);break;case n.Ty.CORE_FEATURES_MANAGER:this.translateService.use(localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE)).subscribe(t=>{this.pageTitle=this.translateService.instant("COMMON_FIELDS.ALL")+" "+this.translateService.instant("COMMON_PAGE_TITLES.REPORTS")+" - "+this.translateService.instant("COMMON_PAGE_TITLES.CORE_FEATURES_MANAGER")}),this.value=n.Ty.CORE_FEATURES_MANAGER,this.getAllRecords(this.value);break;case n.hf.PROJECTS_PLUGIN:this.translateService.use(localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE)).subscribe(t=>{this.pageTitle=this.translateService.instant("COMMON_FIELDS.ALL")+" "+this.translateService.instant("COMMON_PAGE_TITLES.REPORTS")+" - "+this.translateService.instant("COMMON_PAGE_TITLES.PROJECTS")}),this.value=n.hf.PROJECTS_PLUGIN,this.getAllRecords(this.value);break;case n.Ty.FANGAGE:this.translateService.use(localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE)).subscribe(t=>{this.pageTitle=this.translateService.instant("COMMON_FIELDS.ALL")+" "+this.translateService.instant("COMMON_PAGE_TITLES.REPORTS")+" - "+this.translateService.instant("COMMON_PAGE_TITLES.FANGAGE")}),this.value=n.Ty.FANGAGE,this.getAllRecords(this.value);break;case n.Ty.ALUMNI_MANAGER:this.translateService.use(localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE)).subscribe(t=>{this.pageTitle=this.translateService.instant("COMMON_FIELDS.ALL")+" "+this.translateService.instant("COMMON_PAGE_TITLES.REPORTS")+" - "+this.translateService.instant("COMMON_PAGE_TITLES.ALUMNI_FEATURES")}),this.value=n.Ty.ALUMNI_MANAGER,this.getAllRecords(this.value)}}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(this.value),this.datatableComponent.reset()}getAllRecords(t){try{const s=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.reportsService.getReportsList(t,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,s,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(i=>{if(i.rows.length>0){this.reportsMobileListData&&this.reportsMobileListData.length>0||(this.reportsMobileListData=[]);for(let r=0;r<i.rows.length;r++)i.rows[r].page_name="Reports",i.rows[r].reportname=i.rows[r].report_name,i.rows[r].href="reports/"+i.rows[r]._id+"/reportsubmission",i.rows[r].report_name='<a class="enable" id="report_name'+i.rows[r]._id+'" href="reports/'+i.rows[r]._id+'/reportsubmission" >'+i.rows[r].report_name,i.rows[r].submittedAt=i.rows[r].submittedAt?this.commonService.dbTimezoneFormatWithHours(i.rows[r].submittedAt):"",i.rows[r].last_submission_status&&(i.rows[r].last_submission_status.lookup_id=i.rows[r].last_submission_status?this.lookupLanguageTranslations(i.rows[r].last_submission_status.lookup_id):""),i.rows[r].start_date=i.rows[r].start_date?this.commonService.dbTimezoneFormatWithHours(i.rows[r].start_date):"",i.rows[r].end_date=i.rows[r].end_date?this.commonService.dbTimezoneFormatWithHours(i.rows[r].end_date):"",i.rows[r].last_submission_run_by&&(i.rows[r].run_by=i.rows[r].last_submission_run_by.f_name+" "+i.rows[r].last_submission_run_by.l_name),i.rows[r].recCount=0===i.rows[r].record_count?"0":i.rows[r].record_count,this.reportsMobileListData=this.reportsMobileListData.filter(u=>u._id!==i.rows[r]._id),this.reportsMobileListData.push(i.rows[r]),i.totalCount&&(this.listingVariables.totalRecords=i.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=i.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.listData=this.listData.concat(i.rows)):this.listData=i.rows}else this.reportsMobileListData=[],this.listData=[]})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",s)}}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.reportsMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllFilteredRecords()}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllFilteredRecords(),this.datatableComponent.reset()}onActionClicked(t){try{t.action===n.A0.GENERATE&&this.router.navigate(["reports/"+t.data._id+"/reportsubmission-create"])}catch(s){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",s)}}mobileEventAction(t){try{this.mobileRoutesArray=[],(this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.CREATE)&&t.status.lookup_name&&"COMPLETED"===t.status.lookup_name||""===t.status)&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_GENERATE"),handler:()=>{this.router.navigate(["reports/"+t._id+"/reportsubmission-create"])}}),this.presentActionSheet(t)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",s)}}presentActionSheet(t){var s=this;return(0,J.Z)(function*(){try{yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileRoutesArray})).present()}catch(a){s.loggerService.setLoggerError(s.constructor.name,"presentActionSheet",a)}})()}getRedirect(t){try{this.router.navigate(["reports/"+t._id+"/reportsubmission"]),this.router.routeReuseStrategy.clearModuleRouteCache("reports")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRedirect",s)}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t||(this.dataJsonObj.selectedFilter="")}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(s){return new(s||o)(e.Y36(b.gz),e.Y36(b.F0),e.Y36(L.v),e.Y36(T.sK),e.Y36(S.Y),e.Y36(q.BX),e.Y36(I.m),e.Y36(R.v),e.Y36(v))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-reports-listing"]],viewQuery:function(s,a){if(1&s&&e.Gf(re,5),2&s){let i;e.iGM(i=e.CRH())&&(a.datatableComponent=i.first)}},features:[e._Bn([S.Y,ae.s,R.v]),e.qOj],decls:9,vars:26,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],[1,"card-body","pdt-0","pdl-0","pdr-0","pdb-0"],["id","tagid",3,"header","actions","totalPages","totalRecords","paginator","data","mobileListData","expand","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","itemClickEvent","actionClicked","redirectionEvent","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(r){return a.onHeaderItemClick(r)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("itemClickEvent",function(r){return a.getRedirect(r)})("actionClicked",function(r){return a.onActionClicked(r)})("redirectionEvent",function(r){return a.mobileEventAction(r)})("loadPageData",function(r){return a.loadPageData(r)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(r){return a.onPageLevelActionClicked(r)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.tableColumnheaders)("actions",a.actions)("totalPages",a.listingVariables.totalpages)("totalRecords",a.listingVariables.totalRecords)("paginator",!0)("data",a.listData)("mobileListData",a.reportsMobileListData)("expand",!1)("listingVariables",a.listingVariables)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[B.n,D.q,Y.y]})}return o})();var k=p(27601),Z=p(2387),V=p(56368);const oe=["datatableComponent"];let P=(()=>{class o extends M.O{translateService;reportService;ColumnHeader;listingVariables;uiUtils;router;commonService;actionSheetController;loggerService;route;apiEndPointUrl;datatableComponent;actions;apiEndPoint;enterpriseId;error;eventClick;forcerefresh=!1;listData;mobileroutesArray;noDublicates=void 0;objectType;recordId;reportName;reportNamePath;reportViewData;reportsubmissionMobileList=[];runBy;searchString;tableColumnheaders;toastMessage;dataJsonObj={};constructor(t,s,a,i,r,u,m,_,h,c,U){super(c,m),this.translateService=t,this.reportService=s,this.ColumnHeader=a,this.listingVariables=i,this.uiUtils=r,this.router=u,this.commonService=m,this.actionSheetController=_,this.loggerService=h,this.route=c,this.apiEndPointUrl=U,this.route.params.subscribe(A=>{this.recordId=A.id}),this.route.queryParams.subscribe(A=>{this.dataJsonObj.queryParamsObj={defaultView:A.default_view,selectedMenuId:A.selectedMenuId,selectedSubMenuId:A.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_SUBMISSIONS,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.SUBMISSIONS",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.noDuplicates=void 0,this.commonService.trackView(n.sn.REPORTSUBMISSION_LISTING),this.apiEndPoint=this.apiEndPointUrl,this.objectType=this.route.snapshot.data.object_type,document.getElementsByTagName("body"),this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.tableColumnheaders=this.ColumnHeader.getreportsubmissionColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.actions={VIEW:!0,DOWNLOAD_REPORT:!0,REBOOK:!0,CANCELLED:!0},this.commonService.currentEvent.subscribe(s=>{"reportsubmission"===s&&(this.forcerefresh=!0)}),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:n.gL.URL,redirectURL:"",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.GENERATE),this.getReportbyId()}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset()}getReportbyId(){try{this.reportService.getReportViewData(this.recordId).subscribe(t=>{this.reportViewData=t,this.reportName=this.reportViewData.report_name,this.commonService.setCurrentPageTitle(this.reportName,this.recordId)}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getReportViewData",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getReportbyId",t)}}getAllRecords(){try{const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.reportService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.recordId,this.enterpriseId,this.forcerefresh,t,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"").subscribe(a=>{if(a.rows.length>0){this.reportsubmissionMobileList&&this.reportsubmissionMobileList.length>0||(this.reportsubmissionMobileList=[]),this.forcerefresh&&(this.reportsubmissionMobileList=[]);for(let i=0;i<a.rows.length;i++)a.rows[i].page_name="Report_submissions",this.reportName=a.rows[0].report.report_name,this.commonService.setCurrentPageTitle(this.reportName,this.recordId),a.rows[i].run_by&&(a.rows[i].run_by=a.rows[i].run_by.f_name+" "+a.rows[i].run_by.l_name),a.rows[i].submission_start_date=a.rows[i].submission_start_date?this.commonService.dbTimezoneFormatWithHours(a.rows[i].submission_start_date):"",a.rows[i].submission_end_date=a.rows[i].submission_end_date?this.commonService.dbTimezoneFormatWithHours(a.rows[i].submission_end_date):"",a.rows[i].schedule_start_date=this.commonService.dbTimezoneFormatWithHours(a.rows[i].schedule_start_date),a.rows[i].schedule_end_date=this.commonService.dbTimezoneFormatWithHours(a.rows[i].schedule_end_date),this.reportsubmissionMobileList=this.reportsubmissionMobileList.filter(r=>r._id!==a.rows[i]._id),this.reportsubmissionMobileList.push(a.rows[i]);a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.listData=this.listData.concat(a.rows)):this.listData=a.rows}else this.listData=[],this.reportsubmissionMobileList=[]})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"onSort",t)}}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.reportsubmissionMobileList=this.dataJsonObj.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked),this.getAllRecords()}searchClose(){this.reportsubmissionMobileList=[],this.searchString="",this.reportsubmissionMobileList=this.noDublicates,this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}mobileEventAction(t){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.CANCEL)&&t.status.lookup_name&&("PENDING"===t.status.lookup_name||"RUNNING"===t.status.lookup_name)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_CANCEL"),handler:()=>{this.cancelReportGeneration(t)}}),(this.roleRightsValidationByPage(n.hf.REPORTS,n.AM.ACTIONS,n.In.GENERATE)&&t.status.lookup_name&&"COMPLETED"===t.status.lookup_name||""===t.status)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_GENERATE"),handler:()=>{this.router.navigate(["reports/"+t._id+"/reportsubmission-rerun"]),this.router.routeReuseStrategy.clearModuleRouteCache("reports")}}),this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",t.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.presentActionSheet(t)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",s)}}presentActionSheet(t){var s=this;return(0,J.Z)(function*(){try{yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileroutesArray})).present()}catch(a){s.loggerService.setLoggerError(s.constructor.name,"presentActionSheet",a)}})()}getRedirect(t){this.router.navigate(["reports/"+t._id+"/reportsubmission-view"]),this.router.routeReuseStrategy.clearModuleRouteCache("reports")}onActionClicked(t){t.action===n.A0.REBOOK?(this.router.navigate(["reports/"+t.data._id+"/reportsubmission-rerun"]),this.router.routeReuseStrategy.clearModuleRouteCache("reports")):t.action===n.A0.VIEW?this.commonService.redirectToUrl(["..",t.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):"CANCELLED"===t.action?this.cancelReportGeneration(t):"DOWNLOAD_REPORT"===t.action&&(this.reportName=t.data.report.report_name,this.reportNamePath=this.apiEndPoint+t.data.report_dump_path+"/"+t.data.report_dump_name,this.runBy=t.data.run_by,$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1"))}cancelReportGeneration(t){try{this.reportService.reportCancelRequest(t.data?t.data._id:t._id,{status:"CANCELLED",report:t.data?t.data.report:t.report,enterprise:t.data?t.data.enterprise:t.enterprise}).then(a=>{this.getAllRecords(),this.router.routeReuseStrategy.clearModuleRouteCache("reports"),this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT")}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"cancelReportGeneration",a)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"cancelReportGeneration",s)}}downLoadFile(t,s,a){const i=new Blob([t.body],{type:a}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download=s,document.body.appendChild(r),r.click(),$("#exampleModal1 ").modal("hide")}commonErrorCodes(t){const s=JSON.parse(t[n.BU.STATUS]);switch(s){case 500:default:break;case 404:this.toastMessage=this.translateService.instant("COMMON_STATUS_CODES.404"),this.uiUtils.displayWarningMessage(this.toastMessage);break;case 409:this.error="COMMON_STATUS_CODES."+s;break;case 412:this.error="COMMON_STATUS_CODES.10060"}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(s){return new(s||o)(e.Y36(T.sK),e.Y36(v),e.Y36(S.Y),e.Y36(R.v),e.Y36(k.s),e.Y36(b.F0),e.Y36(L.v),e.Y36(q.BX),e.Y36(I.m),e.Y36(b.gz),e.Y36("apiEndPoint"))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-report-submissions-listing"]],viewQuery:function(s,a){if(1&s&&e.Gf(oe,5),2&s){let i;e.iGM(i=e.CRH())&&(a.datatableComponent=i.first)}},features:[e._Bn([S.Y,R.v,v]),e.qOj],decls:32,vars:48,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],[1,"card-body","pdt-0","pdl-0","pdr-0","pdb-0"],["id","tagid",3,"header","actions","paginator","totalPages","totalRecords","data","mobileListData","expand","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[1,"row","form-bs"],[1,"col-md-12"],["disabled","true","id","report-submissions-list-reportfile",3,"label","value"],["disabled","true","id","report-submissions-list-runby",3,"label","value"],[1,"modal-footer","mb-2"],[1,"col-md-8"],[3,"href"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","report-submissions-list-no",3,"label"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(r){return a.onHeaderItemClick(r)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(r){return a.onActionClicked(r)})("itemClickEvent",function(r){return a.getRedirect(r)})("redirectionEvent",function(r){return a.mobileEventAction(r)})("loadPageData",function(r){return a.loadPageData(r)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(r){return a.onPageLevelActionClicked(r)}),e.qZA()()()()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",14)(17,"div",15)(18,"div",16),e._UZ(19,"app-input",17),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",16),e._UZ(22,"app-input",18),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",19)(25,"div",20)(26,"a",21),e._uU(27),e.ALo(28,"translate"),e.ALo(29,"translate"),e.qZA()(),e._UZ(30,"app-button",22),e.ALo(31,"translate"),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.tableColumnheaders)("actions",a.actions)("paginator",!0)("totalPages",a.listingVariables.totalpages)("totalRecords",a.listingVariables.totalRecords)("data",a.listData)("mobileListData",a.reportsubmissionMobileList)("expand",!1)("listingVariables",a.listingVariables)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList),e.xp6(6),e.AsE("",e.lcZ(15,36,"COMMON_BUTTONS.BUTTON_DOWNLOAD")," ",a.reportName," "),e.xp6(5),e.s9C("label",e.lcZ(20,38,"REPORTS.REPORT_FILE")),e.s9C("value",a.reportNamePath),e.xp6(3),e.s9C("label",e.lcZ(23,40,"REPORTS.RUN_BY")),e.s9C("value",a.runBy),e.xp6(4),e.s9C("href",a.reportNamePath,e.LSH),e.xp6(1),e.AsE(" ",e.lcZ(28,42,"COMMON_BUTTONS.BUTTON_DOWNLOAD")," ",e.lcZ(29,44,"COMMON_BUTTONS.BUTTON_REPORT")," "),e.xp6(3),e.s9C("label",e.lcZ(31,46,"COMMON_BUTTONS.BUTTON_NO")))},dependencies:[Z.r,V.a,B.n,D.q,Y.y,T.X$]})}return o})();var H=p(38077),j=p(46448),E=p(10805),Q=p(9851),F=p(93837),z=p(92634),W=p(47386),K=p(42919);const ne=["paramTextValueUpdate"],le=["paramNumberValueUpdate"],pe=["paramEmailValueUpdate"],ue=["paramDateValueUpdate"],de=["paramListValueUpdate"];function ce(o,l){if(1&o&&(e.TgZ(0,"tr",41)(1,"td",42),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function me(o,l){if(1&o&&e.YNc(0,ce,4,4,"tr",40),2&o){const t=e.oxw();e.Q6J("ngIf",t.parameters&&0===t.parameters.length)}}function he(o,l){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function _e(o,l){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,he,3,3,"th",43),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function be(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,s=e.oxw().$implicit;e.xp6(1),e.hij(" ",s[t.field]," ")}}function ge(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-input",52,53),e.NdJ("valueChange",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,3,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("value",s.parameters[t].parameter_value)}}function Te(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-inputnumber",54,55),e.NdJ("valueChange",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,4,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("value",s.parameters[t].parameter_value),e.Q6J("maxlength",10)}}function Se(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-input",56,57),e.NdJ("valueChange",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,3,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("value",s.parameters[t].parameter_value)}}function ve(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-datepicker",58,59),e.NdJ("dateChangeValue",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("placeholder",e.lcZ(2,3,"REPORTS.PARAMETER_VALUE")),e.s9C("defaultDate",s.parameters[t].parameter_value),e.s9C("mandatory",!1===s.parameters[t].is_mandatory)}}function Oe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-dropdown-search",60,61),e.NdJ("selectedOption",function(a){e.CHM(t);const i=e.oxw(3),r=i.rowIndex,u=i.$implicit,m=e.oxw();return e.KtG(m.changeParameterValue(a,r,u))})("searchValueChange",function(a){e.CHM(t);const i=e.oxw(3),r=i.rowIndex,u=i.$implicit,m=e.oxw();return e.KtG(m.changeParamValuesList(a,r,u))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,4,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("defaultValue",s.parameters[t].parameter_display_value),e.Q6J("options",s.parameterValueOptions)}}function Ce(o,l){if(1&o&&(e.TgZ(0,"span"),e.YNc(1,ge,3,5,"app-input",47),e.YNc(2,Te,3,6,"app-inputnumber",48),e.YNc(3,Se,3,5,"app-input",49),e.YNc(4,ve,3,5,"app-datepicker",50),e.YNc(5,Oe,3,6,"app-dropdown-search",51),e.qZA()),2&o){const t=e.oxw(2).rowIndex,s=e.oxw();e.xp6(1),e.Q6J("ngIf","INPUT_TEXT"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","INPUT_NUMBER"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","INPUT_EMAIL"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","DATE"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","LIST"===s.parameters[t].parameter_type.lookup_name)}}function ye(o,l){if(1&o&&(e.TgZ(0,"td",45),e.YNc(1,be,2,1,"span",46),e.YNc(2,Ce,6,5,"span",46),e.qZA()),2&o){const t=l.$implicit,s=l.index,a=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",a),e.xp6(1),e.Q6J("ngIf",1!==s),e.xp6(1),e.Q6J("ngIf",1===s)}}function Ae(o,l){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ye,3,6,"td",44),e.qZA()),2&o){const t=l.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Re(o,l){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",63)(6,"br"),e.qZA()),2&o){const t=l.$implicit,s=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",s[t.field],e.oJD)}}function fe(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,Re,7,4,"div",62),e.qZA()()()),2&o){const t=l.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}let N=(()=>{class o extends M.O{ColumnHeader;reportService;route;router;uiUtils;loggerService;navigationService;translateService;commonService;paramTextValueUpdate;paramNumberValueUpdate;paramEmailValueUpdate;paramDateValueUpdate;paramListValueUpdate;countMandatory=!1;dateIncrementOptions;defaultValue;displayName;endDateTime;enterpriseId;error;errorMsg;incrementDate;lastSubmittedDate;paramTypeValue;parameterName;parameterType;parameterValueOptions;parameters;parametersColumnHeaders;parametersMobileList=[];periodicityCount;periodicityType;periodicityTypeOptions;perodicityTypeLookupDisplayName;perodicityTypeName;recordId;reportGroup;reportId;reportName;runBy;runEndDate;runStartDate;schedulableOptions;scheduleDisable;scheduled;scheduleflag;startDateTime;submissionOption;submissionOptions;submissionTypeLookupDisplayName;submissionTypeName;tableName;viewData;defaultTimeZone;utctimezone;utcTimeZoneString;utccurrentTime;sourceTableOptions;tableNameobj;pagName;table_name;parameterSourceColumn;dataJsonObj={};constructor(t,s,a,i,r,u,m,_,h){super(a,h),this.ColumnHeader=t,this.reportService=s,this.route=a,this.router=i,this.uiUtils=r,this.loggerService=u,this.navigationService=m,this.translateService=_,this.commonService=h,this.route.params.subscribe(c=>{this.recordId=c.id})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_SUBMISSIONS,this.commonService.trackView(n.sn.REPORTSUBMISSION_CREATE),this.parametersColumnHeaders=this.ColumnHeader.getReportSubmissionParameters(),this.getReportSubmissionsViewData(),this.schedulableOptions=[{displayname:this.translateService.instant("REPORTS.SCHEDULE")}],this.dateIncrementOptions=[{value:"112",displayname:this.translateService.instant("REPORTS.INCREMENT_DATE"),key:"checkbox1"}];const t=JSON.parse(localStorage.getItem(n.BU.TIMEZONE_OBJ));this.defaultTimeZone=t.lookup_name;const i=t.description.split("(UTC")[1].split(")");this.utctimezone=i[0],this.utcTimeZoneString=i[0].toString(),this.utccurrentTime=(new Date).toISOString();const r=this.commonService.convertToUserTimeZone(this.utccurrentTime,this.utcTimeZoneString);this.startDateTime=new Date(r);const u=new Date(r);u.setHours(u.getHours()+2),this.endDateTime=u}getReportSubmissionsViewData(){try{this.reportService.getReportViewData(this.recordId).subscribe(t=>{this.viewData=t,this.enterpriseId=this.viewData.enterprise.enterprise_id,this.reportName=t.report_name,this.reportId=t._id,this.dataJsonObj.pageTitle=[{key:"",value:this.reportName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"REPORTS.SUBMISSION",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.reportGroup=this.lookupLanguageTranslations(t.report_group.lookup_id),this.scheduled=t.schedulable_flag,this.periodicityCount=t.submissionData.periodicity_count,this.incrementDate=!!t.submissionData.increment_date_param&&t.submissionData.increment_date_param,this.getReportsParametersList(),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(s=>{this.dataJsonObj.lookupCodesListJSON=s,this.getSubmissionOptions(),this.getPeriodicityTypes()}),this.scheduleDisable=!0!==t.schedulable_flag,this.scheduleflag=!0!==t.schedulable_flag,!0===this.scheduled?(this.periodicityCount=1,this.countMandatory=!0):(this.periodicityCount=0,this.countMandatory=!1),t.updated_by&&(this.runBy=t.updated_by.f_name+" "+t.updated_by.l_name),this.lastSubmittedDate=t.submissionData.submittedAt?this.commonService.dbTimezoneFormatWithHours(t.submissionData.submittedAt):"",this.runStartDate=t.submissionData.schedule_start_date?this.commonService.dbTimezoneFormatWithHours(t.submissionData.schedule_start_date):"",t.submissionData.schedule_end_date?this.runEndDate=this.commonService.dbTimezoneFormatWithHours(t.submissionData.schedule_end_date):this.runStartDate=""}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"Reportviewdata",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getReportSubmissionsViewData",t)}}getReportsParametersList(){try{this.reportService.reportParametersList(this.reportId).then(t=>{if(t.rows.length>0){for(let s=0;s<t.rows.length;s++)t.rows[s].parameter=this.lookupLanguageTranslations(t.rows[s].parameter_type.lookup_id),this.parameterName=t.rows[s].parameter_name,t.rows[s].param_data_source_table&&(this.table_name=t.rows[s].param_data_source_table.table_name),this.parametersMobileList=this.parametersMobileList.filter(a=>a._id!==t.rows[s]._id),this.parametersMobileList.push(t.rows[s]);this.parameters=t.rows}else this.parameters=[],this.parametersMobileList=[]}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"ReportsParametersList",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"ReportsParametersList",t)}}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}getSchedulableFlag(t){if(!0===t.value){this.scheduled=t.value,this.scheduleDisable=!1,this.periodicityCount=1,this.countMandatory=!0;const s=this.commonService.convertToUserTimeZone(this.utccurrentTime,this.utcTimeZoneString);this.startDateTime=new Date(s);const a=new Date(s);a.setHours(a.getHours()+2),this.endDateTime=a}else this.scheduled=t.value,this.scheduleDisable=!0,this.periodicityCount=0,this.countMandatory=!1}changeParameterValue(t,s,a){this.errorMsg="","LIST"===this.parameters[s].parameter_type.lookup_name?(this.parameters[s].param_value=t.ID,this.parameters[s].parameter_value=t.ID,this.parameters[s].parameter_display_value=t.NAME):"DATE"===this.parameters[s].parameter_type.lookup_name?(this.parameters[s].param_value=this.commonService.dbTimezoneFormat(t.value),this.parameters[s].parameter_value=this.commonService.dbTimezoneFormat(t.value)):(this.parameters[s].param_value=t.value,this.parameters[s].parameter_value=t.value)}changeParamValuesList(t,s,a){try{this.table_name=a.param_data_source_table.table_name,this.parameterSourceColumn=a.param_data_source_display_col,this.errorMsg="",this.table_name&&(this.parameterValueOptions=[],this.reportService.reportParametersListData(this.table_name,this.parameterSourceColumn,t).then(i=>{if(i.length>0)for(let r=0;r<i.length;r++)this.parameterValueOptions.push({ID:i[r].ID,NAME:i[r].NAME})}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"changeParamValuesList",i)}))}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeParamValuesList",i)}}changeStartDateValue(t){const s=this.commonService.convertToUserTimeZone(t.value,this.utcTimeZoneString);this.startDateTime=new Date(s),this.errorMsg=""}changeEndDateValue(t){const s=this.commonService.convertToUserTimeZone(t.value,this.utcTimeZoneString);this.endDateTime=new Date(s),this.errorMsg=""}changePeriodicityCount(t){this.periodicityCount=t.value}changePeriodicityValue(t){this.periodicityType=t.value;const s=this.periodicityTypeOptions.find(a=>a.ID===parseInt(this.periodicityType,10));this.perodicityTypeName=s.NAME,this.perodicityTypeLookupDisplayName=this.lookupLanguageTranslations(s.lookup_id)}getSubmissionOptionValue(t){this.submissionOption=t.value;const s=this.submissionOptions.find(a=>a.ID===parseInt(this.submissionOption,10));this.submissionTypeName=s.NAME,this.submissionTypeLookupDisplayName=this.lookupLanguageTranslations(s.lookup_id)}changeDateIncrementFlag(t){this.incrementDate=t.value}getPeriodicityTypes(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.REPORT_SUB_PERIODICITY_TYPES],"").then(t=>{this.periodicityTypeOptions=t,this.periodicityType=t[0].ID,this.perodicityTypeName=t[0].NAME,this.perodicityTypeLookupDisplayName=this.lookupLanguageTranslations(t[0].lookup_id)}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"PeriodicityTypes",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"PeriodicityTypes",t)}}getSubmissionOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.REPORT_SUB_INTERVAL_APPLICATION],"").then(t=>{this.submissionOptions=t,this.submissionOption=t[1].ID,this.submissionTypeName=t[1].NAME,this.submissionTypeLookupDisplayName=this.lookupLanguageTranslations(t[1].lookup_id)}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"SubmissionOptions",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"SubmissionOptions",t)}}reportSubmissionParametersUpdate(){if(!this.parameters.length)return this.errorMsg="",!0;for(let t=0;t<this.parameters.length;t++){if(this.parameters[t].report_parameter_id=this.parameters[t]._id,!0===this.parameters[t].is_mandatory&&"INPUT_TEXT"===this.parameters[t].parameter_type.lookup_name&&this.paramTextValueUpdate&&!this.paramTextValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"INPUT_NUMBER"===this.parameters[t].parameter_type.lookup_name&&this.paramNumberValueUpdate&&!this.paramNumberValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"INPUT_EMAIL"===this.parameters[t].parameter_type.lookup_name&&this.paramEmailValueUpdate&&!this.paramEmailValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"DATE"===this.parameters[t].parameter_type.lookup_name&&this.paramDateValueUpdate&&!this.paramDateValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"LIST"===this.parameters[t].parameter_type.lookup_name&&this.paramListValueUpdate&&!this.paramListValueUpdate.isValid())return!1;if(t===this.parameters.length-1)return this.errorMsg="",!0}}createRecord(){try{this.reportSubmissionParametersUpdate()?this.startDateTime&&this.endDateTime&&this.startDateTime>this.endDateTime?this.errorMsg="COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":this.scheduled&&!this.periodicityCount&&(this.countMandatory=!0,this.errorMsg="COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_VALUE"):this.errorMsg="COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_VALUE";const t={report_id:this.reportId,parameters:this.parameters,periodicity_count:this.periodicityCount,scheduled:this.scheduled,periodicity_type:{lookup_id:this.periodicityType,lookup_name:this.perodicityTypeName},interval_application:{lookup_id:this.submissionOption,lookup_name:this.submissionTypeName},schedule_start_date:this.startDateTime?this.commonService.convertToUtcTimeZone(this.startDateTime,this.utcTimeZoneString):"",schedule_end_date:this.endDateTime?this.commonService.convertToUtcTimeZone(this.endDateTime,this.utcTimeZoneString):"",increment_date_param:this.incrementDate};""===this.errorMsg&&this.reportService.create(t).then(s=>{this.uiUtils.displaytoastMessage(this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_REPORT_IS_UNDER_PROGRESS_STATUS")),this.commonService.redirectToPreviousUrl()}).catch(s=>{this.loggerService.setLoggerError(this.constructor.name,"create",s)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"submit",t)}}static \u0275fac=function(s){return new(s||o)(e.Y36(S.Y),e.Y36(v),e.Y36(b.gz),e.Y36(b.F0),e.Y36(k.s),e.Y36(I.m),e.Y36(j.f),e.Y36(T.sK),e.Y36(L.v))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-report-submission-create"]],viewQuery:function(s,a){if(1&s&&(e.Gf(ne,5),e.Gf(le,5),e.Gf(pe,5),e.Gf(ue,5),e.Gf(de,5)),2&s){let i;e.iGM(i=e.CRH())&&(a.paramTextValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramNumberValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramEmailValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramDateValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramListValueUpdate=i.first)}},features:[e._Bn([S.Y,v]),e.qOj],decls:87,vars:99,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["disabled","false","className","btn btn-danger btn-sm","id","report-submissions-create-generate",3,"label","buttonOnClick"],["id","report-submissions-create-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","reportsubmissions-parametersblock",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["id","reportsubmissions-scheduleblock",3,"selected"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4","d-flex","align-items-center"],["label","","id","reportsubmission-create-schedulable-flag","mandatory","false",3,"options","disabled","checked","valueChange"],[1,"col-md-4"],["dateformat","dd-MMM-yyyy HH:mm","mandatory","false",3,"placeholder","defaultDate","disabled","editvalueChange"],["id","reportsubmissions-create-periodicity-count",3,"label","mandatory","disabled","maxlength","value","valueChange"],["mandatory","false","id","reportsubmissions-create-periodicity-value",3,"label","options","defaultValue","disabled","valueChange"],["mandatory","false","id","reportsubmissions-create-submission-options",3,"label","options","defaultValue","disabled","valueChange"],["label","","id","reportsubmission-create-dateincrement-flag","mandatory","false",3,"options","disabled","checked","valueChange"],[1,"error-msg","text-danger","text-center","mb-0"],["id","reportsubmissions-lastsubmissionblock",3,"selected"],["disabled","true","id","reports-submissions-create-groupName",3,"label","value"],["disabled","true","id","reports-submissions-create-lastsubmitted",3,"label","value"],["disabled","true","id","reports-submissions-create-laststarted",3,"label","value"],["disabled","true","id","reports-submissions-create-lastended",3,"label","value"],["disabled","true","id","reports-submissions-create-runtime",3,"label","value"],["disabled","true","id","reports-submissions-create-reccnt",3,"label","value"],["disabled","true","id","reports-submissions-create-runby",3,"label","value"],["disabled","true","id","reports-submissions-create-status",3,"label","value"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow","class",4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow"],[4,"ngIf"],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange",4,"ngIf"],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","maxlength","value","valueChange",4,"ngIf"],["disabled","false","type","email","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange",4,"ngIf"],["showFullCalendar","true","id","reportsubmissions-create-parameter-value-update","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue",4,"ngIf"],["id","reportdefinition-create-parametervalue-update",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange",4,"ngIf"],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange"],["paramTextValueUpdate",""],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","maxlength","value","valueChange"],["paramNumberValueUpdate",""],["disabled","false","type","email","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange"],["paramEmailValueUpdate",""],["showFullCalendar","true","id","reportsubmissions-create-parameter-value-update","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue"],["paramDateValueUpdate",""],["id","reportdefinition-create-parametervalue-update",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["paramListValueUpdate",""],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"app-pageheader",6),e.TgZ(8,"span")(9,"app-button",7),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"app-button",8),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(12,"translate"),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",9)(15,"div",10)(16,"p-accordion",11)(17,"p-accordionTab",12)(18,"p-header",13)(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"p-table",14),e.YNc(23,me,1,1,"ng-template",15),e.YNc(24,_e,2,1,"ng-template",16),e.YNc(25,Ae,2,1,"ng-template",17),e.YNc(26,fe,4,2,"ng-template",18),e.qZA()(),e.TgZ(27,"p-accordionTab",19)(28,"p-header",13)(29,"span"),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",20)(33,"div",21)(34,"div",22)(35,"app-checkbox",23),e.NdJ("valueChange",function(r){return a.getSchedulableFlag(r)}),e.qZA()(),e.TgZ(36,"div",24)(37,"app-datetimepicker",25),e.NdJ("editvalueChange",function(r){return a.changeStartDateValue(r)}),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"div",24)(40,"app-datetimepicker",25),e.NdJ("editvalueChange",function(r){return a.changeEndDateValue(r)}),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",24)(43,"app-inputnumber",26),e.NdJ("valueChange",function(r){return a.changePeriodicityCount(r)}),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",24)(46,"app-dropdown-singleselect",27),e.NdJ("valueChange",function(r){return a.changePeriodicityValue(r)}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",24)(49,"app-dropdown-singleselect",28),e.NdJ("valueChange",function(r){return a.getSubmissionOptionValue(r)}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",22)(52,"app-checkbox",29),e.NdJ("valueChange",function(r){return a.changeDateIncrementFlag(r)}),e.qZA()()(),e.TgZ(53,"p",30),e._uU(54),e.ALo(55,"translate"),e.qZA()()(),e.TgZ(56,"p-accordionTab",31)(57,"p-header",13)(58,"span"),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",20)(62,"div",21)(63,"div",24),e._UZ(64,"app-input",32),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"div",24),e._UZ(67,"app-input",33),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"div",24),e._UZ(70,"app-input",34),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"div",24),e._UZ(73,"app-input",35),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"div",24),e._UZ(76,"app-input",36),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"div",24),e._UZ(79,"app-input",37),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"div",24),e._UZ(82,"app-input",38),e.ALo(83,"translate"),e.qZA(),e.TgZ(84,"div",24),e._UZ(85,"app-input",39),e.ALo(86,"translate"),e.qZA()()()()()()()()()()()()),2&s&&(e.xp6(7),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(2),e.s9C("label",e.lcZ(10,61,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(12,63,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(21,65,"REPORTS.PARAMETERS")),e.xp6(2),e.Q6J("columns",a.parametersColumnHeaders)("value",a.parameters)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(31,67,"REPORTS.SCHEDULE")),e.xp6(5),e.s9C("disabled",a.scheduleflag),e.Q6J("options",a.schedulableOptions)("checked",a.scheduled),e.xp6(2),e.s9C("placeholder",e.lcZ(38,69,"COMMON_FIELDS.START_DATE")),e.s9C("disabled",a.scheduleDisable),e.Q6J("defaultDate",a.startDateTime),e.xp6(3),e.s9C("placeholder",e.lcZ(41,71,"COMMON_FIELDS.END_DATE")),e.s9C("disabled",a.scheduleDisable),e.Q6J("defaultDate",a.endDateTime),e.xp6(3),e.s9C("label",e.lcZ(44,73,"REPORTS.PERIODICITY_COUNT")),e.s9C("mandatory",a.countMandatory),e.s9C("disabled",a.scheduleDisable),e.s9C("value",a.periodicityCount),e.Q6J("maxlength",3),e.xp6(3),e.s9C("label",e.lcZ(47,75,"REPORTS.PERIODICITY_TYPE")),e.s9C("defaultValue",a.periodicityType),e.s9C("disabled",a.scheduleDisable),e.Q6J("options",a.periodicityTypeOptions),e.xp6(3),e.s9C("label",e.lcZ(50,77,"REPORTS.SUBMISSION_OPTION")),e.s9C("defaultValue",a.submissionOption),e.s9C("disabled",a.scheduleDisable),e.Q6J("options",a.submissionOptions),e.xp6(3),e.s9C("disabled",a.scheduleDisable),e.Q6J("options",a.dateIncrementOptions)("checked",a.incrementDate),e.xp6(2),e.hij(" ",e.lcZ(55,79,a.errorMsg)," "),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(60,81,"REPORTS.LAST_SUBMISSION")),e.xp6(5),e.s9C("label",e.lcZ(65,83,"COMMON_FIELDS.GROUP")),e.s9C("value",a.reportGroup),e.xp6(3),e.s9C("label",e.lcZ(68,85,"REPORTS.SUBMITTED")),e.s9C("value",a.lastSubmittedDate),e.xp6(3),e.s9C("label",e.lcZ(71,87,"REPORTS.RUN_START_DATE")),e.s9C("value",a.runStartDate),e.xp6(3),e.s9C("label",e.lcZ(74,89,"REPORTS.RUN_END_DATE")),e.s9C("value",a.runEndDate),e.xp6(3),e.s9C("label",e.lcZ(77,91,"REPORTS.RUN_DURATION")),e.s9C("value",null==a.viewData||null==a.viewData.submissionData?null:a.viewData.submissionData.run_time),e.xp6(3),e.s9C("label",e.lcZ(80,93,"REPORTS.RECORD_COUNT")),e.s9C("value",null==a.viewData||null==a.viewData.submissionData?null:a.viewData.submissionData.record_count),e.xp6(3),e.s9C("label",e.lcZ(83,95,"REPORTS.RUN_BY")),e.s9C("value",a.runBy),e.xp6(3),e.s9C("label",e.lcZ(86,97,"COMMON_FIELDS.STATUS")),e.Q6J("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.last_submission_status?null:a.viewData.last_submission_status.lookup_id)))},dependencies:[O.sg,O.O5,g._Y,g.JL,g.F,C.iA,E.h4,E.jx,C.Ei,y.UQ,y.US,Z.r,V.a,Q.k,F.b,H.Q,z.K,W.L,K.C,D.q,T.X$]})}return o})();function Ee(o,l){if(1&o&&(e.TgZ(0,"tr",40)(1,"td",41),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Ne(o,l){if(1&o&&e.YNc(0,Ee,4,4,"tr",39),2&o){const t=e.oxw();e.Q6J("ngIf",t.parameters&&0===t.parameters.length)}}function Le(o,l){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function Ie(o,l){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Le,3,3,"th",42),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Me(o,l){if(1&o&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&o){const t=l.$implicit,s=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",s),e.xp6(1),e.hij(" ",s[t.field]," ")}}function De(o,l){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Me,2,5,"td",43),e.qZA()),2&o){const t=l.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}let w=(()=>{class o extends M.O{ColumnHeader;reportService;route;router;loggerService;navigationService;translateService;commonService;listingVariables;dateIncrementOptions;dataJsonObj={};groupName;incrementDate;parameters;parametersColumnHeaders;parametersMobileList=[];recordId;reportId;reportName;runBy;schedulableOptions;scheduleDisable;scheduleEndDate;scheduleStartDate;submissionEndDate;submissionStartDate;viewData;rowsPerPage;constructor(t,s,a,i,r,u,m,_,h){super(a,_),this.ColumnHeader=t,this.reportService=s,this.route=a,this.router=i,this.loggerService=r,this.navigationService=u,this.translateService=m,this.commonService=_,this.listingVariables=h,this.route.params.subscribe(c=>{this.recordId=c.id}),this.route.queryParams.subscribe(c=>{this.dataJsonObj.queryParamsObj={defaultView:c.defaultView,selectedMenuId:c.selectedMenuId,selectedSubMenuId:c.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_SUBMISSIONS,this.commonService.trackView(n.sn.REPORTSUBMISSION_VIEW),this.parametersColumnHeaders=this.ColumnHeader.getReportSubmissionParameters(),this.getRecordById(),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(n.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.schedulableOptions=[{displayname:this.translateService.instant("REPORTS.SCHEDULE")}],this.dateIncrementOptions=[{displayname:this.translateService.instant("REPORTS.INCREMENT_DATE")}],this.rowsPerPage=this.listingVariables.rowsPerPage,this.dataJsonObj.selectedPage=n.hf.REPORT_SUBMISSIONS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}getDynamicJson(t){var s=this;return(0,J.Z)(function*(){for(let a of t)s.dataJsonObj[a.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.enterpriseId,a.folderName,a.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(){try{this.reportService.get(this.recordId).subscribe(t=>{this.viewData=t,this.reportName=t.report.report_name,this.reportId=t.report.report_id,this.dataJsonObj.pageTitle=[{key:"",value:this.reportName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"REPORTS.SUBMISSION",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.scheduleDisable="true"===t.scheduled,t.run_by&&(this.runBy=t.run_by.f_name+" "+t.run_by.l_name),this.incrementDate=t.increment_date_param,this.submissionStartDate=t.submission_start_date?this.commonService.dbTimezoneFormatWithHours(t.submission_start_date):"",this.submissionEndDate=t.submission_end_date?this.commonService.dbTimezoneFormatWithHours(t.submission_end_date):"",this.scheduleStartDate=null!==t.schedule_start_date?this.commonService.dbTimezoneFormatWithHours(t.schedule_start_date):"",this.scheduleEndDate=null!==t.schedule_end_date?this.commonService.dbTimezoneFormatWithHours(t.schedule_end_date):"",this.getReportsParametersList()}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"get",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)}}getReportsParametersList(){try{this.parameters=[],this.reportService.reportParametersList1(this.recordId).then(t=>{if(t.rows.length>0){for(let s=0;s<t.rows.length;s++)t.rows[s].parameter=this.lookupLanguageTranslations(t.rows[s].parameter_type.lookup_id),this.parametersMobileList=this.parametersMobileList.filter(a=>a._id!==t.rows[s]._id),this.parametersMobileList.push(t.rows[s]);this.parameters=t.rows,this.listingVariables.parameterstotalRecords=t.totalCount,this.listingVariables.totalpages=t.pages}else this.parameters=[],this.parametersMobileList=[]}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"reportParametersList1",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getReportsParametersList",t)}}parametersPaginate(t){try{setTimeout(()=>{this.listingVariables.pageNumbers=Math.floor((t.first+t.rows)/t.rows)},200)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"activedPaginate",s)}}static \u0275fac=function(s){return new(s||o)(e.Y36(S.Y),e.Y36(v),e.Y36(b.gz),e.Y36(b.F0),e.Y36(I.m),e.Y36(j.f),e.Y36(T.sK),e.Y36(L.v),e.Y36(R.v))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-report-submission-view"]],features:[e._Bn([S.Y,R.v,v]),e.qOj],decls:83,vars:87,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","report-submissions-view-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","paramsId",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],[1,"row"],["selectionMode","single","dataKey","LineNum",1,"ptable",3,"columns","value","totalPages","totalRecords","paginator","rows","lazy","responsive","autoLayout","onLazyLoad"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["id","reportsubmissions-scheduleblock",3,"selected"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4","d-flex","align-items-center"],["label","","id","reportsubmission-view-schedulable-flag","disabled","true","mandatory","false",3,"options","checked"],[1,"col-md-4"],["disabled","true","id","reports-submissions-view-startdate",3,"label","value"],["disabled","true","id","reports-submissions-view-enddate",3,"label","value"],["disabled","true","id","reports-submissions-view-periodicity-count",3,"label","value"],["disabled","true","id","reports-submissions-view-periodicity-type",3,"label","value"],["disabled","true","id","reports-submissions-view-submission-options",3,"label","value"],["label","","id","reportsubmission-view-dateincrement-flag","disabled","true","mandatory","false",3,"options","checked"],["id","reportsubmissions-lastsubmissionblock",3,"selected"],["disabled","true","id","reports-submissions-view-groupName",3,"label","value"],["disabled","true","id","reports-submissions-view-lastsubmitted",3,"label","value"],["disabled","true","id","reports-submissions-view-laststarted",3,"label","value"],["disabled","true","id","reports-submissions-view-lastended",3,"label","value"],["disabled","true","id","reports-submissions-view-runtime",3,"label","value"],["disabled","true","id","reports-submissions-view-reccnt",3,"label","value"],["disabled","true","id","reports-submissions-view-runby",3,"label","value"],["disabled","true","id","reports-submissions-view-status",3,"label","value"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"app-pageheader",6),e.TgZ(8,"span")(9,"app-button",7),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(10,"translate"),e.qZA()()()()(),e.TgZ(11,"div",3)(12,"div",8)(13,"div",9)(14,"p-accordion",10)(15,"p-accordionTab",11)(16,"p-header",12)(17,"span"),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",13)(21,"div",3)(22,"p-table",14),e.NdJ("onLazyLoad",function(r){return a.parametersPaginate(r)}),e.YNc(23,Ne,1,1,"ng-template",15),e.YNc(24,Ie,2,1,"ng-template",16),e.YNc(25,De,2,1,"ng-template",17),e.qZA()()()(),e.TgZ(26,"p-accordionTab",18)(27,"p-header",12)(28,"span"),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"div",19)(32,"div",20)(33,"div",21),e._UZ(34,"app-checkbox",22),e.qZA(),e.TgZ(35,"div",23),e._UZ(36,"app-input",24),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"div",23),e._UZ(39,"app-input",25),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"div",23),e._UZ(42,"app-input",26),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"div",23),e._UZ(45,"app-input",27),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"div",23),e._UZ(48,"app-input",28),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",21),e._UZ(51,"app-checkbox",29),e.qZA()()()(),e.TgZ(52,"p-accordionTab",30)(53,"p-header",12)(54,"span"),e._uU(55),e.ALo(56,"translate"),e.qZA()(),e.TgZ(57,"div",19)(58,"div",20)(59,"div",23),e._UZ(60,"app-input",31),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"div",23),e._UZ(63,"app-input",32),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"div",23),e._UZ(66,"app-input",33),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"div",23),e._UZ(69,"app-input",34),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"div",23),e._UZ(72,"app-input",35),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"div",23),e._UZ(75,"app-input",36),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"div",23),e._UZ(78,"app-input",37),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"div",23),e._UZ(81,"app-input",38),e.ALo(82,"translate"),e.qZA()()()()()()()()()()()()),2&s&&(e.xp6(7),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(2),e.s9C("label",e.lcZ(10,53,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(19,55,"REPORTS.PARAMETERS")),e.xp6(4),e.Q6J("columns",a.parametersColumnHeaders)("value",a.parameters)("totalPages",a.listingVariables.totalpages)("totalRecords",a.listingVariables.parameterstotalRecords)("paginator",!0)("rows",a.rowsPerPage)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(4),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(30,57,"REPORTS.SCHEDULE")),e.xp6(5),e.Q6J("options",a.schedulableOptions)("checked",null==a.viewData?null:a.viewData.scheduled),e.xp6(2),e.s9C("label",e.lcZ(37,59,"COMMON_FIELDS.START_DATE")),e.s9C("value",a.scheduleStartDate),e.xp6(3),e.s9C("label",e.lcZ(40,61,"COMMON_FIELDS.END_DATE")),e.s9C("value",a.scheduleEndDate),e.xp6(3),e.s9C("label",e.lcZ(43,63,"REPORTS.PERIODICITY_COUNT")),e.s9C("value",null==a.viewData?null:a.viewData.periodicity_count),e.xp6(3),e.s9C("label",e.lcZ(46,65,"REPORTS.PERIODICITY_TYPE")),e.Q6J("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.periodicity_type?null:a.viewData.periodicity_type.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(49,67,"REPORTS.SUBMISSION_OPTION")),e.Q6J("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.interval_application?null:a.viewData.interval_application.lookup_id)),e.xp6(3),e.Q6J("options",a.dateIncrementOptions)("checked",a.incrementDate),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(56,69,"REPORTS.SUBMISSION")),e.xp6(5),e.s9C("label",e.lcZ(61,71,"COMMON_FIELDS.GROUP")),e.Q6J("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.report_group?null:a.viewData.report_group.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(64,73,"REPORTS.SUBMITTED")),e.s9C("value",a.scheduleEndDate),e.xp6(3),e.s9C("label",e.lcZ(67,75,"REPORTS.RUN_START_DATE")),e.s9C("value",a.submissionStartDate),e.xp6(3),e.s9C("label",e.lcZ(70,77,"REPORTS.RUN_END_DATE")),e.s9C("value",a.submissionEndDate),e.xp6(3),e.s9C("label",e.lcZ(73,79,"REPORTS.RUN_DURATION")),e.s9C("value",null==a.viewData?null:a.viewData.run_time),e.xp6(3),e.s9C("label",e.lcZ(76,81,"REPORTS.RECORD_COUNT")),e.s9C("value",null==a.viewData?null:a.viewData.record_count),e.xp6(3),e.s9C("label",e.lcZ(79,83,"REPORTS.RUN_BY")),e.s9C("value",a.runBy),e.xp6(3),e.s9C("label",e.lcZ(82,85,"COMMON_FIELDS.STATUS")),e.Q6J("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.status?null:a.viewData.status.lookup_id)))},dependencies:[O.sg,O.O5,g._Y,g.JL,g.F,C.iA,E.h4,E.jx,C.Ei,y.UQ,y.US,Z.r,V.a,F.b,D.q,T.X$]})}return o})();const Pe=["paramTextValueUpdate"],we=["paramNumberValueUpdate"],Ue=["paramEmailValueUpdate"],Ze=["paramDateValueUpdate"],Ve=["paramListValueUpdate"];function Je(o,l){if(1&o&&(e.TgZ(0,"tr",42)(1,"td",43),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function ke(o,l){if(1&o&&e.YNc(0,Je,4,4,"tr",41),2&o){const t=e.oxw();e.Q6J("ngIf",t.parameters&&0===t.parameters.length)}}function je(o,l){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function Fe(o,l){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,je,3,3,"th",44),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Ge(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,s=e.oxw().$implicit;e.xp6(1),e.hij(" ",s[t.field]," ")}}function Be(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-input",53,54),e.NdJ("valueChange",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,3,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("value",s.parameters[t].parameter_value)}}function xe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-inputnumber",55,56),e.NdJ("valueChange",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,4,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("value",s.parameters[t].parameter_value),e.Q6J("maxlength",10)}}function qe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-input",57,58),e.NdJ("valueChange",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,3,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("value",s.parameters[t].parameter_value)}}function Ye(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-datepicker",59,60),e.NdJ("dateChangeValue",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("placeholder",e.lcZ(2,3,"REPORTS.PARAMETER_VALUE")),e.s9C("defaultDate",s.parameters[t].parameter_value),e.s9C("mandatory",!1===s.parameters[t].is_mandatory)}}function He(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-dropdown-search",61,62),e.NdJ("selectedOption",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParameterValue(a,i))})("searchValueChange",function(a){e.CHM(t);const i=e.oxw(3).rowIndex,r=e.oxw();return e.KtG(r.changeParamValuesList(a,i))}),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw(3).rowIndex,s=e.oxw();e.s9C("label",e.lcZ(2,4,"REPORTS.PARAMETER_VALUE")),e.s9C("mandatory",!1!==s.parameters[t].is_mandatory),e.s9C("defaultValue",s.parameters[t].parameter_value),e.Q6J("options",s.parameterValueOptions)}}function Qe(o,l){if(1&o&&(e.TgZ(0,"span"),e.YNc(1,Be,3,5,"app-input",48),e.YNc(2,xe,3,6,"app-inputnumber",49),e.YNc(3,qe,3,5,"app-input",50),e.YNc(4,Ye,3,5,"app-datepicker",51),e.YNc(5,He,3,6,"app-dropdown-search",52),e.qZA()),2&o){const t=e.oxw(2).rowIndex,s=e.oxw();e.xp6(1),e.Q6J("ngIf","INPUT_TEXT"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","INPUT_NUMBER"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","INPUT_EMAIL"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","DATE"===s.parameters[t].parameter_type.lookup_name),e.xp6(1),e.Q6J("ngIf","LIST"===s.parameters[t].parameter_type.lookup_name)}}function ze(o,l){if(1&o&&(e.TgZ(0,"td",46),e.YNc(1,Ge,2,1,"span",47),e.YNc(2,Qe,6,5,"span",47),e.qZA()),2&o){const t=l.$implicit,s=l.index,a=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",a),e.xp6(1),e.Q6J("ngIf",1!==s),e.xp6(1),e.Q6J("ngIf",1===s)}}function We(o,l){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ze,3,6,"td",45),e.qZA()),2&o){const t=l.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function $e(o,l){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",64)(6,"br"),e.qZA()),2&o){const t=l.$implicit,s=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",s[t.field],e.oJD)}}function Ke(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,$e,7,4,"div",63),e.qZA()()()),2&o){const t=l.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}let Xe=(()=>{class o extends M.O{ColumnHeader;reportService;route;router;uiUtils;loggerService;navigationService;translateService;commonService;paramTextValueUpdate;paramNumberValueUpdate;paramEmailValueUpdate;paramDateValueUpdate;paramListValueUpdate;checkOneTime;dateIncrementOptions;endDateTime;enterpriseId;errorMsg;incrementDate;lastSubmittedDate;parameterName;parameterValueOptions;parameters;parametersColumnHeaders;parametersMobileList=[];periodicityCount;periodicityType;periodicityTypeOptions;perodicityTypeLookupDisplayName;perodicityTypeName;recordId;reportGroup;reportId;reportName;runBy;runEndDate;runStartDate;schedulableOptions;scheduleDisable;scheduleDisableflag;scheduled;startDateTime;submissionOption;submissionOptions;submissionTypeLookupDisplayName;submissionTypeName;tableName;viewData;dataJsonObj={};constructor(t,s,a,i,r,u,m,_,h){super(a,h),this.ColumnHeader=t,this.reportService=s,this.route=a,this.router=i,this.uiUtils=r,this.loggerService=u,this.navigationService=m,this.translateService=_,this.commonService=h,this.route.params.subscribe(c=>{this.recordId=c.id})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_SUBMISSIONS,this.commonService.trackView(n.sn.REPORTSUBMISSION_RERUN),this.parametersColumnHeaders=this.ColumnHeader.getReportSubmissionParameters(),this.getreportsubmissionsViewData(),this.schedulableOptions=[{displayname:this.translateService.instant("REPORTS.SCHEDULE")}],this.dateIncrementOptions=[{displayname:this.translateService.instant("REPORTS.INCREMENT_DATE")}];const s=new Date(new Date);this.startDateTime=s,s.setHours(s.getHours()+2),this.endDateTime=s}getreportsubmissionsViewData(){try{this.reportService.get(this.recordId).subscribe(t=>{this.viewData=t,this.enterpriseId=this.viewData.enterprise.enterprise_id,this.reportName=t.report.report_name,this.reportId=t.report.report_id,this.dataJsonObj.pageTitle=[{key:"",value:this.reportName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"REPORTS.SUBMISSION",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"REPORTS.RERUN",value:"",showSubMenuDisplayName:!1}],this.getReportsParametersList(),t.report_group&&(this.reportGroup=this.lookupLanguageTranslations(t.report_group.lookup_id)),t.run_by&&(this.runBy=t.run_by.f_name+" "+t.run_by.l_name),this.scheduled=t.scheduled,this.periodicityCount=t.periodicity_count?t.periodicity_count:"",this.incrementDate=!!t.increment_date_param&&t.increment_date_param,this.getSubmissionOptions(),this.getPeriodicityTypes(),this.scheduleDisable=!0!==t.scheduled,this.scheduleDisableflag=!0!==t.scheduled,this.lastSubmittedDate=this.commonService.dbTimezoneFormatWithHours(t.submission_start_date),this.runStartDate=this.commonService.dbTimezoneFormatWithHours(t.schedule_start_date),this.runEndDate=this.commonService.dbTimezoneFormatWithHours(t.schedule_end_date);const s=JSON.parse(this.viewData.report_query);this.tableName=s.tablename}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"get",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getreportsubmissionsViewData",t)}}getReportsParametersList(){try{this.reportService.reportParametersList(this.reportId).then(t=>{if(t.rows.length>0){for(let s=0;s<t.rows.length;s++)t.rows[s].parameter=t.rows[s].parameter_type.lookup_name,this.parameterName=t.rows[s].parameter_name,this.parametersMobileList=this.parametersMobileList.filter(a=>a._id!==t.rows[s]._id),this.parametersMobileList.push(t.rows[s]);this.parameters=t.rows}else this.parameters=[],this.parametersMobileList=[]}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"reportParametersList",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getReportsParametersList",t)}}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}changeSchedulableFlag(t){if(!0===t.value){this.scheduled=t.value,this.scheduleDisable=!1,this.periodicityCount=1;const a=new Date(new Date);a.setHours(a.getHours()+2),this.endDateTime=a,this.startDateTime=new Date}else this.scheduled=t.value,this.scheduleDisable=!0,this.periodicityCount=0}changeParameterValue(t,s){this.errorMsg="","LIST"===this.parameters[s].parameter_type.lookup_name?(this.parameters[s].param_value=t.ID,this.parameters[s].parameter_value=t.NAME):"DATE"===this.parameters[s].parameter_type.lookup_name?(this.parameters[s].param_value=this.commonService.dbTimezoneFormat(t.value),this.parameters[s].parameter_value=this.commonService.dbTimezoneFormat(t.value)):(this.parameters[s].param_value=t.value,this.parameters[s].parameter_value=t.value)}changeParamValuesList(t,s){try{this.errorMsg="",this.reportService.reportParametersListData(this.tableName,this.parameters[s].parameter_name,t).then(a=>{if(this.parameterValueOptions=[],a.length>0)for(let i=0;i<a.length;i++)this.parameterValueOptions.push({ID:a[i]._id,NAME:a[i].NAME})}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"reportParametersListData",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"changeParamValuesList",a)}}changeStartDateValue(t){this.errorMsg="",this.startDateTime=t.value}changeEndDateValue(t){this.errorMsg="",this.endDateTime=t.value}changePeriodicityCount(t){this.periodicityCount=t.value}changePeriodicityValue(t){this.periodicityType=t.value;const s=this.periodicityTypeOptions.find(a=>a.ID===parseInt(this.periodicityType,10));this.perodicityTypeName=s.NAME,this.perodicityTypeLookupDisplayName=s.lookup_name}changeSubmissionOptionValue(t){this.submissionOption=t.value;const s=this.submissionOptions.find(a=>a.ID===parseInt(this.submissionOption,10));this.submissionTypeName=s.NAME,this.submissionTypeLookupDisplayName=this.lookupLanguageTranslations(s.lookup_id)}changeDateIncrementFlag(t){this.incrementDate=t.value}getPeriodicityTypes(){try{this.reportService.getLookupscodes(this.enterpriseId,n.ox.REPORT_SUB_PERIODICITY_TYPES).then(t=>{this.periodicityTypeOptions=t,this.periodicityType=t[0].ID,this.perodicityTypeName=t[0].NAME,this.perodicityTypeLookupDisplayName=this.lookupLanguageTranslations(t[0].lookup_id)}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"PeriodicityTypes",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"PeriodicityTypes",t)}}getSubmissionOptions(){try{this.reportService.getLookupscodes(this.enterpriseId,n.ox.REPORT_SUB_INTERVAL_APPLICATION).then(t=>{this.submissionOptions=t,this.submissionOption=t[1].ID,this.submissionTypeName=t[1].NAME,this.submissionTypeLookupDisplayName=this.lookupLanguageTranslations(t[1].lookup_id)}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getLookupscodes",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"SubmissionOptions",t)}}reportSubmissionParametersUpdate(){if(!this.parameters.length)return this.errorMsg="",!0;for(let t=0;t<this.parameters.length;t++){if(this.parameters[t].report_parameter_id=this.parameters[t]._id,!0===this.parameters[t].is_mandatory&&"INPUT_TEXT"===this.parameters[t].parameter_type.lookup_name&&this.paramTextValueUpdate&&!this.paramTextValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"INPUT_NUMBER"===this.parameters[t].parameter_type.lookup_name&&this.paramNumberValueUpdate&&!this.paramNumberValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"INPUT_EMAIL"===this.parameters[t].parameter_type.lookup_name&&this.paramEmailValueUpdate&&!this.paramEmailValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"DATE"===this.parameters[t].parameter_type.lookup_name&&this.paramDateValueUpdate&&!this.paramDateValueUpdate.isValid())return!1;if(!0===this.parameters[t].is_mandatory&&"LIST"===this.parameters[t].parameter_type.lookup_name&&this.paramListValueUpdate&&!this.paramListValueUpdate.isValid())return!1;if(t===this.parameters.length-1)return this.errorMsg="",!0}}createRecord(){try{this.reportSubmissionParametersUpdate()?this.startDateTime&&this.endDateTime&&new Date(this.startDateTime)>new Date(this.endDateTime)&&(this.errorMsg="COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START"):this.errorMsg="COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_VALUE";const t={report_id:this.reportId,parameters:this.parameters,periodicity_count:this.periodicityCount,scheduled:this.scheduled,periodicity_type:{lookup_id:this.periodicityType,lookup_name:this.perodicityTypeName},interval_application:{lookup_id:this.submissionOption,lookup_name:this.submissionTypeName},schedule_start_date:this.startDateTime?this.commonService.dbTimezoneFormatWithHours(this.startDateTime):"",schedule_end_date:this.endDateTime?this.commonService.dbTimezoneFormatWithHours(this.endDateTime):"",increment_date_param:this.incrementDate};""===this.errorMsg&&this.reportService.create(t).then(s=>{this.uiUtils.displaytoastMessage(this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_REPORT_IS_UNDER_PROGRESS_STATUS")),this.commonService.redirectToPreviousUrl()}).catch(s=>{this.loggerService.setLoggerError(this.constructor.name,"createRecord",s)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"submit",t)}}static \u0275fac=function(s){return new(s||o)(e.Y36(S.Y),e.Y36(v),e.Y36(b.gz),e.Y36(b.F0),e.Y36(k.s),e.Y36(I.m),e.Y36(j.f),e.Y36(T.sK),e.Y36(L.v))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-reportsubmission-rerun"]],viewQuery:function(s,a){if(1&s&&(e.Gf(Pe,5),e.Gf(we,5),e.Gf(Ue,5),e.Gf(Ze,5),e.Gf(Ve,5)),2&s){let i;e.iGM(i=e.CRH())&&(a.paramTextValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramNumberValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramEmailValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramDateValueUpdate=i.first),e.iGM(i=e.CRH())&&(a.paramListValueUpdate=i.first)}},features:[e._Bn([S.Y,v]),e.qOj],decls:87,vars:99,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["disabled","false","className","btn btn-danger btn-sm","id","report-submissions-edit-generate",3,"label","buttonOnClick"],["id","report-submissions-edit-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","reportsubmissions-parametersblock",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["id","reportsubmissions-scheduleblock",3,"selected"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4","d-flex","align-items-center"],["label","","id","reportsubmission-edit-schedulable-flag","mandatory","false",3,"options","disabled","checked","valueChange"],[1,"col-md-4"],["dateformat","dd-MMM-yyyy HH:mm","mandatory","false",3,"placeholder","defaultDate","disabled","editvalueChange"],["dateformat","dd-MMM-yyyy HH:mm","mandatory","false",3,"placeholder","addHrs","defaultDate","disabled","editvalueChange"],["mandatory","false","id","reportsubmissions-edit-periodicity-count",3,"label","disabled","maxlength","value","valueChange"],["mandatory","false","id","reportsubmissions-edit-periodicity-value",3,"label","options","defaultValue","disabled","valueChange"],["mandatory","false","id","reportsubmissions-edit-submission-options",3,"label","options","defaultValue","disabled","valueChange"],["label","","id","reportsubmission-edit-dateincrement-flag","mandatory","false",3,"options","disabled","checked","valueChange"],[1,"error-msg","text-danger","text-center","mb-0"],["id","reportsubmissions-lastsubmissionblock",3,"selected"],["disabled","true","id","reports-submissions-edit-groupName",3,"label","value"],["disabled","true","id","reports-submissions-edit-lastsubmitted",3,"label","value"],["disabled","true","id","reports-submissions-edit-laststarted",3,"label","value"],["disabled","true","id","reports-submissions-edit-lastended",3,"label","value"],["disabled","true","id","reports-submissions-edit-runtime",3,"label","value"],["disabled","true","id","reports-submissions-edit-reccnt",3,"label","value"],["disabled","true","id","reports-submissions-edit-runby",3,"label","value"],["disabled","true","id","reports-submissions-edit-status",3,"label","value"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow","class",4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow"],[4,"ngIf"],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange",4,"ngIf"],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","maxlength","value","valueChange",4,"ngIf"],["disabled","false","type","email","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange",4,"ngIf"],["id","reportsubmissions-create-parameter-value-update","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue",4,"ngIf"],["id","reportdefinition-edit-parametervalue-update",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange",4,"ngIf"],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange"],["paramTextValueUpdate",""],["disabled","false","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","maxlength","value","valueChange"],["paramNumberValueUpdate",""],["disabled","false","type","email","id","reportsubmissions-create-parameter-value-update",3,"label","mandatory","value","valueChange"],["paramEmailValueUpdate",""],["id","reportsubmissions-create-parameter-value-update","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue"],["paramDateValueUpdate",""],["id","reportdefinition-edit-parametervalue-update",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["paramListValueUpdate",""],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"app-pageheader",6),e.TgZ(8,"span")(9,"app-button",7),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"app-button",8),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(12,"translate"),e.qZA()()()()(),e.TgZ(13,"div",3)(14,"div",9)(15,"div",10)(16,"p-accordion",11)(17,"p-accordionTab",12)(18,"p-header",13)(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"p-table",14),e.YNc(23,ke,1,1,"ng-template",15),e.YNc(24,Fe,2,1,"ng-template",16),e.YNc(25,We,2,1,"ng-template",17),e.YNc(26,Ke,4,2,"ng-template",18),e.qZA()(),e.TgZ(27,"p-accordionTab",19)(28,"p-header",13)(29,"span"),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",20)(33,"div",21)(34,"div",22)(35,"app-checkbox",23),e.NdJ("valueChange",function(r){return a.changeSchedulableFlag(r)}),e.qZA()(),e.TgZ(36,"div",24)(37,"app-datetimepicker",25),e.NdJ("editvalueChange",function(r){return a.changeStartDateValue(r)}),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"div",24)(40,"app-datetimepicker",26),e.NdJ("editvalueChange",function(r){return a.changeEndDateValue(r)}),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",24)(43,"app-inputnumber",27),e.NdJ("valueChange",function(r){return a.changePeriodicityCount(r)}),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",24)(46,"app-dropdown-singleselect",28),e.NdJ("valueChange",function(r){return a.changePeriodicityValue(r)}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",24)(49,"app-dropdown-singleselect",29),e.NdJ("valueChange",function(r){return a.changeSubmissionOptionValue(r)}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",22)(52,"app-checkbox",30),e.NdJ("valueChange",function(r){return a.changeDateIncrementFlag(r)}),e.qZA()()(),e.TgZ(53,"p",31),e._uU(54),e.ALo(55,"translate"),e.qZA()()(),e.TgZ(56,"p-accordionTab",32)(57,"p-header",13)(58,"span"),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",20)(62,"div",21)(63,"div",24),e._UZ(64,"app-input",33),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"div",24),e._UZ(67,"app-input",34),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"div",24),e._UZ(70,"app-input",35),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"div",24),e._UZ(73,"app-input",36),e.ALo(74,"translate"),e.qZA(),e.TgZ(75,"div",24),e._UZ(76,"app-input",37),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"div",24),e._UZ(79,"app-input",38),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"div",24),e._UZ(82,"app-input",39),e.ALo(83,"translate"),e.qZA(),e.TgZ(84,"div",24),e._UZ(85,"app-input",40),e.ALo(86,"translate"),e.qZA()()()()()()()()()()()()),2&s&&(e.xp6(7),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(2),e.s9C("label",e.lcZ(10,61,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(12,63,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(21,65,"REPORTS.PARAMETERS")),e.xp6(2),e.Q6J("columns",a.parametersColumnHeaders)("value",a.parameters)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(31,67,"REPORTS.SCHEDULE")),e.xp6(5),e.s9C("disabled",a.scheduleDisableflag),e.Q6J("options",a.schedulableOptions)("checked",a.scheduled),e.xp6(2),e.s9C("placeholder",e.lcZ(38,69,"COMMON_FIELDS.START_DATE")),e.s9C("disabled",a.scheduleDisable),e.Q6J("defaultDate",a.startDateTime),e.xp6(3),e.s9C("placeholder",e.lcZ(41,71,"COMMON_FIELDS.END_DATE")),e.s9C("disabled",a.scheduleDisable),e.Q6J("addHrs",2)("defaultDate",a.endDateTime),e.xp6(3),e.s9C("label",e.lcZ(44,73,"REPORTS.PERIODICITY_COUNT")),e.s9C("disabled",a.scheduleDisable),e.s9C("value",null==a.viewData?null:a.viewData.periodicity_count),e.Q6J("maxlength",3),e.xp6(3),e.s9C("label",e.lcZ(47,75,"REPORTS.PERIODICITY_TYPE")),e.s9C("defaultValue",a.periodicityType),e.s9C("disabled",a.scheduleDisable),e.Q6J("options",a.periodicityTypeOptions),e.xp6(3),e.s9C("label",e.lcZ(50,77,"REPORTS.SUBMISSION_OPTION")),e.s9C("defaultValue",a.submissionOption),e.s9C("disabled",a.scheduleDisable),e.Q6J("options",a.submissionOptions),e.xp6(3),e.s9C("disabled",a.scheduleDisable),e.Q6J("options",a.dateIncrementOptions)("checked",a.incrementDate),e.xp6(2),e.hij(" ",e.lcZ(55,79,a.errorMsg)," "),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(60,81,"REPORTS.LAST_SUBMISSION")),e.xp6(5),e.s9C("label",e.lcZ(65,83,"COMMON_FIELDS.GROUP")),e.s9C("value",a.reportGroup),e.xp6(3),e.s9C("label",e.lcZ(68,85,"REPORTS.SUBMITTED")),e.s9C("value",a.lastSubmittedDate),e.xp6(3),e.s9C("label",e.lcZ(71,87,"REPORTS.RUN_START_DATE")),e.s9C("value",a.runStartDate),e.xp6(3),e.s9C("label",e.lcZ(74,89,"REPORTS.RUN_END_DATE")),e.s9C("value",a.runEndDate),e.xp6(3),e.s9C("label",e.lcZ(77,91,"REPORTS.RUN_DURATION")),e.s9C("value",null==a.viewData?null:a.viewData.run_time),e.xp6(3),e.s9C("label",e.lcZ(80,93,"REPORTS.RECORD_COUNT")),e.s9C("value",null==a.viewData?null:a.viewData.record_count),e.xp6(3),e.s9C("label",e.lcZ(83,95,"REPORTS.RUN_BY")),e.s9C("value",a.runBy),e.xp6(3),e.s9C("label",e.lcZ(86,97,"COMMON_FIELDS.STATUS")),e.s9C("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.status?null:a.viewData.status.lookup_id)))},dependencies:[O.sg,O.O5,g._Y,g.JL,g.F,C.iA,E.h4,E.jx,C.Ei,y.UQ,y.US,Z.r,V.a,Q.k,F.b,H.Q,z.K,W.L,K.C,D.q,T.X$]})}return o})();var d=p(11210);const et=[{path:"",data:{title:"menu"},children:[{path:"",redirectTo:"reports/list",pathMatch:"full"},{path:"eaglecore/list",component:f,data:{object_type:n.Ty.CORE_FEATURES_MANAGER,title:"All Listing",pageName:n.hf.REPORTS}},{path:"reports/list",component:f,canActivate:[d.P],data:{object_type:n.hf.ALL,title:"Reports Listing",pageName:n.hf.REPORTS}},{path:"alumni/list",component:f,canActivate:[d.P],data:{object_type:n.Ty.ALUMNI_MANAGER,title:"All Listing",pageName:n.hf.REPORTS}},{path:"projects/list",component:f,canActivate:[d.P],data:{object_type:n.hf.PROJECTS_PLUGIN,title:"All Listing",pageName:n.hf.REPORTS}},{path:"iotcore/list",component:f,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORTS}},{path:"iotplay/list",component:f,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORTS}},{path:":id/reportsubmission",component:P,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS}},{path:":id/iotplay/reportsubmission",component:P,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS}},{path:":id/iotcore/reportsubmission",component:P,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS}},{path:":id/alumni/reportsubmission",component:P,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS}},{path:":id/eaglecore/reportsubmission",component:P,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS}},{path:":id/reportsubmission-create",component:N,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/eaglecore/reportsubmission-create",component:N,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/alumni/reportsubmission-create",component:N,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/iotcore/reportsubmission-create",component:N,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/iotplay/reportsubmission-create",component:N,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/all/reportsubmission-create",component:N,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/reportsubmission-rerun",component:Xe,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS}},{path:":id/reportsubmission-view",component:w,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}},{path:":id/all/reportsubmission-view",component:w,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}},{path:":id/iotplay/reportsubmission-view",component:w,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}},{path:":id/eaglecore/reportsubmission-view",component:w,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}},{path:":id/eaglecore/reportsubmission-view",component:w,canActivate:[d.P],data:{object_type:n.Ty.FANGAGE,title:"All Listing",pageName:n.hf.REPORT_SUBMISSIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}},{path:":parentId/activities",loadChildren:()=>Promise.resolve().then(p.bind(p,75896)).then(o=>o.ActivitiesModule)}]}];let tt=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[b.Bz.forChild(et),b.Bz]})}return o})();var at=p(65673);let st=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[O.ez,T.aw,g.u5,g.UX,C.U$,y.fx,at.Q,X.D,ee.Nh,te.v,tt]})}return o})()}}]);