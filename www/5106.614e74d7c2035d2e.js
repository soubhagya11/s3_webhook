"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5106],{25106:(be,w,o)=>{o.r(w),o.d(w,{FaqsModule:()=>me});var N=o(32174),U=o(36895),_=o(15861),r=o(32236),E=o(42863),S=o(71568),f=o(47561),Z=o(28168),P=o(75875),R=o(90313),e=o(94650),B=o(80529);let b=(()=>{class l{http;authService;userToken=localStorage.getItem(r.BU.TOKEN);constructor(a,i){this.http=a,this.authService=i}getAll(a,i,t,s,n,c,d,p,h){const m=p||"",O=R.L.isEmpty(h)?"":"&advSearchString="+JSON.stringify(h);return this.authService.getApiCall("api/v1/faqs?skip="+i+"&limit="+t+"&sort="+s+"&type=list&enterprise.enterprise_id="+n+"&search="+a+d+m+O,c)}create(a){return new Promise((i,t)=>{this.authService.postApiCall("api/v1/faqs/",a).subscribe(s=>{i(s)},s=>{t(s)})})}update(a,i){return new Promise((t,s)=>{this.authService.putApiCall("api/v1/faqs/"+i,a).subscribe(n=>{t(n)},n=>{s(n)})})}get(a){return this.authService.getApiCall("api/v1/faqs/"+a,!0)}static \u0275fac=function(i){return new(i||l)(e.LFG(B.eN),e.LFG(P.e))};static \u0275prov=e.Yz7({token:l,factory:l.\u0275fac})}return l})();var J=o(30578),C=o(42786),g=o(27601),u=o(62510),v=o(54463),A=o(70057),y=o(37415),k=o(88425);const Q=["datatableComponent"];let V=(()=>{class l extends f.O{faqService;commonService;route;listingVariables;translateService;columnsheaders;loggerService;actionSheetController;router;uiUtils;datatableComponent;show=!0;actions;enterpriseId;fabMobileactions;faqListData;faqMobileListData;forcerefresh;mobileroutesArray;noDuplicates=void 0;searchString;tableColumnheaders;dataJsonObj={};constructor(a,i,t,s,n,c,d,p,h,m){super(t,i),this.faqService=a,this.commonService=i,this.route=t,this.listingVariables=s,this.translateService=n,this.columnsheaders=c,this.loggerService=d,this.actionSheetController=p,this.router=h,this.uiUtils=m,this.route.queryParams.subscribe(O=>{this.dataJsonObj.queryParamsObj={defaultView:O.default_view,selectedMenuId:O.selectedMenuId,selectedSubMenuId:O.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=r.hf.FAQS,this.dataJsonObj.advancedSearchObj={},JSON.parse(localStorage.getItem(r.BU.MENU_CLICK_ITEM)),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.FAQS",value:"",showSubMenuDisplayName:!0}],document.getElementsByTagName("body"),this.forcerefresh=!1,this.tableColumnheaders=this.columnsheaders.getFaqColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.actions={EDIT:this.roleRightsValidationByPage(r.hf.FAQS,r.AM.ACTIONS,r.In.EDIT)},this.commonService.currentEvent.subscribe(t=>{"faqs"===t&&(this.forcerefresh=!0)}),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(r.hf.FAQS,r.AM.ACTIONS,r.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:r.gL.URL,redirectURL:"/faqs/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(r.hf.FAQS,r.AM.ACTIONS,r.In.FILTERS)}getSearchResult(a){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.faqListData="",this.getAllRecords(),this.datatableComponent.reset()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",i)}}searchClose(){try{this.searchString="",this.getAllRecords(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.datatableComponent.reset()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"searchClose",a)}}getAllRecords(){try{this.showSpinner(),this.enterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE);const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.faqService.getAll(this.searchString,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.enterpriseId,this.forcerefresh,a,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(this.hideSpinner(),t.rows.length>0){this.faqMobileListData&&this.faqMobileListData.length>0||(this.faqMobileListData=[]);for(let s=0;s<t.rows.length;s++){t.rows[s].display_grid_title=t.rows[s].enterprise.short_name,t.rows[s].secondLineDisplay="Question : "+t.rows[s].question_statement,t.rows[s].thirdLineDisplay="Answer : "+t.rows[s].answer,t.rows[s].enterprise.short_name='<a class="enable" id="enterprise.short_name'+t.rows[s]._id+'"  href="enterprises/enterprises/'+t.rows[s].enterprise.enterprise_id+'/view" >'+t.rows[s].enterprise.short_name;const n={url:`faqs/${t.rows[s]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},c=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;t.rows[s].question_statement=`<a class="enable" id="question_statement${t.rows[s]._id}" href=${c}>${t.rows[s].question_statement}`,!0===t.rows[s].is_enabled?t.rows[s].is_enabled="Yes":!1===t.rows[s].is_enabled&&(t.rows[s].is_enabled="No"),this.faqMobileListData=this.faqMobileListData.filter(d=>d._id!==t.rows[s]._id),this.faqMobileListData.push(t.rows[s])}t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.faqListData=this.faqListData.concat(t.rows)):this.faqListData=t.rows}else this.faqListData=[],this.faqMobileListData=[]})}catch(a){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}createFaq(){this.router.navigate(["/faqs/create"])}loadPageData(a){this.forcerefresh=a.forceRefresh,this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.faqMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}mobileEventAction(a){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(r.hf.FAQS,r.AM.ACTIONS,r.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["faqs/"+a._id+"/edit"])}}),this.roleRightsValidationByPage(r.hf.FAQS,r.AM.ACTIONS,r.In.VIEW)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",i)}this.presentActionSheet(a)}presentActionSheet(a){var i=this;return(0,_.Z)(function*(){i.mobileroutesArray&&(yield(yield i.actionSheetController.create({cssClass:"actionsheet",buttons:i.mobileroutesArray})).present())})()}onActionClicked(a){try{a.action===r.A0.EDIT&&(this.router.navigate(["/faqs/"+a.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("faqs"))}catch(i){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",i)}}getRedirectFaqs(a){}toggle(){this.show=!this.show}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a?this.dataJsonObj.selectedFilter=a:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(i){return new(i||l)(e.Y36(b),e.Y36(S.v),e.Y36(u.gz),e.Y36(J.v),e.Y36(v.sK),e.Y36(E.Y),e.Y36(C.m),e.Y36(A.BX),e.Y36(u.F0),e.Y36(g.s))};static \u0275cmp=e.Xpm({type:l,selectors:[["app-faq"]],viewQuery:function(i,t){if(1&i&&e.Gf(Q,5),2&i){let s;e.iGM(s=e.CRH())&&(t.datatableComponent=s.first)}},features:[e._Bn([b,J.v,E.Y,g.s]),e.qOj],decls:8,vars:27,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],[1,"card-body","pdt-0","pdb-0"],["id","faqs-list",1,"",3,"header","data","listingVariables","totalPages","totalRecords","paginator","expand","actions","mobileListData","selectedDisplayViewType","selectedFilterType","showSpinner","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","redirectionEvent","itemClickEvent","loadPageData"],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(n){return t.onHeaderItemClick(n)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5),e.NdJ("actionClicked",function(n){return t.onActionClicked(n)})("redirectionEvent",function(n){return t.mobileEventAction(n)})("itemClickEvent",function(n){return t.getRedirectFaqs(n)})("loadPageData",function(n){return t.loadPageData(n)}),e.qZA(),e.TgZ(6,"div",6)(7,"app-page-actions",7),e.NdJ("selectedAction",function(n){return t.onPageLevelActionClicked(n)}),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",t.tableColumnheaders)("data",t.faqListData)("listingVariables",t.listingVariables)("totalPages",t.listingVariables.totalpages)("totalRecords",t.listingVariables.totalRecords)("paginator",!0)("expand",!1)("actions",t.actions)("mobileListData",t.faqMobileListData)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("showSpinner",t.dataJsonObj.showSpinner)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(2),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList))},dependencies:[Z.n,y.q,k.y]})}return l})();var Y=o(57936),G=o(94246),q=o(46448),D=o(2387),I=o(56368),H=o(9851),M=o(93837),j=o(24929);const x=["application"],z=["module"],W=["questionTextArea"],$=["answerTextArea"];let X=(()=>{class l extends f.O{navigationService;faqService;route;toastController;router;uiUtils;translateService;commonService;enterprisesService;moduleSettingsService;loggerService;application;module;questionTextArea;answerTextArea;applicationId;applicationName;applicationObj;applicationoptions;buttonDisabled=!1;checkboxOptions;enterpriseId;enterpriseShortName;enterprisename;error;faqCreateObj=new K;is_enabled=!0;pageId;pageObj;pageoptions;applicationModuleJSON;appicationsArrayData=[];dataJsonObj={};constructor(a,i,t,s,n,c,d,p,h,m,O){super(t,p),this.navigationService=a,this.faqService=i,this.route=t,this.toastController=s,this.router=n,this.uiUtils=c,this.translateService=d,this.commonService=p,this.enterprisesService=h,this.moduleSettingsService=m,this.loggerService=O}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.FAQS,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FAQ",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=JSON.parse(localStorage.getItem(r.BU.SELECTED_ENTERPRISE)),document.getElementsByTagName("body"),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.getEnterprisesViewData(),this.getApplicationNames()}getEnterprisesViewData(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(a=>{this.enterprisename=a.enterprise_name,this.enterpriseShortName=a.short_name},a=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",a)}}getApplicationNames(){try{this.commonService.getApplicationNames(this.enterpriseId).then(a=>{this.appicationsArrayData=a,this.applicationoptions=[];const i=[];this.applicationModuleJSON={};for(let t=0;t<this.appicationsArrayData.length;t++){this.applicationModuleJSON[this.appicationsArrayData[t].application.lookup_name]||(this.applicationModuleJSON[this.appicationsArrayData[t].application.lookup_name]=[]);const s=this.appicationsArrayData[t].module;if(s.ID=this.appicationsArrayData[t].module.page_id,s.NAME=this.appicationsArrayData[t].module.page_display_name,this.applicationModuleJSON[this.appicationsArrayData[t].application.lookup_name].push(s),-1==i.indexOf(this.appicationsArrayData[t].application.lookup_id)){const n=this.appicationsArrayData[t].application;n.ID=this.appicationsArrayData[t].application.lookup_id,n.NAME=this.lookupLanguageTranslations(this.appicationsArrayData[t].application.lookup_id),this.applicationoptions.push(n),i.push(this.appicationsArrayData[t].application.lookup_id)}}}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getApplicationOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getApplicationOptions",a)}}changeApplicationName(a){try{this.applicationId=a.value,this.applicationObj=this.applicationoptions.find(i=>i.ID===parseInt(this.applicationId,10)),this.pageoptions=this.applicationModuleJSON[this.applicationObj.lookup_name],this.pageId="",this.pageObj="",this.module.clearSelectInput()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeApplicationName",i)}}changePageName(a){a.value&&(this.pageId=a.value,this.pageObj=this.pageoptions.find(i=>i.ID===parseInt(this.pageId,10)),this.error="")}changeQuestion(a){this.faqCreateObj.question_statement=a.value,this.error=""}changeAnswer(a){this.faqCreateObj.answer=a.value,this.error=""}changeCheckBox(a){this.faqCreateObj.is_enabled=a.value}createRecord(){try{this.application.isValid()&&this.module.isValid()&&this.questionTextArea.isValid()&&this.answerTextArea.isValid()&&(this.buttonDisabled=!0,this.faqCreateObj.enterprise={enterprise_id:this.enterpriseId,enterprise_name:this.enterprisename,short_name:this.enterpriseShortName},this.faqCreateObj.application=this.applicationObj,this.faqCreateObj.module=this.pageObj,this.faqCreateObj.question_statement=this.faqCreateObj.question_statement.trim(),this.faqCreateObj.answer=this.faqCreateObj.answer.trim(),this.faqService.create(this.faqCreateObj).then(i=>{this.buttonDisabled=!i,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},i=>{this.commonErrorCodes(JSON.parse(i))}))}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createRecord",a)}}commonErrorCodes(a){const i=JSON.parse(a[r.BU.STATUS]);switch(i){case 409:case 400:this.error="COMMON_STATUS_CODES."+i}}cancelBtn(){this.commonService.redirectToPreviousUrl()}clearErrorMessage(){this.error=""}static \u0275fac=function(i){return new(i||l)(e.Y36(q.f),e.Y36(b),e.Y36(u.gz),e.Y36(A.yF),e.Y36(u.F0),e.Y36(g.s),e.Y36(v.sK),e.Y36(S.v),e.Y36(Y.e),e.Y36(G.F),e.Y36(C.m))};static \u0275cmp=e.Xpm({type:l,selectors:[["app-faq-create"]],viewQuery:function(i,t){if(1&i&&(e.Gf(x,5),e.Gf(z,5),e.Gf(W,5),e.Gf($,5)),2&i){let s;e.iGM(s=e.CRH())&&(t.application=s.first),e.iGM(s=e.CRH())&&(t.module=s.first),e.iGM(s=e.CRH())&&(t.questionTextArea=s.first),e.iGM(s=e.CRH())&&(t.answerTextArea=s.first)}},features:[e._Bn([b,g.s]),e.qOj],decls:39,vars:38,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","faq-create-enterprise",3,"label","value"],["disabled","false","mandatory","true","id","faq-create-application",3,"label","defaultValue","options","valueChange"],["application",""],["disabled","false","mandatory","true","id","faq-create-page",3,"label","defaultValue","options","valueChange"],["module",""],["mandatory","true","id","faq-create-question",3,"label","maxlength","valueChange"],["questionTextArea",""],["mandatory","true","id","faq-create-answer",3,"label","maxlength","valueChange"],["answerTextArea",""],[1,"col-md-2","d-flex","align-items-center"],["label","","mandatory","true","id","faq-create-checkboxoptions",3,"options","checked","valueChange"],[1,"col-md-10","text-end","mt-2"],["id","faq-create-submit","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","disabled","buttonOnClick"],["id","faq-create-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"text-danger","text-center"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9)(13,"app-dropdown-singleselect",11,12),e.NdJ("valueChange",function(n){return t.changeApplicationName(n)}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",9)(17,"app-dropdown-singleselect",13,14),e.NdJ("valueChange",function(n){return t.changePageName(n)}),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",3)(21,"app-textarea",15,16),e.NdJ("valueChange",function(n){return t.changeQuestion(n)}),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",3)(25,"app-textarea",17,18),e.NdJ("valueChange",function(n){return t.changeAnswer(n)}),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",19)(29,"app-checkbox",20),e.NdJ("valueChange",function(n){return t.changeCheckBox(n)}),e.qZA()(),e.TgZ(30,"div",21)(31,"app-button",22),e.NdJ("buttonOnClick",function(){return t.createRecord()}),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"app-button",23),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(34,"translate"),e.qZA()()(),e._UZ(35,"div"),e.TgZ(36,"div",24),e._uU(37),e.ALo(38,"translate"),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,22,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",t.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(15,24,"GENERAL_SETTINGS.APPLICATIONS")),e.s9C("defaultValue",t.applicationId),e.Q6J("options",t.applicationoptions),e.xp6(4),e.s9C("label",e.lcZ(19,26,"COMMON_FIELDS.PAGE")),e.s9C("defaultValue",t.pageId),e.Q6J("options",t.pageoptions),e.xp6(4),e.s9C("label",e.lcZ(23,28,"COMMON_FIELDS.QUESTION")),e.Q6J("maxlength",240),e.xp6(4),e.s9C("label",e.lcZ(27,30,"COMMON_FIELDS.ANSWER")),e.Q6J("maxlength",240),e.xp6(4),e.Q6J("options",t.checkboxOptions)("checked",t.is_enabled),e.xp6(2),e.s9C("label",e.lcZ(32,32,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.Q6J("disabled",t.buttonDisabled),e.xp6(2),e.s9C("label",e.lcZ(34,34,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(38,36,t.error)," "))},dependencies:[D.r,I.a,H.k,M.b,j.R,y.q,v.X$]})}return l})();class K{enterprise;question_statement;application;module;answer;image;is_enabled}var ee=o(82977),te=o(10805),ae=o(65412),F=o(11735);let ie=(()=>{class l extends f.O{router;translateService;route;faqService;toastController;dialog;commonService;navigationService;loggerService;uiUtils;applicationName;checkboxOptions;enterpriseShortName;moduleName;show;recordId;viewData;dataJsonObj={};constructor(a,i,t,s,n,c,d,p,h,m){super(t,d),this.router=a,this.translateService=i,this.route=t,this.faqService=s,this.toastController=n,this.dialog=c,this.commonService=d,this.navigationService=p,this.loggerService=h,this.uiUtils=m}ngOnInit(){this.initializeComponent(),this.route.queryParams.subscribe(a=>{this.dataJsonObj.queryParamsObj={defaultView:a.defaultView,selectedMenuId:a.selectedMenuId,selectedSubMenuId:a.selectedSubMenuId}})}initializeComponent(){this.dataJsonObj.pageName=r.hf.FAQS,this.show=!0,this.route.params.subscribe(t=>{this.recordId=t.id,this.getRecordById(this.recordId)}),document.getElementsByTagName("body"),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(r.hf.FAQS,r.AM.ACTIONS,r.In.RECORD_HISTORY),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(r.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=r.hf.FAQS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(a){var i=this;return(0,_.Z)(function*(){for(let t of a)i.dataJsonObj[t.storingFieldName]=yield i.commonService.getDynamicJson(i.dataJsonObj.enterpriseId,t.folderName,t.jsonType);i.dataJsonObj.selectedObj={},i.dataJsonObj.selectedObj.recordId=i.recordId,i.dataJsonObj.selectedObj.pageObj=i.dataJsonObj.menuDataJson.filter(t=>t.menu_page.page_name===i.dataJsonObj.selectedPage),i.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(a){this.faqService.get(a).subscribe(i=>{this.viewData=i,this.applicationName=this.lookupLanguageTranslations(this.viewData.application.lookup_id),this.moduleName=this.viewData.module.page_display_name,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FAQ",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}]},i=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",i)})}editRecord(){this.router.navigate(["/faqs/"+this.recordId+"/edit"])}cancelBtn(){this.commonService.redirectToPreviousUrl()}toggle(){this.show=!this.show}static \u0275fac=function(i){return new(i||l)(e.Y36(u.F0),e.Y36(v.sK),e.Y36(u.gz),e.Y36(b),e.Y36(A.yF),e.Y36(ae.uw),e.Y36(S.v),e.Y36(q.f),e.Y36(C.m),e.Y36(g.s))};static \u0275cmp=e.Xpm({type:l,selectors:[["app-faq-view"]],features:[e._Bn([b,te.YP,g.s,E.Y,ee.W]),e.qOj],decls:34,vars:35,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","faq-view-enterprise",3,"label","value"],["disabled","true","id","faq-view-applications",3,"label","value"],["disabled","true","id","faq-view-module",3,"label","value"],["mandatory","true","id","faq-view-question","disabled","",3,"label","defaultvalue","maxlength"],["mandatory","true","id","faq-view-answer","disabled","",3,"label","defaultvalue","maxlength"],[1,"col-md-2","d-flex","align-items-center"],["label","","mandatory","true","disabled","true","id","faq-view-checkboxoptions",3,"options","checked"],[1,"col-md-10","text-end","mt-2"],["label","Close","id","faq-view-close","className","btn btn-danger btn-sm",3,"buttonOnClick"],[1,"card"],[1,"card-content"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",3),e._UZ(19,"app-textarea",13),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",3),e._UZ(22,"app-textarea",14),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",15),e._UZ(25,"app-checkbox",16),e.qZA(),e.TgZ(26,"div",17)(27,"app-button",18),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.qZA()()(),e._UZ(28,"div"),e.qZA()()(),e.TgZ(29,"div",3)(30,"div",19)(31,"div",20)(32,"p-accordion"),e._UZ(33,"app-recordhistory",21),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,25,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==t.viewData||null==t.viewData.enterprise?null:t.viewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,27,"GENERAL_SETTINGS.APPLICATIONS")),e.s9C("value",t.applicationName),e.xp6(3),e.s9C("label",e.lcZ(17,29,"COMMON_FIELDS.PAGE")),e.s9C("value",t.moduleName),e.xp6(3),e.s9C("label",e.lcZ(20,31,"COMMON_FIELDS.QUESTION")),e.s9C("defaultvalue",null==t.viewData?null:t.viewData.question_statement),e.Q6J("maxlength",240),e.xp6(3),e.s9C("label",e.lcZ(23,33,"COMMON_FIELDS.ANSWER")),e.s9C("defaultvalue",null==t.viewData?null:t.viewData.answer),e.Q6J("maxlength",240),e.xp6(3),e.Q6J("options",t.checkboxOptions)("checked",null==t.viewData?null:t.viewData.is_enabled),e.xp6(8),e.Q6J("createdBy",null==t.viewData?null:t.viewData.created_by)("lastUpdatedBy",null==t.viewData?null:t.viewData.updated_by)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.viewData?null:t.viewData.createdAt)("lastUpdatedDate",null==t.viewData?null:t.viewData.updatedAt))},dependencies:[N.UQ,D.r,I.a,M.b,j.R,F.W,y.q,v.X$]})}return l})();const se=["questionTextArea"],re=["answerTextArea"];let ne=(()=>{class l extends f.O{navigationService;router;faqService;uiUtils;translateService;toastController;activatedRoute;loggerService;commonService;questionTextArea;answerTextArea;applicationName;buttonDisabled=!1;checkboxOptions;createdBy;creationDate;enterpriseObj;enterpriseShortName;error;faqEditObject=new oe;lastUpdatedBy;lastUpdatedDate;moduleName;recordData;recordID;spinner=!0;totalRecords;dataJsonObj={};constructor(a,i,t,s,n,c,d,p,h){super(d,h),this.navigationService=a,this.router=i,this.faqService=t,this.uiUtils=s,this.translateService=n,this.toastController=c,this.activatedRoute=d,this.loggerService=p,this.commonService=h,this.activatedRoute.params.subscribe(m=>{this.recordID=m.id,this.getRecordById(this.recordID)})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.FAQS,document.getElementsByTagName("body"),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(r.hf.FAQS,r.AM.ACTIONS,r.In.RECORD_HISTORY)}scrollToElement(a){setTimeout(()=>{const i=document.querySelector(a);i&&i.scrollIntoView({behavior:"smooth",block:"start"})},500)}getRecordById(a){try{this.faqService.get(a).subscribe(i=>{this.recordData=i,this.enterpriseObj=this.recordData.enterprise,this.enterpriseShortName=this.recordData.enterprise.short_name,this.applicationName=this.lookupLanguageTranslations(this.recordData.application.lookup_id),this.moduleName=this.recordData.module.page_display_name,this.faqEditObject.question_statement=this.recordData.question_statement,this.faqEditObject.answer=this.recordData.answer,this.createdBy=this.recordData.created_by,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FAQ",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.lastUpdatedBy=this.recordData.updated_by})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",i)}}changeQuestion(a){this.error="",this.faqEditObject.question_statement=a.value,this.error=""}changeAnswer(a){this.error="",this.faqEditObject.answer=a.value}changeCheckBox(a){this.faqEditObject.is_enabled=a.value}cancelBtn(){this.commonService.redirectToPreviousUrl()}updateRecord(){try{this.questionTextArea.isValid()&&this.answerTextArea.isValid()&&(this.faqEditObject.enterprise=this.enterpriseObj,this.faqEditObject.question_statement=this.faqEditObject.question_statement.trim(),this.faqEditObject.answer=this.faqEditObject.answer.trim(),this.buttonDisabled=!0,this.faqService.update(this.faqEditObject,this.recordID).then(a=>{this.buttonDisabled=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},a=>{this.buttonDisabled=!1,this.commonErrorCodes(JSON.parse(a))}))}catch(a){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",a)}}commonErrorCodes(a){const i=JSON.parse(a[r.BU.STATUS]);switch(i){case 409:case 400:this.error="COMMON_STATUS_CODES."+i}}static \u0275fac=function(i){return new(i||l)(e.Y36(q.f),e.Y36(u.F0),e.Y36(b),e.Y36(g.s),e.Y36(v.sK),e.Y36(A.yF),e.Y36(u.gz),e.Y36(C.m),e.Y36(S.v))};static \u0275cmp=e.Xpm({type:l,selectors:[["app-faq-edit"]],viewQuery:function(i,t){if(1&i&&(e.Gf(se,5),e.Gf(re,5)),2&i){let s;e.iGM(s=e.CRH())&&(t.questionTextArea=s.first),e.iGM(s=e.CRH())&&(t.answerTextArea=s.first)}},features:[e._Bn([b,g.s]),e.qOj],decls:42,vars:43,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","faq-edit-enterprise",3,"label","value"],["disabled","true","id","faq-edit-application",3,"label","value"],["disabled","true","id","faq-edit-module",3,"label","value"],["mandatory","true","id","faq-edit-question",3,"label","defaultvalue","maxlength","valueChange"],["questionTextArea",""],["mandatory","true","id","faq-edit-answer",3,"label","defaultvalue","maxlength","valueChange"],["answerTextArea",""],[1,"col-md-2","d-flex","align-items-center"],["label","","mandatory","true","disabled","false","id","faq-edit-checkboxoptions",3,"options","checked","valueChange"],[1,"col-md-10","text-end","mt-2"],["id","faq-edit-submit","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["id","faq-edit-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"text-danger","text-center"],[1,"col-md-12","p-0"],[1,"card-content"],[3,"multiple"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",3)(19,"app-textarea",13,14),e.NdJ("valueChange",function(n){return t.changeQuestion(n)}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",3)(23,"app-textarea",15,16),e.NdJ("valueChange",function(n){return t.changeAnswer(n)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",17)(27,"app-checkbox",18),e.NdJ("valueChange",function(n){return t.changeCheckBox(n)}),e.qZA()(),e.TgZ(28,"div",19)(29,"app-button",20),e.NdJ("buttonOnClick",function(){return t.updateRecord()}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"app-button",21),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(32,"translate"),e.qZA()()(),e._UZ(33,"div"),e.TgZ(34,"div",22),e._uU(35),e.ALo(36,"translate"),e.qZA()()()(),e.TgZ(37,"div",23)(38,"div",4)(39,"div",24)(40,"p-accordion",25),e._UZ(41,"app-recordhistory",26),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,27,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",t.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(14,29,"GENERAL_SETTINGS.APPLICATIONS")),e.s9C("value",t.applicationName),e.xp6(3),e.s9C("label",e.lcZ(17,31,"COMMON_FIELDS.PAGE")),e.s9C("value",t.moduleName),e.xp6(3),e.s9C("label",e.lcZ(21,33,"COMMON_FIELDS.QUESTION")),e.s9C("defaultvalue",null==t.recordData?null:t.recordData.question_statement),e.Q6J("maxlength",240),e.xp6(4),e.s9C("label",e.lcZ(25,35,"COMMON_FIELDS.ANSWER")),e.s9C("defaultvalue",null==t.recordData?null:t.recordData.answer),e.Q6J("maxlength",240),e.xp6(4),e.Q6J("options",t.checkboxOptions)("checked",null==t.recordData?null:t.recordData.is_enabled),e.xp6(2),e.s9C("label",e.lcZ(30,37,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(32,39,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(36,41,t.error)," "),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("createdBy",t.createdBy)("lastUpdatedBy",t.lastUpdatedBy)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.recordData?null:t.recordData.createdAt)("lastUpdatedDate",null==t.recordData?null:t.recordData.updatedAt))},dependencies:[N.UQ,D.r,I.a,M.b,j.R,F.W,y.q,v.X$]})}return l})();class oe{enterprise;question_statement;answer;is_enabled}var T=o(11210);const le=[{path:"",data:{title:"faq"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[T.P],component:V,data:{object_type:r.hf.FAQS,title:"FAQ List",responsibilityParam:r.bP.MENUS+"."+r.w1.PROFILE_MENU+"."+r.bP.SUBMENUS+"."+r.w1.FAQS+"."+r.In.ENABLED,pageName:r.hf.FAQS}},{path:"create",canActivate:[T.P],component:X,data:{object_type:r.hf.FAQS,title:"FAQ Create",responsibilityParam:r.bP.MENUS+"."+r.w1.PROFILE_MENU+"."+r.bP.SUBMENUS+"."+r.w1.FAQS+"."+r.In.CREATE,pageName:r.hf.FAQS,pageSetting:r.AM.ACTIONS,settingField:r.In.CREATE}},{path:":id/edit",canActivate:[T.P],component:ne,data:{object_type:r.hf.FAQS,title:"FAQ Edit",responsibilityParam:r.bP.MENUS+"."+r.w1.PROFILE_MENU+"."+r.bP.SUBMENUS+"."+r.w1.FAQS+"."+r.In.EDIT,pageName:r.hf.FAQS,pageSetting:r.AM.ACTIONS,settingField:r.In.EDIT}},{path:":id/view",canActivate:[T.P],component:ie,data:{object_type:r.hf.FAQS,title:"FAQ View",responsibilityParam:r.bP.MENUS+"."+r.w1.PROFILE_MENU+"."+r.bP.SUBMENUS+"."+r.w1.FAQS+"."+r.In.VIEW,pageName:r.hf.FAQS,pageSetting:r.AM.ACTIONS,settingField:r.In.VIEW}}]}];let de=(()=>{class l{static \u0275fac=function(i){return new(i||l)};static \u0275mod=e.oAB({type:l});static \u0275inj=e.cJS({imports:[u.Bz.forChild(le),u.Bz]})}return l})();var L=o(24006),ce=o(10841),pe=o(32137),he=o(93144),ue=o(65673);let me=(()=>{class l{static \u0275fac=function(i){return new(i||l)};static \u0275mod=e.oAB({type:l});static \u0275inj=e.cJS({imports:[de,U.ez,v.aw,L.u5,L.UX,he.U$,N.fx,ue.Q,pe.D,ce.ii]})}return l})()}}]);