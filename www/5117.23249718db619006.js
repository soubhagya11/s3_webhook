"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5117],{25117:(_t,R,p)=>{p.r(R),p.d(R,{WorkPayrollModule:()=>ut});var T=p(36895),M=p(70057),B=p(65673),g=p(54463),b=p(32174),Z=p(24006),q=p(80529),C=p(93144),m=p(62510),U=p(15861),A=p(42863),x=p(30578),K=p(28168),l=p(32236),D=p(42786),S=p(71568),f=p(47561),H=p(75875),G=p(90313),e=p(94650);let O=(()=>{class o{authService;constructor(t){this.authService=t}getWorkpayrollList(t,a,s,i,r,c,u){const d=c||"",h=G.L.isEmpty(u)?"":"&advSearchString="+JSON.stringify(u);return this.authService.getApiCall("api/v1/workpayrolls?skip="+t+"&limit="+a+"&type=list&sort="+s+"&search="+i+"&enterprise.enterprise_id="+r+d+h)}createPayroll(t){return new Promise((a,s)=>{this.authService.postApiCall("api/v1/workpayrolls",t).subscribe(i=>{a(i)},i=>{s(i)})})}getPayrollViewData(t){return this.authService.getApiCall("api/v1/workpayrolls/"+t)}editPayroll(t,a){return new Promise((s,i)=>{this.authService.putApiCall("api/v1/workpayrolls/"+t,a).subscribe(r=>{s(r)},r=>{i(r)})})}getPayRollRefresh(t,a){return new Promise((s,i)=>{this.authService.patchApiCall("api/v1/workpayrolls/"+t+"?action=refreshed",a).subscribe(r=>{s(r)},r=>{i(r)})})}getPayRolldump(t,a){return new Promise((s,i)=>{this.authService.patchApiCall("api/v1/workpayrolls/"+t+"?action=reportdump",a).subscribe(r=>{s(r)},r=>{i(r)})})}getAttachmentsList(t,a,s,i,r){return new Promise((c,u)=>{this.authService.getApiCall("api/v1/attachments?type=list&object_type="+t+"&object_id="+a+(s?"&skip="+s:"")+(i?"&limit="+i:"")+(r?"&sort="+r:"")).subscribe(_=>{c(_)},_=>{u(_)})})}getApproval(t,a){return new Promise((s,i)=>{this.authService.patchApiCall("api/v1/workpayrolls/"+t,a).subscribe(r=>{s(r)},r=>{i(r)})})}getPayrollreport(t){return this.authService.getReport(t)}static \u0275fac=function(a){return new(a||o)(e.LFG(H.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var v=p(15439),E=p(27601),N=p(37415),Q=p(88425);const $=["datatableComponent"];let z=(()=>{class o extends f.O{translateService;workPayrollsService;ColumnHeader;listingVariables;uiUtils;router;loggerService;actionSheetController;commonService;route;datatableComponent;tableColumnheaders;searchString;actions;listdata;obj;enterpriseId;payrollMobileListData;actionBoolean;loginUserDateFormat;approversUserData;loginApproverRole;approveHrAction;viewAction;financeExecutiveCreateEditApprove;financeManagerCreateEditApprove;financeAdminCreateEditApprove;entarpriseAdminCreateEditApprove;mobileroutesArray;reportFile;reportNamePath;recordId;filename;dataJsonObj={};constructor(t,a,s,i,r,c,u,d,h,y){super(y,h),this.translateService=t,this.workPayrollsService=a,this.ColumnHeader=s,this.listingVariables=i,this.uiUtils=r,this.router=c,this.loggerService=u,this.actionSheetController=d,this.commonService=h,this.route=y,this.route.queryParams.subscribe(_=>{this.dataJsonObj.queryParamsObj={defaultView:_.default_view,selectedMenuId:_.selectedMenuId,selectedSubMenuId:_.selectedSubMenuId}})}ngOnInit(){if(this.dataJsonObj.pageName=l.hf.WORKPAYROLL,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.WORK_PAYROLLS",value:"",showSubMenuDisplayName:!0}],this.tableColumnheaders=this.ColumnHeader.getWorkpayrollColumnHeaders(),this.tableColumnheaders=this.ColumnHeader.getWorkpayrollColumnHeaders(),localStorage.getItem(l.BU.APPROVER_SETTINGS_DATA)){this.approversUserData=JSON.parse(localStorage.getItem(l.BU.APPROVER_SETTINGS_DATA));for(let a=0;a<this.approversUserData.length;a++)localStorage.getItem(l.BU.FIRST_NAME)===this.approversUserData[a].f_name&&(this.loginApproverRole=this.lookupLanguageTranslations(this.approversUserData[a].role.lookup_id),localStorage.setItem(l.BU.LOGIN_APPROVER_ROLE,this.loginApproverRole))}if(localStorage.getItem(l.BU.APPROVAL_SETTINGS_DATA)){const a=JSON.parse(localStorage.getItem(l.BU.APPROVAL_SETTINGS_DATA));for(let s=0;s<a.length;s++)"W-Payroll"===a[s].page_name&&(this.financeExecutiveCreateEditApprove=a[s].financeexecutive.create_edit_approve,this.financeManagerCreateEditApprove=a[s].financemanager.create_edit_approve,this.financeAdminCreateEditApprove=a[s].financeadmin.create_edit_approve,this.entarpriseAdminCreateEditApprove=a[s].entarpriseadmin.create_edit_approve,this.viewAction=a[s].hrexecutive.view)}this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE);const t=JSON.parse(localStorage.getItem(l.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(t.lookup_id),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.actions={EDIT:this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.EDIT),VIEW:this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.VIEW),REFRESH:this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.REFRESH),APPROVE:this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.APPROVE),DOWNLOAD:this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.DOWNLOAD)},this.initializeComponent()}initializeComponent(){this.dataJsonObj.noDuplicates=void 0,this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.dataJsonObj.advancedSearchObj={},this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:l.gL.URL,redirectURL:"workresourcetransactions/workpayrolls/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.FILTERS)}getSearchResult(t){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getWorkpayrollList(),this.datatableComponent.reset()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",a)}}getWorkpayrollList(){this.workPayrollsService.getWorkpayrollList(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(a=>{if(a.rows.length>0){this.payrollMobileListData&&this.payrollMobileListData.length>0||(this.payrollMobileListData=[]);for(let s=0;s<a.rows.length;s++){a.rows[s].page_name="workPayroll";const i=a.rows[s].statuses;for(let d=0;d<i.length;d++)"Finance Executive"===this.loginApproverRole&&!0===this.financeExecutiveCreateEditApprove?a.rows[s].approveAccess="ACCOUNT_EXECUTIVE"!==i[d].status.lookup_name&&"ACCOUNT_MANAGER"!==i[d].status.lookup_name&&"ACCOUNT_ADMIN"!==i[d].status.lookup_name&&i[d].status.lookup_name!==l.t3.CLOSED:"Finance Manager"===this.loginApproverRole&&!0===this.financeManagerCreateEditApprove?a.rows[s].approveAccess="ACCOUNT_EXECUTIVE"===i[d].status.lookup_name:"Finance Admin"===this.loginApproverRole&&!0===this.financeAdminCreateEditApprove?a.rows[s].approveAccess="ACCOUNT_MANAGER"===i[d].status.lookup_name:"Enterprise Admin"===this.loginApproverRole&&!0===this.entarpriseAdminCreateEditApprove?"ACCOUNT_ADMIN"===i[d].status.lookup_name?a.rows[s].approveAccess=!0:i[d].status.lookup_name===l.t3.CLOSED&&(a.rows[s].approveAccess=!1):a.rows[s].approveAccess=!1;a.rows[s].firstLineDisplay=a.rows[s].enterprise.short_name,a.rows[s].secondLineDisplay="Payroll Name: "+a.rows[s].payroll_name;const r={url:`workresourcetransactions/workpayrolls/${a.rows[s]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},c=r.queryParams&&Object.keys(r.queryParams).length>0?`${r.url}?${JSON.stringify(r.queryParams)}`:r.url;a.rows[s].payroll_name=`<a class="enable" id="payroll_name${a.rows[s]._id}" href=${c}>${a.rows[s].payroll_name}`,a.rows[s].enterprise.short_name='<a class="enable" id="enterprise.short_name'+a.rows[s].enterprise.enterprise_id+'" href="enterprises/enterprises/'+a.rows[s]._id+'/view">'+a.rows[s].enterprise.short_name,a.rows[s].start_date=v(a.rows[s].start_date).format(this.loginUserDateFormat),a.rows[s].end_date=v(a.rows[s].end_date).format(this.loginUserDateFormat);let u=0;a.rows[s].statuses.length>0&&(u=a.rows[s].statuses.length-1,a.rows[s].status=a.rows[s].statuses[u].status?this.lookupLanguageTranslations(a.rows[s].statuses[u].status.lookup_id):""),this.payrollMobileListData=this.payrollMobileListData.filter(d=>d._id!==a.rows[s]._id),this.payrollMobileListData.push(a.rows[s])}a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.listdata=this.listdata.concat(a.rows)):this.listdata=a.rows}else this.listdata=[],this.payrollMobileListData=[]})}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.payrollMobileListData=this.dataJsonObj.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getWorkpayrollList()}createWorkpayroll(){try{this.router.navigate(["workresourcetransactions/workpayrolls/create"])}catch(t){this.loggerService.setLoggerError(this.constructor.name,"createWorkpayroll",t)}}searchClose(){try{this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getWorkpayrollList(),this.datatableComponent.reset()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"searchClose",t)}}onActionClicked(t){try{t.action===l.A0.EDIT?(this.router.navigate(["workresourcetransactions/workpayrolls/"+t.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("workpayrolls")):t.action===l.A0.VIEW?this.commonService.redirectToUrl(["..",t.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):t.action===l.A0.REFRESH?this.workPayrollsService.getPayRollRefresh(t.data._id,this.obj).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_REFRESH"),this.router.routeReuseStrategy.clearModuleRouteCache("workpayrolls"),this.router.navigateByUrl("/workresourcetransactions/workpayrolls/workpayrolls-list"),this.getWorkpayrollList()}):t.action===l.A0.APPROVAL?this.router.navigate(["workresourcetransactions/workpayrolls/"+t.data._id+"/workpayroll-approval/"+l.A0.APPROVAL]):t.action===l.A0.DOWNLOAD&&this.downloadClick(t)}catch(a){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",a)}}downloadClick(t){try{this.recordId=t.data._id,this.workPayrollsService.getPayRolldump(this.recordId,{action:"reportdump"}).then(s=>{const i=s.filePath;this.workPayrollsService.getPayrollreport(i).subscribe(r=>{this.downLoadFile(r,i,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;")},r=>{}),this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT")},s=>{this.loggerService.setLoggerError(this.constructor.name,"editPayrollSubmit",s)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"downloadClick",a)}}downLoadFile(t,a,s){const i=new Blob([t.body],{type:s}),r=document.createElement("a");r.href=URL.createObjectURL(i),this.filename=a.split("/").pop(),r.download=this.filename,document.body.appendChild(r),r.click()}mobileEventAction(t){this.mobileroutesArray=[],this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.APPROVE)&&!0===t.approveAccess&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_APPROVE"),handler:()=>{this.router.navigate(["workresourcetransactions/workpayrolls/"+t._id+"/workpayroll-approval/"+l.A0.APPROVAL]),this.router.routeReuseStrategy.clearModuleRouteCache("workpayrolls")}}),this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.EDIT)&&!0===t.approveAccess&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["workresourcetransactions/workpayrolls/"+t._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("workpayrolls")}}),this.presentActionSheet(t)}presentActionSheet(t){var a=this;return(0,U.Z)(function*(){yield(yield a.actionSheetController.create({cssClass:"actionsheet",buttons:a.mobileroutesArray})).present()})()}getRedirectedToView(t){try{this.roleRightsValidationByPage(l.hf.WORK_PAYROLL,l.AM.ACTIONS,l.In.VIEW)&&this.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getRedirectedToView",a)}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(a){return new(a||o)(e.Y36(g.sK),e.Y36(O),e.Y36(A.Y),e.Y36(x.v),e.Y36(E.s),e.Y36(m.F0),e.Y36(D.m),e.Y36(M.BX),e.Y36(S.v),e.Y36(m.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-workpayrolls-list"]],viewQuery:function(a,s){if(1&a&&e.Gf($,5),2&a){let i;e.iGM(i=e.CRH())&&(s.datatableComponent=i.first)}},features:[e._Bn([A.Y,x.v,O]),e.qOj],decls:9,vars:26,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",3,"header","actions","totalPages","totalRecords","paginator","data","mobileListData","expand","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(r){return s.onHeaderItemClick(r)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(r){return s.onActionClicked(r)})("itemClickEvent",function(r){return s.getRedirectedToView(r)})("redirectionEvent",function(r){return s.mobileEventAction(r)})("loadPageData",function(r){return s.loadPageData(r)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(r){return s.onPageLevelActionClicked(r)}),e.qZA()()()()()),2&a&&(e.xp6(3),e.Q6J("pageName",s.dataJsonObj.pageName)("defaultView",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",s.dataJsonObj.pageActionsList)("pageTitle",s.dataJsonObj.pageTitle)("selectedMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",s.tableColumnheaders)("actions",s.actions)("totalPages",s.listingVariables.totalpages)("totalRecords",s.listingVariables.totalRecords)("paginator",!0)("data",s.listdata)("mobileListData",s.payrollMobileListData)("expand",!1)("listingVariables",s.listingVariables)("selectedDisplayViewType",s.dataJsonObj.selectedDisplayView)("selectedFilterType",s.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",s.dataJsonObj.selectedAdvancedSearchObj)("pageName",s.dataJsonObj.pageName)("selectedMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",s.dataJsonObj.pageActionsList))},dependencies:[K.n,N.q,Q.y]})}return o})();var J=p(71238),I=p(46448),P=p(2387),k=p(56368),j=p(11735),F=p(68896),L=p(10805);function X(o,n){if(1&o&&(e.TgZ(0,"div",25),e._UZ(1,"app-pageheader",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0)("isEditActionEnable",t.dataJsonObj.isEditAction)}}function ee(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"app-button",28),e.NdJ("buttonOnClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e.ALo(2,"translate"),e.qZA()()}2&o&&(e.xp6(1),e.s9C("label",e.lcZ(2,1,"COMMON_BUTTONS.BUTTON_CLOSE")))}function te(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"app-button",29),e.NdJ("buttonOnClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.approvalBtn())}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-button",30),e.NdJ("buttonOnClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e.ALo(4,"translate"),e.qZA()()}2&o&&(e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_BUTTONS.BUTTON_APPROVE")),e.xp6(2),e.s9C("label",e.lcZ(4,4,"COMMON_BUTTONS.BUTTON_CANCEL")))}function ae(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td",32),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function se(o,n){if(1&o&&e.YNc(0,ae,4,4,"tr",31),2&o){const t=e.oxw();e.Q6J("ngIf",t.data&&0==t.data.length)}}function oe(o,n){if(1&o&&(e.TgZ(0,"th",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=n.$implicit;e.Tol(t.class),e.xp6(1),e.hij(" ",e.lcZ(2,4,t.header)," ")}}function ie(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,oe,3,6,"th",33),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function re(o,n){if(1&o&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.Q6J("pSelectableRow",a),e.xp6(1),e.hij(" ",a[t.field]," ")}}function le(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,re,2,2,"td",35),e.qZA()),2&o){const t=n.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function ne(o,n){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",38)(6,"br"),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",a[t.field],e.oJD)}}function pe(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,ne,7,4,"div",37),e.qZA()()()),2&o){const t=n.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}function ce(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td",32),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function de(o,n){if(1&o&&e.YNc(0,ce,4,4,"tr",31),2&o){const t=e.oxw();e.Q6J("ngIf",t.data1&&0==t.data1.length)}}function ue(o,n){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function _e(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ue,3,3,"th",39),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function me(o,n){if(1&o&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",a),e.xp6(1),e.hij(" ",a[t.field]," ")}}function he(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,me,2,5,"td",40),e.qZA()),2&o){const t=n.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function ge(o,n){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",38)(6,"br"),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",a[t.field],e.oJD)}}function ye(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,ge,7,4,"div",37),e.qZA()()()),2&o){const t=n.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}let V=(()=>{class o extends f.O{translateService;commonService;route;workPayrollService;router;columnHeader;loggerService;navigationService;uiUtils;_sharedService;recordId;payrollData;createdBy;createdDate;lastUpdatedBy;lastUpdatedDate;loginUserDateFormat;startDateValue;endDateValue;statusValue;statusComment;attachmentColumnHeaders;attachmentsData;totalRecords;spinner=!0;object_type;actionType;header;data=[];header1;data1=[];roleStatusValue;loginuserId;pageAction;dataJsonObj={};constructor(t,a,s,i,r,c,u,d,h,y){super(s,a),this.translateService=t,this.commonService=a,this.route=s,this.workPayrollService=i,this.router=r,this.columnHeader=c,this.loggerService=u,this.navigationService=d,this.uiUtils=h,this._sharedService=y,this.route.queryParams.subscribe(_=>{this.dataJsonObj.queryParamsObj={defaultView:_.defaultView,selectedMenuId:_.selectedMenuId,selectedSubMenuId:_.selectedSubMenuId}})}ngOnInit(){this.dataJsonObj.pageName=l.hf.WORKPAYROLL,this.loginuserId=localStorage.getItem(l.BU.USER_ID),this.header=this.columnHeader.getPayrollDetailsViewColumnHeaders(),this.object_type=this.route.snapshot.data.object_type,this.attachmentColumnHeaders=this.columnHeader.getAttachmentsColumnHeaders();const t=JSON.parse(localStorage.getItem(l.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(t.lookup_id),this.actionType=l.In.VIEW,this.header1=[[{field:"sno",header:"#",class:"w-50"},{field:"actionDate",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-180 text-end"},{field:"actionTaken",header:this.translateService.instant("ACTION_HISTORY.ACTION"),class:"w-100"},{field:"actedBy",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-150"},{field:"action_comment",header:this.translateService.instant("COMMON_FIELDS.NOTES"),class:""}],[]],this.route.params.subscribe(s=>{this.recordId=s.id,this.pageAction=s.title}),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.WORKPAYROLL,l.AM.ACTIONS,l.In.RECORD_HISTORY),this.getAttachmentsList(),this.initializePage(),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(l.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=l.hf.WORKPAYROLL,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(t){var a=this;return(0,U.Z)(function*(){for(let s of t)a.dataJsonObj[s.storingFieldName]=yield a.commonService.getDynamicJson(a.dataJsonObj.enterpriseId,s.folderName,s.jsonType);a.dataJsonObj.selectedObj={},a.dataJsonObj.selectedObj.recordId=a.recordId,a.dataJsonObj.selectedObj.pageObj=a.dataJsonObj.menuDataJson.filter(s=>s.menu_page.page_name===a.dataJsonObj.selectedPage),a.dataJsonObj.selectedObjEnabled=!0})()}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}getViewDetails(t){try{this.data=[],this.workPayrollService.getPayrollViewData(t).subscribe(a=>{if(this.payrollData=a,this.dataJsonObj.isEditAction=this.getIsEditAction(this.payrollData),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_PAYROLL",value:this.payrollData.payroll_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.startDateValue=v(this.payrollData.start_date).format(this.loginUserDateFormat),this.endDateValue=v(this.payrollData.end_date).format(this.loginUserDateFormat),this.payrollData.statuses.length>0){const i=this.payrollData.statuses.length-1;this.statusValue=this.lookupLanguageTranslations(this.payrollData.statuses[i].status.lookup_id),this.statusComment=this.payrollData.statuses[i].comment}if(this.payrollData.employment_details){this.data=[];for(let i=0;i<this.payrollData.employment_details.length;i++)for(let r=0;r<this.payrollData.payroll_editable_details.length;r++)if(this.payrollData.employment_details[i].work_resource.work_resource_id===this.payrollData.payroll_editable_details[r].work_resource.work_resource_id){var s={sNumber:i+1,work_resource_name:this.payrollData.employment_details[i].work_resource.work_resource_name,resource_status:this.payrollData.employment_details[i].resource_status,country:this.payrollData.employment_details[i].country,location:this.payrollData.employment_details[i].location,department:this.payrollData.employment_details[i].department,department_head:this.payrollData.employment_details[i].department_head,team:this.payrollData.employment_details[i].team,supervisor:this.payrollData.employment_details[i].supervisor,role:this.payrollData.employment_details[i].role,designation:this.payrollData.employment_details[i].designation,work_resource_number:this.payrollData.employment_details[i].work_resource_number,start_date:this.commonService.dbTimezoneFormatWithHours(this.payrollData.employment_details[i].start_date),left_date:this.payrollData.employment_details[i].left_date?this.commonService.dbTimezoneFormatWithHours(this.payrollData.employment_details[i].left_date):"",mobile_number:this.payrollData.employment_details[i].mobile_number,email:this.payrollData.employment_details[i].email,address:this.payrollData.employment_details[i].address,payroll_type:this.payrollData.employment_details[i].payroll_type,pay_hours:this.payrollData.employment_details[i].pay_hours,adjust_pay_hours:this.payrollData.employment_details[i].adjust_pay_hours,hr_action:this.lookupLanguageTranslations(this.payrollData.employment_details[i].hr_action.lookup_id),TDS_minus:this.payrollData.payroll_editable_details[r].tds.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),Adv_Lns_minus:this.payrollData.payroll_editable_details[r].advance_loans.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),O_Deds_minus:this.payrollData.payroll_editable_details[r].other_deductions.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),Inc_Bon_plus:this.payrollData.payroll_editable_details[r].increment_bonus.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),Arrs_LEnc_plus:this.payrollData.payroll_editable_details[r].arrs_lenc.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),O_Deds_plus:this.payrollData.payroll_editable_details[r].other_dues.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),C_Deds_plus:this.payrollData.payroll_editable_details[r].company_dues.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),PI1_plus:this.payrollData.payroll_editable_details[r].pi1.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),PI2_plus:this.payrollData.payroll_editable_details[r].pi2.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),NetPay:this.payrollData.payroll_editable_details[r].net_pay.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),ActgAction:this.lookupLanguageTranslations(this.payrollData.payroll_editable_details[r].finance_action.lookup_id)};this.data.push(s)}}for(let i=0;i<this.payrollData.statuses.length;i++)this.payrollData.statuses[i].sno=i+1,this.payrollData.statuses[i].actionDate=this.commonService.dbTimezoneFormatWithHours(this.payrollData.statuses[i].last_updated_date),this.payrollData.statuses[i].actionTaken=this.lookupLanguageTranslations(this.payrollData.statuses[i].status.lookup_id),this.payrollData.statuses[i].actedBy=this.payrollData.statuses[i].last_updated_by.f_name+" "+this.payrollData.statuses[i].last_updated_by.l_name,this.payrollData.statuses[i].action_comment=this.payrollData.statuses[i].comment;this.data1=this.payrollData.statuses,this.createdBy=this.payrollData.created_by,this.lastUpdatedBy=this.payrollData.updated_by})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getViewDetails",a)}}getIsEditAction(t){if(localStorage.getItem(l.BU.APPROVER_SETTINGS_DATA)){this.dataJsonObj.approversUserData=JSON.parse(localStorage.getItem(l.BU.APPROVER_SETTINGS_DATA));for(let i=0;i<this.data.approversUserData.length;i++)localStorage.getItem(l.BU.FIRST_NAME)===this.dataJsonObj.approversUserData[i].f_name&&(this.dataJsonObj.loginApproverRole=this.lookupLanguageTranslations(this.dataJsonObj.approversUserData[i].role.lookup_id),localStorage.setItem(l.BU.LOGIN_APPROVER_ROLE,this.dataJsonObj.loginApproverRole))}const a=JSON.parse(localStorage.getItem(l.BU.APPROVAL_SETTINGS_DATA));this.dataJsonObj.loginApproverRole=this.lookupLanguageTranslations(this.dataJsonObj.approversUserData.role.lookup_id),this.dataJsonObj.financeExecutiveCreateEditApprove=a.financeexecutive.create_edit_approve,this.dataJsonObj.financeManagerCreateEditApprove=a.financemanager.create_edit_approve,this.dataJsonObj.financeAdminCreateEditApprove=a.financeadmin.create_edit_approve,this.dataJsonObj.entarpriseAdminCreateEditApprove=a.entarpriseadmin.create_edit_approve,this.dataJsonObj.viewAction=a.hrexecutive.view;const s=t.statuses;for(let i=0;i<s.length;i++)"Finance Executive"===this.dataJsonObj.loginApproverRole&&!0===this.dataJsonObj.financeExecutiveCreateEditApprove?t.approveAccess="ACCOUNT_EXECUTIVE"!==s[i].status.lookup_name&&"ACCOUNT_MANAGER"!==s[i].status.lookup_name&&"ACCOUNT_ADMIN"!==s[i].status.lookup_name&&s[i].status.lookup_name!==l.t3.CLOSED:"Finance Manager"===this.dataJsonObj.loginApproverRole&&!0===this.dataJsonObj.financeManagerCreateEditApprove?t.approveAccess="ACCOUNT_EXECUTIVE"===s[i].status.lookup_name:"Finance Admin"===this.dataJsonObj.loginApproverRole&&!0===this.dataJsonObj.financeAdminCreateEditApprove?t.approveAccess="ACCOUNT_MANAGER"===s[i].status.lookup_name:"Enterprise Admin"===this.dataJsonObj.loginApproverRole&&!0===this.dataJsonObj.entarpriseAdminCreateEditApprove?"ACCOUNT_ADMIN"===s[i].status.lookup_name?t.approveAccess=!0:s[i].status.lookup_name===l.t3.CLOSED&&(t.approveAccess=!1):t.approveAccess=!1;return!0===t.approveAccess}initializePage(){try{this.getViewDetails(this.recordId)}catch(t){this.loggerService.setLoggerError(this.constructor.name,"initializePage",t)}}getAttachmentsList(){try{this.workPayrollService.getAttachmentsList(this.object_type,this.recordId,"","","").then(t=>{if(this._sharedService.emitChangeLoaders(!1),t.rows.length>0)for(let a=0;a<t.rows.length;a++)t.rows[a].user_name=t.rows[a].f_name+", "+t.rows[a].l_name,t.rows[a].last_uploaded_date=this.commonService.dbTimezoneFormatWithHours(t.rows[a].last_uploaded_date),this.attachmentsData=t.rows;else this.attachmentsData=[];this.totalRecords=t.totalCount,this.spinner=!1}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",t)}}approvalBtn(){try{"Finance Executive"===localStorage.getItem(l.BU.LOGIN_APPROVER_ROLE)?this.roleStatusValue="ACCOUNT_EXECUTIVE":"Finance Manager"===localStorage.getItem(l.BU.LOGIN_APPROVER_ROLE)?this.roleStatusValue="ACCOUNT_MANAGER":"Finance Admin"===localStorage.getItem(l.BU.LOGIN_APPROVER_ROLE)?this.roleStatusValue="ACCOUNT_ADMIN":"Enterprise Admin"===localStorage.getItem(l.BU.LOGIN_APPROVER_ROLE)&&(this.roleStatusValue=l.t3.CLOSED),this.workPayrollService.getApproval(this.recordId,{enterprise:{enterprise_id:this.payrollData.enterprise.enterprise_id,enterprise_name:this.payrollData.enterprise.enterprise_name,short_name:this.payrollData.enterprise.short_name},status:this.roleStatusValue,user_profile_id:this.loginuserId}).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_APPROVE"),this.commonService.redirectToPreviousUrl()}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"approvalBtn",a)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"approvalBtn",t)}}static \u0275fac=function(a){return new(a||o)(e.Y36(g.sK),e.Y36(S.v),e.Y36(m.gz),e.Y36(O),e.Y36(m.F0),e.Y36(A.Y),e.Y36(D.m),e.Y36(I.f),e.Y36(E.s),e.Y36(J.F))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-workpayroll-view"]],features:[e._Bn([O,A.Y]),e.qOj],decls:61,vars:69,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card"],["class","card-header card-header-primary","id","stickyHeaderID",4,"ngIf"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","work-skill-elements-edit-enterprise",3,"label","value"],["disabled","true","id","work-skill-elements-edit-business-entity",3,"label","value"],["disabled","true","id","skill-elements-create-skillTemplateName",3,"label","value"],["class","col-md-12 text-end mt-2",4,"ngIf"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","scrollabletable",3,"columns","value","rows","lazy"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["id","viewattachmentId",3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","isEditActionEnable"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-danger btn-sm","id","appraisal-elements-view-close",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","appraisal-elements-view-approval",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","appraisal-elements-view-cancel",3,"label","buttonOnClick"],[4,"ngIf"],[1,"text-center","text-danger"],["style","text-align: left !important;",3,"class",4,"ngFor","ngForOf"],[2,"text-align","left !important"],[3,"pSelectableRow",4,"ngFor","ngForOf"],[3,"pSelectableRow"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],[4,"ngFor","ngForOf"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.YNc(5,X,2,7,"div",5),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8),e._UZ(9,"app-input",9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-input",10),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"app-input",11),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"app-input",11),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",8),e._UZ(21,"app-input",11),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",8),e._UZ(24,"app-input",11),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",8),e._UZ(27,"app-input",11),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div",8),e._UZ(30,"app-input",11),e.ALo(31,"translate"),e.qZA(),e.YNc(32,ee,3,3,"div",12),e.YNc(33,te,5,6,"div",12),e.qZA()()()(),e.TgZ(34,"div",3)(35,"div",4)(36,"div",13)(37,"p-accordion",14)(38,"p-accordionTab",15)(39,"p-header",16)(40,"span"),e._uU(41),e.ALo(42,"translate"),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"p-table",17),e.YNc(45,se,1,1,"ng-template",18),e.YNc(46,ie,2,1,"ng-template",19),e.YNc(47,le,2,1,"ng-template",20),e.YNc(48,pe,4,2,"ng-template",21),e.qZA()(),e.TgZ(49,"p-accordionTab",15)(50,"p-header",16)(51,"span"),e._uU(52),e.ALo(53,"translate"),e.qZA()(),e.TgZ(54,"p-table",22),e.YNc(55,de,1,1,"ng-template",18),e.YNc(56,_e,2,1,"ng-template",19),e.YNc(57,he,2,1,"ng-template",20),e.YNc(58,ye,4,2,"ng-template",21),e.qZA()(),e._UZ(59,"app-attachment",23)(60,"app-recordhistory",24),e.qZA()()()()()()()),2&a&&(e.xp6(5),e.Q6J("ngIf",s.payrollData),e.xp6(4),e.s9C("label",e.lcZ(10,47,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==s.payrollData||null==s.payrollData.enterprise?null:s.payrollData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(13,49,"COMMON_FIELDS.BUSINESS_ENTITY")),e.s9C("value",s.lookupLanguageTranslations(null==s.payrollData||null==s.payrollData.business_entity?null:s.payrollData.business_entity.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(16,51,"WORK_PAYROLL.WORK_PAYROLL_NAME")),e.s9C("value",null==s.payrollData?null:s.payrollData.payroll_name),e.xp6(3),e.s9C("label",e.lcZ(19,53,"COMMON_FIELDS.BASIS")),e.s9C("value",s.lookupLanguageTranslations(null==s.payrollData||null==s.payrollData.basis?null:s.payrollData.basis.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(22,55,"COMMON_FIELDS.START_DATE")),e.s9C("value",s.startDateValue),e.xp6(3),e.s9C("label",e.lcZ(25,57,"COMMON_FIELDS.END_DATE")),e.s9C("value",s.endDateValue),e.xp6(3),e.s9C("label",e.lcZ(28,59,"COMMON_FIELDS.STATUS")),e.s9C("value",s.statusValue),e.xp6(3),e.s9C("label",e.lcZ(31,61,"COMMON_FIELDS.NOTES")),e.s9C("value",s.statusComment),e.xp6(2),e.Q6J("ngIf","APPROVAL"!==s.pageAction),e.xp6(1),e.Q6J("ngIf","APPROVAL"===s.pageAction),e.xp6(4),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(42,63,"COMMON_PAGE_TITLES.WORK_PAYROLL")," ",e.lcZ(43,65,"COMMON_FIELDS.DETAILS"),""),e.xp6(3),e.Q6J("columns",s.header)("value",s.data)("rows",10)("lazy",!0),e.xp6(5),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(53,67,"COMMON_BLOCK_TITLES.WORK_PAYROLL_ACTION_HISTORY")),e.xp6(2),e.Q6J("columns",s.header1)("value",s.data1)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("header",s.attachmentColumnHeaders)("data",s.attachmentsData)("totalRecords",s.totalRecords)("objectType",s.object_type)("objectId",s.recordId)("actionType",s.actionType)("spinner",s.spinner),e.xp6(1),e.Q6J("createdBy",s.createdBy)("lastUpdatedBy",s.lastUpdatedBy)("showrecordhistory",s.dataJsonObj.showrecordhistory)("creationDate",null==s.payrollData?null:s.payrollData.createdAt)("lastUpdatedDate",null==s.payrollData?null:s.payrollData.updatedAt))},dependencies:[T.sg,T.O5,P.r,k.a,j.W,F.Y,N.q,b.UQ,b.US,L.h4,L.jx,C.iA,C.Ei,g.X$]})}return o})();var W=p(9851),Y=p(17867);const Oe=["startDate"],Ae=["endDate"];let Te=(()=>{class o extends f.O{translateService;workpayrollService;uiUtils;loggerService;commonService;router;navigationService;route;startDate;endDate;enterpriseData;enterpriseId;enterpriseName;enterpriseShortName;businessEntityOptions;businessEntityId;businessEntityName;businessEntityDisplayName;businessEntityObj;error;startDateValue;endDateValue;basisOptions;defaultBasisName;basisObj;loginUserDateFormat;dataJsonObj={};constructor(t,a,s,i,r,c,u,d){super(d,r),this.translateService=t,this.workpayrollService=a,this.uiUtils=s,this.loggerService=i,this.commonService=r,this.router=c,this.navigationService=u,this.route=d}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.WORKPAYROLL;const t=JSON.parse(localStorage.getItem(l.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(t.lookup_id),this.enterpriseId=JSON.parse(localStorage.getItem(l.BU.SELECTED_ENTERPRISE)),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(a=>{this.dataJsonObj.lookupCodesListJSON=a,this.getBusinessEntityNameOptions(),this.getbasisNames()}),this.getEnterpriseData(),this.startDateValue=new Date((new Date).getFullYear(),(new Date).getMonth()-1,1),this.endDateValue=new Date((new Date).getFullYear(),(new Date).getMonth(),0),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_PAYROLL",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}]}getEnterpriseData(){try{this.commonService.getEnterprisesViewData(this.enterpriseId).then(t=>{this.enterpriseName=t.enterprise_name,this.enterpriseShortName=t.short_name}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)}}getBusinessEntityNameOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.BUSINESS_ENTITY_NAMES],"").then(t=>{this.businessEntityOptions=t,this.businessEntityId=this.businessEntityOptions[0].ID,this.businessEntityObj=t[0],this.businessEntityName=t[0].lookup_name},t=>{this.loggerService.setLoggerError(this.constructor.name,"getBusinessEntityNameOptions",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getbasisNames",t)}}getSelectedBusinessEntityName(t){t.value&&(this.businessEntityId=t.value,this.businessEntityObj=this.businessEntityOptions.find(a=>a.ID===parseInt(this.businessEntityId,10)),this.businessEntityName=this.businessEntityObj.lookup_name),this.error=""}getbasisNames(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.WORK_PAY_BASIS],"").then(t=>{this.basisOptions=t,this.defaultBasisName=t[0].ID,this.basisObj=t[0]})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getbasisNames",t)}}changebasisName(t){this.defaultBasisName=t.value,this.basisObj=this.basisOptions.find(a=>a.ID===parseInt(this.defaultBasisName,10))}getStartDateChange(t){this.startDateValue=t.value,t.value&&(this.error=new Date(this.startDateValue)>new Date(this.endDateValue)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":"")}getEndDateChange(t){try{this.endDateValue=t.value,t.value&&(this.error=new Date(this.startDateValue)>new Date(this.endDateValue)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":"")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getEndDateChange",a)}}createPayrollSubmit(){try{this.startDate.isValid()&&this.endDate.isValid()&&this.workpayrollService.createPayroll({enterprise:{enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},business_entity:this.businessEntityObj,basis:this.basisObj,start_date:this.startDateValue,end_date:this.endDateValue}).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},a=>{this.commonErrorCodes(JSON.parse(a)),this.loggerService.setLoggerError(this.constructor.name,"createPayrollSubmit",a)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"createPayrollSubmit",t)}}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",t)}}commonErrorCodes(t){const a=JSON.parse(t[l.BU.STATUS]);409===a&&(this.error="COMMON_STATUS_CODES."+a)}static \u0275fac=function(a){return new(a||o)(e.Y36(g.sK),e.Y36(O),e.Y36(E.s),e.Y36(D.m),e.Y36(S.v),e.Y36(m.F0),e.Y36(I.f),e.Y36(m.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-workpayroll-create"]],viewQuery:function(a,s){if(1&a&&(e.Gf(Oe,5),e.Gf(Ae,5)),2&a){let i;e.iGM(i=e.CRH())&&(s.startDate=i.first),e.iGM(i=e.CRH())&&(s.endDate=i.first)}},features:[e._Bn([O]),e.qOj],decls:37,vars:38,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","skill-elements-create-enterprise",3,"label","value"],["disabled","false","mandatory","true","id","skill-elements-create-business-entity",3,"label","defaultValue","options","valueChange"],["disabled","true","value","","id","skill-elements-create-skillTemplateName",3,"label"],["mandatory","true","id","enterprise-create-reasonwonlost",3,"label","options","defaultValue","valueChange"],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","lookupcode-view-startdate",3,"placeholder","defaultDate","dateChangeValue"],["startDate",""],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","lookupcode-view-enddate",3,"placeholder","defaultDate","dateChangeValue"],["endDate",""],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","skill-elements-create-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","skill-elements-create-cancel",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9)(13,"app-dropdown-singleselect",11),e.NdJ("valueChange",function(r){return s.getSelectedBusinessEntityName(r)}),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9)(19,"app-dropdown-singleselect",13),e.NdJ("valueChange",function(r){return s.changebasisName(r)}),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"div",9)(22,"app-advsearchdatepicker",14,15),e.NdJ("dateChangeValue",function(r){return s.getStartDateChange(r)}),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",9)(26,"app-advsearchdatepicker",16,17),e.NdJ("dateChangeValue",function(r){return s.getEndDateChange(r)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",18)(30,"app-button",19),e.NdJ("buttonOnClick",function(){return s.createPayrollSubmit()}),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"app-button",20),e.NdJ("buttonOnClick",function(){return s.cancelBtn()}),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",21),e._uU(35),e.ALo(36,"translate"),e.qZA()()()()()()()()),2&a&&(e.xp6(6),e.Q6J("pageName",s.dataJsonObj.pageName)("pageTitle",s.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,20,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",s.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(14,22,"COMMON_FIELDS.BUSINESS_ENTITY")),e.s9C("defaultValue",s.businessEntityId),e.Q6J("options",s.businessEntityOptions),e.xp6(3),e.s9C("label",e.lcZ(17,24,"WORK_PAYROLL.WORK_PAYROLL_NAME")),e.xp6(3),e.s9C("label",e.lcZ(20,26,"COMMON_FIELDS.BASIS")),e.s9C("defaultValue",s.defaultBasisName),e.Q6J("options",s.basisOptions),e.xp6(3),e.s9C("placeholder",e.lcZ(24,28,"COMMON_FIELDS.START_DATE")),e.s9C("defaultDate",s.startDateValue),e.xp6(4),e.s9C("placeholder",e.lcZ(28,30,"COMMON_FIELDS.END_DATE")),e.s9C("defaultDate",s.endDateValue),e.xp6(4),e.s9C("label",e.lcZ(31,32,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(33,34,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(36,36,s.error)," "))},dependencies:[P.r,k.a,W.k,Y.H,N.q,g.X$]})}return o})();const be=["endDate"],Ce=["startDate"];function De(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td",34),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Se(o,n){if(1&o&&e.YNc(0,De,4,4,"tr",33),2&o){const t=e.oxw();e.Q6J("ngIf",t.data&&0==t.data.length)}}function fe(o,n){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function ve(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,fe,3,3,"th",35),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Ee(o,n){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw().$implicit;e.xp6(1),e.Oqu(a[t.field])}}function Ne(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseTDSminus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_TDS_MINUS")),e.s9C("value",a.data[t].TDS_minus),e.xp6(2),e.MGl("id","error_id",t,"")}}function Le(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseAdvLnsminus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_ADV_LNS_MINUS")),e.s9C("value",a.data[t].Adv_Lns_minus),e.xp6(2),e.MGl("id","error_id",t,"")}}function we(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseODEDSMINUS(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_OTHER_DEDUCTIONS_MINUS")),e.s9C("value",a.data[t].O_Deds_minus),e.xp6(2),e.MGl("id","error_id",t,"")}}function Ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseIncBonplus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_INCENTIVE_BONUS_PLUS")),e.s9C("value",a.data[t].Inc_Bon_plus),e.xp6(2),e.MGl("id","error_id",t,"")}}function Pe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseArrsLEncplus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_ARR_LENC_PLUS")),e.s9C("value",a.data[t].Arrs_LEnc_plus),e.xp6(2),e.MGl("id","error_id",t,"")}}function ke(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseoDedsplus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_OTHER_DEDUCTIONS_PLUS")),e.s9C("value",a.data[t].O_Deds_plus),e.xp6(2),e.MGl("id","error_id",t,"")}}function Re(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseCDedsplus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_C_DUES_PLUS")),e.s9C("value",a.data[t].C_Deds_plus),e.xp6(2),e.MGl("id","error_id",t,"")}}function Me(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponsePi1plus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_PERFORMANCE_INCENTIVE_01_PLUS")),e.s9C("value",a.data[t].PI1_plus),e.xp6(2),e.MGl("id","error_id",t,"")}}function Ze(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponsePi2plus(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"WORK_PAYROLL.WORK_PAY_PERFORMANCE_INCENTIVE_02_PLUS")),e.s9C("value",a.data[t].PI2_plus),e.xp6(2),e.MGl("id","error_id",t,"")}}function Ue(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-dropdown-singleselect",40),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getActgAction(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,4,"WORK_PAYROLL.WORK_PAY_ACTG_ACTION")),e.s9C("defaultValue",a.data[t].ActgAction),e.Q6J("options",a.accountOptions),e.xp6(2),e.MGl("id","error_id",t,"")}}function xe(o,n){if(1&o&&(e.TgZ(0,"td",37),e.YNc(1,Ee,2,1,"span",33),e.YNc(2,Ne,4,5,"span",33),e.YNc(3,Le,4,5,"span",33),e.YNc(4,we,4,5,"span",33),e.YNc(5,Ie,4,5,"span",33),e.YNc(6,Pe,4,5,"span",33),e.YNc(7,ke,4,5,"span",33),e.YNc(8,Re,4,5,"span",33),e.YNc(9,Me,4,5,"span",33),e.YNc(10,Ze,4,5,"span",33),e.YNc(11,Ue,4,6,"span",33),e.qZA()),2&o){const t=n.$implicit,a=n.index,s=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",s),e.xp6(1),e.Q6J("ngIf",20!=a&&21!=a&&22!=a&&23!=a&&24!=a&&25!=a&&26!=a&&27!=a&&28!=a&&31!=a),e.xp6(1),e.Q6J("ngIf",20==a),e.xp6(1),e.Q6J("ngIf",21==a),e.xp6(1),e.Q6J("ngIf",22==a),e.xp6(1),e.Q6J("ngIf",23==a),e.xp6(1),e.Q6J("ngIf",24==a),e.xp6(1),e.Q6J("ngIf",25==a),e.xp6(1),e.Q6J("ngIf",26==a),e.xp6(1),e.Q6J("ngIf",27==a),e.xp6(1),e.Q6J("ngIf",28==a),e.xp6(1),e.Q6J("ngIf",31==a)}}function Je(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,xe,12,15,"td",36),e.qZA()),2&o){const t=n.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function je(o,n){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",42)(6,"br"),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",a[t.field],e.oJD)}}function Fe(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,je,7,4,"div",41),e.qZA()()()),2&o){const t=n.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}function Ve(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td",34),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function We(o,n){if(1&o&&e.YNc(0,Ve,4,4,"tr",33),2&o){const t=e.oxw();e.Q6J("ngIf",t.data1&&0==t.data1.length)}}function Ye(o,n){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function Be(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Ye,3,3,"th",35),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function qe(o,n){if(1&o&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",a),e.xp6(1),e.hij(" ",a[t.field]," ")}}function Ke(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,qe,2,5,"td",43),e.qZA()),2&o){const t=n.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function He(o,n){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",42)(6,"br"),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",a[t.field],e.oJD)}}function Ge(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,He,7,4,"div",41),e.qZA()()()),2&o){const t=n.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}function Qe(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td",34),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function $e(o,n){if(1&o&&e.YNc(0,Qe,4,4,"tr",33),2&o){const t=e.oxw();e.Q6J("ngIf",t.data2&&0==t.data2.length)}}function ze(o,n){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function Xe(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ze,3,3,"th",35),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function et(o,n){if(1&o&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",a),e.xp6(1),e.hij(" ",a[t.field]," ")}}function tt(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,et,2,5,"td",43),e.qZA()),2&o){const t=n.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function at(o,n){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,a=e.oxw().$implicit;e.xp6(1),e.Oqu(a[t.field])}}function st(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-dropdown-singleselect",40),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getPayrollAction(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,4,"WORK_PAYROLL.WORK_PAY_ACTG_ACTION")),e.s9C("defaultValue",a.data2[t].actionTaken),e.Q6J("options",a.actionOptions),e.xp6(2),e.MGl("id","error_id",t,"")}}function ot(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"span")(1,"app-input",38),e.NdJ("valueChange",function(s){e.CHM(t);const i=e.oxw(2).rowIndex,r=e.oxw();return e.KtG(r.getResponseComment(s,i))}),e.ALo(2,"translate"),e.qZA(),e._UZ(3,"p",39),e.qZA()}if(2&o){const t=e.oxw(2).rowIndex,a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"COMMON_FIELDS.NOTES")),e.s9C("value",a.data2[t].comment),e.xp6(2),e.MGl("id","error_id",t,"")}}function it(o,n){if(1&o&&(e.TgZ(0,"td",37),e.YNc(1,at,2,1,"span",33),e.YNc(2,st,4,6,"span",33),e.YNc(3,ot,4,5,"span",33),e.qZA()),2&o){const t=n.$implicit,a=n.index,s=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",s),e.xp6(1),e.Q6J("ngIf",1!=a&&3!=a),e.xp6(1),e.Q6J("ngIf",1==a),e.xp6(1),e.Q6J("ngIf",3==a)}}function rt(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,it,4,7,"td",36),e.qZA()),2&o){const t=n.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function lt(o,n){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",42)(6,"br"),e.qZA()),2&o){const t=n.$implicit,a=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",a[t.field],e.oJD)}}function nt(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,lt,7,4,"div",41),e.qZA()()()),2&o){const t=n.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}let pt=(()=>{class o extends f.O{translateService;commonService;route;workPayrollService;router;uiUtils;_sharedService;loggerService;navigationService;columnHeader;endDate;startDate;recordId;payrollData;createdBy;creationDate;lastUpdatedBy;lastUpdatedDate;skillName;isEnabled=!0;description;error;endDateValue;startDateValue;statusValue;statusComment;attachmentColumnHeaders;attachmentsData;totalRecords;spinner;object_type;actionType;data;header;payrollDetails;accountOptions;enterpriseId;defaultAccountAction;defaultAccountActionObj;ActgAction;header1=[];data1;data2;user_id;statusObj;actionOptions;action;actionTaken;actionTObj;actedBy;userObj;actedById;statuses;header2;comment;payrollActionID;dataJsonObj={};constructor(t,a,s,i,r,c,u,d,h,y){super(s,a),this.translateService=t,this.commonService=a,this.route=s,this.workPayrollService=i,this.router=r,this.uiUtils=c,this._sharedService=u,this.loggerService=d,this.navigationService=h,this.columnHeader=y}ngOnInit(){this.dataJsonObj.pageName=l.hf.WORKPAYROLL,this.header=this.columnHeader.getPayrollDetailsViewColumnHeaders(),this.object_type=this.route.snapshot.data.object_type,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.WORKPAYROLL,l.AM.ACTIONS,l.In.RECORD_HISTORY),this.header1=[[{field:"sno",header:"#",class:"w-50"},{field:"actionDate",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-180 text-end"},{field:"actionTaken",header:this.translateService.instant("ACTION_HISTORY.ACTION"),class:"w-100"},{field:"actedBy",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-150"},{field:"action_comment",header:this.translateService.instant("COMMON_FIELDS.NOTES"),class:""}],[]],this.header2=[[{field:"actionDate",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-180 text-end"},{field:"actionTaken",header:this.translateService.instant("ACTION_HISTORY.ACTION"),class:"w-100"},{field:"actedBy",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-150"},{field:"action_comment",header:this.translateService.instant("COMMON_FIELDS.NOTES"),class:""}],[]],this.attachmentColumnHeaders=this.columnHeader.getAttachmentsColumnHeaders(),this.actedBy=localStorage.getItem(l.BU.FIRST_NAME)+" "+localStorage.getItem(l.BU.LAST_NAME),this.actedById=localStorage.getItem(l.BU.LOG_IN_USER_ID),this.actionType=l.In.EDIT,this.route.params.subscribe(t=>{this.recordId=t.id,this.getViewDetails(this.recordId)}),this.getAttachmentsList()}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}getViewDetails(t){try{this.data=[],this.data1=[],this.data2=[],this.workPayrollService.getPayrollViewData(t).subscribe(a=>{this.payrollData=a,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_PAYROLL",value:this.payrollData.payroll_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=this.payrollData.enterprise.enterprise_id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(r=>{this.dataJsonObj.lookupCodesListJSON=r,this.getaccountOptions(),this.getpayRollactionOptions()}),this.statuses=this.payrollData.statuses;const s=this.payrollData.statuses.length-1;if(this.statusValue=this.lookupLanguageTranslations(this.payrollData.statuses[s].status.lookup_id),this.actionTaken=this.payrollData.statuses[s].status.lookup_id,this.statusComment=this.payrollData.statuses[s].comment,this.startDateValue=this.payrollData.start_date,this.endDateValue=this.payrollData.end_date,this.payrollData.employment_details){this.data=[];for(let r=0;r<this.payrollData.employment_details.length;r++)for(let c=0;c<this.payrollData.payroll_editable_details.length;c++)if(this.payrollData.employment_details[r].work_resource.work_resource_id===this.payrollData.payroll_editable_details[c].work_resource.work_resource_id){var i={sNumber:r+1,work_resource:this.payrollData.employment_details[r].work_resource,work_resource_name:this.payrollData.employment_details[r].work_resource.work_resource_name,resource_status:this.payrollData.employment_details[r].resource_status,country:this.payrollData.employment_details[r].country,location:this.payrollData.employment_details[r].location,department:this.payrollData.employment_details[r].department,department_head:this.payrollData.employment_details[r].department_head,team:this.payrollData.employment_details[r].team,supervisor:this.payrollData.employment_details[r].supervisor,role:this.payrollData.employment_details[r].role,designation:this.payrollData.employment_details[r].designation,work_resource_number:this.payrollData.employment_details[r].work_resource_number,start_date:this.commonService.dbTimezoneFormatWithHours(this.payrollData.employment_details[r].start_date),left_date:this.payrollData.employment_details[r].left_date?this.commonService.dbTimezoneFormatWithHours(this.payrollData.employment_details[r].left_date):"",mobile_number:this.payrollData.employment_details[r].mobile_number,email:this.payrollData.employment_details[r].email,address:this.payrollData.employment_details[r].address,payroll_type:this.payrollData.employment_details[r].payroll_type,pay_hours:this.payrollData.employment_details[r].pay_hours,adjust_pay_hours:this.payrollData.employment_details[r].adjust_pay_hours,hr_action:this.lookupLanguageTranslations(this.payrollData.employment_details[r].hr_action.lookup_id),TDS_minus:this.payrollData.payroll_editable_details[c].tds.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),Adv_Lns_minus:this.payrollData.payroll_editable_details[c].advance_loans.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),O_Deds_minus:this.payrollData.payroll_editable_details[c].other_deductions.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),Inc_Bon_plus:this.payrollData.payroll_editable_details[c].increment_bonus.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),Arrs_LEnc_plus:this.payrollData.payroll_editable_details[c].arrs_lenc.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),O_Deds_plus:this.payrollData.payroll_editable_details[c].other_dues.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),C_Deds_plus:this.payrollData.payroll_editable_details[c].company_dues.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),PI1_plus:this.payrollData.payroll_editable_details[c].pi1.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),PI2_plus:this.payrollData.payroll_editable_details[c].pi2.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),NetPay:this.payrollData.payroll_editable_details[c].net_pay.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2}),ActgAction:this.payrollData.payroll_editable_details[c].finance_action?this.payrollData.payroll_editable_details[c].finance_action.lookup_id:"",finance_action:this.payrollData.payroll_editable_details[c].finance_action};this.data.push(i)}}this.data2=[];for(let r=0;r<this.payrollData.statuses.length;r++)this.payrollData.statuses[r].sno=r+1,this.payrollData.statuses[r].actionDate=this.commonService.dbTimezoneFormatWithHours(this.payrollData.statuses[r].last_updated_date),this.payrollData.statuses[r].actionTaken=this.lookupLanguageTranslations(this.payrollData.statuses[r].status.lookup_id),this.payrollData.statuses[r].actedBy=this.payrollData.statuses[r].last_updated_by.f_name+" "+this.payrollData.statuses[r].last_updated_by.l_name,this.payrollData.statuses[r].action_comment=this.payrollData.statuses[r].comment;this.statusObj={actionDate:this.commonService.dbTimezoneFormatWithHours(Date.now()),actionTaken:this.payrollData.statuses[s].status.lookup_id,actedBy:this.actedBy,action_comment:""},this.data2.push(this.statusObj),this.data1=this.payrollData.statuses,this.createdBy=this.payrollData.created_by,this.lastUpdatedBy=this.payrollData.updated_by},a=>{this.loggerService.setLoggerError(this.constructor.name,"getViewDetails",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getViewDetails",a)}}getStartDateChange(t){this.startDateValue=t.value,this.error=new Date(this.startDateValue)>new Date(this.endDateValue)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":""}getEndDateChange(t){this.endDateValue=t.value,this.error=new Date(this.startDateValue)>new Date(this.endDateValue)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":""}editPayrollSubmit(){try{this.startDate.isValid()&&this.endDate.isValid()&&this.workPayrollService.editPayroll(this.recordId,{enterprise:{enterprise_id:this.payrollData.enterprise.enterprise_id,enterprise_name:this.payrollData.enterprise.enterprise_name,short_name:this.payrollData.enterprise.short_name},business_entity:this.payrollData.business_entity,basis:this.payrollData.basis,start_date:this.startDateValue,end_date:this.endDateValue,statuses:this.statuses,employment_details:this.payrollData.employment_details,payroll_editable_details:this.data}).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},a=>{this.commonErrorCodes(JSON.parse(a)),this.loggerService.setLoggerError(this.constructor.name,"editPayrollSubmit",a)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"editPayrollSubmit",t)}}commonErrorCodes(t){const a=JSON.parse(t[l.BU.STATUS]);409===a&&(this.error="COMMON_STATUS_CODES."+a)}getpayRollactionOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.WORK_PAYROLL_STATUSES],"").then(t=>{this.actionOptions=t})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",t)}}getPayrollAction(t,a){this.payrollActionID=t.value,this.statusObj=this.actionOptions.find(s=>s.ID===parseInt(this.payrollActionID,10))}payRollAction(){this.statusObj={sno:this.statuses[this.payrollData.statuses.length-1].sno+1,status:this.statusObj,actionTaken:this.lookupLanguageTranslations(this.statusObj.lookup_id),comment:this.comment,actionDate:this.commonService.dbTimezoneFormatWithHours(Date.now()),actedBy:this.actedBy,action_comment:this.comment,last_updated_date:this.commonService.dbTimezoneFormatWithHours(Date.now()),last_updated_by:this.actedById},this.statuses.push(this.statusObj)}getResponseComment(t,a){this.comment=t.value}onClick(t){t.stopPropagation()}getAttachmentsList(){try{this.workPayrollService.getAttachmentsList(this.object_type,this.recordId,"","","").then(t=>{if(this._sharedService.emitChangeLoaders(!1),t.rows.length>0)for(let a=0;a<t.rows.length;a++)t.rows[a].user_name=t.rows[a].f_name+", "+t.rows[a].l_name,t.rows[a].last_uploaded_date=this.commonService.dbTimezoneFormatWithHours(t.rows[a].last_uploaded_date),this.attachmentsData=t.rows;else this.attachmentsData=[];this.totalRecords=t.totalCount,this.spinner=!1}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getViewDetails",t)}}getResponseTDSminus(t,a){this.data[a].tds=t.value,this.data[a].TDS_minus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponseAdvLnsminus(t,a){this.data[a].advance_loans=t.value,this.data[a].Adv_Lns_minus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponseODEDSMINUS(t,a){this.data[a].other_deductions=t.value,this.data[a].O_Deds_minus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponseIncBonplus(t,a){this.data[a].increment_bonus=t.value,this.data[a].Inc_Bon_plus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponseArrsLEncplus(t,a){this.data[a].arrs_lenc=t.value,this.data[a].Arrs_LEnc_plus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponseoDedsplus(t,a){this.data[a].other_dues=t.value,this.data[a].O_Deds_plus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponseCDedsplus(t,a){this.data[a].company_dues=t.value,this.data[a].C_Deds_plus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponsePi1plus(t,a){this.data[a].pi1=t.value,this.data[a].PI1_plus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getResponsePi2plus(t,a){this.data[a].pi2=t.value,this.data[a].PI2_plus=t.value.toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})}getaccountOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.WORK_PAYROLL_FINANCE_ACTIONS],"").then(t=>{this.accountOptions=t})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",t)}}getActgAction(t,a){this.ActgAction=t.value,this.data[a].ActgAction=t.value,this.data[a].finance_action=this.accountOptions.find(s=>s.ID===parseInt(this.ActgAction,10))}static \u0275fac=function(a){return new(a||o)(e.Y36(g.sK),e.Y36(S.v),e.Y36(m.gz),e.Y36(O),e.Y36(m.F0),e.Y36(E.s),e.Y36(J.F),e.Y36(D.m),e.Y36(I.f),e.Y36(A.Y))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-workpayroll-edit"]],viewQuery:function(a,s){if(1&a&&(e.Gf(be,5),e.Gf(Ce,5)),2&a){let i;e.iGM(i=e.CRH())&&(s.endDate=i.first),e.iGM(i=e.CRH())&&(s.startDate=i.first)}},features:[e._Bn([A.Y]),e.qOj],decls:83,vars:94,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","work-skill-elements-edit-enterprise",3,"label","value"],["disabled","true","id","work-skill-elements-edit-business-entity",3,"label","value"],["disabled","true","id","skill-elements-create-skillTemplateName",3,"label","value"],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","lookupcode-view-startdate",3,"placeholder","defaultDate","dateChangeValue"],["startDate",""],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","lookupcode-view-enddate",3,"placeholder","defaultDate","dateChangeValue"],["endDate",""],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","skill-elements-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","skill-elements-edit-cancel",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","editattachmentId",3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[4,"ngIf"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow","class",4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow"],["mandatory","false","disabled","false","id","appraisals-edit-self-response",3,"label","value","valueChange"],[1,"error-msg","text-danger","mb-0",3,"id"],["disabled","false","mandatory","false","id","user-create-status",3,"label","options","defaultValue","valueChange"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",12),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",9)(22,"app-advsearchdatepicker",13,14),e.NdJ("dateChangeValue",function(r){return s.getStartDateChange(r)}),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",9)(26,"app-advsearchdatepicker",15,16),e.NdJ("dateChangeValue",function(r){return s.getEndDateChange(r)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",9),e._UZ(30,"app-input",12),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",9),e._UZ(33,"app-input",12),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"div",17)(36,"app-button",18),e.NdJ("buttonOnClick",function(){return s.editPayrollSubmit()}),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"app-button",19),e.NdJ("buttonOnClick",function(){return s.cancel()}),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",20),e._uU(41),e.ALo(42,"translate"),e.qZA()()()()(),e.TgZ(43,"div",3)(44,"div",4)(45,"div",21)(46,"p-accordion",22)(47,"p-accordionTab",23)(48,"p-header",24)(49,"span"),e._uU(50),e.ALo(51,"translate"),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"p-table",25),e.YNc(54,Se,1,1,"ng-template",26),e.YNc(55,ve,2,1,"ng-template",27),e.YNc(56,Je,2,1,"ng-template",28),e.YNc(57,Fe,4,2,"ng-template",29),e.qZA()(),e.TgZ(58,"p-accordionTab",23)(59,"p-header",24)(60,"span"),e._uU(61),e.ALo(62,"translate"),e.qZA()(),e.TgZ(63,"p-table",25),e.YNc(64,We,1,1,"ng-template",26),e.YNc(65,Be,2,1,"ng-template",27),e.YNc(66,Ke,2,1,"ng-template",28),e.YNc(67,Ge,4,2,"ng-template",29),e.qZA()(),e.TgZ(68,"p-accordionTab",23)(69,"p-header",24)(70,"span"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"app-button",30),e.NdJ("buttonOnClick",function(r){return s.onClick(r)})("buttonOnClick",function(){return s.payRollAction()}),e.ALo(74,"translate"),e.qZA()(),e.TgZ(75,"p-table",25),e.YNc(76,$e,1,1,"ng-template",26),e.YNc(77,Xe,2,1,"ng-template",27),e.YNc(78,tt,2,1,"ng-template",28),e.YNc(79,rt,2,1,"ng-template",28),e.YNc(80,nt,4,2,"ng-template",29),e.qZA()(),e._UZ(81,"app-attachment",31)(82,"app-recordhistory",32),e.qZA()()()()()()()),2&a&&(e.xp6(6),e.Q6J("pageName",s.dataJsonObj.pageName)("pageTitle",s.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,62,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==s.payrollData||null==s.payrollData.enterprise?null:s.payrollData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,64,"COMMON_FIELDS.BUSINESS_ENTITY")),e.s9C("value",s.lookupLanguageTranslations(null==s.payrollData||null==s.payrollData.business_entity?null:s.payrollData.business_entity.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(17,66,"WORK_PAYROLL.WORK_PAYROLL_NAME")),e.s9C("value",null==s.payrollData?null:s.payrollData.payroll_name),e.xp6(3),e.s9C("label",e.lcZ(20,68,"COMMON_FIELDS.BASIS")),e.s9C("value",s.lookupLanguageTranslations(null==s.payrollData||null==s.payrollData.basis?null:s.payrollData.basis.lookup_id)),e.xp6(3),e.s9C("placeholder",e.lcZ(24,70,"COMMON_FIELDS.START_DATE")),e.s9C("defaultDate",s.startDateValue),e.xp6(4),e.s9C("placeholder",e.lcZ(28,72,"COMMON_FIELDS.END_DATE")),e.s9C("defaultDate",s.endDateValue),e.xp6(4),e.s9C("label",e.lcZ(31,74,"COMMON_FIELDS.STATUS")),e.s9C("value",s.statusValue),e.xp6(3),e.s9C("label",e.lcZ(34,76,"COMMON_FIELDS.NOTES")),e.s9C("value",s.statusComment),e.xp6(3),e.s9C("label",e.lcZ(37,78,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(39,80,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(42,82,s.error)," "),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(51,84,"COMMON_PAGE_TITLES.WORK_PAYROLL")," ",e.lcZ(52,86,"COMMON_FIELDS.DETAILS"),""),e.xp6(3),e.Q6J("columns",s.header)("value",s.data)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(62,88,"COMMON_BLOCK_TITLES.WORK_PAYROLL_ACTION_HISTORY")),e.xp6(2),e.Q6J("columns",s.header1)("value",s.data1)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(72,90,"COMMON_BLOCK_TITLES.WORK_PAYROLL_ACTION")),e.xp6(2),e.s9C("label",e.lcZ(74,92,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.Q6J("columns",s.header2)("value",s.data2)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(6),e.Q6J("header",s.attachmentColumnHeaders)("data",s.attachmentsData)("totalRecords",s.totalRecords)("objectType",s.object_type)("objectId",s.recordId)("actionType",s.actionType)("spinner",s.spinner),e.xp6(1),e.Q6J("createdBy",s.createdBy)("lastUpdatedBy",s.lastUpdatedBy)("showrecordhistory",s.dataJsonObj.showrecordhistory)("creationDate",null==s.payrollData?null:s.payrollData.createdAt)("lastUpdatedDate",null==s.payrollData?null:s.payrollData.updatedAt))},dependencies:[T.sg,T.O5,P.r,k.a,W.k,j.W,F.Y,Y.H,N.q,b.UQ,b.US,L.h4,L.jx,C.iA,C.Ei,g.X$]})}return o})();var w=p(11210);const ct=[{path:"",data:{title:"Work Payrolls"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[w.P],component:z,data:{object_type:l.hf.WORK_PAYROLL,responsibilityParam:l.bP.MENUS+"."+l.w1.EMPLOYEE_TRANSACTIONS+"."+l.bP.SUBMENUS+"."+l.w1.WORK_PAYROLLS+"."+l.In.ENABLED,pageName:l.hf.WORK_PAYROLL}},{path:"create",canActivate:[w.P],component:Te,data:{object_type:l.hf.WORK_PAYROLL,responsibilityParam:l.bP.MENUS+"."+l.w1.EMPLOYEE_TRANSACTIONS+"."+l.bP.SUBMENUS+"."+l.w1.WORK_PAYROLLS+"."+l.In.CREATE,pageName:l.hf.WORK_PAYROLL,pageSetting:l.AM.ACTIONS,settingField:l.In.CREATE}},{path:":id/view",canActivate:[w.P],component:V,data:{object_type:l.hf.WORK_PAYROLL,responsibilityParam:l.bP.MENUS+"."+l.w1.EMPLOYEE_TRANSACTIONS+"."+l.bP.SUBMENUS+"."+l.w1.WORK_PAYROLLS+"."+l.In.VIEW,pageName:l.hf.WORK_PAYROLL,pageSetting:l.AM.ACTIONS,settingField:l.In.VIEW}},{path:":id/edit",canActivate:[w.P],component:pt,data:{object_type:l.hf.WORK_PAYROLL,responsibilityParam:l.bP.MENUS+"."+l.w1.EMPLOYEE_TRANSACTIONS+"."+l.bP.SUBMENUS+"."+l.w1.WORK_PAYROLLS+"."+l.In.EDIT,pageName:l.hf.WORK_PAYROLL,pageSetting:l.AM.ACTIONS,settingField:l.In.VIEW}},{path:":id/workpayroll-approval/:title",component:V,data:{pageName:l.hf.WORK_PAYROLL,pageSetting:l.AM.ACTIONS,settingField:l.In.VIEW}}]}];let dt=(()=>{class o{static \u0275fac=function(a){return new(a||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[m.Bz.forChild(ct),m.Bz]})}return o})(),ut=(()=>{class o{static \u0275fac=function(a){return new(a||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[T.ez,dt,M.Pc,B.Q,g.aw,b.fx,Z.UX,Z.u5,C.U$,q.JF]})}return o})()}}]);