"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1186],{51186:(Se,U,d)=>{d.r(U),d.d(U,{RolerightsbypageModule:()=>Je});var S=d(32174),h=d(24006),T=d(36895),C=d(11210),r=d(32236),g=d(15861),E=d(71568),R=d(47561),A=d(42786),G=d(75875),x=d(90313),e=d(94650);let y=(()=>{class o{authService;constructor(t){this.authService=t}getAll(t,s,a,i,n,l,c,b,p){var _=this;return(0,g.Z)(function*(){const O=l?"&condition="+l:"",J=b||"",Z=x.L.isEmpty(p)?"":"&advSearchString="+JSON.stringify(p);return yield _.authService.getApiCallAsync("api/v1/rolerightsbypage?enterprise.enterprise_id="+n+"&skip="+t+"&limit="+s+"&sort="+a+"&type=list&search="+i+O+c+J+Z,!0)})()}get(t){var s=this;return(0,g.Z)(function*(){return yield s.authService.getApiCallAsync("api/v1/rolerightsbypage/"+t)})()}update(t,s){return new Promise((a,i)=>{this.authService.putApiCall("api/v1/rolerightsbypage/"+t,s).subscribe(n=>{a(n)},n=>{i(n)})})}create(t){return new Promise((s,a)=>{this.authService.postApiCall("api/v1/rolerightsbypage",t).subscribe(i=>{s(i)},i=>{a(i)})})}getUserRolesFromRoleRights(t){return new Promise((s,a)=>{this.authService.getApiCall("api/v1/rolerightsbypage?type=drop&enterprise.enterprise_id="+t).subscribe(i=>{s(i)},i=>{a(i)})})}getDynamicFieldsList(t){return(0,g.Z)(function*(){const s=JSON.parse(JSON.stringify(t)),a=[],i=Object.keys(s),n=["actions","display_setttings","sync_settings","cache_settings","module_settings","tab_display_setttings"];for(let l of i)for(let c of s[l]){const b=[];for(let p of n){const _=c[p]?Object.keys(c[p]):[],O=[];for(let J of _)if(c[p]&&c[p][J]){const Z={field:J,is_enabled:c[p][J],value:"",displayname:J.split("_").join(" ")};O.push(Z)}if(O.length>0){const J={setting_name:p,is_enabled:!0,setting_fields:O,value:"",displayname:p.split("_").join(" ")};b.push(J)}}b.length>0&&a.push({page:c.module,displayname:c.page_display_name,value:"",is_enabled:!0,page_settings:b,page_name:c.module.page_name})}return a.sort((l,c)=>l.displayname>c.displayname?1:-1),a})()}getSelectedRolesRightsDataJsonObj(t){return(0,g.Z)(function*(){const s={};for(let a of t){s[a.page.page_id+""]||(s[a.page.page_id+""]={}),s[a.page.page_id+""].is_enabled=a.is_enabled;for(let i of a.page_settings){s[a.page.page_id+""].pageSettingsJson||(s[a.page.page_id+""].pageSettingsJson={}),s[a.page.page_id+""].pageSettingsJson[i.setting_name]||(s[a.page.page_id+""].pageSettingsJson[i.setting_name]={}),s[a.page.page_id+""].pageSettingsJson[i.setting_name].is_enabled=i.is_enabled;for(let n of i.setting_fields)s[a.page.page_id+""].pageSettingsJson[i.setting_name].settingFieldsJson||(s[a.page.page_id+""].pageSettingsJson[i.setting_name].settingFieldsJson={}),s[a.page.page_id+""].pageSettingsJson[i.setting_name].settingFieldsJson[n.field]=n.is_enabled}}return s})()}updateSelectedRoleRightInRoleRightsArray(t,s){return(0,g.Z)(function*(){for(let a of t){const i=s[a.page.page_id+""]?s[a.page.page_id+""]:{is_enabled:!1,pageSettingsJson:{}};a.is_enabled=i.is_enabled;for(let n of a.page_settings){const l=i.pageSettingsJson[n.setting_name]?i.pageSettingsJson[n.setting_name]:{is_enabled:!1,settingFieldsJson:{}};n.is_enabled=l.is_enabled;for(let c of n.setting_fields)c.is_enabled=!!l.settingFieldsJson[c.field]}}})()}static \u0275fac=function(s){return new(s||o)(e.LFG(G.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var j=d(54463),m=d(62510),v=d(27601),f=d(10805),I=d(93144),D=d(2387),w=d(56368),L=d(93837),V=d(11735),N=d(37415);const M=function(o){return[o]};function Y(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"app-checkbox",31),e.NdJ("valueChange",function(a){const n=e.CHM(t).$implicit,l=e.oxw(5);return e.KtG(l.changeCheckBoxValue(a,"is_enabled",n))}),e.qZA()()}if(2&o){const t=u.$implicit;e.xp6(1),e.Q6J("options",e.VKq(2,M,t))("checked",null==t?null:t.is_enabled)}}function q(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",30)(2,"app-checkbox",31),e.NdJ("valueChange",function(a){const n=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.changeCheckBoxValue(a,"is_enabled",n))}),e.qZA()(),e.TgZ(3,"td")(4,"div",18),e.YNc(5,Y,2,4,"div",32),e.qZA()()()}if(2&o){const t=u.$implicit;e.xp6(2),e.Q6J("options",e.VKq(3,M,t))("checked",null==t?null:t.is_enabled),e.xp6(3),e.Q6J("ngForOf",t.setting_fields)}}function H(o,u){if(1&o&&e.YNc(0,q,6,5,"tr",29),2&o){const t=e.oxw().$implicit;e.Q6J("ngForOf",t.page_settings)}}function Q(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"p-accordionTab",25)(1,"p-header")(2,"app-checkbox",26),e.NdJ("click",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onMouseClick(a))})("valueChange",function(a){const n=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.changeCheckBoxValue(a,"is_enabled",n))}),e.qZA()(),e.TgZ(3,"p-table",27),e.YNc(4,H,1,1,"ng-template",28),e.qZA()()}if(2&o){const t=u.$implicit,s=e.oxw(2);e.MGl("id","",t.page_id,"_tab_id"),e.Q6J("selected",!1),e.xp6(2),e.Q6J("options",e.VKq(8,M,t))("checked",null==t?null:t.is_enabled),e.xp6(1),e.Q6J("value",s.dataJsonObj.data)("rows",1)("responsive",!0)("autoLayout",!1)}}function K(o,u){if(1&o&&(e.TgZ(0,"span"),e.YNc(1,Q,5,10,"p-accordionTab",24),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.dataJsonObj.inputObj.role_rights)}}let $=(()=>{class o extends R.O{formBuilder;loggerService;rolerightsbypageService;translateService;commonService;route;router;uiUtils;dataJsonObj={};errorObj={};pageTitle;constructor(t,s,a,i,n,l,c,b){super(l,n),this.formBuilder=t,this.loggerService=s,this.rolerightsbypageService=a,this.translateService=i,this.commonService=n,this.route=l,this.router=c,this.uiUtils=b}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.ROLE_RIGHTS_BY_PAGE,this.commonService.trackView(r.sn.ROLERIGHTS_EDIT),this.route.params.subscribe(s=>{this.dataJsonObj.recordId=s.id}),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.RECORD_HISTORY),this.dataJsonObj.selectedEnterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE),this.dataJsonObj.data=[{}],this.dataJsonObj.isSubmitButtonDisabled=!1,this.dataJsonObj.inputObj={is_enabled:!0},this.getDynamicJson([{folderName:"lookup_codes",jsonType:"view",storingFieldName:"lookupCodesViewJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"},{folderName:"module_manager",jsonType:"view",storingFieldName:"moduleManagerViewJson"},{folderName:r.sb.USER_TYPES,jsonType:"view",storingFieldName:"userTypesViewJson"}]),this.dataJsonObj.enabledOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dataJsonObj.selectedEnterpriseObj=this.commonService.getSelcetedEnterpriseObj(),this.dataJsonObj.inputObj.enterprise=this.dataJsonObj.selectedEnterpriseObj,this.dataJsonObj.firstFormGroup=this.formBuilder.group({firstCtrl:["",h.kI.required]})}getDynamicJson(t){var s=this;return(0,g.Z)(function*(){for(let a of t)try{s.dataJsonObj[a.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.selectedEnterpriseId,a.folderName,a.jsonType)}catch{s.dataJsonObj[a.storingFieldName]={}}s.getRecordById(s.dataJsonObj.recordId)})()}getDynamicFieldsList(){var t=this;return(0,g.Z)(function*(){try{t.dataJsonObj.inputObj.role_rights=yield t.rolerightsbypageService.getDynamicFieldsList(t.dataJsonObj.moduleManagerListJson),t.applyExistingRoleRightData(t.dataJsonObj.recordData.role_rights)}catch(s){t.loggerService.setLoggerError(t.constructor.name,"getDynamicFieldsList",s)}})()}getRecordById(t){var s=this;return(0,g.Z)(function*(){try{const a=yield s.rolerightsbypageService.get(t);s.dataJsonObj.recordData=a,s.dataJsonObj.inputObj=JSON.parse(JSON.stringify(a)),s.dataJsonObj.inputObj.user_type_display_name=s.dataJsonObj.inputObj.user_type_id&&s.dataJsonObj.userTypesViewJson&&s.dataJsonObj.userTypesViewJson[s.dataJsonObj.inputObj.user_type_id+""]?s.dataJsonObj.userTypesViewJson[s.dataJsonObj.inputObj.user_type_id+""].user_type_display_name:"",s.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.ROLE_RIGHTS_BY_PAGE",value:s.dataJsonObj?.inputObj?.user_type_display_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],s.getDynamicFieldsList()}catch(a){s.loggerService.setLoggerError(s.constructor.name,"getRecordById",a)}})()}applyExistingRoleRightData(t){var s=this;return(0,g.Z)(function*(){const a=yield s.rolerightsbypageService.getSelectedRolesRightsDataJsonObj(t);a&&(yield s.rolerightsbypageService.updateSelectedRoleRightInRoleRightsArray(s.dataJsonObj.inputObj.role_rights,a))})()}changeCheckBoxValue(t,s,a){try{a[s]=t.value}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBoxValue",i)}}onMouseClick(t){t.stopPropagation()}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}updateRecord(){var t=this;return(0,g.Z)(function*(){try{t.dataJsonObj.isSubmitButtonDisabled=!0;const s={enterprise:t.dataJsonObj.inputObj.enterprise,user_type_id:t.dataJsonObj.inputObj.user_type_id,role_rights:t.dataJsonObj.inputObj.role_rights,is_enabled:!!t.dataJsonObj.inputObj.is_enabled&&t.dataJsonObj.inputObj.is_enabled};yield t.rolerightsbypageService.update(t.dataJsonObj.recordId,s),t.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),t.commonService.redirectToPreviousUrl()}catch(s){t.commonErrorCodes(JSON.parse(s)),t.loggerService.setLoggerError(t.constructor.name,"updateRecord",s)}})()}commonErrorCodes(t){try{const s=JSON.parse(t[r.BU.STATUS]);409===s&&(this.errorObj.error="COMMON_STATUS_CODES."+s)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"commonErrorCodes",s)}}static \u0275fac=function(s){return new(s||o)(e.Y36(h.qu),e.Y36(A.m),e.Y36(y),e.Y36(j.sK),e.Y36(E.v),e.Y36(m.gz),e.Y36(m.F0),e.Y36(v.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-rolerightsbypage-edit"]],features:[e._Bn([y]),e.qOj],decls:32,vars:31,consts:[[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[3,"formGroup"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","rolerights-view-enterprise",3,"label","value"],["disabled","true","id","rolerights-view-usertype",3,"label","value"],[1,"col-md-2","d-flex","align-items-center"],["label","","id","rolerights-view-enabled","disabled","true","mandatory","false",3,"options","checked"],[1,"col-lg-12","col-md-12","text-end","mt-2","mb-2","pdl-0"],["className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"row"],[1,"card"],[1,"card-content"],[3,"multiple"],[4,"ngIf"],[3,"createdBy","showrecordhistory","lastUpdatedBy","creationDate","lastUpdatedDate"],[3,"selected","id",4,"ngFor","ngForOf"],[3,"selected","id"],["label","","psClassName","accordion-checkbox",1,"rolerights-checkbox",3,"options","checked","click","valueChange"],[1,"ptable","rolerights",3,"value","rows","responsive","autoLayout"],["pTemplate","body"],[4,"ngFor","ngForOf"],["width","160px"],["label","",3,"options","checked","valueChange"],["class","col-md-2 d-flex align-items-center",4,"ngFor","ngForOf"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-pageheader",5),e.qZA(),e.TgZ(6,"div",6)(7,"form",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",12),e._UZ(16,"app-checkbox",13),e.qZA(),e.TgZ(17,"div",14)(18,"app-button",15),e.NdJ("buttonOnClick",function(){return a.updateRecord()}),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"app-button",16),e.NdJ("buttonOnClick",function(){return a.cancel()}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",17),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"div",18)(26,"div",2)(27,"div",19)(28,"div",20)(29,"p-accordion",21),e.YNc(30,K,2,1,"span",22),e._UZ(31,"app-recordhistory",23),e.qZA()()()()()()()()()()),2&s&&(e.xp6(5),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("formGroup",a.dataJsonObj.firstFormGroup),e.xp6(3),e.s9C("label",e.lcZ(11,21,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.dataJsonObj.inputObj||null==a.dataJsonObj.inputObj.enterprise?null:a.dataJsonObj.inputObj.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,23,"COMMON_PAGE_TITLES.USER_ROLE")),e.s9C("value",null==a.dataJsonObj.inputObj?null:a.dataJsonObj.inputObj.user_type_display_name),e.xp6(3),e.Q6J("options",a.dataJsonObj.enabledOptions)("checked",null==a.dataJsonObj.inputObj?null:a.dataJsonObj.inputObj.is_enabled),e.xp6(2),e.s9C("label",e.lcZ(19,25,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(21,27,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(24,29,a.errorObj.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngIf",a.dataJsonObj.inputObj.role_rights),e.xp6(1),e.Q6J("createdBy",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.created_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("lastUpdatedBy",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.updated_by)("creationDate",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.createdAt)("lastUpdatedDate",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.updatedAt))},dependencies:[S.UQ,S.US,f.h4,f.jx,T.sg,T.O5,h._Y,h.JL,h.sg,I.iA,D.r,w.a,L.b,V.W,N.q,j.X$]})}return o})();var k=d(42863),z=d(28168),P=d(30578),X=d(70057),W=d(88425);const ee=["datatableComponent"];let te=(()=>{class o extends R.O{actionSheetController;columnsHeaders;loggerService;rolerightsbypageService;router;translateService;commonService;listingVariables;route;uiUtils;datatableComponent;searchValueChange=new e.vpe;dataJsonObj={};errorObj={};constructor(t,s,a,i,n,l,c,b,p,_){super(p,c),this.actionSheetController=t,this.columnsHeaders=s,this.loggerService=a,this.rolerightsbypageService=i,this.router=n,this.translateService=l,this.commonService=c,this.listingVariables=b,this.route=p,this.uiUtils=_,this.route.queryParams.subscribe(O=>{this.dataJsonObj.queryParamsObj={defaultView:O.default_view,selectedMenuId:O.selectedMenuId,selectedSubMenuId:O.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=r.hf.ROLE_RIGHTS_BY_PAGE,this.dataJsonObj.noDuplicates=void 0,this.dataJsonObj.advancedSearchObj={},this.commonService.trackView(r.sn.ROLERIGHTS_LIST),this.dataJsonObj.selectedEnterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE),this.getDynamicJson([{folderName:"lookup_codes",jsonType:"view",storingFieldName:"lookupCodesViewJson"},{folderName:r.sb.USER_TYPES,jsonType:"view",storingFieldName:"userTypesViewJson"}]),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.ROLE_RIGHTS_BY_PAGE",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.mobilePageTitle=this.translateService.instant("COMMON_PAGE_TITLES.ROLE_RIGHTS"),this.dataJsonObj.header=this.columnsHeaders.getRoleRightsColumnHeaders(),this.dataJsonObj.searchString="",this.dataJsonObj.actionBoolean=!(!this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.ACTIVATE)||!this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.INACTIVATE)),this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:r.hf,pageSettingEnum:r.AM,pageSettingFieldsEnum:r.In},this.dataJsonObj.actions={EDIT:this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.EDIT),CHECKBOX:this.dataJsonObj.actionBoolean,VIEW:this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.VIEW)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:r.gL.URL,redirectURL:["..","create"],isRelativeRoute:!0,isClearCache:!1,queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.FILTERS)}ionViewWillEnter(){this.dataJsonObj.actions={EDIT:this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.EDIT),CHECKBOX:this.dataJsonObj.actionBoolean,VIEW:this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.VIEW)}}getDynamicJson(t){var s=this;return(0,g.Z)(function*(){for(let a of t)try{s.dataJsonObj[a.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.selectedEnterpriseId,a.folderName,a.jsonType)}catch{s.dataJsonObj[a.storingFieldName]={}}s.getAllRecords()})()}getSearchResult(t){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.dataJsonObj.searchString=t,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(t)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",s)}}searchClose(){try{this.dataJsonObj.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"searchClose",t)}}getAllRecords(){var t=this;return(0,g.Z)(function*(){try{const s=t.commonService.getMobileViewCondition(t.dataJsonObj.selectedDisplayView),a=t.dataJsonObj.selectedFilter?"&filtertype="+t.dataJsonObj.selectedFilter:"";t.showSpinner();const i=yield t.rolerightsbypageService.getAll(t.listingVariables.pageNumbers,t.listingVariables.rowsPerPage,t.listingVariables.sortOrderColumn,t.dataJsonObj.searchString,t.dataJsonObj.selectedEnterpriseId,t.dataJsonObj.statusObj,s,a,t.dataJsonObj.advancedSearchObj.inputAdvSearchObj);if(t.hideSpinner(),i.rows.length>0){t.dataJsonObj.mobileDataList||(t.dataJsonObj.mobileDataList=[]);for(let n=0;n<i.rows.length;n++)i.rows[n].firstLineDisplay=i.rows[n].role_display_name,i.rows[n].secondLineDisplay=!0===i.rows[n].is_enabled?"Status : Active":"Status : Inactive",i.rows[n].updated_by&&(i.rows[n].thirdLineDisplay="Updated By: "+i.rows[n].updated_by.l_name+" "+i.rows[n].updated_by.f_name,i.rows[n].updated_by=i.rows[n].updated_by.l_name+" "+i.rows[n].updated_by.f_name),i.rows[n].enterprise.short_name='<a class="enable" id="enterprise.short_name'+i.rows[n]._id+'" href="enterprises/enterprises/'+i.rows[n].enterprise.enterprise_id+'/view">'+i.rows[n].enterprise.short_name+"</a>",i.rows[n].is_enabled=!0===i.rows[n].is_enabled?"Yes":"No",i.rows[n].user_type_display_name=t.dataJsonObj.userTypesViewJson&&t.dataJsonObj.userTypesViewJson[i.rows[n].user_type_id+""]?t.dataJsonObj.userTypesViewJson[i.rows[n].user_type_id+""].user_type_display_name:"--",t.dataJsonObj.mobileDataList=t.dataJsonObj.mobileDataList.filter(l=>l._id!==i.rows[n]._id),t.dataJsonObj.mobileDataList.push(i.rows[n]);i.totalCount&&(t.listingVariables.totalRecords=i.totalCount),1===t.listingVariables.pageNumbers&&(t.listingVariables.totalpages=i.pages),t.dataJsonObj.isLoadMoreClicked?(t.dataJsonObj.isLoadMoreClicked=!1,t.dataJsonObj.dataList=t.dataJsonObj.dataList.concat(i.rows)):t.dataJsonObj.dataList=i.rows}else t.dataJsonObj.dataList=[],t.dataJsonObj.mobileDataList=[]}catch(s){t.hideSpinner(),t.loggerService.setLoggerError(t.constructor.name,"getAllRecords",s)}})()}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.dataJsonObj.mobileDataList=this.dataJsonObj.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}onActionClicked(t){var s=this;return(0,g.Z)(function*(){try{const a=t.data._id;if(t.action===r.A0.EDIT)s.commonService.redirectToUrl(["..",a,"edit"],!1,!0,"",s.route);else if(t.action===r.A0.VIEW)s.commonService.redirectToUrl(["..",a,"view"],!1,!0,s.dataJsonObj.queryParamsObj?s.dataJsonObj.queryParamsObj:"",s.route);else if(t.action===r.A0.CHECKBOX){s.dataJsonObj.actionStatus=t.data.isEnabled;const i={is_enabled:s.dataJsonObj.actionStatus};yield s.rolerightsbypageService.update(a,i),s.uiUtils.displaytoastMessage(!0===s.dataJsonObj.actionStatus?"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE":"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),s.getAllRecords()}}catch(a){s.loggerService.setLoggerError(s.constructor.name,"onActionClicked",a)}})()}toggle(){this.dataJsonObj.show=!this.dataJsonObj.show}statusData(t){try{this.dataJsonObj.statusObj=t.value,this.getAllRecords()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"statusData",s)}}mobileEventAction(t){this.presentActionSheet(t)}presentActionSheet(t){var s=this;return(0,g.Z)(function*(){try{const a=t._id,i=[];s.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.EDIT)&&i.push({text:s.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{s.commonService.redirectToUrl(["..",a,"edit"],!1,!0,"",s.route)}}),i.push({text:s.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{s.commonService.redirectToUrl(["..",a,"view"],!0,!0,s.dataJsonObj.queryParamsObj?s.dataJsonObj.queryParamsObj:"",s.route)}}),i.push(!0===t.isEnabled?{text:s.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{s.editRecord(t)}}:{text:s.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{s.editRecord(t)}}),yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:i})).present()}catch(a){s.loggerService.setLoggerError(s.constructor.name,"presentActionSheet",a)}})()}editRecord(t){var s=this;return(0,g.Z)(function*(){s.dataJsonObj.actionStatus=!t.isEnabled;const a=s.dataJsonObj.actionStatus?"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE":"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE",i={is_enabled:s.dataJsonObj.actionStatus};yield s.rolerightsbypageService.update(t._id,i),s.uiUtils.displaytoastMessage(a),s.dataJsonObj.mobileDataList=[],s.getAllRecords()})()}Create(){try{this.commonService.redirectToUrl(["..","create"],!1,!0,"",this.route)}catch(t){this.loggerService.setLoggerError(this.constructor.name,"Create",t)}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}selectedFilterType(t){t||(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(s){return new(s||o)(e.Y36(X.BX),e.Y36(k.Y),e.Y36(A.m),e.Y36(y),e.Y36(m.F0),e.Y36(j.sK),e.Y36(E.v),e.Y36(P.v),e.Y36(m.gz),e.Y36(v.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-rolerightsbypage-list"]],viewQuery:function(s,a){if(1&s&&e.Gf(ee,5),2&s){let i;e.iGM(i=e.CRH())&&(a.datatableComponent=i.first)}},outputs:{searchValueChange:"searchValueChange"},features:[e._Bn([P.v,k.Y,y,v.s]),e.qOj],decls:8,vars:31,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],[1,"",3,"header","listingVariables","totalRecords","actions","paginator","totalPages","mobileListData","data","expand","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","showSpinner","pageName","selectedMenuId","selectedSubMenuId","redirectionEvent","actionClicked","changeStats","loadPageData"],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(n){return a.onHeaderItemClick(n)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5),e.NdJ("redirectionEvent",function(n){return a.mobileEventAction(n)})("actionClicked",function(n){return a.onActionClicked(n)})("changeStats",function(n){return a.statusData(n)})("loadPageData",function(n){return a.loadPageData(n)}),e.qZA(),e.TgZ(6,"div",6)(7,"app-page-actions",7),e.NdJ("selectedAction",function(n){return a.onPageLevelActionClicked(n)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.dataJsonObj.header)("listingVariables",a.listingVariables)("totalRecords",a.listingVariables.totalRecords)("actions",a.dataJsonObj.actions)("listingVariables",a.listingVariables)("paginator",!0)("totalPages",a.listingVariables.totalpages)("mobileListData",a.dataJsonObj.mobileDataList)("data",a.dataJsonObj.dataList)("expand",!1)("statsShow",a.dataJsonObj.show)("showRights",a.roleRightsValidationByPage(a.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.ROLE_RIGHTS_BY_PAGE,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",a.dataJsonObj.searchString)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("showSpinner",a.dataJsonObj.showSpinner)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(2),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[z.n,N.q,W.y]})}return o})();var ae=d(42919);const se=["userTypeName"],B=function(o){return[o]};function ie(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"app-checkbox",32),e.NdJ("valueChange",function(a){const n=e.CHM(t).$implicit,l=e.oxw(5);return e.KtG(l.changeCheckBoxValue(a,"is_enabled",n))}),e.qZA()()}if(2&o){const t=u.$implicit;e.xp6(1),e.Q6J("options",e.VKq(2,B,t))("checked",null==t?null:t.is_enabled)}}function ne(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",31)(2,"app-checkbox",32),e.NdJ("valueChange",function(a){const n=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.changeCheckBoxValue(a,"is_enabled",n))}),e.qZA()(),e.TgZ(3,"td")(4,"div",20),e.YNc(5,ie,2,4,"div",33),e.qZA()()()}if(2&o){const t=u.$implicit;e.xp6(2),e.Q6J("options",e.VKq(3,B,t))("checked",null==t?null:t.is_enabled),e.xp6(3),e.Q6J("ngForOf",t.setting_fields)}}function oe(o,u){if(1&o&&e.YNc(0,ne,6,5,"tr",30),2&o){const t=e.oxw().$implicit;e.Q6J("ngForOf",t.page_settings)}}function re(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"p-accordionTab",25)(1,"p-header",26)(2,"app-checkbox",27),e.NdJ("click",function(a){e.CHM(t);const i=e.oxw(2);return e.KtG(i.onMouseClick(a))})("valueChange",function(a){const n=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.changeCheckBoxValue(a,"is_enabled",n))}),e.qZA()(),e.TgZ(3,"p-table",28),e.YNc(4,oe,1,1,"ng-template",29),e.qZA()()}if(2&o){const t=u.$implicit,s=e.oxw(2);e.MGl("id","",t.page_id,"_tab_id"),e.Q6J("selected",!1),e.xp6(2),e.Q6J("options",e.VKq(8,B,t))("checked",null==t?null:t.is_enabled),e.xp6(1),e.Q6J("value",s.dataJsonObj.data)("rows",1)("responsive",!0)("autoLayout",!1)}}function le(o,u){if(1&o&&(e.TgZ(0,"div",2)(1,"div",22)(2,"div",23)(3,"p-accordion"),e.YNc(4,re,5,10,"p-accordionTab",24),e.qZA()()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.dataJsonObj.inputObj.role_rights)}}let de=(()=>{class o extends R.O{formBuilder;loggerService;rolerightsbypageService;translateService;commonService;route;router;uiUtils;userTypeName;dataJsonObj={};errorObj={};constructor(t,s,a,i,n,l,c,b){super(l,n),this.formBuilder=t,this.loggerService=s,this.rolerightsbypageService=a,this.translateService=i,this.commonService=n,this.route=l,this.router=c,this.uiUtils=b}ngOnInit(){this.dataJsonObj.headerAction={BACK:!0},this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.ROLE_RIGHTS_BY_PAGE,this.commonService.trackView(r.sn.ROLERIGHTS_CREATE),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.ROLE_RIGHTS_BY_PAGE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.dataJsonObj.selectedEnterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE),this.dataJsonObj.data=[{}],this.dataJsonObj.isSubmitButtonDisabled=!1,this.dataJsonObj.inputObj={is_enabled:!0},this.getDynamicJson([{folderName:"lookup_codes",jsonType:"list",storingFieldName:"lookupCodesListJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"},{folderName:r.sb.USER_TYPES,jsonType:"list",storingFieldName:"userTypesListJson"},{folderName:r.sb.USER_TYPES,jsonType:"view",storingFieldName:"userTypesViewJson"}]),this.dataJsonObj.inputObj.role_rights=[],this.dataJsonObj.existingUserTypeIds=[],this.dataJsonObj.existingUserTypesList=[],this.dataJsonObj.existingUserTypesByRole=[],this.dataJsonObj.availableUserTypesByRole=[],this.dataJsonObj.userTypepOptions=[],this.dataJsonObj.enabledOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dataJsonObj.selectedEnterpriseObj=this.commonService.getSelcetedEnterpriseObj(),this.dataJsonObj.inputObj.enterprise=this.dataJsonObj.selectedEnterpriseObj,this.dataJsonObj.firstFormGroup=this.formBuilder.group({firstCtrl:["",h.kI.required]})}getDynamicJson(t){var s=this;return(0,g.Z)(function*(){for(let a of t)try{s.dataJsonObj[a.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.selectedEnterpriseId,a.folderName,a.jsonType)}catch{s.dataJsonObj[a.storingFieldName]={}}s.getUserTypesByField()})()}getUserTypesByField(){var t=this;return(0,g.Z)(function*(){try{const s=yield t.rolerightsbypageService.getUserRolesFromRoleRights(t.dataJsonObj.selectedEnterpriseId);t.dataJsonObj.existingUserTypeIds=[],t.dataJsonObj.existingUserTypesList=[];for(let a of s)a.user_type_id&&(t.dataJsonObj.existingUserTypeIds.push(a.user_type_id),t.dataJsonObj.existingUserTypesList.push({ID:a.ID,NAME:t.dataJsonObj.userTypesViewJson&&t.dataJsonObj.userTypesViewJson[a.user_type_id+""]?t.dataJsonObj.userTypesViewJson[a.user_type_id+""].user_type_display_name:"",user_type_id:a.user_type_id}));t.dataJsonObj.userTypepOptions=t.dataJsonObj.userTypesListJson,t.dataJsonObj.availableUserTypes=t.dataJsonObj.userTypepOptions.filter(a=>-1===t.dataJsonObj.existingUserTypeIds.indexOf(a.ID)),yield t.getDynamicFieldsList()}catch(s){t.loggerService.setLoggerError(t.constructor.name,"getUserTypesByField",s)}})()}getDynamicFieldsList(){var t=this;return(0,g.Z)(function*(){try{t.dataJsonObj.inputObj.role_rights=yield t.rolerightsbypageService.getDynamicFieldsList(t.dataJsonObj.moduleManagerListJson)}catch(s){t.loggerService.setLoggerError(t.constructor.name,"getDynamicFieldsList",s)}})()}goBack(t){t.previous()}goForward(t){t.next()}onMouseClick(t){t.stopPropagation()}onAccordianClick(t){t.stopPropagation()}changeCheckBoxValue(t,s,a){try{a[s]=t.value}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBoxValue",i)}}changeInputFieldValue(t,s,a){const i=a?a.split("."):[];let n=this.dataJsonObj.inputObj;for(;i.length>0;){const l=i.shift();n[l]||(n[l]={}),n=n[l]}n[s]=t.value}changeSearchDropDownFieldValue(t,s,a,i,n){try{if(t){this.errorObj.error="";const l=t,c={};for(let p of i)c[p]=l[p],s===p&&!c[p]&&(c[p]=l.ID);let b=this.dataJsonObj.inputObj;if(a){const p=a.split("."),_=p.pop();for(;p.length>0;){const O=p.shift();b[O]||(b[O]={}),b=b[O]}b[_]=c}else{const p=Object.keys(c);for(let _ of p)b[_]=c[_]}n&&this.dependencyFunction(n)}this.errorObj.error=""}catch(l){this.loggerService.setLoggerError(this.constructor.name,"changeApplication",l)}}dependencyFunction(t){"getExistingRoleInfo"===t&&this.getExistingRoleInfo(this.dataJsonObj.inputObj.originalUserType.ID)}getUserTypesData(t,s){var a=this;return(0,g.Z)(function*(){if(s){if(a.dataJsonObj.userTypepOptions.length>0){const i=yield a.commonService.getFilteredDynamicJSONData(a.dataJsonObj.userTypepOptions,"user_type_display_name",t);a.dataJsonObj.availableUserTypesByRole=a.dataJsonObj.existingUserTypeIds?.length>0?i.filter(n=>-1===a.dataJsonObj.existingUserTypeIds.indexOf(n.ID)):i}}else a.dataJsonObj.existingUserTypesByRole=yield a.commonService.getFilteredDynamicJSONData(a.dataJsonObj.existingUserTypesList,"NAME",t),a.getExistingRoleInfo(a.dataJsonObj.existingUserTypesByRole[0].ID)})()}getExistingRoleInfo(t){var s=this;return(0,g.Z)(function*(){try{const a=yield s.rolerightsbypageService.get(t);s.applyExistingRoleRightData(a.role_rights)}catch(a){s.loggerService.setLoggerError(s.constructor.name,"getExistingRoleInfo",a)}})()}applyExistingRoleRightData(t){var s=this;return(0,g.Z)(function*(){const a=yield s.rolerightsbypageService.getSelectedRolesRightsDataJsonObj(t);a&&(yield s.rolerightsbypageService.updateSelectedRoleRightInRoleRightsArray(s.dataJsonObj.inputObj.role_rights,a))})()}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}createRecord(){var t=this;return(0,g.Z)(function*(){try{if(t.userTypeName?.isValid()){t.dataJsonObj.isSubmitButtonDisabled=!0;const s={enterprise:t.dataJsonObj.inputObj.enterprise,user_type_id:t.dataJsonObj.inputObj.user_type_id,role_rights:t.dataJsonObj.inputObj.role_rights,is_enabled:!!t.dataJsonObj.inputObj.is_enabled&&t.dataJsonObj.inputObj.is_enabled};yield t.rolerightsbypageService.create(s),t.dataJsonObj.isSubmitButtonDisabled=!1,t.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),t.commonService.redirectToPreviousUrl()}}catch(s){t.dataJsonObj.isSubmitButtonDisabled=!1,t.commonErrorCodes(JSON.parse(s)),t.loggerService.setLoggerError(t.constructor.name,"createRecord",s)}})()}commonErrorCodes(t){try{const s=JSON.parse(t[r.BU.STATUS]);409===s&&(this.errorObj.error="COMMON_STATUS_CODES."+s)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"commonErrorCodes",s)}}pageheadeActionClick(t){"BACK"==t.value&&this.cancel()}static \u0275fac=function(s){return new(s||o)(e.Y36(h.qu),e.Y36(A.m),e.Y36(y),e.Y36(j.sK),e.Y36(E.v),e.Y36(m.gz),e.Y36(m.F0),e.Y36(v.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-rolerightsbypage-create"]],viewQuery:function(s,a){if(1&s&&e.Gf(se,5),2&s){let i;e.iGM(i=e.CRH())&&(a.userTypeName=i.first)}},features:[e._Bn([y]),e.qOj],decls:31,vars:30,consts:[[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[3,"formGroup"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","rolerights-create",3,"label","value"],["mandatory","false","id","rolerights-create-existingusertype",3,"label","options","selectedOption","searchValueChange"],["mandatory","true","id","rolerights-create-usertype",3,"label","options","selectedOption","searchValueChange"],["userTypeName",""],[1,"col-md-2","d-flex","align-items-center"],["label","","mandatory","true","id","rolerights-create-checkboxoptions",3,"options","checked","valueChange"],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-primary btn-sm",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"row"],["class","col-md-12",4,"ngIf"],[1,"card"],[1,"card-content"],[3,"selected","id",4,"ngFor","ngForOf"],[3,"selected","id"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["label","","psClassName","accordion-checkbox",1,"rolerights-checkbox",3,"options","checked","click","valueChange"],[1,"ptable","rolerights",3,"value","rows","responsive","autoLayout"],["pTemplate","body"],[4,"ngFor","ngForOf"],["width","160px"],["label","",3,"options","checked","valueChange"],["class","col-md-2 d-flex align-items-center",4,"ngFor","ngForOf"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-pageheader",5),e.qZA(),e.TgZ(6,"div",6)(7,"form",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9)(13,"app-dropdown-search",11),e.NdJ("selectedOption",function(n){return a.changeSearchDropDownFieldValue(n,"user_type_id","originalUserType",["ID","NAME","user_type_id"],"getExistingRoleInfo")})("searchValueChange",function(n){return a.getUserTypesData(n,!1)}),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",9)(16,"app-dropdown-search",12,13),e.NdJ("selectedOption",function(n){return a.changeSearchDropDownFieldValue(n,"user_type_id","",["user_type_id"],"")})("searchValueChange",function(n){return a.getUserTypesData(n,!0)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",14)(20,"app-checkbox",15),e.NdJ("valueChange",function(n){return a.changeCheckBoxValue(n,"is_enabled",a.dataJsonObj.inputObj)}),e.qZA()(),e.TgZ(21,"div",16)(22,"app-button",17),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"app-button",18),e.NdJ("buttonOnClick",function(){return a.cancel()}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",19),e._uU(27),e.ALo(28,"translate"),e.qZA()()(),e.TgZ(29,"div",20),e.YNc(30,le,5,1,"div",21),e.qZA()()()()()()),2&s&&(e.xp6(5),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("formGroup",a.dataJsonObj.firstFormGroup),e.xp6(3),e.s9C("label",e.lcZ(11,18,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.dataJsonObj.inputObj.enterprise?null:a.dataJsonObj.inputObj.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,20,"ROLE_RIGHTS.EXISTING_ROLE")),e.Q6J("options",a.dataJsonObj.existingUserTypesByRole),e.xp6(3),e.s9C("label",e.lcZ(18,22,"COMMON_PAGE_TITLES.USER_ROLE")),e.Q6J("options",a.dataJsonObj.availableUserTypesByRole),e.xp6(4),e.Q6J("options",a.dataJsonObj.enabledOptions)("checked",null==a.dataJsonObj.inputObj?null:a.dataJsonObj.inputObj.is_enabled),e.xp6(2),e.s9C("label",e.lcZ(23,24,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.dataJsonObj.isSubmitButtonDisabled),e.xp6(2),e.s9C("label",e.lcZ(25,26,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(28,28,a.errorObj.error)," "),e.xp6(3),e.Q6J("ngIf",a.dataJsonObj.inputObj.role_rights))},dependencies:[S.UQ,S.US,f.h4,f.jx,T.sg,T.O5,h._Y,h.JL,h.sg,I.iA,D.r,w.a,L.b,ae.C,N.q,j.X$]})}return o})();var ce=d(46448);const F=function(o){return[o]};function pe(o,u){if(1&o&&(e.TgZ(0,"div",13),e._UZ(1,"app-checkbox",29),e.qZA()),2&o){const t=u.$implicit;e.xp6(1),e.Q6J("options",e.VKq(2,F,t))("checked",null==t?null:t.is_enabled)}}function ge(o,u){if(1&o&&(e.TgZ(0,"tr")(1,"td",28),e._UZ(2,"app-checkbox",29),e.qZA(),e.TgZ(3,"td")(4,"div",17),e.YNc(5,pe,2,4,"div",30),e.qZA()()()),2&o){const t=u.$implicit;e.xp6(2),e.Q6J("options",e.VKq(3,F,t))("checked",null==t?null:t.is_enabled),e.xp6(3),e.Q6J("ngForOf",t.setting_fields)}}function ue(o,u){if(1&o&&e.YNc(0,ge,6,5,"tr",27),2&o){const t=e.oxw().$implicit;e.Q6J("ngForOf",t.page_settings)}}function be(o,u){if(1&o&&(e.TgZ(0,"p-accordionTab",23)(1,"p-header"),e._UZ(2,"app-checkbox",24),e.qZA(),e.TgZ(3,"p-table",25),e.YNc(4,ue,1,1,"ng-template",26),e.qZA()()),2&o){const t=u.$implicit,s=e.oxw(2);e.MGl("id","",t.page_id,"_tab_id"),e.Q6J("selected",!1),e.xp6(2),e.Q6J("options",e.VKq(8,F,t))("checked",null==t?null:t.is_enabled),e.xp6(1),e.Q6J("value",s.dataJsonObj.data)("rows",1)("responsive",!0)("autoLayout",!1)}}function he(o,u){if(1&o&&(e.TgZ(0,"span"),e.YNc(1,be,5,10,"p-accordionTab",22),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.dataJsonObj.dynamicRoleRights)}}const Oe=[{path:"",data:{title:"Role Rights By Page List"},children:[{path:"list",canActivate:[C.P],component:te,data:{object_type:r.hf.ROLE_RIGHTS_BY_PAGE,title:"Role Rights By Page List",pageName:r.hf.ROLE_RIGHTS_BY_PAGE}},{path:":id/edit",canActivate:[C.P],component:$,data:{title:"Role Rights By Page Edit",pageName:r.hf.ROLE_RIGHTS_BY_PAGE,pageSetting:r.AM.ACTIONS,settingField:r.In.EDIT}},{path:"create",canActivate:[C.P],component:de,data:{title:"Role Rights By Page Create",pageName:r.hf.ROLE_RIGHTS_BY_PAGE,pageSetting:r.AM.ACTIONS,settingField:r.In.CREATE}},{path:":id/view",canActivate:[C.P],component:(()=>{class o extends R.O{formBuilder;loggerService;navigationService;rolerightsbypageService;translateService;commonService;route;router;uiUtils;dataJsonObj={};errorObj={};pageTitle;constructor(t,s,a,i,n,l,c,b,p){super(c,l),this.formBuilder=t,this.loggerService=s,this.navigationService=a,this.rolerightsbypageService=i,this.translateService=n,this.commonService=l,this.route=c,this.router=b,this.uiUtils=p,this.route.queryParams.subscribe(_=>{this.dataJsonObj.queryParamsObj={defaultView:_.defaultView,selectedMenuId:_.selectedMenuId,selectedSubMenuId:_.selectedSubMenuId}})}ngOnInit(){this.dataJsonObj.headerAction={BACK:!0},this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=r.hf.ROLE_RIGHTS_BY_PAGE,this.commonService.trackView(r.sn.ROLERIGHTS_VIEW),this.route.params.subscribe(s=>{this.dataJsonObj.recordId=s.id}),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(r.hf.ROLE_RIGHTS_BY_PAGE,r.AM.ACTIONS,r.In.RECORD_HISTORY),this.dataJsonObj.selectedEnterpriseId=localStorage.getItem(r.BU.SELECTED_ENTERPRISE),this.dataJsonObj.data=[{}],this.getDynamicJson([{folderName:"lookup_codes",jsonType:"view",storingFieldName:"lookupCodesViewJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"},{folderName:"module_manager",jsonType:"view",storingFieldName:"moduleManagerViewJson"},{folderName:r.sb.USER_TYPES,jsonType:"view",storingFieldName:"userTypesViewJson"}]),this.dataJsonObj.dynamicRoleRights=[],this.dataJsonObj.enabledOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dataJsonObj.firstFormGroup=this.formBuilder.group({firstCtrl:["",h.kI.required]}),this.dataJsonObj.selectedPage=r.hf.ROLE_RIGHTS}getDynamicJson(t){var s=this;return(0,g.Z)(function*(){for(let a of t)try{s.dataJsonObj[a.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.selectedEnterpriseId,a.folderName,a.jsonType)}catch{s.dataJsonObj[a.storingFieldName]={}}s.getRecordById(s.dataJsonObj.recordId),s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.dataJsonObj.recordId,s.dataJsonObj.selectedObjEnabled=!0})()}getDynamicFieldsList(){var t=this;return(0,g.Z)(function*(){try{t.dataJsonObj.dynamicRoleRights=yield t.rolerightsbypageService.getDynamicFieldsList(t.dataJsonObj.moduleManagerListJson),t.applyExistingRoleRightData(t.dataJsonObj.recordData.role_rights)}catch(s){t.loggerService.setLoggerError(t.constructor.name,"getDynamicFieldsList",s)}})()}getRecordById(t){try{this.rolerightsbypageService.get(t).then(s=>{this.dataJsonObj.recordData=s,this.dataJsonObj.recordData.user_type_display_name=this.dataJsonObj.recordData.user_type_id&&this.dataJsonObj.userTypesViewJson&&this.dataJsonObj.userTypesViewJson[this.dataJsonObj.recordData.user_type_id+""]?this.dataJsonObj.userTypesViewJson[this.dataJsonObj.recordData.user_type_id+""].user_type_display_name:"",this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.ROLE_RIGHTS_BY_PAGE",value:this.dataJsonObj?.recordData?.user_type_display_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.getDynamicFieldsList()},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)}}applyExistingRoleRightData(t){var s=this;return(0,g.Z)(function*(){const a=yield s.rolerightsbypageService.getSelectedRolesRightsDataJsonObj(t);a&&(yield s.rolerightsbypageService.updateSelectedRoleRightInRoleRightsArray(s.dataJsonObj.dynamicRoleRights,a))})()}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"cancel",t)}}pageheadeActionClick(t){"BACK"==t.value&&this.cancel()}static \u0275fac=function(s){return new(s||o)(e.Y36(h.qu),e.Y36(A.m),e.Y36(ce.f),e.Y36(y),e.Y36(j.sK),e.Y36(E.v),e.Y36(m.gz),e.Y36(m.F0),e.Y36(v.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-rolerightsbypage-view"]],features:[e._Bn([y]),e.qOj],decls:28,vars:26,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[3,"formGroup"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","rolerightsbypage-view-enterprise",3,"label","value"],["disabled","true","id","rolerightsbypage-view-usertype",3,"label","value"],[1,"col-md-2","d-flex","align-items-center"],["label","","id","rolerightsbypage-view-enabled","disabled","true","mandatory","false",3,"options","checked"],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-danger btn-sm","id","rolerightsbypage-view-close",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],[4,"ngIf"],[3,"createdBy","showrecordhistory","lastUpdatedBy","creationDate","lastUpdatedDate"],[3,"selected","id",4,"ngFor","ngForOf"],[3,"selected","id"],["label","","disabled","true","psClassName","accordion-checkbox",1,"rolerights-checkbox",3,"options","checked"],[1,"ptable","rolerights",3,"value","rows","responsive","autoLayout"],["pTemplate","body"],[4,"ngFor","ngForOf"],["width","160px"],["label","","disabled","true",3,"options","checked"],["class","col-md-2 d-flex align-items-center",4,"ngFor","ngForOf"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"form",8)(9,"div",9)(10,"div",10),e._UZ(11,"app-input",11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",10),e._UZ(14,"app-input",12),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-checkbox",14),e.qZA(),e.TgZ(18,"div",15)(19,"app-button",16),e.NdJ("buttonOnClick",function(){return a.cancel()}),e.ALo(20,"translate"),e.qZA()()()(),e.TgZ(21,"div",17)(22,"div",3)(23,"div",18)(24,"div",19)(25,"p-accordion"),e.YNc(26,he,2,1,"span",20),e._UZ(27,"app-recordhistory",21),e.qZA()()()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(2),e.Q6J("formGroup",a.dataJsonObj.firstFormGroup),e.xp6(3),e.s9C("label",e.lcZ(12,20,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.dataJsonObj.recordData||null==a.dataJsonObj.recordData.enterprise?null:a.dataJsonObj.recordData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(15,22,"COMMON_PAGE_TITLES.USER_ROLE")),e.s9C("value",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.user_type_display_name),e.xp6(3),e.Q6J("options",a.dataJsonObj.enabledOptions)("checked",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.is_enabled),e.xp6(2),e.s9C("label",e.lcZ(20,24,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(7),e.Q6J("ngIf",a.dataJsonObj.dynamicRoleRights),e.xp6(1),e.Q6J("createdBy",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.created_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("lastUpdatedBy",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.updated_by)("creationDate",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.createdAt)("lastUpdatedDate",null==a.dataJsonObj.recordData?null:a.dataJsonObj.recordData.updatedAt))},dependencies:[S.UQ,S.US,f.h4,f.jx,T.sg,T.O5,h._Y,h.JL,h.sg,I.iA,D.r,w.a,L.b,V.W,N.q,j.X$]})}return o})(),data:{title:"Role Rights By Page View",pageName:r.hf.ROLE_RIGHTS_BY_PAGE,pageSetting:r.AM.ACTIONS,settingField:r.In.VIEW}}]}];let me=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[m.Bz.forChild(Oe),m.Bz]})}return o})();var ye=d(73518),je=d(65673);let Je=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[S.fx,T.ez,h.u5,h.UX,me,I.U$,j.aw,ye.dp,je.Q]})}return o})()}}]);