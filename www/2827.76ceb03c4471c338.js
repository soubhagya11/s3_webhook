"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2827],{22827:(yt,w,p)=>{p.r(w),p.d(w,{ReportDefinitionsModule:()=>Nt});var D=p(32174),O=p(36895),d=p(24006),y=p(11210),n=p(32236),E=p(71568),S=p(47561),F=p(57936),R=p(42786),_=p(77232),e=p(94650),L=p(46448),m=p(62510),g=p(54463),J=p(27601),M=p(2387),V=p(56368),U=p(9851),P=p(93837),Z=p(24929),I=p(37415);const k=["reportDefinitionDescription"],G=["reportDefinitionGroupName"],Y=["reportDefinitionReportCode"],Q=["reportDefinitionReportName"];let B=(()=>{class s extends S.O{loggerService;navigationService;router;translateService;commonService;enterprisesService;reportsdefinationService;route;uiUtils;reportDefinitionDescription;reportDefinitionGroupName;reportDefinitionReportCode;reportDefinitionReportName;applicationDisplayName;applicationId;applicationName;applicationObj;applicationOptions;description;disable;enterpriseId;enterpriseObj;enterpriseShortName;enterprisename;error;groupName;groupNameOptions;isSchedulable=!0;pageTitle;reportCode;reportDefinitionCreateObj=new H;reportName;reportPath;reportQuery;schedulableOptions;status;statusDisplayName;statusId;statusName;statusObj;statusOptions;dataJsonObj={};constructor(t,i,a,r,o,u,c,f,b){super(f,o),this.loggerService=t,this.navigationService=i,this.router=a,this.translateService=r,this.commonService=o,this.enterprisesService=u,this.reportsdefinationService=c,this.route=f,this.uiUtils=b}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_DEFINITIONS,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.REPORT_DEFINITIONS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],document.getElementsByTagName("body"),this.reportPath="",this.reportQuery="",this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(i=>{this.dataJsonObj.lookupCodesListJSON=i,this.getApplicationOptions(),this.getStatusList()}),this.schedulableOptions=[{value:"",displayname:this.translateService.instant("REPORTS.SCHEDULABLE"),key:"checkbox"}],this.getEnterprisesViewData()}getEnterprisesViewData(){this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(t=>{this.enterprisename=t.enterprise_name,this.enterpriseShortName=t.short_name,this.enterpriseObj={enterprise_id:t._id,enterprise_name:t.enterprise_name,short_name:t.short_name}},t=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)})}getApplicationOptions(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.APPLICATION_NAMES],"").then(t=>{this.applicationOptions=t,this.applicationId=this.applicationOptions[0].ID,this.applicationObj=t[0],this.applicationName=t[0].lookup_name,this.applicationDisplayName=this.lookupLanguageTranslations(t[0].lookup_id)}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getApplicationOptions",t)})}getSelectedApplication(t){t.value&&(this.applicationId=t.value,this.applicationObj=this.applicationOptions.find(i=>i.ID===parseInt(this.applicationId,10)),this.applicationName=this.applicationObj.lookup_name,this.applicationDisplayName=this.lookupLanguageTranslations(this.applicationObj.lookup_id)),this.error=""}changeReportsName(t){this.error="",this.reportName=t.value,this.description=t.value,this.dataJsonObj.disable=!1}changeReportCode(t){this.reportCode=t.value,this.dataJsonObj.disable=!1}getStatusList(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.REPORT_DEFINITION_STATUSES],"").then(t=>{this.dataJsonObj.disable=!1,this.statusOptions=t,this.statusId=t[0].ID,this.statusObj=t[0]}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getStatusList",t)})}changeStatus(t){try{this.statusId=t.value,this.statusObj=this.statusOptions.find(i=>i.ID===parseInt(this.statusId,10)),this.statusName=this.statusObj.lookup_name,this.statusDisplayName=this.lookupLanguageTranslations(this.statusObj.lookup_id)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeStatus",i)}}changeReportPath(t){this.reportPath=t.value}changeSchedulableFlag(t){this.isSchedulable=t.value}chnageDescription(t){this.description=t.value}createRecord(){try{this.reportDefinitionGroupName.isValid()&&this.reportDefinitionReportName.isValid()&&this.reportDefinitionReportCode.isValid()&&this.reportDefinitionDescription.isValid()&&(this.dataJsonObj.disable=!0,this.reportDefinitionCreateObj.report_group=this.applicationObj,this.reportDefinitionCreateObj.enterprise=this.enterpriseObj,this.reportDefinitionCreateObj.report_name=this.reportName,this.reportDefinitionCreateObj.report_code=this.reportCode,this.reportDefinitionCreateObj.description=this.description,this.reportDefinitionCreateObj.report_status=this.statusObj,this.reportDefinitionCreateObj.last_submission_report_path=this.reportPath,this.reportDefinitionCreateObj.report_query=this.reportQuery,this.reportDefinitionCreateObj.schedulable_flag=this.isSchedulable,this.reportsdefinationService.create(this.reportDefinitionCreateObj).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.dataJsonObj.disable=!1,this.commonService.redirectToPreviousUrl()},t=>{this.commonErrorCodes(JSON.parse(t)),this.loggerService.setLoggerError(this.constructor.name,"submit",t)}))}catch(t){this.loggerService.setLoggerError(this.constructor.name,"submit",t)}}commonErrorCodes(t){const i=JSON.parse(t[n.BU.STATUS]);409===i&&(this.error="COMMON_STATUS_CODES."+i)}cancelBtn(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(i){return new(i||s)(e.Y36(R.m),e.Y36(L.f),e.Y36(m.F0),e.Y36(g.sK),e.Y36(E.v),e.Y36(F.e),e.Y36(_.s),e.Y36(m.gz),e.Y36(J.s))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-reportdefinitions-create"]],viewQuery:function(i,a){if(1&i&&(e.Gf(k,5),e.Gf(G,5),e.Gf(Y,5),e.Gf(Q,5)),2&i){let r;e.iGM(r=e.CRH())&&(a.reportDefinitionDescription=r.first),e.iGM(r=e.CRH())&&(a.reportDefinitionGroupName=r.first),e.iGM(r=e.CRH())&&(a.reportDefinitionReportCode=r.first),e.iGM(r=e.CRH())&&(a.reportDefinitionReportName=r.first)}},features:[e._Bn([_.s]),e.qOj],decls:50,vars:52,consts:[[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","reportdefinitions-create-enterprise",3,"label","value"],["disabled","false","mandatory","true","id","reportdefinitions-create-report-group",3,"label","defaultValue","options","valueChange"],["reportDefinitionGroupName",""],[1,"col-md-6"],["mandatory","true","id","reportdefinition-create-report-name","type","text",3,"label","value","valueChange"],["reportDefinitionReportName",""],["mandatory","true","id","reportdefinition-create-report-code","type","ponumber",3,"label","value","maxlength","valueChange"],["reportDefinitionReportCode",""],["disabled","false","mandatory","false","id","reportdefinition-create-status",3,"label","options","defaultValue","valueChange"],["mandatory","false","id","reportdefinition-create-report-path","type","text",3,"label","value","valueChange"],[1,"col-md-2","d-flex","align-items-center"],["label","","id","reportdefinition-create-schedulable-flag","disabled","false","mandatory","false",3,"options","checked","valueChange"],["id","reportdefinition-create-description","mandatory","true",3,"label","maxlength","defaultvalue","valueChange"],["reportDefinitionDescription",""],[1,"col-md-12","textarea-block"],["for","reportQuery",1,"text-label"],["name","message","rows","12","cols","130","id","reportdefinition-create-report-query",1,"form-control",3,"ngModel","ngModelChange"],["message","ngModel"],[1,"col-md-12","text-end","mt-2","mb-2"],["id","reportdefinition-create-submit","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","disabled","buttonOnClick"],["id","reportdefinition-create-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"text-danger","text-center"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"app-pageheader",5),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8),e._UZ(10,"app-input",9),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",8)(13,"app-dropdown-singleselect",10,11),e.NdJ("valueChange",function(o){return a.getSelectedApplication(o)}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",12)(17,"app-input",13,14),e.NdJ("valueChange",function(o){return a.changeReportsName(o)}),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",8)(21,"app-input",15,16),e.NdJ("valueChange",function(o){return a.changeReportCode(o)}),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",8)(25,"app-dropdown-singleselect",17),e.NdJ("valueChange",function(o){return a.changeStatus(o)}),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",8)(28,"app-input",18),e.NdJ("valueChange",function(o){return a.changeReportPath(o)}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",19)(31,"app-checkbox",20),e.NdJ("valueChange",function(o){return a.changeSchedulableFlag(o)}),e.qZA()(),e.TgZ(32,"div",2)(33,"app-textarea",21,22),e.NdJ("valueChange",function(o){return a.chnageDescription(o)}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",23)(37,"label",24),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"textarea",25,26),e.NdJ("ngModelChange",function(o){return a.reportQuery=o}),e.qZA()(),e.TgZ(42,"div",27)(43,"app-button",28),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"app-button",29),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(46,"translate"),e.qZA()()(),e.TgZ(47,"div",30),e._uU(48),e.ALo(49,"translate"),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,30,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(15,32,"REPORTS.REPORT_GROUP")),e.s9C("defaultValue",a.applicationId),e.Q6J("options",a.applicationOptions),e.xp6(4),e.s9C("label",e.lcZ(19,34,"REPORTS.REPORT_NAME")),e.s9C("value",a.reportName),e.xp6(4),e.s9C("label",e.lcZ(23,36,"REPORTS.REPORT_CODE")),e.s9C("value",a.reportCode),e.Q6J("maxlength",15),e.xp6(4),e.s9C("label",e.lcZ(26,38,"COMMON_FIELDS.STATUS")),e.s9C("defaultValue",a.statusId),e.Q6J("options",a.statusOptions),e.xp6(3),e.s9C("label",e.lcZ(29,40,"REPORTS.REPORT_PATH")),e.s9C("value",a.reportPath),e.xp6(3),e.Q6J("options",a.schedulableOptions)("checked",a.isSchedulable),e.xp6(2),e.s9C("label",e.lcZ(35,42,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.description),e.Q6J("maxlength",240),e.xp6(5),e.hij(" ",e.lcZ(39,44,"REPORTS.REPORT_QUERY")," "),e.xp6(2),e.Q6J("ngModel",a.reportQuery),e.xp6(3),e.s9C("label",e.lcZ(44,46,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.dataJsonObj.disable),e.xp6(2),e.s9C("label",e.lcZ(46,48,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(49,50,a.error)," "))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,M.r,V.a,U.k,P.b,Z.R,I.q,g.X$]})}return s})();class H{description;enterprise;last_submission_report_path;report_code;report_group;report_name;report_query;report_status;schedulable_flag}var j=p(15439),C=p(42863),K=p(38077),z=p(43130),T=p(30578),A=p(10805),v=p(93144),W=p(92634),X=p(42919),x=p(11735);const ee=["paramDateValue"],te=["paramDateValueUpdate"],ae=["paramEmailValue"],ie=["paramEmailValueUpdate"],re=["paramListValue"],se=["paramListValueUpdate"],oe=["paramNumberValue"],ne=["paramNumberValueUpdate"],le=["paramSequenceAdd"],pe=["paramSequenceEdit"],de=["paramTextValue"],ue=["paramTextValueUpdate"],ce=["parameterDescriptionAdd"],me=["parameterDescriptionEdit"],he=["parameterDisplayName"],_e=["parameterDisplayNameEdit"],ge=["parameterNameDropdown"],fe=["parameterNameEditDropdown"],be=["parameterTypeDropdown"],Ce=["parameterTypeEditDropdown"],Te=["reportDefinitionDescription"],De=["reportDefinitionReportCode"],Oe=["reportDefinitionReportName"],ve=["sourceColumnDropdown"],Ne=["sourceColumnEditDropdown"],ye=["sourceDisplayColumnDropdown"],Ee=["sourceDisplayColumnEditDropdown"],Se=["sourceTableDropdown"],Re=["sourceTableEditDropdown"];function Ie(s,l){if(1&s&&(e.TgZ(0,"tr",87)(1,"td",88),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Ae(s,l){if(1&s&&e.YNc(0,Ie,4,4,"tr",86),2&s){const t=e.oxw();e.Q6J("ngIf",t.parametersData&&0==t.parametersData.length)}}function Le(s,l){if(1&s&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function Me(s,l){if(1&s&&(e.TgZ(0,"tr"),e.YNc(1,Le,3,3,"th",89),e.qZA()),2&s){const t=l.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Ve(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"td",91),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),r=a.rowIndex,o=a.$implicit,u=e.oxw();return e.KtG(u.editParameters(r,o))}),e._uU(1),e.qZA()}if(2&s){const t=l.$implicit,i=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",i),e.xp6(1),e.hij(" ",i[t.field]," ")}}function Pe(s,l){if(1&s&&(e.TgZ(0,"tr"),e.YNc(1,Ve,2,5,"td",90),e.qZA()),2&s){const t=l.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Ze(s,l){if(1&s&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",93)(6,"br"),e.qZA()),2&s){const t=l.$implicit,i=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",i[t.field],e.oJD)}}function we(s,l){if(1&s&&(e.TgZ(0,"tr")(1,"td")(2,"div",1),e.YNc(3,Ze,7,4,"div",92),e.qZA()()()),2&s){const t=l.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}function Je(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",94,95),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeSourceTable(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSourceTablesList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_TABLE")),e.s9C("defaultValue",t.sourceTabledisplayname),e.Q6J("options",t.sourceTableOptions)}}function Ue(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",96,97),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeSourceColumn(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSourceColumnsList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_COLUMN")),e.s9C("defaultValue",t.sourceColumn),e.Q6J("options",t.sourceColumnOptions)}}function je(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",98,99),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeSourceDisplayColumn(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSourceDisplayColumnsList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("defaultValue",t.sourceDisplayColumn),e.Q6J("options",t.sourceDisplayColumnOptions)}}function xe(s,l){if(1&s&&(e.TgZ(0,"div",50),e._UZ(1,"app-input",100),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("value",t.sourceDisplayColumn)}}function qe(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",2)(1,"app-textarea",101),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeWhereClause(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"REPORTS.WHERE_CLAUSE")),e.s9C("defaultvalue",t.whereClause),e.Q6J("maxlength",240)}}function Fe(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-input",102,103),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("value",t.defaultValue)}}function ke(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-inputnumber",104,105),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("value",t.defaultValue),e.Q6J("maxlength",10)}}function Ge(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-input",106,107),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("value",t.defaultValue)}}function Ye(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-datepicker",108,109),e.NdJ("dateChangeValue",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("defaultDate",t.defaultValue),e.s9C("mandatory",t.paramValueReqd)}}function Qe(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",110,111),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getParamValuesList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("defaultValue",t.parameterDisplayValue),e.Q6J("options",t.parameterValueOptions)}}function Be(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",64)(1,"app-checkbox",112),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeDateIncrement(a))}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("options",t.dateIncrementOptions)("checked",t.dateIncrementFlag)}}function He(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",113,114),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeSourceTable(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSourceTablesList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_TABLE")),e.s9C("defaultValue",t.sourceTabledisplayname),e.Q6J("options",t.sourceTableOptions)}}function Ke(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",96,97),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeSourceColumn(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSourceColumnsList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_COLUMN")),e.s9C("defaultValue",t.sourceColumn),e.Q6J("options",t.sourceColumnOptions)}}function $e(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",115,99),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeSourceDisplayColumn(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSourceDisplayColumnsList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("defaultValue",t.sourceDisplayColumn),e.Q6J("options",t.sourceDisplayColumnOptions)}}function ze(s,l){if(1&s&&(e.TgZ(0,"div",50),e._UZ(1,"app-input",116),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("value",t.sourceDisplayColumn)}}function We(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",2)(1,"app-textarea",117),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeWhereClause(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"REPORTS.WHERE_CLAUSE")),e.s9C("defaultvalue",t.whereClause),e.Q6J("maxlength",240)}}function Xe(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-input",118,119),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("value",t.defaultValue)}}function et(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-inputnumber",120,121),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("value",t.defaultValue),e.Q6J("maxlength",10)}}function tt(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-input",122,123),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("value",t.defaultValue)}}function at(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-datepicker",124,125),e.NdJ("dateChangeValue",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("defaultDate",t.defaultValue),e.s9C("mandatory",t.paramValueReqd)}}function it(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",50)(1,"app-dropdown-search",126,127),e.NdJ("selectedOption",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeParameterValue(a))})("searchValueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getParamValuesList(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.paramValueReqd),e.s9C("defaultValue",t.parameterDisplayValue),e.Q6J("options",t.parameterValueOptions)}}function rt(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",64)(1,"app-checkbox",128),e.NdJ("valueChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeDateIncrement(a))}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("options",t.dateIncrementOptions)("checked",t.dateIncrementFlag)}}let st=(()=>{class s extends S.O{columnsheaders;listViewService;loggerService;navigationService;router;translateService;commonService;listingVariables;reportsdefinationService;route;uiUtils;paramDateValue;paramDateValueUpdate;paramEmailValue;paramEmailValueUpdate;paramListValue;paramListValueUpdate;paramNumberValue;paramNumberValueUpdate;paramSequenceAdd;paramSequenceEdit;paramTextValue;paramTextValueUpdate;parameterDescriptionAdd;parameterDescriptionEdit;parameterDisplayName;parameterDisplayNameEdit;parameterNameDropdown;parameterNameEditDropdown;parameterTypeDropdown;parameterTypeEditDropdown;reportDefinitionDescription;reportDefinitionReportCode;reportDefinitionReportName;sourceColumnDropdown;sourceColumnEditDropdown;sourceDisplayColumnDropdown;sourceDisplayColumnEditDropdown;sourceTableDropdown;sourceTableEditDropdown;createdBy;creationDate;date;dateIncrementFlag=!1;dateIncrementOptions;defaultValue;description;disable;disableSourceDisplayColumn=!1;displayName;enabledFlag;enabledOptions;enterpriseId;enterpriseName;error1;error;isSchedulable;lastUpdatedBy;lastUpdatedDate;mandatoryOptions;newDate;pageTitle;paramSequence;paramValueReqd=!0;parameterDescription;parameterDisplayValue;parameterName;parameterNameOptions=[];parameterType;parameterTypeDisplayName;parameterTypeEdit;parameterTypeName;parameterTypeOptions;parameterValueOptions;parametersColumnHeaders;parametersData=[];parametertypeName;recordId;reportCode;reportDefinitionEditObj=new ot;reportGroup;reportGroupName;reportName;reportPath;reportQuery;rowIndex;schedulableOptions;sourceColumn;sourceColumnOptions;sourceDisplayColumn;sourceDisplayColumnOptions;sourceDisplayName;sourceTable;sourceTableName;sourceTableObj;sourceTableOptions;sourceTabledisplayname;status;statusDisplayName;statusId;statusName;statusObj;statusOptions;table_name;valueLimit;whereClause;dataJsonObj={};constructor(t,i,a,r,o,u,c,f,b,h,N){super(h,c),this.columnsheaders=t,this.listViewService=i,this.loggerService=a,this.navigationService=r,this.router=o,this.translateService=u,this.commonService=c,this.listingVariables=f,this.reportsdefinationService=b,this.route=h,this.uiUtils=N}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_DEFINITIONS,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.RECORD_HISTORY),document.getElementsByTagName("body"),this.parametersColumnHeaders=this.columnsheaders.getReportsDefinitionParameterColumnHeaders(),this.schedulableOptions=[{value:"",displayname:this.translateService.instant("REPORTS.SCHEDULABLE"),key:"checkbox"}],this.enabledOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dateIncrementOptions=[{value:"",displayname:this.translateService.instant("REPORTS.INCREMENT_DATE"),key:"checkbox1"}],this.mandatoryOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.MANDATORY"),key:"checkbox2"}],this.route.params.subscribe(i=>{this.recordId=i.id,this.getRecordById()}),this.date=j(new Date,"DD-MM-YYYY"),this.newDate=j(this.date,"DD-MM-YYYY").subtract(365,"days")}getRecordById(){try{this.reportsdefinationService.get(this.recordId).subscribe(t=>{this.enterpriseName=t.enterprise.short_name,this.enterpriseId=t.enterprise.enterprise_id,this.reportName=t.report_name,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.REPORT_DEFINITIONS",value:this.reportName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.reportCode=t.report_code,this.reportGroup=this.lookupLanguageTranslations(t.report_group.lookup_id),this.reportGroupName=t.report_group.lookup_name,this.description=t.description,this.statusId=t.report_status.lookup_id,this.reportPath=t.last_submission_report_path?t.last_submission_report_path:"",this.reportQuery=t.report_query,this.lastUpdatedDate=t.updatedAt,this.lastUpdatedBy=t.updated_by,this.createdBy=t.created_by,this.creationDate=t.createdAt,this.isSchedulable=t.schedulable_flag,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(i=>{this.dataJsonObj.lookupCodesListJSON=i,this.getStatusList(),this.getReportParametersList()})},t=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)}}changeReportsName(t){this.error1="",this.reportName=t.value}getStatusList(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.REPORT_DEFINITION_STATUSES],"").then(t=>{this.statusOptions=t}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getStatusList",t)})}changeStatus(t){try{this.statusId=t.value,this.statusObj=this.statusOptions.find(i=>i.ID===parseInt(this.statusId,10)),this.statusName=this.statusObj.lookup_name,this.statusDisplayName=this.lookupLanguageTranslations(this.statusObj.lookup_id)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeStatus",i)}}changeReportPath(t){this.reportPath=t.value}changeSchedulableFlag(t){this.isSchedulable=t.value}changeDescription(t){this.description=t.value}updateRecord(){try{this.reportDefinitionReportName.isValid()&&this.reportDefinitionReportCode.isValid()&&this.reportDefinitionDescription.isValid()&&(!1===this.checkForValidParameters()?this.error1="COMMON_VALIDATION_MESSAGES.VALID_PARAMETER_DEFINED_IS_MSSING_IN_QUERY":this.checkSeqUniqueness().length>0?this.error1="COMMON_VALIDATION_MESSAGES.VALID_PARAMETER_SEQUENCE_UNIQUENESS":(this.reportDefinitionEditObj.report_name=this.reportName,this.reportDefinitionEditObj.report_code=this.reportCode,this.reportDefinitionEditObj.description=this.description,this.reportDefinitionEditObj.report_status=this.statusObj,this.reportDefinitionEditObj.last_submission_report_path=this.reportPath,this.reportDefinitionEditObj.report_query=this.reportQuery,this.reportDefinitionEditObj.schedulable_flag=this.isSchedulable,this.reportDefinitionEditObj.parameters=this.parametersData,this.reportsdefinationService.update(this.reportDefinitionEditObj,this.recordId).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},t=>{this.commonErrorCodes(JSON.parse(t)),this.loggerService.setLoggerError(this.constructor.name,"update",t)})))}catch(t){this.loggerService.setLoggerError(this.constructor.name,"update",t)}}cancelBtn(){this.commonService.redirectToPreviousUrl()}getReportParametersList(){try{this.reportsdefinationService.reportParametersList(this.recordId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage).then(t=>{for(let i=0;i<t.rows.length;i++)t.rows[i].parameter_type_value=this.lookupLanguageTranslations(t.rows[i].parameter_type.lookup_id),t.rows[i].param_data_source_tableName=t.rows[i].param_data_source_table?t.rows[i].param_data_source_table.table_name:"",t.rows[i].is_enabled_value=!0===t.rows[i].is_enabled?"Yes":"No",t.rows[i].is_mandatory_value=!0===t.rows[i].is_mandatory?"Yes":"No",t.rows[i].auto_increment_date_paramName=!0===t.rows[i].auto_increment_date_param?"Yes":"No";this.parametersData=t.rows,this.listingVariables.totalRecords=t.count,this.listingVariables.totalpages=t.pages}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getReportParametersList",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getReportParametersList",t)}}getParameterNamesList(){try{this.parameterNameOptions=[];let t=this.reportQuery.split("const dynamicParams = [")[1].split("];")[0];if(t=t.replace(/\'/gi,""),t=t.split(","),t&&t.length>0)for(let i=0;i<t.length;i++){const a={ID:t[i].trim(),NAME:t[i].trim()};this.parameterNameOptions.push(a)}}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getParameterNamesList",t)}}changeParameterNames(t){this.parameterName=t.value,this.displayName=t.value,this.parameterDescription=t.value}changeDisplayName(t){this.displayName=t.value}getParameterTypes(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.REPORT_PARAMETER_TYPES],"").then(t=>{this.parameterTypeOptions=t}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getParameterTypes",t)})}changeParameterTypes(t){try{t&&(this.parameterType=t.value,this.dateIncrementFlag=!1,this.whereClause="",this.sourceTable="",this.sourceColumn="",this.sourceDisplayColumn="",this.defaultValue="",this.parameterDisplayValue="",this.parametertypeName=this.parameterTypeOptions.find(i=>i.ID===parseInt(this.parameterType,10)),this.parameterTypeDisplayName=this.lookupLanguageTranslations(this.parametertypeName.lookup_id),this.parameterTypeName=this.parametertypeName.lookup_name,this.parameterTypeName===n.oP.INPUT_DATE&&!0===this.paramValueReqd&&(this.defaultValue=this.commonService.dbTimezoneFormat(this.newDate),this.parameterDisplayValue=this.commonService.dbTimezoneFormat(this.newDate)),this.parameterTypeName===n.oP.INPUT_LIST&&this.getSourceTablesList(""),this.error="")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeParameterTypes",i)}}changeParameterDescription(t){this.parameterDescription=t.value}getSourceTablesList(t){this.reportsdefinationService.getTableNames(t).then(i=>{this.sourceTableOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getApplicationOptions",i)})}changeSourceTable(t){try{if(t){this.sourceTable=t.ID;const i=this.sourceTableOptions.find(a=>a.ID===this.sourceTable);i&&(this.table_name=i.ID,this.sourceTableObj={table_name:this.table_name},this.getSourceColumnsList(""),this.sourceTableName===n.hf.LOOKUP_CODES||this.sourceTableName===n.hf.LOOKUP_TYPES?(this.sourceDisplayColumn="lookup_display_name",this.disableSourceDisplayColumn=!0,this.table_name=i.ID):(this.table_name=i.ID,this.disableSourceDisplayColumn=!1,this.getSourceDisplayColumnsList("")))}else this.sourceTable="",this.sourceTableName="",this.sourceDisplayName="",this.sourceColumn="",this.sourceDisplayColumn="",this.parameterDisplayValue="",this.sourceColumnOptions=[],this.sourceDisplayColumnOptions=[],this.parameterValueOptions=[]}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeSourceTable",i)}}changeWhereClause(t){this.defaultValue="",this.error="",this.parameterValueOptions=[],this.whereClause=t.value}changeParameterValue(t){try{this.parameterValueOptions=[],t?this.parameterTypeName===n.oP.INPUT_LIST?(this.defaultValue=t.ID,this.parameterDisplayValue=t.NAME):(this.defaultValue=t.value,this.parameterDisplayValue=t.value):(this.error="",this.defaultValue="",this.parameterDisplayValue="")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getParameterValue",i)}}changeValueLimit(t){this.valueLimit=t.value}checkForValidParameters(){try{this.getParameterNamesList();const t={};for(let a=0;a<this.parameterNameOptions.length;a++)t[this.parameterNameOptions[a].ID]=this.parameterNameOptions[a];let i=!0;for(let a=0;a<this.parametersData.length;a++)!0===this.parametersData[a].is_enabled&&!t[this.parametersData[a].parameter_name]&&(i=!1);return i}catch(t){this.loggerService.setLoggerError(this.constructor.name,"checkForValidParameters",t)}}checkSeqUniqueness(){try{const t=this.parametersData.reduce((i,a)=>(i[a.param_display_sequence]=++i[a.param_display_sequence]||0,i),{});return this.parametersData.filter(i=>t[i.param_display_sequence])}catch(t){this.loggerService.setLoggerError(this.constructor.name,"checkSeqUniqueness",t)}}changeSequence(t){this.paramSequence=t.value}changeMandatory(t){this.paramValueReqd=t.value}changeEnabled(t){this.enabledFlag=t.value}changeDateIncrement(t){this.dateIncrementFlag=t.value}getSourceColumnsList(t){try{this.sourceTableName===n.hf.LOOKUP_TYPES||this.sourceTableName===n.hf.LOOKUP_CODES?this.getSourceColumnsLookupsList(t):this.reportsdefinationService.getreferenceFieldOptions(this.table_name,t).then(i=>{this.sourceColumnOptions=[];let a=i.columns;for(let r=0;r<a.length;r++){let o={ID:"",NAME:""};o.ID=a[r],o.NAME=a[r],this.sourceColumnOptions.push(o)}}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getFields",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSourceColumnsList",i)}}getSourceColumnsLookupsList(t){try{this.reportsdefinationService.getOptionsparameters(this.table_name,this.enterpriseId,t).then(i=>{this.sourceColumnOptions=[];for(let a=0;a<i.length;a++)this.sourceColumnOptions.push({ID:i[a].NAME,NAME:i[a].NAME});if(this.sourceColumnOptions&&""!==t){const a=this.sourceColumnOptions.filter(r=>Object.keys(r).some(o=>r[o].toLowerCase().includes(t.toLowerCase())));this.sourceColumnOptions=a}},i=>{this.loggerService.setLoggerError(this.constructor.name,"getSourceColumnsLookupsList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSourceColumnsLookupsList",i)}}getSourceDisplayColumnsList(t){try{this.reportsdefinationService.getreferenceFieldOptions(this.table_name,t).then(i=>{this.sourceDisplayColumnOptions=[];let a=i.columns;for(let r=0;r<a.length;r++){let o={ID:"",NAME:""};o.ID=a[r],o.NAME=a[r],this.sourceDisplayColumnOptions.push(o)}if(this.sourceDisplayColumnOptions&&""!==t){const r=this.sourceDisplayColumnOptions.filter(o=>Object.keys(o).some(u=>o[u].toLowerCase().includes(t.toLowerCase())));this.sourceDisplayColumnOptions=r}},i=>{this.loggerService.setLoggerError(this.constructor.name,"getSourceDisplayColumnsList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSourceDisplayColumnsList",i)}}changeSourceColumn(t){try{t?this.sourceColumn=t.ID:(this.parameterDisplayValue="",this.parameterValueOptions=[])}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeSourceColumn",i)}}changeSourceDisplayColumn(t){try{t?this.sourceDisplayColumn=t.ID:(this.parameterDisplayValue="",this.parameterValueOptions=[])}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeSourceDisplayColumn",i)}}getParamValuesList(t){this.parameterValueOptions=[],this.sourceTable&&this.sourceColumn?this.reportsdefinationService.getReportParametersValue(this.table_name,this.sourceColumn,this.sourceDisplayColumn,this.enterpriseId,t).then(i=>{this.parameterValueOptions=i},i=>{this.commonErrorCodes(JSON.parse(i)),this.loggerService.setLoggerError(this.constructor.name,"changeSourceDisplayColumn",i)}):this.parameterValueOptions=[]}autocase(t){return t?t.replace(/(&)?([a-z])([a-z]{0,})(;)?/gi,function(i,a,r,o,u){return a&&u?i:r.toUpperCase()+o.toLowerCase()}):""}add(t){try{t.stopPropagation(),this.parameterName="",this.displayName="",this.parameterType="",this.parameterDescription="",this.whereClause="",this.table_name="",this.sourceTable="",this.sourceColumn="",this.sourceDisplayColumn="",this.defaultValue="",this.valueLimit="",this.parameterTypeName="",this.sourceDisplayName="",this.getParameterNamesList(),this.getParameterTypes();let i=1;this.parametersData&&this.parametersData.length>0&&(i=Math.max.apply(Math,this.parametersData.map(function(r){return r.param_display_sequence}))+1),this.paramSequence=i,this.enabledFlag=!0,this.dateIncrementFlag=!1,this.paramValueReqd=!0,this.error="",this.sourceColumnOptions=[],this.sourceDisplayColumnOptions=[],this.parameterNameDropdown.clearmessage(),this.parameterDisplayName.clearmessage(),this.parameterTypeDropdown.clearmessage(),this.paramSequenceAdd.clearMessage(),this.sourceTableDropdown&&this.sourceTableDropdown.clearmessage(),this.sourceColumnDropdown&&this.sourceColumnDropdown.clearmessage(),this.sourceTableDropdown&&this.sourceTableDropdown.clearSelectInput(),this.sourceColumnDropdown&&this.sourceColumnDropdown.clearSelectInput(),this.sourceDisplayColumnDropdown&&this.sourceDisplayColumnDropdown.clearSelectInput(),this.sourceDisplayColumnDropdown&&this.sourceDisplayColumnDropdown.clearmessage(),this.paramTextValue&&this.paramTextValue.clearmessage(),this.paramNumberValue&&this.paramNumberValue.clearMessage(),this.paramEmailValue&&this.paramEmailValue.clearmessage(),this.paramListValue&&this.paramListValue.clearmessage(),this.paramListValue&&this.paramListValue.clearSelectInput(),this.paramDateValue&&this.paramDateValue.clearmessage(),$("#exampleModal").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"add",i)}}reportParametersAdd(){try{if(this.scrollToElement("#reportDefinitionsParametersBlockId"),(this.parameterName||this.parameterNameDropdown.isValid())&&this.parameterDisplayName.isValid()&&(this.parameterType||this.parameterTypeDropdown.isValid())&&this.parameterDescriptionAdd.isValid()&&(this.parameterTypeName!==n.oP.INPUT_LIST||this.sourceTableDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||this.sourceColumnDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||!this.sourceDisplayColumnDropdown||this.sourceDisplayColumnDropdown.isValid())&&(!this.paramValueReqd||!this.paramTextValue||this.paramTextValue.isValid())&&(!this.paramValueReqd||!this.paramNumberValue||this.paramNumberValue.isValid())&&(!this.paramValueReqd||!this.paramEmailValue||this.paramEmailValue.isValid())&&(!this.paramValueReqd||!this.paramDateValue||this.paramDateValue.isValid())&&(!this.paramValueReqd||!this.paramListValue||this.paramListValue.isValid())&&this.paramSequenceAdd.isValid()&&""===this.error)if(this.parametersData.find(i=>i.parameter_name===this.parameterName))this.error="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS";else{this.parameterTypeName===n.oP.INPUT_DATE&&(this.defaultValue=this.commonService.dbTimezoneFormat(this.defaultValue));const i={report_id:this.recordId,parameter_name:this.parameterName,parameter_display_name:this.displayName,description:this.parameterDescription,parameter_type:this.parametertypeName,parameter_type_value:this.parameterTypeDisplayName,param_data_source_table:this.sourceTableObj,param_data_source_tableName:this.table_name,param_data_source_column:this.sourceColumn,param_data_source_display_col:this.sourceDisplayColumn,param_data_source_conditions:this.whereClause,default_value:this.defaultValue,default_value_to_display:this.parameterTypeName===n.oP.INPUT_DATE?this.commonService.dbTimezoneFormat(this.parameterDisplayValue):this.parameterDisplayValue,value_restrict:this.valueLimit,param_display_sequence:this.paramSequence,is_enabled:this.enabledFlag,is_enabled_value:!0===this.enabledFlag?"Yes":"No",auto_increment_date_param:this.dateIncrementFlag,auto_increment_date_paramName:!0===this.dateIncrementFlag?"Yes":"No",is_mandatory:this.paramValueReqd,is_mandatory_value:!0===this.paramValueReqd?"Yes":"No",underlying_tables:this.table_name};this.parametersData.push(i),this.parametersData.sort((a,r)=>a.param_display_sequence-r.param_display_sequence),$("#exampleModal").modal("hide")}}catch(t){this.loggerService.setLoggerError(this.constructor.name,"reportParametersAdd",t)}}editParameters(t,i){try{this.rowIndex=t,this.error="",this.getParameterNamesList(),this.getParameterTypes(),this.parameterName=i.parameter_name,this.displayName=i.parameter_display_name,this.parameterType=i.parameter_type,this.parameterTypeEdit=i.parameter_type.lookup_id,this.parameterTypeName=i.parameter_type.lookup_name,this.parameterTypeDisplayName=this.lookupLanguageTranslations(i.parameter_type.lookup_id),this.parameterDescription=i.description,this.parametertypeName=i.parameter_type,this.whereClause=i.param_data_source_conditions,this.parameterTypeName===n.oP.INPUT_LIST&&(this.sourceTableObj=i.param_data_source_table,this.sourceTable=i.param_data_source_table.table_name,this.getSourceTablesList(this.sourceTable),this.sourceTableName=i.param_data_source_table.table_name,this.sourceTabledisplayname=i.param_data_source_table.table_name,this.sourceColumn=i.param_data_source_column,this.sourceDisplayColumn=i.param_data_source_display_col,this.sourceTableName===n.hf.LOOKUP_TYPES||this.sourceTableName===n.hf.LOOKUP_CODES?(this.table_name=i.param_data_source_tableName,this.disableSourceDisplayColumn=!0):(this.table_name=i.param_data_source_tableName,this.disableSourceDisplayColumn=!1,this.getSourceDisplayColumnsList("")),this.getSourceColumnsList(""),this.sourceTable&&this.sourceColumn&&this.sourceDisplayColumn&&this.getParamValuesList("")),this.defaultValue=i.default_value,this.parameterDisplayValue=i.default_value_to_display,this.valueLimit=i.value_restrict,this.paramSequence=i.param_display_sequence,this.enabledFlag=i.is_enabled,this.dateIncrementFlag=i.auto_increment_date_param,this.paramValueReqd=i.is_mandatory,$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"editParameters",a)}}reportParametersUpdate(){try{if(this.scrollToElement("#reportDefinitionsParametersBlockId"),(this.parameterName||this.parameterNameEditDropdown.isValid())&&this.parameterDisplayNameEdit.isValid()&&(this.parameterType||this.parameterTypeEditDropdown.isValid())&&this.parameterDescriptionAdd.isValid()&&(this.parameterType!==n.oP.INPUT_LIST||this.sourceTableEditDropdown.isValid())&&(this.parameterType!==n.oP.INPUT_LIST||this.sourceColumnEditDropdown.isValid())&&(this.parameterType!==n.oP.INPUT_LIST||!this.sourceDisplayColumnEditDropdown||this.sourceDisplayColumnEditDropdown.isValid())&&(!this.paramValueReqd||!this.paramTextValueUpdate||this.paramTextValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramNumberValueUpdate||this.paramNumberValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramEmailValueUpdate||this.paramEmailValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramDateValueUpdate||this.paramDateValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramListValueUpdate||this.paramListValueUpdate.isValid())&&this.paramSequenceEdit.isValid()&&""===this.error){const t=this.parametersData.findIndex(i=>i.parameter_name===this.parameterName);if(-1===t||t===this.rowIndex){for(let i=0;i<this.parametersData.length;i++)i===this.rowIndex&&(this.parametersData[i].report_id=this.recordId,this.parametersData[i].parameter_name=this.parameterName,this.parametersData[i].parameter_display_name=this.displayName,this.parametersData[i].description=this.parameterDescription,this.parametersData[i].parameter_type=this.parametertypeName,this.parametersData[i].parameter_type_value=this.parameterTypeDisplayName,this.parametersData[i].param_data_source_table=this.table_name,this.parametersData[i].param_data_source_tableName=this.table_name,this.parametersData[i].param_data_source_column=this.sourceColumn,this.parametersData[i].param_data_source_display_col=this.sourceDisplayColumn,this.parametersData[i].param_data_source_cond=this.whereClause,this.parametersData[i].default_value=this.defaultValue,this.parametersData[i].default_value_to_display=this.parameterTypeName===n.oP.INPUT_DATE?this.commonService.dbTimezoneFormat(this.parameterDisplayValue):this.parameterDisplayValue,this.parametersData[i].value_restrict=this.valueLimit,this.parametersData[i].param_display_sequence=this.paramSequence,this.parametersData[i].is_enabled=this.enabledFlag,this.parametersData[i].is_enabled_value=!0===this.enabledFlag?"Yes":"No",this.parametersData[i].auto_increment_date_param=this.dateIncrementFlag,this.parametersData[i].auto_increment_date_paramName=!0===this.dateIncrementFlag?"Yes":"No",this.parametersData[i].is_mandatory=this.paramValueReqd,this.parametersData[i].is_mandatory_value=!0===this.paramValueReqd?"Yes":"No",this.parametersData[i].underlying_tables=this.table_name);this.parametersData.sort((i,a)=>i.param_display_sequence-a.param_display_sequence),$("#exampleModal1").modal("hide")}else this.error="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS"}}catch(t){this.loggerService.setLoggerError(this.constructor.name,"reportParametersUpdate",t)}}scrollToElement(t){setTimeout(()=>{const i=document.querySelector(t);i&&i.scrollIntoView({behavior:"smooth",block:"start"})},500)}commonErrorCodes(t){const i=JSON.parse(t[n.BU.STATUS]);switch(i){case 400:this.error1=this.translateService.instant("COMMON_TOAST_MESSAGES.INVALID_WHERE_QUERY");break;case 409:this.error1="COMMON_STATUS_CODES."+i}}static \u0275fac=function(i){return new(i||s)(e.Y36(C.Y),e.Y36(z.x),e.Y36(R.m),e.Y36(L.f),e.Y36(m.F0),e.Y36(g.sK),e.Y36(E.v),e.Y36(T.v),e.Y36(_.s),e.Y36(m.gz),e.Y36(J.s))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-reportdefinitions-edit"]],viewQuery:function(i,a){if(1&i&&(e.Gf(ee,5),e.Gf(te,5),e.Gf(ae,5),e.Gf(ie,5),e.Gf(re,5),e.Gf(se,5),e.Gf(oe,5),e.Gf(ne,5),e.Gf(le,5),e.Gf(pe,5),e.Gf(de,5),e.Gf(ue,5),e.Gf(ce,5),e.Gf(me,5),e.Gf(he,5),e.Gf(_e,5),e.Gf(ge,5),e.Gf(fe,5),e.Gf(be,5),e.Gf(Ce,5),e.Gf(Te,5),e.Gf(De,5),e.Gf(Oe,5),e.Gf(ve,5),e.Gf(Ne,5),e.Gf(ye,5),e.Gf(Ee,5),e.Gf(Se,5),e.Gf(Re,5)),2&i){let r;e.iGM(r=e.CRH())&&(a.paramDateValue=r.first),e.iGM(r=e.CRH())&&(a.paramDateValueUpdate=r.first),e.iGM(r=e.CRH())&&(a.paramEmailValue=r.first),e.iGM(r=e.CRH())&&(a.paramEmailValueUpdate=r.first),e.iGM(r=e.CRH())&&(a.paramListValue=r.first),e.iGM(r=e.CRH())&&(a.paramListValueUpdate=r.first),e.iGM(r=e.CRH())&&(a.paramNumberValue=r.first),e.iGM(r=e.CRH())&&(a.paramNumberValueUpdate=r.first),e.iGM(r=e.CRH())&&(a.paramSequenceAdd=r.first),e.iGM(r=e.CRH())&&(a.paramSequenceEdit=r.first),e.iGM(r=e.CRH())&&(a.paramTextValue=r.first),e.iGM(r=e.CRH())&&(a.paramTextValueUpdate=r.first),e.iGM(r=e.CRH())&&(a.parameterDescriptionAdd=r.first),e.iGM(r=e.CRH())&&(a.parameterDescriptionEdit=r.first),e.iGM(r=e.CRH())&&(a.parameterDisplayName=r.first),e.iGM(r=e.CRH())&&(a.parameterDisplayNameEdit=r.first),e.iGM(r=e.CRH())&&(a.parameterNameDropdown=r.first),e.iGM(r=e.CRH())&&(a.parameterNameEditDropdown=r.first),e.iGM(r=e.CRH())&&(a.parameterTypeDropdown=r.first),e.iGM(r=e.CRH())&&(a.parameterTypeEditDropdown=r.first),e.iGM(r=e.CRH())&&(a.reportDefinitionDescription=r.first),e.iGM(r=e.CRH())&&(a.reportDefinitionReportCode=r.first),e.iGM(r=e.CRH())&&(a.reportDefinitionReportName=r.first),e.iGM(r=e.CRH())&&(a.sourceColumnDropdown=r.first),e.iGM(r=e.CRH())&&(a.sourceColumnEditDropdown=r.first),e.iGM(r=e.CRH())&&(a.sourceDisplayColumnDropdown=r.first),e.iGM(r=e.CRH())&&(a.sourceDisplayColumnEditDropdown=r.first),e.iGM(r=e.CRH())&&(a.sourceTableDropdown=r.first),e.iGM(r=e.CRH())&&(a.sourceTableEditDropdown=r.first)}},features:[e._Bn([_.s,T.v,C.Y]),e.qOj],decls:179,vars:187,consts:[[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","reportdefinition-edit-enterprise",3,"label","value"],["disabled","true","id","reportdefinition-edit-report-group",3,"label","value"],[1,"col-md-6"],["mandatory","true","id","reportdefinition-edit-report-name","type","text",3,"label","value","valueChange"],["reportDefinitionReportName",""],["mandatory","true","id","reportdefinition-edit-report-code","disabled","true","type","text",3,"label","value","maxlength"],["reportDefinitionReportCode",""],["disabled","false","mandatory","false","id","reportdefinition-edit-status",3,"label","options","defaultValue","valueChange"],["mandatory","false","id","reportdefinition-edit-report-path","type","text",3,"label","value","valueChange"],[1,"col-md-2","d-flex","align-items-center"],["label","","id","reportdefinition-edit-schedulable-flag","disabled","false","mandatory","false",3,"options","checked","valueChange"],["id","reportdefinition-edit-description","mandatory","true",3,"label","maxlength","defaultvalue","valueChange"],["reportDefinitionDescription",""],[1,"col-md-12","textarea-block"],["for","reportQuery",1,"text-label"],["name","message","rows","12","cols","130","id","reportdefinition-edit-group-name",1,"form-control",3,"ngModel","ngModelChange"],["message","ngModel"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"col-md-12","text-end","mt-2","mb-2"],["id","reportdefinition-edit-submit","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["id","reportdefinition-edit-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","reportDefinitionsParametersBlockId",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["label","","className","btn btn-danger btn-sm btn-round btn-rounded","btnIcon","fas fa-plus","id","reportdefinition-edit-addparameters",3,"isEmitMouseEvent","buttonOnClick"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","totalRecords","totalPages","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[1,"datamodal"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[1,"col-md-4"],["mandatory","true","id","reportdefinition-edit-parameter-name",3,"label","options","defaultValue","valueChange"],["parameterNameDropdown",""],["mandatory","true","id","reportdefinition-edit-parameter-displayName",3,"label","value","valueChange"],["parameterDisplayName",""],["mandatory","true","id","reportdefinition-edit-parameter-type",3,"label","options","defaultValue","valueChange"],["parameterTypeDropdown",""],["mandatory","true","id","reportdefinition-edit-parameter-description",3,"label","maxlength","defaultvalue","valueChange"],["parameterDescriptionAdd",""],["class","col-md-4",4,"ngIf"],["class","col-md-12",4,"ngIf"],["mandatory","false","id","reportdefinition-edit-parameter-valuelimit","type","text",3,"label","value","valueChange"],["mandatory","true","type","CacheSettings","id","reportdefinition-edit-parameter-sequence",3,"label","maxlength","value","valueChange"],["paramSequenceAdd",""],[1,"col-md-4","d-flex","align-items-center"],["label","","id","reportdefinition-edit-parameters-mandatory","disabled","false","mandatory","false",3,"options","checked","valueChange"],["class","col-md-4 d-flex align-items-center",4,"ngIf"],["label","","id","reportdefinition-edit-parameters-enabled","disabled","false","mandatory","false",3,"options","checked","valueChange"],[1,"error-msg","text-danger","text-center","mb-0"],[1,"modal-footer"],["className","btn btn-primary btn-sm","id","reportdefinitions-edit-addbutton",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","reportdefinitions-edit-cancelbutton",3,"label"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","true","id","reportdefinition-update-parameter-name",3,"label","options","defaultValue","valueChange"],["mandatory","true","id","reportdefinition-update-parameter-displayName",3,"label","value","valueChange"],["parameterDisplayNameEdit",""],["mandatory","true","id","reportdefinition-update-parameter-type",3,"label","options","defaultValue","valueChange"],["parameterTypeEditDropdown",""],["mandatory","true","id","reportdefinition-update-parameter-description",3,"label","maxlength","defaultvalue","valueChange"],["parameterDescriptionEdit",""],["mandatory","false","id","reportdefinition-update-parameter-valuelimit","type","text",3,"label","value","valueChange"],["mandatory","true","type","CacheSettings","id","reportdefinition-update-parameter-sequence",3,"label","maxlength","value","valueChange"],["paramSequenceEdit",""],["label","","id","reportdefinition-update-parameters-mandatory","disabled","false","mandatory","false",3,"options","checked","valueChange"],["label","","id","reportdefinition-update-parameters-enabled","disabled","false","mandatory","false",3,"options","checked","valueChange"],["className","btn btn-primary btn-sm","id","reportdefinitions-edit-updatebutton",1,"mgr-5",3,"label","click"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal1",3,"pSelectableRow","class","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal1",3,"pSelectableRow","click"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["mandatory","true","id","reportdefinition-edit-sourcetable",3,"label","options","defaultValue","selectedOption","searchValueChange"],["sourceTableDropdown",""],["mandatory","true","id","reportdefinition-edit-sourcecolumn",3,"label","options","defaultValue","selectedOption","searchValueChange"],["sourceColumnDropdown",""],["mandatory","true","id","reportdefinition-edit-sourcedisplaycolumn",3,"label","options","defaultValue","selectedOption","searchValueChange"],["sourceDisplayColumnDropdown",""],["mandatory","true","id","reportdefinition-edit-sourcedisplaycolumn","disabled","true","type","text",3,"label","value"],["id","reportdefinition-edit-parameter-whereclause",3,"label","maxlength","defaultvalue","valueChange"],["disabled","false","id","reportdefinition-create-parameter-value-update",3,"label","mandatory","value","valueChange"],["paramTextValue",""],["disabled","false","id","reportdefinition-create-parameter-value-update",3,"label","mandatory","maxlength","value","valueChange"],["paramNumberValue",""],["disabled","false","type","email","id","reportdefinition-create-parameter-value-update",3,"label","mandatory","value","valueChange"],["paramEmailValue",""],["id","reportdefinition-create-parameter-value-update","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue"],["paramDateValue",""],["id","reportdefinition-update-parameter-value",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["paramListValue",""],["label","","id","reportdefinition-edit-parameters-date-increment","disabled","false","mandatory","false",3,"options","checked","valueChange"],["mandatory","true","id","reportdefinition-update-sourcetable",3,"label","defaultValue","options","selectedOption","searchValueChange"],["sourceTableEditDropdown",""],["mandatory","true","id","reportdefinition-update-sourcedisplaycolumn",3,"label","options","defaultValue","selectedOption","searchValueChange"],["mandatory","true","id","reportdefinition-update-sourcedisplaycolumn","disabled","true","type","text",3,"label","value"],["id","reportdefinition-update-parameter-whereclause",3,"label","maxlength","defaultvalue","valueChange"],["disabled","false","id","reportdefinition-update-default-value",3,"label","mandatory","value","valueChange"],["paramTextValueUpdate",""],["disabled","false","id","reportdefinition-update-default-value",3,"label","mandatory","maxlength","value","valueChange"],["paramNumberValueUpdate",""],["disabled","false","type","email","id","reportdefinition-update-default-value",3,"label","mandatory","value","valueChange"],["paramEmailValueUpdate",""],["id","reportdefinition-update-default-value","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue"],["paramDateValueUpdate",""],["id","reportdefinition-update-default-value",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["paramListValueUpdate",""],["label","","id","reportdefinition-update-parameters-date-increment","disabled","false","mandatory","false",3,"options","checked","valueChange"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"app-pageheader",5),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8),e._UZ(10,"app-input",9),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"app-input",10),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",11)(16,"app-input",12,13),e.NdJ("valueChange",function(o){return a.changeReportsName(o)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",8),e._UZ(20,"app-input",14,15),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",8)(24,"app-dropdown-singleselect",16),e.NdJ("valueChange",function(o){return a.changeStatus(o)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",8)(27,"app-input",17),e.NdJ("valueChange",function(o){return a.changeReportPath(o)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",18)(30,"app-checkbox",19),e.NdJ("valueChange",function(o){return a.changeSchedulableFlag(o)}),e.qZA()(),e.TgZ(31,"div",2)(32,"app-textarea",20,21),e.NdJ("valueChange",function(o){return a.changeDescription(o)}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",22)(36,"label",23),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"textarea",24,25),e.NdJ("ngModelChange",function(o){return a.reportQuery=o}),e.qZA()(),e.TgZ(41,"div",26),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"div",27)(45,"app-button",28),e.NdJ("buttonOnClick",function(){return a.updateRecord()}),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"app-button",29),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(48,"translate"),e.qZA()()(),e.TgZ(49,"div",30)(50,"div",2)(51,"div",31)(52,"div",32)(53,"p-accordion",33)(54,"p-accordionTab",34)(55,"p-header",35)(56,"span"),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"app-button",36),e.NdJ("buttonOnClick",function(o){return a.add(o)}),e.qZA()(),e.TgZ(60,"p-table",37),e.YNc(61,Ae,1,1,"ng-template",38),e.YNc(62,Me,2,1,"ng-template",39),e.YNc(63,Pe,2,1,"ng-template",40),e.YNc(64,we,4,2,"ng-template",41),e.qZA()(),e._UZ(65,"app-recordhistory",42),e.qZA()()()()()()()()()()(),e.TgZ(66,"div",43)(67,"div",44)(68,"div",45)(69,"div",46)(70,"div",47)(71,"div",48),e._uU(72),e.ALo(73,"translate"),e.ALo(74,"translate"),e.qZA()(),e.TgZ(75,"div",49)(76,"div",7)(77,"div",50)(78,"app-dropdown-singleselect",51,52),e.NdJ("valueChange",function(o){return a.changeParameterNames(o)}),e.ALo(80,"translate"),e.qZA()(),e.TgZ(81,"div",50)(82,"app-input",53,54),e.NdJ("valueChange",function(o){return a.changeDisplayName(o)}),e.ALo(84,"translate"),e.qZA()(),e.TgZ(85,"div",50)(86,"app-dropdown-singleselect",55,56),e.NdJ("valueChange",function(o){return a.changeParameterTypes(o)}),e.ALo(88,"translate"),e.qZA()(),e.TgZ(89,"div",2)(90,"app-textarea",57,58),e.NdJ("valueChange",function(o){return a.changeParameterDescription(o)}),e.ALo(92,"translate"),e.qZA()(),e.YNc(93,Je,4,5,"div",59),e.YNc(94,Ue,4,5,"div",59),e.YNc(95,je,4,5,"div",59),e.YNc(96,xe,3,4,"div",59),e.YNc(97,qe,3,5,"div",60),e.YNc(98,Fe,4,5,"div",59),e.YNc(99,ke,4,6,"div",59),e.YNc(100,Ge,4,5,"div",59),e.YNc(101,Ye,4,5,"div",59),e.YNc(102,Qe,4,6,"div",59),e.TgZ(103,"div",50)(104,"app-input",61),e.NdJ("valueChange",function(o){return a.changeValueLimit(o)}),e.ALo(105,"translate"),e.qZA()(),e.TgZ(106,"div",50)(107,"app-inputnumber",62,63),e.NdJ("valueChange",function(o){return a.changeSequence(o)}),e.ALo(109,"translate"),e.qZA()(),e.TgZ(110,"div",64)(111,"app-checkbox",65),e.NdJ("valueChange",function(o){return a.changeMandatory(o)}),e.qZA()(),e.YNc(112,Be,2,2,"div",66),e.TgZ(113,"div",64)(114,"app-checkbox",67),e.NdJ("valueChange",function(o){return a.changeEnabled(o)}),e.qZA()()(),e.TgZ(115,"p",68),e._uU(116),e.ALo(117,"translate"),e.qZA()(),e.TgZ(118,"div",69)(119,"app-button",70),e.NdJ("buttonOnClick",function(){return a.reportParametersAdd()}),e.ALo(120,"translate"),e.qZA(),e._UZ(121,"app-button",71),e.ALo(122,"translate"),e.qZA()()()()(),e.TgZ(123,"div",72)(124,"div",45)(125,"div",46)(126,"div",47)(127,"div",48),e._uU(128),e.ALo(129,"translate"),e.ALo(130,"translate"),e.qZA()(),e.TgZ(131,"div",49)(132,"div",7)(133,"div",50)(134,"app-dropdown-singleselect",73,52),e.NdJ("valueChange",function(o){return a.changeParameterNames(o)}),e.ALo(136,"translate"),e.qZA()(),e.TgZ(137,"div",50)(138,"app-input",74,75),e.NdJ("valueChange",function(o){return a.changeDisplayName(o)}),e.ALo(140,"translate"),e.qZA()(),e.TgZ(141,"div",50)(142,"app-dropdown-singleselect",76,77),e.NdJ("valueChange",function(o){return a.changeParameterTypes(o)}),e.ALo(144,"translate"),e.qZA()(),e.TgZ(145,"div",2)(146,"app-textarea",78,79),e.NdJ("valueChange",function(o){return a.changeParameterDescription(o)}),e.ALo(148,"translate"),e.qZA()(),e.YNc(149,He,4,5,"div",59),e.YNc(150,Ke,4,5,"div",59),e.YNc(151,$e,4,5,"div",59),e.YNc(152,ze,3,4,"div",59),e.YNc(153,We,3,5,"div",60),e.YNc(154,Xe,4,5,"div",59),e.YNc(155,et,4,6,"div",59),e.YNc(156,tt,4,5,"div",59),e.YNc(157,at,4,5,"div",59),e.YNc(158,it,4,6,"div",59),e.TgZ(159,"div",50)(160,"app-input",80),e.NdJ("valueChange",function(o){return a.changeValueLimit(o)}),e.ALo(161,"translate"),e.qZA()(),e.TgZ(162,"div",50)(163,"app-inputnumber",81,82),e.NdJ("valueChange",function(o){return a.changeSequence(o)}),e.ALo(165,"translate"),e.qZA()(),e.TgZ(166,"div",64)(167,"app-checkbox",83),e.NdJ("valueChange",function(o){return a.changeMandatory(o)}),e.qZA()(),e.YNc(168,rt,2,2,"div",66),e.TgZ(169,"div",64)(170,"app-checkbox",84),e.NdJ("valueChange",function(o){return a.changeEnabled(o)}),e.qZA()()(),e.TgZ(171,"p",68),e._uU(172),e.ALo(173,"translate"),e.qZA()(),e.TgZ(174,"div",69)(175,"app-button",85),e.NdJ("click",function(){return a.reportParametersUpdate()}),e.ALo(176,"translate"),e.qZA(),e._UZ(177,"app-button",71),e.ALo(178,"translate"),e.qZA()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,119,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.enterpriseName),e.xp6(3),e.s9C("label",e.lcZ(14,121,"REPORTS.REPORT_GROUP")),e.s9C("value",a.reportGroup),e.xp6(3),e.s9C("label",e.lcZ(18,123,"REPORTS.REPORT_NAME")),e.s9C("value",a.reportName),e.xp6(4),e.s9C("label",e.lcZ(22,125,"REPORTS.REPORT_CODE")),e.s9C("value",a.reportCode),e.Q6J("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(25,127,"COMMON_FIELDS.STATUS")),e.s9C("defaultValue",a.statusId),e.Q6J("options",a.statusOptions),e.xp6(3),e.s9C("label",e.lcZ(28,129,"REPORTS.REPORT_PATH")),e.s9C("value",a.reportPath),e.xp6(3),e.Q6J("options",a.schedulableOptions)("checked",a.isSchedulable),e.xp6(2),e.s9C("label",e.lcZ(34,131,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.description),e.Q6J("maxlength",240),e.xp6(5),e.hij(" ",e.lcZ(38,133,"REPORTS.REPORT_QUERY")," "),e.xp6(2),e.Q6J("ngModel",a.reportQuery),e.xp6(3),e.hij(" ",e.lcZ(43,135,a.error1)," "),e.xp6(3),e.s9C("label",e.lcZ(46,137,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(48,139,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(58,141,"REPORTS.PARAMETERS")),e.xp6(2),e.Q6J("isEmitMouseEvent",!0),e.xp6(1),e.Q6J("columns",a.parametersColumnHeaders)("value",a.parametersData)("rows",10)("lazy",!0)("totalRecords",a.listingVariables.totalRecords)("totalPages",a.listingVariables.totalpages)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("createdBy",a.createdBy)("lastUpdatedBy",a.lastUpdatedBy)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",a.creationDate)("lastUpdatedDate",a.lastUpdatedDate),e.xp6(7),e.AsE("",e.lcZ(73,143,"COMMON_FIELDS.PARAMETER")," - ",e.lcZ(74,145,"COMMON_BUTTONS.BUTTON_ADD"),""),e.xp6(6),e.s9C("label",e.lcZ(80,147,"REPORTS.PARAMETER_NAME")),e.s9C("defaultValue",a.parameterName),e.Q6J("options",a.parameterNameOptions),e.xp6(4),e.s9C("label",e.lcZ(84,149,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",a.displayName),e.xp6(4),e.s9C("label",e.lcZ(88,151,"COMMON_FIELDS.TYPE")),e.s9C("defaultValue",a.parameterType),e.Q6J("options",a.parameterTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(92,153,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.parameterDescription),e.Q6J("maxlength",240),e.xp6(3),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!1===a.disableSourceDisplayColumn&&"LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!0===a.disableSourceDisplayColumn&&"LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_TEXT"===a.parameterTypeName||""===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_NUMBER"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_EMAIL"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","DATE"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(2),e.s9C("label",e.lcZ(105,155,"REPORTS.VALUE_LIMIT")),e.s9C("value",a.valueLimit),e.xp6(3),e.s9C("label",e.lcZ(109,157,"COMMON_FIELDS.SEQUENCE")),e.s9C("value",a.paramSequence),e.Q6J("maxlength",2),e.xp6(4),e.Q6J("options",a.mandatoryOptions)("checked",a.paramValueReqd),e.xp6(1),e.Q6J("ngIf","DATE"===a.parameterTypeName),e.xp6(2),e.Q6J("options",a.enabledOptions)("checked",!0),e.xp6(2),e.hij(" ",e.lcZ(117,159,a.error)," "),e.xp6(3),e.s9C("label",e.lcZ(120,161,"COMMON_BUTTONS.BUTTON_ADD")),e.xp6(2),e.s9C("label",e.lcZ(122,163,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(129,165,"COMMON_FIELDS.PARAMETER")," - ",e.lcZ(130,167,"COMMON_BUTTONS.BUTTON_UPDATE"),""),e.xp6(6),e.s9C("label",e.lcZ(136,169,"REPORTS.PARAMETER_NAME")),e.s9C("defaultValue",a.parameterName),e.Q6J("options",a.parameterNameOptions),e.xp6(4),e.s9C("label",e.lcZ(140,171,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",a.displayName),e.xp6(4),e.s9C("label",e.lcZ(144,173,"COMMON_FIELDS.TYPE")),e.s9C("defaultValue",a.parameterTypeEdit),e.Q6J("options",a.parameterTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(148,175,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.parameterDescription),e.Q6J("maxlength",240),e.xp6(3),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!1===a.disableSourceDisplayColumn&&"LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!0===a.disableSourceDisplayColumn&&"LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_TEXT"===a.parameterTypeName||""===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_NUMBER"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_EMAIL"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","DATE"===a.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===a.parameterTypeName),e.xp6(2),e.s9C("label",e.lcZ(161,177,"REPORTS.VALUE_LIMIT")),e.s9C("value",a.valueLimit),e.xp6(3),e.s9C("label",e.lcZ(165,179,"COMMON_FIELDS.SEQUENCE")),e.s9C("value",a.paramSequence),e.Q6J("maxlength",2),e.xp6(4),e.Q6J("options",a.mandatoryOptions)("checked",a.paramValueReqd),e.xp6(1),e.Q6J("ngIf","DATE"===a.parameterType),e.xp6(2),e.Q6J("options",a.enabledOptions)("checked",a.enabledFlag),e.xp6(2),e.hij(" ",e.lcZ(173,181,a.error)," "),e.xp6(3),e.s9C("label",e.lcZ(176,183,"COMMON_BUTTONS.BUTTON_UPDATE")),e.xp6(2),e.s9C("label",e.lcZ(178,185,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[D.UQ,D.US,A.h4,A.jx,O.sg,O.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,v.iA,v.Ei,M.r,V.a,U.k,P.b,K.Q,Z.R,W.K,X.C,x.W,I.q,g.X$]})}return s})();class ot{description;enterprise;last_submission_report_path;parameters;report_code;report_group;report_name;report_query;report_status;schedulable_flag}var q=p(15861),nt=p(28168),lt=p(70057),pt=p(88425);const dt=["datatableComponent"];function ct(s,l){if(1&s&&(e.TgZ(0,"tr",38)(1,"td",39),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function mt(s,l){if(1&s&&e.YNc(0,ct,4,4,"tr",37),2&s){const t=e.oxw();e.Q6J("ngIf",t.parametersData&&0==t.parametersData.length)}}function ht(s,l){if(1&s&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&s){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function _t(s,l){if(1&s&&(e.TgZ(0,"tr"),e.YNc(1,ht,3,3,"th",40),e.qZA()),2&s){const t=l.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function gt(s,l){if(1&s&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&s){const t=l.$implicit,i=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",i),e.xp6(1),e.hij(" ",i[t.field]," ")}}function ft(s,l){if(1&s&&(e.TgZ(0,"tr"),e.YNc(1,gt,2,5,"td",41),e.qZA()),2&s){const t=l.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function bt(s,l){if(1&s&&(e.TgZ(0,"div",2)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",44)(6,"br"),e.qZA()),2&s){const t=l.$implicit,i=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",i[t.field],e.oJD)}}function Ct(s,l){if(1&s&&(e.TgZ(0,"tr")(1,"td")(2,"div",1),e.YNc(3,bt,7,4,"div",43),e.qZA()()()),2&s){const t=l.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}const Dt=[{path:"",data:{title:"Reports Defination"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[y.P],component:(()=>{class s extends S.O{actionSheetController;columnsheaders;loggerService;router;translateService;commonService;listingVariables;reportsdefinationService;route;datatableComponent;actions;enterpriseId;fabMobileactions;mobileRoutesArray=[];noDuplicates=void 0;reportsDefinationListData;reportsDefinationMobileListData;searchString;tableColumnheaders;dataJsonObj={};constructor(t,i,a,r,o,u,c,f,b){super(b,u),this.actionSheetController=t,this.columnsheaders=i,this.loggerService=a,this.router=r,this.translateService=o,this.commonService=u,this.listingVariables=c,this.reportsdefinationService=f,this.route=b,this.route.queryParams.subscribe(h=>{this.dataJsonObj.queryParamsObj={defaultView:h.defaultView,selectedMenuId:h.selectedMenuId,selectedSubMenuId:h.selectedSubMenuId}})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_DEFINITIONS,this.tableColumnheaders=this.columnsheaders.getReportsDefinitionColumnHeaders(),this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.REPORT_DEFINITIONS",value:"",showSubMenuDisplayName:!0}],this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.actions={EDIT:this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.EDIT),VIEW:this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.VIEW)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:n.gL.URL,redirectURL:"/admin/reportdefinitions/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.FILTERS)}getAllRecords(){try{const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.reportsdefinationService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,t,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(a=>{if(a.rows.length>0){this.reportsDefinationMobileListData&&this.reportsDefinationMobileListData.length>0||(this.reportsDefinationMobileListData=[]);for(let r=0;r<a.rows.length;r++){const o={url:`admin/reportdefinitions/${a.rows[r]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},u=o.queryParams&&Object.keys(o.queryParams).length>0?`${o.url}?${JSON.stringify(o.queryParams)}`:o.url;a.rows[r].report_name=`<a class="enable" id="report_name${a.rows[r]._id}" href=${u}>${a.rows[r].report_name}`,a.rows[r].last_submission_report_path=a.rows[r].last_submission_report_path,a.rows[r].report_group=this.lookupLanguageTranslations(a.rows[r].report_group.lookup_id),a.rows[r].report_status=this.lookupLanguageTranslations(a.rows[r].report_status.lookup_id),a.rows[r].enterprise.short_name='<a class="enable" id="enterprise.short_name'+a.rows[r]._id+'" href="enterprises/enterprises/'+a.rows[r].enterprise.enterprise_id+'/view/" >'+a.rows[r].enterprise.short_name,a.rows[r].secondLineDisplay=a.rows[r].report_group,a.rows[r].thirdLineDisplay=a.rows[r].report_path,this.reportsDefinationMobileListData=this.reportsDefinationMobileListData.filter(c=>c._id!==a.rows[r]._id),this.reportsDefinationMobileListData.push(a.rows[r])}a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.reportsDefinationListData=this.reportsDefinationListData.concat(a.rows)):this.reportsDefinationListData=a.rows}else this.reportsDefinationMobileListData=[],this.reportsDefinationListData=[]},a=>{this.loggerService.setLoggerError(this.constructor.name,"getReportsDefinationListPagination",a)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getReportsDefinationListPagination",t)}}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.reportsDefinationMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}onActionClicked(t){t.action===n.A0.EDIT?(this.router.navigate(["admin/reportdefinitions/"+t.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("reports")):t.action===n.A0.VIEW&&this.commonService.redirectToUrl(["..",t.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}mobileEventAction(t){this.mobileRoutesArray=[],this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.EDIT)&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["admin/reportdefinitions/"+t._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("reports")}}),this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.VIEW)&&this.mobileRoutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.presentActionSheet(t)}presentActionSheet(t){var i=this;return(0,q.Z)(function*(){yield(yield i.actionSheetController.create({cssClass:"actionsheet",buttons:i.mobileRoutesArray})).present()})()}getRedirectView(t){this.roleRightsValidationByPage(n.hf.REPORT_DEFINITIONS,n.AM.ACTIONS,n.In.VIEW)&&this.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}create(){this.router.navigate(["admin/reportdefinitions/create"])}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t||(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(i){return new(i||s)(e.Y36(lt.BX),e.Y36(C.Y),e.Y36(R.m),e.Y36(m.F0),e.Y36(g.sK),e.Y36(E.v),e.Y36(T.v),e.Y36(_.s),e.Y36(m.gz))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-reportdefinitions-list"]],viewQuery:function(i,a){if(1&i&&e.Gf(dt,5),2&i){let r;e.iGM(r=e.CRH())&&(a.datatableComponent=r.first)}},features:[e._Bn([C.Y,_.s,T.v]),e.qOj],decls:9,vars:26,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",3,"header","actions","totalRecords","listingVariables","paginator","totalPages","data","mobileListData","expand","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","redirectionEvent","loadPageData","itemClickEvent"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(o){return a.onHeaderItemClick(o)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(o){return a.onActionClicked(o)})("redirectionEvent",function(o){return a.mobileEventAction(o)})("loadPageData",function(o){return a.loadPageData(o)})("itemClickEvent",function(o){return a.getRedirectView(o)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(o){return a.onPageLevelActionClicked(o)}),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.tableColumnheaders)("actions",a.actions)("totalRecords",a.listingVariables.totalRecords)("listingVariables",a.listingVariables)("paginator",!0)("totalPages",a.listingVariables.totalpages)("data",a.reportsDefinationListData)("mobileListData",a.reportsDefinationMobileListData)("expand",!1)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[nt.n,I.q,pt.y]})}return s})(),data:{object_type:n.hf.REPORTS_DEFINITION,title:"ReportsDefinition Listing",responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.REPORTS_DEFINITIONS+"."+n.Iu.ENABLED,pageName:n.hf.REPORT_DEFINITIONS}},{path:":id/view",canActivate:[y.P],component:(()=>{class s extends S.O{columnsheaders;formBuilder;loggerService;navigationService;router;translateService;commonService;listingVariables;reportsdefinationService;route;createdBy;creationDate;description;dataJsonObj={};enterpriseName;isSchedulable;lastUpdatedBy;lastUpdatedDate;pageTitle;parametersColumnHeaders;parametersData;recordId;reportCode;reportGroup;reportName;reportPath;reportQuery;schedulableOptions;status;constructor(t,i,a,r,o,u,c,f,b,h){super(h,c),this.columnsheaders=t,this.formBuilder=i,this.loggerService=a,this.navigationService=r,this.router=o,this.translateService=u,this.commonService=c,this.listingVariables=f,this.reportsdefinationService=b,this.route=h,this.route.queryParams.subscribe(N=>{this.dataJsonObj.queryParamsObj={defaultView:N.defaultView,selectedMenuId:N.selectedMenuId,selectedSubMenuId:N.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.REPORT_DEFINITIONS,document.getElementsByTagName("body"),this.parametersColumnHeaders=this.columnsheaders.getReportsDefinitionParameterColumnHeaders(),this.schedulableOptions=[{value:"",displayname:this.translateService.instant("REPORTS.SCHEDULABLE"),key:"checkbox"}],this.route.params.subscribe(a=>{this.recordId=a.id,this.getRecordById(),this.getReportParametersList()}),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(n.hf.REPORTS_DEFINITION,n.AM.ACTIONS,n.In.RECORD_HISTORY),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(n.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=n.hf.REPORTS_DEFINITION,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getRecordById(){try{this.reportsdefinationService.get(this.recordId).subscribe(t=>{this.reportName=t.report_name,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.REPORT_DEFINITIONS",value:this.reportName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.reportCode=t.report_code,this.reportGroup=this.lookupLanguageTranslations(t.report_group.lookup_id),this.enterpriseName=t.enterprise.short_name,this.description=t.description,this.status=this.lookupLanguageTranslations(t.report_status.lookup_id),this.reportPath=t.last_submission_report_path,this.reportQuery=t.report_query,this.lastUpdatedDate=t.updatedAt,this.lastUpdatedBy=t.updated_by,this.createdBy=t.created_by,this.creationDate=t.createdAt,this.isSchedulable=t.schedulable_flag},t=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getVigetRecordByIdewDetails",t)}}getDynamicJson(t){var i=this;return(0,q.Z)(function*(){for(let a of t)i.dataJsonObj[a.storingFieldName]=yield i.commonService.getDynamicJson(i.dataJsonObj.enterpriseId,a.folderName,a.jsonType);i.dataJsonObj.selectedObj={},i.dataJsonObj.selectedObj.recordId=i.recordId,i.dataJsonObj.selectedObj.pageObj=i.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===i.dataJsonObj.selectedPage),i.dataJsonObj.selectedObjEnabled=!0})()}getReportParametersList(){try{this.reportsdefinationService.reportParametersList(this.recordId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage).then(t=>{for(let i=0;i<t.rows.length;i++)t.rows[i].parameter_type_value=this.lookupLanguageTranslations(t.rows[i].parameter_type.lookup_id),t.rows[i].param_data_source_tableName=t.rows[i].param_data_source_table?this.lookupLanguageTranslations(t.rows[i].param_data_source_table.lookup_id):"",t.rows[i].is_enabled_value=!0===t.rows[i].is_enabled?"Yes":"No",t.rows[i].is_mandatory_value=!0===t.rows[i].is_mandatory?"Yes":"No",t.rows[i].auto_increment_date_paramName=!0===t.rows[i].auto_increment_date_param?"Yes":"No";this.parametersData=t.rows,this.listingVariables.totalRecords=t.count,this.listingVariables.totalpages=t.pages}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getReportparametersList",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getReportparametersList",t)}}closeBtn(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(i){return new(i||s)(e.Y36(C.Y),e.Y36(d.qu),e.Y36(R.m),e.Y36(L.f),e.Y36(m.F0),e.Y36(g.sK),e.Y36(E.v),e.Y36(T.v),e.Y36(_.s),e.Y36(m.gz))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-reportdefinitions-view"]],features:[e._Bn([_.s,T.v,C.Y]),e.qOj],decls:56,vars:61,consts:[[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","reportdefinition-view-enterprise",3,"label","value"],["disabled","true","id","reportdefinition-view-report-group",3,"label","value"],[1,"col-md-4"],["id","reportdefinition-view-report-name","disabled","true",3,"label","value"],["id","reportdefinition-view-report-code","disabled","true",3,"label","value"],["id","reportdefinition-view-status","disabled","true",3,"label","value"],["id","reportdefinition-view-report-path","disabled","true",3,"label","value"],[1,"col-md-4","d-flex","align-items-center"],["label","","id","reportdefinition-view-schedulable-flag","disabled","true","mandatory","false",3,"options","checked"],["id","reportdefinition-view-description","disabled","true",3,"label","defaultvalue"],[1,"col-md-12","textarea-block"],["for","reportQuery",1,"text-label"],["name","message","rows","12","cols","130","disabled","true","id","reportdefinition-view-report-query",1,"form-control",3,"ngModel","ngModelChange"],["message","ngModel"],[1,"col-md-12","text-end","mt-2","mb-2"],["id","reportdefinition-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","paramsId",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","totalRecords","totalPages","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-pageheader",5),e.qZA(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8),e._UZ(9,"app-input",9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-input",10),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11),e._UZ(15,"app-input",12),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-input",13),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",11),e._UZ(21,"app-input",14),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",11),e._UZ(24,"app-input",15),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",16),e._UZ(27,"app-checkbox",17),e.qZA(),e.TgZ(28,"div",2),e._UZ(29,"app-textarea",18),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div",19)(32,"label",20),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"textarea",21,22),e.NdJ("ngModelChange",function(o){return a.reportQuery=o}),e.qZA()(),e.TgZ(37,"div",23)(38,"app-button",24),e.NdJ("buttonOnClick",function(){return a.closeBtn()}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",25)(41,"div",2)(42,"div",26)(43,"div",27)(44,"p-accordion",28)(45,"p-accordionTab",29)(46,"p-header",30)(47,"span"),e._uU(48),e.ALo(49,"translate"),e.qZA()(),e.TgZ(50,"p-table",31),e.YNc(51,mt,1,1,"ng-template",32),e.YNc(52,_t,2,1,"ng-template",33),e.YNc(53,ft,2,1,"ng-template",34),e.YNc(54,Ct,4,2,"ng-template",35),e.qZA()(),e._UZ(55,"app-recordhistory",36),e.qZA()()()()()()()()()()),2&i&&(e.xp6(5),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(10,41,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.enterpriseName),e.xp6(3),e.s9C("label",e.lcZ(13,43,"REPORTS.REPORT_GROUP")),e.s9C("value",a.reportGroup),e.xp6(3),e.s9C("label",e.lcZ(16,45,"REPORTS.REPORT_NAME")),e.s9C("value",a.reportName),e.xp6(3),e.s9C("label",e.lcZ(19,47,"REPORTS.REPORT_CODE")),e.s9C("value",a.reportCode),e.xp6(3),e.s9C("label",e.lcZ(22,49,"COMMON_FIELDS.STATUS")),e.s9C("value",a.status),e.xp6(3),e.s9C("label",e.lcZ(25,51,"REPORTS.REPORT_PATH")),e.s9C("value",a.reportPath),e.xp6(3),e.Q6J("options",a.schedulableOptions)("checked",a.isSchedulable),e.xp6(2),e.s9C("label",e.lcZ(30,53,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.description),e.xp6(4),e.hij(" ",e.lcZ(34,55,"REPORTS.REPORT_QUERY")," "),e.xp6(2),e.Q6J("ngModel",a.reportQuery),e.xp6(3),e.s9C("label",e.lcZ(39,57,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(49,59,"REPORTS.PARAMETERS")),e.xp6(2),e.Q6J("columns",a.parametersColumnHeaders)("value",a.parametersData)("rows",10)("lazy",!0)("totalRecords",a.listingVariables.totalRecords)("totalPages",a.listingVariables.totalpages)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("createdBy",a.createdBy)("lastUpdatedBy",a.lastUpdatedBy)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",a.creationDate)("lastUpdatedDate",a.lastUpdatedDate))},dependencies:[D.UQ,D.US,A.h4,A.jx,O.sg,O.O5,d.Fj,d.JJ,d.On,v.iA,v.Ei,M.r,V.a,P.b,Z.R,x.W,I.q,g.X$]})}return s})(),data:{object_type:n.hf.REPORTS_DEFINITION,title:"ReportsDefinition View",responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.REPORTS_DEFINITIONS+"."+n.In.VIEW,pageName:n.hf.REPORT_DEFINITIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.EDIT}},{path:"create",canActivate:[y.P],component:B,data:{object_type:n.hf.REPORTS_DEFINITION,title:"ReportsDefinition Create",responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.REPORTS_DEFINITIONS+"."+n.In.CREATE,pageName:n.hf.REPORT_DEFINITIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/edit",canActivate:[y.P],component:st,data:{object_type:n.hf.REPORTS_DEFINITION,title:"ReportsDefinition Edit",responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.REPORTS_DEFINITIONS+"."+n.In.EDIT,pageName:n.hf.REPORT_DEFINITIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.EDIT}}]}];let Ot=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[m.Bz.forChild(Dt),m.Bz]})}return s})();var vt=p(65673);let Nt=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[D.fx,O.ez,d.u5,d.UX,Ot,v.U$,g.aw,vt.Q]})}return s})()}}]);