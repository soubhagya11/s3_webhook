"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9181],{39181:(z,p,r)=>{r.r(p),r.d(p,{FGLAcctTrxModule:()=>k});var b=r(36895),u=r(62510),L=r(11210),l=r(32236),T=r(15861),a=r(94650),S=r(42863),O=r(30578),v=r(28168),J=r(27601),N=r(15439),M=r(71568),I=r(42786),f=r(90313),w=r(75875);let D=(()=>{class o{authService;constructor(t){this.authService=t}getAll(t,i,e,s,n,c,d,g,m){const h=g||"",y=c?"&condition="+c:"",A=f.L.isEmpty(m)?"":"&advSearchString="+JSON.stringify(m);return f.L.isEmpty(y)?this.authService.getApiCall("api/v1/financeglaccttrx?&enterprise.enterprise_id="+t+"&skip="+i+"&limit="+e+"&sort="+s+"&type=list&search="+n+d+h+A,!0):this.authService.getApiCall("api/v1/financeglaccttrx?&enterprise.enterprise_id="+t+"&skip="+i+"&limit="+e+"&sort="+s+"&type=list&search="+n+y+d+h+A,!0)}static \u0275fac=function(i){return new(i||o)(a.LFG(w.e))};static \u0275prov=a.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var E=r(47561),j=r(54463),F=r(70057),P=r(37415),V=r(88425);const R=["datatableComponent"],B=[{path:"",data:{title:"financeglaccounttrx/list"},children:[{path:"",canActivate:[L.P],component:(()=>{class o extends E.O{ColumnHeader;translateService;listingVariables;route;commonService;fglAcctTrxService;actionSheetController;router;loggerService;datatablecomponent;searchValueChange=new a.vpe;object_type;show=!0;header;searchString;statusObj;status;enterpriseId;fglaccttrxMobileListData;fglaccttrxListData;datatableComponent;noDuplicates=void 0;mobileroutesArray=[];dataJsonObj={};constructor(t,i,e,s,n,c,d,g,m){super(s,n),this.ColumnHeader=t,this.translateService=i,this.listingVariables=e,this.route=s,this.commonService=n,this.fglAcctTrxService=c,this.actionSheetController=d,this.router=g,this.loggerService=m,this.route.queryParams.subscribe(h=>{this.dataJsonObj.queryParamsObj={defaultView:h.default_view,selectedMenuId:h.selectedMenuId,selectedSubMenuId:h.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=l.hf.FINANCE_GL_ACCOUNT_TRX,this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:l.hf,pageSettingEnum:l.AM,pageSettingFieldsEnum:l.In},this.dataJsonObj.advancedSearchObj={},JSON.parse(localStorage.getItem(l.BU.MENU_CLICK_ITEM)),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.FINANCE_GLACCTTRX",value:"",showSubMenuDisplayName:!0}],this.commonService.trackView(l.sn.GLACCTTRX_LIST),document.getElementsByTagName("body"),this.header=this.ColumnHeader.getGLAcctTrxColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[]}getAllRecords(){try{const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.status=this.statusObj,this.fglaccttrxMobileListData=[],this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE);const i=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.fglAcctTrxService.getAll(this.enterpriseId,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.status,t,i,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(e=>{if(this.hideSpinner(),e.rows.length>0){this.fglaccttrxMobileListData&&this.fglaccttrxMobileListData.length>0||(this.fglaccttrxMobileListData=[]);for(let s=0;s<e.rows.length;s++){e.rows[s].page_name="GL ACCOUNT TRANSACTIONS";const n={url:`finance/financejournalentries/${e.rows[s]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},c=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;e.rows[s].je_trx_num=`<a class="enable" id="journal_entries${e.rows[s]._id}" href=${c}>${e.rows[s].je_trx_num}`,e.rows[s].debit_amount=e.rows[s].debit_amount?e.rows[s].debit_amount.toLocaleString(void 0,{minimumFractionDigits:2}):"0.00",e.rows[s].credit_amount=e.rows[s].credit_amount?e.rows[s].credit_amount.toLocaleString(void 0,{minimumFractionDigits:2}):"0.00",e.rows[s].enterprise_short_name='<a class="enable" id="enterprise.short_name'+e.rows[s]._id+'"  href="enterprises/enterprises/'+e.rows[s].enterprise.enterprise_id+'/view" >'+e.rows[s].enterprise.short_name,e.rows[s].je_date=N(e.rows[s].je_date).format("DD-MMM-YYYY"),this.fglaccttrxMobileListData=this.fglaccttrxMobileListData.filter(d=>d._id!==e.rows[s]._id),this.fglaccttrxMobileListData.push(e.rows[s])}e.totalCount&&(this.listingVariables.totalRecords=e.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=e.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.fglaccttrxListData=this.fglaccttrxListData.concat(e.rows)):this.fglaccttrxListData=e.rows}else this.fglaccttrxListData=[],this.fglaccttrxMobileListData=[]})}catch(t){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getjournalentriesList",t)}}getSearchResult(t){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(t)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",i)}}searchClose(){try{this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"searchClose",t)}}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.fglaccttrxMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}toggle(){this.show=!this.show}statusData(t){try{this.statusObj=t.value,this.getAllRecords()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"statusData",i)}}mobileEventAction(t){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(l.hf.FINANCE_GLACCT_TRX,l.AM.ACTIONS,l.In.VIEW)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.presentActionSheet(t)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",i)}}presentActionSheet(t){var i=this;return(0,T.Z)(function*(){try{yield(yield i.actionSheetController.create({cssClass:"actionsheet",buttons:i.mobileroutesArray})).present()}catch(e){i.loggerService.setLoggerError(i.constructor.name,"presentActionSheet",e)}})()}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(i){return new(i||o)(a.Y36(S.Y),a.Y36(j.sK),a.Y36(O.v),a.Y36(u.gz),a.Y36(M.v),a.Y36(D),a.Y36(F.BX),a.Y36(u.F0),a.Y36(I.m))};static \u0275cmp=a.Xpm({type:o,selectors:[["app-f-glaccttrx"]],viewQuery:function(i,e){if(1&i&&a.Gf(R,5),2&i){let s;a.iGM(s=a.CRH())&&(e.datatablecomponent=s.first)}},outputs:{searchValueChange:"searchValueChange"},features:[a._Bn([O.v,S.Y,J.s,v.n]),a.qOj],decls:9,vars:29,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["colkey","_id","id","tagid",3,"header","totalRecords","totalPages","paginator","mobileListData","data","expand","statsShow","showRights","statsSearch","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(i,e){1&i&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),a.NdJ("headerItemClick",function(n){return e.onHeaderItemClick(n)}),a.qZA()(),a.TgZ(4,"div",4)(5,"app-datatable",5,6),a.NdJ("redirectionEvent",function(n){return e.mobileEventAction(n)})("changeStats",function(n){return e.statusData(n)})("loadPageData",function(n){return e.loadPageData(n)}),a.qZA(),a.TgZ(7,"div",7)(8,"app-page-actions",8),a.NdJ("selectedAction",function(n){return e.onPageLevelActionClicked(n)}),a.qZA()()()()()),2&i&&(a.xp6(3),a.Q6J("pageName",e.dataJsonObj.pageName)("defaultView",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",e.dataJsonObj.pageActionsList)("pageTitle",e.dataJsonObj.pageTitle)("selectedMenuId",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),a.xp6(2),a.Q6J("header",e.header)("totalRecords",e.listingVariables.totalRecords)("totalPages",e.listingVariables.totalpages)("paginator",!0)("mobileListData",e.fglaccttrxMobileListData)("data",e.fglaccttrxListData)("expand",!0)("statsShow",e.show)("showRights",e.roleRightsValidationByPage(e.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.FINANCE_GLACCT_TRX,e.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,e.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",e.searchString)("listingVariables",e.listingVariables)("selectedDisplayViewType",e.dataJsonObj.selectedDisplayView)("selectedFilterType",e.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",e.dataJsonObj.selectedAdvancedSearchObj)("pageName",e.dataJsonObj.pageName)("selectedMenuId",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",e.dataJsonObj.showSpinner)("selectedSubMenuId",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.selectedSubMenuId),a.xp6(3),a.Q6J("isFabDisplay",!0)("actionsList",e.dataJsonObj.pageActionsList))},dependencies:[v.n,P.q,V.y]})}return o})(),data:{object_type:l.hf.FINANCE_GLACCT_TRX,title:"",responsibilityParam:l.bP.MENUS+"."+l.w1.FINANCE+"."+l.bP.SUBMENUS+"."+l.w1.FINANCE_GL_ACCT_TRX+"."+l.Iu.ENABLED,pageName:l.hf.FINANCE_GL_ACCOUNT_TRX}}]}];let U=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=a.oAB({type:o});static \u0275inj=a.cJS({imports:[u.Bz.forChild(B),u.Bz]})}return o})();var C=r(24006),Y=r(93144),x=r(32174),X=r(65673),H=r(32137);let k=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=a.oAB({type:o});static \u0275inj=a.cJS({imports:[U,b.ez,b.ez,j.aw,C.u5,C.UX,Y.U$,x.fx,X.Q,H.D]})}return o})()}}]);