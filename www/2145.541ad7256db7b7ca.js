"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2145],{82145:(w,h,l)=>{l.r(h),l.d(h,{AppreleaseversionModule:()=>P});var c=l(36895),g=l(24006),p=l(54463),u=l(32174),b=l(65673),C=l(56709),m=l(62510),O=l(15861),_=l(42786),d=l(32236),E=l(71568),T=l(75875),e=l(94650);let x=(()=>{class o{authService;userToken=localStorage.getItem(d.BU.TOKEN);constructor(a){this.authService=a}appversionUpdate(a,t){return new Promise((n,s)=>{this.authService.putApiCall("api/v1/appversion/?enterpriseId="+t,a).subscribe(i=>{n(i)},i=>{s(i)})})}static \u0275fac=function(t){return new(t||o)(e.LFG(T.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var f=l(27601),S=l(46448),M=l(10805),J=l(2387),A=l(56368),I=l(93837),j=l(37415);const N=["appVertion"],D=["versionInput"],V=["storeLinkInput"],y=["headerMaintenanceHeaderInput"],Z=["maintenanceMessageInput"],L=["updateHeaderInput"],U=["updateMessageInput"];function H(o,v){if(1&o){const a=e.EpF();e.TgZ(0,"p-accordionTab",23)(1,"p-header",24)(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"div",25)(5,"div",10)(6,"div",12)(7,"app-input",26,27),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeInputFieldValue(n,"version",r.dataJsonObj.releaseVersionData[i.name]))}),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div",12)(11,"app-input",28,29),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeInputFieldValue(n,"storeLink",r.dataJsonObj.releaseVersionData[i.name]))}),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",12)(15,"app-input",30,31),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeInputFieldValue(n,"maintenanceHeader",r.dataJsonObj.releaseVersionData[i.name]))}),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",12)(19,"app-input",32,33),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeInputFieldValue(n,"maintenanceMessage",r.dataJsonObj.releaseVersionData[i.name]))}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",12)(23,"app-input",34,35),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeInputFieldValue(n,"updateHeader",r.dataJsonObj.releaseVersionData[i.name]))}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",12)(27,"app-input",36,37),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeInputFieldValue(n,"updateMessage",r.dataJsonObj.releaseVersionData[i.name]))}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",38)(31,"app-checkbox",39),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeCheckBoxValue(n,"forceClearStorage",r.dataJsonObj.releaseVersionData[i.name]))}),e.qZA()(),e.TgZ(32,"div",38)(33,"app-checkbox",40),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeCheckBoxValue(n,"enableMaintenanceMode",r.dataJsonObj.releaseVersionData[i.name]))}),e.qZA()(),e.TgZ(34,"div",38)(35,"app-checkbox",41),e.NdJ("valueChange",function(n){const i=e.CHM(a).$implicit,r=e.oxw(2);return e.KtG(r.changeCheckBoxValue(n,"enableUpdateMode",r.dataJsonObj.releaseVersionData[i.name]))}),e.qZA()()()()()}if(2&o){const a=v.$implicit,t=e.oxw(2);e.Q6J("selected",!0),e.xp6(3),e.Oqu(a.displayName),e.xp6(4),e.s9C("label",e.lcZ(9,31,"COMMON_FIELDS.VERSION")),e.s9C("value",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].version),e.Q6J("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(13,33,"COMMON_FIELDS.STORE_LINK")),e.s9C("value",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].storeLink),e.Q6J("minlength",3)("maxlength",300),e.xp6(4),e.s9C("label",e.lcZ(17,35,"COMMON_FIELDS.MAINTENANCE_HEADER")),e.s9C("value",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].maintenanceHeader),e.Q6J("minlength",3)("maxlength",40),e.xp6(4),e.s9C("label",e.lcZ(21,37,"COMMON_FIELDS.MAINTENANCE_MESSAGE")),e.s9C("value",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].maintenanceMessage),e.Q6J("minlength",3)("maxlength",300),e.xp6(4),e.s9C("label",e.lcZ(25,39,"COMMON_FIELDS.UPDATE_HEADER")),e.s9C("value",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].updateHeader),e.Q6J("minlength",3)("maxlength",300),e.xp6(4),e.s9C("label",e.lcZ(29,41,"COMMON_FIELDS.UPDATE_MESSAGE")),e.s9C("value",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].updateMessage),e.Q6J("minlength",3)("maxlength",300),e.xp6(4),e.Q6J("options",t.dataJsonObj.forceClearStorage)("checked",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].forceClearStorage),e.xp6(2),e.Q6J("options",t.dataJsonObj.enableMaintenanceMode)("checked",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].enableMaintenanceMode),e.xp6(2),e.Q6J("options",t.dataJsonObj.enableUpdateMode)("checked",null==t.dataJsonObj.releaseVersionData[a.name]?null:t.dataJsonObj.releaseVersionData[a.name].enableUpdateMode)}}function R(o,v){if(1&o){const a=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),e._UZ(4,"app-input",13,14),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",12)(8,"app-input",15,16),e.NdJ("valueChange",function(n){e.CHM(a);const s=e.oxw();return e.KtG(s.changeInputFieldValue(n,"appVersion",s.dataJsonObj.releaseVersionData))}),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",17)(12,"app-button",18),e.NdJ("buttonOnClick",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.submitBtn())}),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"app-button",19),e.NdJ("buttonOnClick",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.cancelBtn())}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",20),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"p-accordion",21),e.YNc(20,H,36,43,"p-accordionTab",22),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(4),e.s9C("label",e.lcZ(6,12,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.dataJsonObj.enterpriseName),e.Q6J("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(10,14,"COMMON_FIELDS.VERSION")),e.s9C("value",null==a.dataJsonObj.releaseVersionData?null:a.dataJsonObj.releaseVersionData.appVersion),e.Q6J("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(13,16,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(15,18,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(18,20,a.error)," "),e.xp6(2),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngForOf",a.dataJsonObj.deviceTypes)}}function B(o,v){if(1&o&&(e.TgZ(0,"div",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"COMMON_VALIDATION_MESSAGES.NOT_AUTHORIZED_FOR_THE_ENTERPRISE")," ",null==a.dataJsonObj.selectedEnterpriseObj?null:a.dataJsonObj.selectedEnterpriseObj.short_name," ")}}const F=[{path:"",data:{title:"Release Version"},children:[{path:"",component:(()=>{class o{apiEndPointUrl;translateService;loggerService;releaseverionService;uiUtils;navigationService;router;commonService;appVertion;versionInput;storeLinkInput;headerMaintenanceHeaderInput;maintenanceMessageInput;updateHeaderInput;updateMessageInput;dataJsonObj={};disableSubmitBtn;errorObj={};constructor(a,t,n,s,i,r,k,Q){this.apiEndPointUrl=a,this.translateService=t,this.loggerService=n,this.releaseverionService=s,this.uiUtils=i,this.navigationService=r,this.router=k,this.commonService=Q}ngOnInit(){this.dataJsonObj.pageName=d.hf.APP_RELEASE_VERSION,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.APP_RELEASE_VERSION",value:"",showSubMenuDisplayName:!1}];const a=[d.ox.SUPER_ADMIN,d.ox.SUB_ADMIN,d.ox.TECH_HELP];this.dataJsonObj.selectedUserTypeObj=localStorage.getItem(d.BU.SELECTED_USER_TYPE_OBJ)?JSON.parse(localStorage.getItem(d.BU.SELECTED_USER_TYPE_OBJ)):{},this.dataJsonObj.selectedEnterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE),this.dataJsonObj.currentPageName=d.hf.APP_RELEASE_VERSION,this.dataJsonObj.selectedEnterpriseObj=this.commonService.getSelcetedEnterpriseObj(),-1!==a.indexOf(this.dataJsonObj.selectedUserTypeObj?.user_type_name)?(this.dataJsonObj.isAuthorized=!0,this.initializeComponent()):this.dataJsonObj.isAuthorized=!1}initializeComponent(){this.dataJsonObj.enterpriseName=localStorage.getItem(d.BU.SELECTED_ENTERPRISE_NAME),this.dataJsonObj.deviceTypes=[{name:"ios",displayName:"iOS"},{name:"android",displayName:"Android"}],this.initializeVersionObj(),this.disableSubmitBtn=!1,this.dataJsonObj.forceClearStorage=[{value:!1,displayname:this.translateService.instant("COMMON_FIELDS.FORCE_CLEAR_STORAGE"),key:"checkbox1"}],this.dataJsonObj.enableMaintenanceMode=[{value:!1,displayname:this.translateService.instant("COMMON_FIELDS.ENABLE_MAINTENCE_MODE"),key:"checkbox2"}],this.dataJsonObj.enableUpdateMode=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLE_UPDATE_MODE"),key:"checkbox3"}],this.getVersionData()}initializeVersionObj(){this.dataJsonObj.releaseVersionData={};for(let a of this.dataJsonObj.deviceTypes)this.dataJsonObj.releaseVersionData[a.name]={}}getVersionData(){var a=this;return(0,O.Z)(function*(){try{a.dataJsonObj.selectedEnterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE);const t=yield a.commonService.getDynamicJsonByPath(`assets/enterprises/${a.dataJsonObj.selectedEnterpriseId}/`,"app_version.json",!0);0!==t.length&&t.ios&&t.android?a.dataJsonObj.releaseVersionData=t:a.initializeVersionObj()}catch(t){a.loggerService.setLoggerError(a.constructor.name,"getVersionData",t)}})()}changeCheckBoxValue(a,t,n){try{n[t]=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBoxValue",s)}}changeInputFieldValue(a,t,n){try{n[t]=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeInputFieldValue",s)}}submitBtn(){try{this.appVertion.isValid()&&this.fieldValidations([this.versionInput,this.storeLinkInput,this.headerMaintenanceHeaderInput,this.maintenanceMessageInput,this.updateHeaderInput,this.updateMessageInput])&&this.releaseverionService.appversionUpdate(this.dataJsonObj.releaseVersionData,this.dataJsonObj.selectedEnterpriseId).then(a=>{this.dataJsonObj.isSubmitButtonDisabled=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},a=>{this.commonErrorCodes(JSON.parse(a))})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"submitBtn",a)}}fieldValidations(a){let t=!0;for(let n of a){const s=n.toArray();for(let i of s)i.isValid()||(t=!1)}return t}commonErrorCodes(a){const t=JSON.parse(a[d.BU.STATUS]);409===t&&(this.errorObj.error="COMMON_STATUS_CODES."+t)}cancelBtn(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(t){return new(t||o)(e.Y36("apiEndPoint"),e.Y36(p.sK),e.Y36(_.m),e.Y36(x),e.Y36(f.s),e.Y36(S.f),e.Y36(m.F0),e.Y36(E.v))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-appreleaseversion"]],viewQuery:function(t,n){if(1&t&&(e.Gf(N,5),e.Gf(D,5),e.Gf(V,5),e.Gf(y,5),e.Gf(Z,5),e.Gf(L,5),e.Gf(U,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.appVertion=s.first),e.iGM(s=e.CRH())&&(n.versionInput=s),e.iGM(s=e.CRH())&&(n.storeLinkInput=s),e.iGM(s=e.CRH())&&(n.headerMaintenanceHeaderInput=s),e.iGM(s=e.CRH())&&(n.maintenanceMessageInput=s),e.iGM(s=e.CRH())&&(n.updateHeaderInput=s),e.iGM(s=e.CRH())&&(n.updateMessageInput=s)}},decls:9,vars:6,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["class","card-body","id","extraPaddingBottomID",4,"ngIf"],["class","text-center text-body text-ios-appwhite fs-14",4,"ngIf"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"row"],[1,"col-md-3"],["disabled","true","mandatory","false","id","enter-prise",3,"label","value","maxlength"],["enterprise",""],["mandatory","true","disabled","false","id","release-version",3,"label","value","maxlength","valueChange"],["appVertion",""],[1,"col-md-6","text-end","mt-2"],["id","vertion-create-submit","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","disabled","buttonOnClick"],["id","vertion-create-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[3,"multiple"],["id","homeScreenID",3,"selected",4,"ngFor","ngForOf"],["id","homeScreenID",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],[1,"card-body"],["mandatory","true","disabled","false","id","release-ios_version",3,"label","value","maxlength","valueChange"],["versionInput",""],["autoCaseFlag","false","disabled","false","mandatory","true","id","release-iosurl",3,"label","minlength","maxlength","value","valueChange"],["storeLinkInput",""],["autoCaseFlag","false","disabled","false","mandatory","true","id","release-header_message",3,"label","minlength","maxlength","value","valueChange"],["headerMaintenanceHeaderInput",""],["autoCaseFlag","false","disabled","false","mandatory","true","id","release-ios_message",3,"label","minlength","maxlength","value","valueChange"],["maintenanceMessageInput",""],["autoCaseFlag","false","disabled","false","mandatory","true","id","release-ios-updateHeader",3,"label","minlength","maxlength","value","valueChange"],["updateHeaderInput",""],["autoCaseFlag","false","disabled","false","mandatory","true","id","release-ios-updateMessage",3,"label","minlength","maxlength","value","valueChange"],["updateMessageInput",""],[1,"col-md-2","d-flex","align-items-center"],["label","","mandatory","true","disabled","false","id","forceClearStorage-checkboxoptions",3,"options","checked","valueChange"],["label","","mandatory","true","disabled","false","id","enableMaintenanceMode-checkboxoptions",3,"options","checked","valueChange"],["label","","mandatory","true","disabled","false","id","enableUpdateMode-checkboxoptions",3,"options","checked","valueChange"],[1,"text-center","text-body","text-ios-appwhite","fs-14"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.YNc(7,R,21,22,"div",7),e.YNc(8,B,3,4,"div",8),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("pageName",n.dataJsonObj.pageName)("pageTitle",n.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(1),e.Q6J("ngIf",n.dataJsonObj.isAuthorized),e.xp6(1),e.Q6J("ngIf",!n.dataJsonObj.isAuthorized))},dependencies:[c.sg,c.O5,u.UQ,u.US,M.h4,J.r,A.a,I.b,j.q,p.X$]})}return o})()}]}];let G=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[m.Bz.forChild(F),m.Bz]})}return o})(),P=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[G,c.ez,p.aw,g.u5,g.UX,u.fx,b.Q,C.p9]})}return o})()}}]);