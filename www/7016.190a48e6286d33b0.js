"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7016],{77016:(Ct,L,u)=>{u.r(L),u.d(L,{AttributeDefinitionModule:()=>At});var E=u(32174),_=u(15861),m=u(53887),l=u(32236),j=u(42863),g=u(71568),e=u(94650),T=u(47561),B=u(28168),R=u(30578),v=u(42786),F=u(34942),P=u(70057),b=u(62510),h=u(54463),A=u(27601),C=u(37415),G=u(88425);const q=["datatableComponent"];let Q=(()=>{class s extends T.O{actionSheetController;attributeDefinitionService;loggerService;router;translateService;activatedRoute;columnsHeaders;commonService;listingVariables;uiUtils;datatableComponent;searchValueChange=new e.vpe;actionBoolean;actionSheet;actionStatus;actions;attributeDefMobileListData;attributeDefnsList=[];attributeDefnsStatsObj=new Y;checkId;enterpriseId;eventClickData;isFilterClicked=!1;fabMobileactions;mobileroutesArray;noDuplicates=void 0;object_type;show=!0;searchString;statsAttributeDefnsData;statsObj;status;statusObj;tableColumnHeaders;dataJsonObj={};constructor(t,i,a,n,r,d,p,c,V,M){super(d,c),this.actionSheetController=t,this.attributeDefinitionService=i,this.loggerService=a,this.router=n,this.translateService=r,this.activatedRoute=d,this.columnsHeaders=p,this.commonService=c,this.listingVariables=V,this.uiUtils=M,this.route.queryParams.subscribe(w=>{this.dataJsonObj.queryParamsObj={defaultView:w.default_view,selectedMenuId:w.selectedMenuId,selectedSubMenuId:w.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.ATTRIBUTE_DEFINITIONS,this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.ATTRIBUTE",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:l.hf,pageSettingEnum:l.AM,pageSettingFieldsEnum:l.In},this.commonService.trackView(l.sn.ATTRIBUTEDEFINITION_LIST),this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.tableColumnHeaders=this.columnsHeaders.getAttributeDefinitionColumnHeaders(),this.actionBoolean=!(!this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.ACTIVATE)||!this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.INACTIVATE)),this.actions={EDIT:this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.EDIT),VIEW:this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.VIEW),CHECKBOX:this.actionBoolean},this.statsAttributeDefnsData=F.h.getAttributedefnsListStats(this.isFilterClicked,this.eventClickData),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:l.gL.URL,redirectURL:"/admin/attributedefinitions/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.FILTERS)}toggle(){this.show=!this.show}getAllRecords(){try{this.status=this.statusObj;const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.attributeDefinitionService.getAll(this.listingVariables.pageNumbers,this.enterpriseId,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.status,this.isFilterClicked,t,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(a=>{if(a.rows.length>0){this.attributeDefMobileListData&&this.attributeDefMobileListData.length>0||(this.attributeDefMobileListData=[]);for(let n=0;n<a.rows.length;n++){a.rows[n].imageDisplay=null,a.rows[n].imageName=a.rows[n].attribute_name;const r={url:`admin/attributedefinitions/${a.rows[n]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},d=r.queryParams&&Object.keys(r.queryParams).length>0?`${r.url}?${JSON.stringify(r.queryParams)}`:r.url;a.rows[n].attribute_name=`<a class="enable" id="attribute_name${a.rows[n]._id}" href=${d}>${a.rows[n].attribute_name}`,a.rows[n].enterprise.short_name=a.rows[n].enterprise.short_name,a.rows[n].enterprise_short_name=a.rows[n].enterprise.short_name,a.rows[n].enterprise.short_name='<a class="enabled" id="enterprise.short_name'+a.rows[n]._id+'" href="enterprises/enterprises/'+a.rows[n].enterprise.enterprise_id+'/view/" >'+a.rows[n].enterprise.short_name,a.rows[n].attribute_display_name=a.rows[n].attribute_display_name,a.rows[n].sequence_order=0===a.rows[n].sequence_order?"0":a.rows[n].sequence_order,this.attributeDefMobileListData=this.attributeDefMobileListData.filter(p=>p._id!==a.rows[n]._id),a.rows[n].is_enabled=!0===a.rows[n].is_enabled?"Yes":"No",a.rows[n].is_mandatory=!0===a.rows[n].is_mandatory?"Yes":"No",this.attributeDefMobileListData.push(a.rows[n])}a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.attributeDefnsList=this.attributeDefnsList.concat(a.rows)):this.attributeDefnsList=a.rows}else this.attributeDefnsList=[],this.attributeDefMobileListData=[]},a=>{this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(t)}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.attributeDefMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}onItemClicked(t){this.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}onActionClicked(t){t.action===l.A0.EDIT?(this.router.navigate(["/admin/attributedefinitions/"+t.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("attributedefinitions")):t.action===l.A0.CHECKBOX?(this.actionStatus=t.data.isEnabled,this.checkId=t.data._id,this.attributeDefinitionService.update(this.checkId,{enterprise:{enterprise_id:this.enterpriseId,enterprise_name:t.data.enterprise.enterprise_name,short_name:t.data.enterprise_short_name},is_enabled:this.actionStatus}).then(a=>{this.uiUtils.displaytoastMessage(!0===this.actionStatus?"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE":"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("attributedefinitions"),this.router.navigateByUrl("/admin/attributedefinitions/list"),this.getAllRecords()})):t.action===l.A0.VIEW&&this.commonService.redirectToUrl(["..",t.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}mobileEventAction(t){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.ACTIVATE)&&!1===t.isEnabled&&!0===this.actionBoolean&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{this.actionStatus=!t.isEnabled,this.checkId=t._id,this.attributeDefinitionService.update(this.checkId,{is_enabled:this.actionStatus}).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("attributedefinitions"),this.attributeDefMobileListData=[],this.getAllRecords()})}}),this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["/admin/attributedefinitions/"+t._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("attributedefinitions")}}),this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.INACTIVATE)&&!0===t.isEnabled&&!0===this.actionBoolean&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{this.actionStatus=!t.isEnabled,this.checkId=t._id,this.attributeDefinitionService.update(this.checkId,{is_enabled:this.actionStatus}).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("attributedefinitions"),this.attributeDefMobileListData=[],this.getAllRecords()})}}),this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.VIEW)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.actionSheet&&this.actionSheet.dismiss(),this.presentActionSheet(t)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",i)}}presentActionSheet(t){var i=this;return(0,_.Z)(function*(){i.mobileroutesArray.length>0?(i.actionSheet=yield i.actionSheetController.create({cssClass:"actionsheet",buttons:i.mobileroutesArray}),yield i.actionSheet.present()):i.uiUtils.displayWarningMessage(i.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_PERFORM_ACTIONS"))})()}createAttributeDef(){try{this.router.navigate(["/admin/attributedefinitions/create"])}catch(t){this.loggerService.setLoggerError(this.constructor.name,"createLookupType",t)}}statsDisabled(t,i,a,n,r){this.statsObj=[],this.statsObj.push(0!==t?{value1:"TOTAL_ATTRIBUTES"}:{value1:""}),this.statsObj.push(0!==i?{value2:"TOTAL_ATTRIBUTES_ENABLED"}:{value2:""}),this.statsObj.push(0!==a?{value3:"TOTAL_ATTRIBUTES_DISABLED"}:{value3:""}),this.statsObj.push(0!==n?{value4:"TOTAL_ATTRIBUTES_MANDATORY"}:{value4:""}),this.statsObj.push(0!==r?{value5:"TOTAL_ATTRIBUTES_NONMANDATORY"}:{value5:""}),this.statsAttributeDefnsData=F.h.getAttributedefnsListStatsDisabled(this.isFilterClicked,"",this.statsObj)}statusData(t){this.statusObj=t.value,this.isFilterClicked=!0,this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.attributeDefMobileListData=[],this.getAllRecords()}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(i){return new(i||s)(e.Y36(P.BX),e.Y36(m.K),e.Y36(v.m),e.Y36(b.F0),e.Y36(h.sK),e.Y36(b.gz),e.Y36(j.Y),e.Y36(g.v),e.Y36(R.v),e.Y36(A.s))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-attribute-definitions"]],viewQuery:function(i,a){if(1&i&&e.Gf(q,5),2&i){let n;e.iGM(n=e.CRH())&&(a.datatableComponent=n.first)}},outputs:{searchValueChange:"searchValueChange"},features:[e._Bn([j.Y,R.v]),e.qOj],decls:9,vars:31,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","attributedefinitions-list",1,"",3,"header","data","totalRecords","listingVariables","paginator","totalPages","mobileListData","actions","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","itemClickEvent","redirectionEvent","actionClicked","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(r){return a.onHeaderItemClick(r)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("itemClickEvent",function(r){return a.onItemClicked(r)})("redirectionEvent",function(r){return a.mobileEventAction(r)})("actionClicked",function(r){return a.onActionClicked(r)})("changeStats",function(r){return a.statusData(r)})("loadPageData",function(r){return a.loadPageData(r)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(r){return a.onPageLevelActionClicked(r)}),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.tableColumnHeaders)("data",a.attributeDefnsList)("totalRecords",a.listingVariables.totalRecords)("listingVariables",a.listingVariables)("paginator",!0)("totalPages",a.listingVariables.totalpages)("mobileListData",a.attributeDefMobileListData)("actions",a.actions)("statsDisplay",a.statsAttributeDefnsData)("statData",a.attributeDefnsStatsObj)("statusDisplay",a.statusObj)("statsShow",a.show)("showRights",a.roleRightsValidationByPage(a.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.ATTRIBUTE_DEFINITIONS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",a.searchString)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[B.n,C.q,G.y]})}return s})();class Y{TOTAL_ATTRIBUTES;TOTAL_ATTRIBUTES_ENABLED;TOTAL_ATTRIBUTES_DISABLED;TOTAL_ATTRIBUTES_MANDATORY;TOTAL_ATTRIBUTES_NONMANDATORY}var H=u(57936),K=u(94246),I=u(46448),f=u(36895),N=u(2387),S=u(56368),J=u(9851),y=u(93837),D=u(24929),x=u(92634),Z=u(42919);const W=["PageName"],X=["application"],z=["applicationInput"],$=["attributeGroup"],ee=["attributeType"],te=["defaultValueInput"],ae=["description"],ie=["displayName"],ne=["displaySeq"],se=["lookupTypeDropdownSearch"],le=["module"],re=["ownerType"],oe=["rangeMaximumValue"],ue=["rangeMinimumValue"],de=["TableNameAdd"],pe=["moduleAdd"],ce=["fieldValue"];function be(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",31,32),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeAttributeName(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",t.defaultAttributeDisplayName),e.Q6J("maxlength",40)}}function he(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",33),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_PAGE_TITLES.ATTRIBUTE")),e.s9C("value",t.defaultAttributeName)}}function fe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",31,32),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeAttributeName(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",t.defaultAttributeDisplayName),e.Q6J("maxlength",40)}}function _e(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",33),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_PAGE_TITLES.ATTRIBUTE")),e.s9C("value",t.defaultAttributeName)}}function me(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-inputnumber",34,35),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangeMinValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"ATTRIBUTES.RANGE_MIN_VALUE")),e.s9C("value",t.rangeMinValue),e.Q6J("maxlength",10)}}function ge(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-inputnumber",36,37),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangeMaxValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"ATTRIBUTES.RANGE_MAX_VALUE")),e.s9C("value",t.rangeMaxValue),e.Q6J("maxlength",10)}}function Te(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",38),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangePrefixValue(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"GENERAL_SETTINGS.PREFIX")),e.s9C("value",t.rangePrefixValue),e.Q6J("maxlength",10)}}function ve(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",39),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangeSuffixValue(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"GENERAL_SETTINGS.SUFFIX")),e.s9C("value",t.rangeSuffixValue),e.Q6J("maxlength",10)}}function Ae(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-search",40,41),e.NdJ("selectedOption",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeLookupType(a))})("searchValueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.getLookupTypes(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_PAGE_TITLES.LOOKUP_TYPE")),e.s9C("mandatory",!t.disable),e.s9C("defaultValue",t.defaultlookupTypeName),e.Q6J("options",t.lookupTypeOptions)}}function Ce(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-singleselect",42,43),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeTableName(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"NEW_VARIABLES.TABLE_NAME")),e.s9C("defaultValue",t.tableId),e.Q6J("options",t.tableNamesOptions)}}function Oe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-singleselect",20,44),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeReferenceFieldName(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"NEW_VARIABLES.REFERENCE_FIELD")),e.s9C("defaultValue",t.referenceFieldId),e.Q6J("options",t.referenceFieldOptionsData)}}function Ee(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-search",45,46),e.NdJ("selectedOption",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRefereceFieldData(a))})("searchValueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.getRefereceFieldData(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"ATTRIBUTES.FIELD_VALUES")),e.s9C("mandatory",t.defaultValueMandatory),e.s9C("defaultValue",t.RefereceFieldvalue),e.Q6J("options",t.referenceFieldValueOptionsData)}}function Ie(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-search",45,47),e.NdJ("selectedOption",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeDefaultValue(a))})("searchValueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.getDefaultValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.defaultValueMandatory),e.s9C("defaultValue",t.defaultValueName),e.Q6J("options",t.defaultValueOptions)}}function Ne(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",48,47),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeDefaultValueInput(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("value",t.defaultValuetext),e.s9C("mandatory",t.defaultValueMandatory),e.Q6J("maxlength",200)}}let Se=(()=>{class s extends T.O{attributedefinitionService;loggerService;moduleSettingsService;navigationService;router;translateService;activatedRoute;commonService;enterprisesService;uiUtils;PageName;application;applicationInput;attributeGroup;attributeType;defaultValueInput;description;displayName;displaySeq;lookupTypeDropdownSearch;module;ownerType;rangeMaximumValue;rangeMinimumValue;TableNameAdd;moduleAdd;fieldValue;EnabledOptions;MandatoryOptions;RangeFieldEnabled=!1;RefereceFieldvalue;RefereceFieldvalueObj;appicationsArrayData=[];applicationId;applicationModuleJSON;applicationName;applicationObj;applicationOptions;applicationname;applicationoptions;attributeCreateObj=new ye;attributeGroupObj;attributeTypeOptions;defaultAppName;defaultAppObj;defaultAttributeDisplayName;defaultAttributeGroup;defaultAttributeName;defaultAttributeObj;defaultAttributeTypeId;defaultAttributeTypeName;defaultDescription;defaultDisplaySequence;defaultEnterpriseId;defaultLookupObj;defaultOwnerName;defaultOwnerObj;defaultPageName;defaultPageObj;defaultValueDisable=!0;defaultValueId;defaultValueMandatory=!0;defaultValueName;defaultValueObj;defaultValueOptions;defaultValuetext;defaultlookupType;defaultlookupTypeName;disable=!0;disableSubmitBtn;enterpriseId;enterpriseName;enterpriseShortName;error;fieldLevelAttributeOptions;groupOptions;headerAction;isEnabled=!0;isFieldLevelAttributeEnabled=!1;isMandatoryValue=!0;lookupTypeOptions;object_type;ownerOptions;pageId;pageNameOptions;pageObj;pageoptions;rangeMaxValue;rangeMinValue;rangePrefixValue;rangeSuffixValue;referenceFieldId;referenceFieldObj;referenceFieldOptionsData;referenceFieldValueOptionsData;reference_table;table_name;tableNamesOptions=[];tableId;targetFieldId;dataJsonObj={};constructor(t,i,a,n,r,d,p,c,V,M){super(p,c),this.attributedefinitionService=t,this.loggerService=i,this.moduleSettingsService=a,this.navigationService=n,this.router=r,this.translateService=d,this.activatedRoute=p,this.commonService=c,this.enterprisesService=V,this.uiUtils=M}ngOnInit(){this.headerAction={BACK:!0},this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.ATTRIBUTE_DEFINITIONS,this.disableSubmitBtn=!1,this.commonService.trackView(l.sn.ATTRIBUTEDEFINITION_CREATE),this.dataJsonObj.selectedEnterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.getDynamicJson([{folderName:"lookup_codes",jsonType:"list",storingFieldName:"lookupCodesListJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"}]),this.object_type=this.activatedRoute.snapshot.data.object_type,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.ATTRIBUTE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],document.getElementsByTagName("body"),this.getEnterprisesViewData(),this.EnabledOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.MandatoryOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.MANDATORY"),key:"checkbox2"}],this.fieldLevelAttributeOptions=[{value:"112",displayname:this.translateService.instant("ATTRIBUTES.FIELD_LEVEL_ATTRIBUTE"),key:"checkbox3"}]}getDynamicJson(t){var i=this;return(0,_.Z)(function*(){for(let a of t)try{i.dataJsonObj[a.storingFieldName]=yield i.commonService.getDynamicJson(i.dataJsonObj.selectedEnterpriseId,a.folderName,a.jsonType)}catch{i.dataJsonObj[a.storingFieldName]={}}i.applicationDetails()})()}getEnterprisesViewData(){this.enterprisesService.getEnterprisesViewData(this.dataJsonObj.selectedEnterpriseId).subscribe(t=>{this.enterpriseName=t.enterprise_name,this.defaultEnterpriseId=t._id,this.enterpriseShortName=t.short_name},t=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)})}applicationDetails(){try{this.applicationoptions=this.dataJsonObj.lookupCodesListJson[l.ox.APPLICATION_NAMES]}catch(t){this.loggerService.setLoggerError(this.constructor.name,"applicationDetails",t)}}changeApplicationName(t){this.error="";try{this.applicationId=t.value,this.applicationObj=this.applicationoptions.find(i=>i.ID===parseInt(this.applicationId,10)),this.pageoptions=this.dataJsonObj.moduleManagerListJson[this.applicationObj.lookup_name]?this.dataJsonObj.moduleManagerListJson[this.applicationObj.lookup_name]:[],this.pageId="",this.pageObj="",this.tableId="",this.tableNamesOptions=[],this.TableNameAdd.clearSelectInput(),this.moduleAdd.clearSelectInput(),this.module.clearSelectInput(),this.RefereceFieldvalue="",this.referenceFieldObj="",this.targetFieldId="",this.fieldValue.clearSelectInput()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeApplicationName",i)}}getLookupTypes(t){this.attributedefinitionService.getLookups(this.dataJsonObj.selectedEnterpriseId,t).then(i=>{this.lookupTypeOptions=i,this.defaultlookupType=i[0].ID,this.getDefaultValue("")}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getLookupTypes",i)})}changeLookupType(t){this.error="",this.defaultValueName="",this.defaultValuetext="",t.NAME&&(this.defaultlookupType=t.ID,this.defaultLookupObj=t,this.defaultlookupTypeName=t.NAME,this.getDefaultValue(""))}getDefaultValue(t){this.attributedefinitionService.getDefaultValue(this.defaultlookupType,t).then(i=>{this.defaultValueOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getDefaultValue",i)})}changeDefaultValue(t){this.error="",t.NAME?(this.defaultValueId=t.ID,this.defaultValueObj=t,this.defaultValueName=this.defaultValueObj.NAME):this.defaultValueName=""}changeDefaultValueInput(t){this.error="",this.defaultValuetext=t.value?t.value:""}changeEnabledvalue(t){this.error="",this.isEnabled=!0===t.value}changeFieldLevelAttributeEnabledvalue(t){this.error="",t&&(this.isFieldLevelAttributeEnabled=t.value,this.attributeCreateObj.is_field_level_attribute=this.isFieldLevelAttributeEnabled)}changeMandatoryValue(t){this.error="",this.isMandatoryValue=t.value,this.defaultValueMandatory=!0===this.isMandatoryValue}getAttributeTypesList(t){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJson[l.ox.ATTRIBUTE_TYPES],t).then(i=>{this.attributeTypeOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAttributeTypesList",i)})}changeAttributeType(t){this.error="",t.NAME&&(this.defaultAttributeTypeId=t.ID,this.defaultAttributeTypeName=t.NAME,this.defaultAttributeObj=t,this.defaultAttributeObj.lookup_name===l.H1.LIST_FIELD||this.defaultAttributeObj.lookup_name===l.H1.MULTI_SELECT_FIELD?(this.disable=!1,this.defaultValueDisable=!0,this.toEmptyRangeValues(),this.getLookupTypes("")):this.defaultAttributeObj.lookup_name===l.H1.RANGE_FIELD?(this.disable=!0,this.defaultValueDisable=!1,this.defaultLookupObj="",this.RangeFieldEnabled=!0):(this.disable=!0,this.defaultValueDisable=!1,this.defaultLookupObj="",this.toEmptyRangeValues()))}toEmptyRangeValues(){this.RangeFieldEnabled=!1,this.rangeMinValue="",this.rangeMinValue="",this.rangeMinValue="",this.rangeMinValue=""}changeAttributeName(t){this.error="",this.defaultAttributeDisplayName=t.value,this.defaultAttributeName=t.value.toUpperCase().replace(/\s/gi,"_"),this.disableSubmitBtn=!1}changeDescription(t){this.error="",this.defaultDescription=t.value}changeDisplaySequence(t){this.error="",this.defaultDisplaySequence=t.value}changeRangeMinValue(t){this.error="",this.rangeMinValue=t.value}changeRangeMaxValue(t){this.error="",this.rangeMaxValue=t.value}changeRangePrefixValue(t){this.error="",this.rangePrefixValue=t.value}changeRangeSuffixValue(t){this.error="",this.rangeSuffixValue=t.value}getAttributeGroups(t){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJson[l.ox.ATTRIBUTE_DEFN_GROUPS],t).then(i=>{this.groupOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAttributeGroups",i)})}changeAttributeGroup(t){this.error="",t.NAME?(this.defaultAttributeGroup=t.NAME,this.attributeGroupObj=t):(this.defaultAttributeGroup="",this.attributeGroupObj=[])}changePageName(t){if(this.error="",t.value){this.tableNamesOptions=[],this.pageId=t.value;const i=this.pageoptions.find(a=>a.ID===parseInt(this.pageId,10));this.pageObj=i.module,this.pageObj.page_display_name=i.page_display_name,this.error="",this.RefereceFieldvalue="",this.referenceFieldObj="",this.targetFieldId="",this.moduleAdd.clearSelectInput(),this.module&&this.module.clearSelectInput(),this.fieldValue&&this.fieldValue.clearSelectInput(),this.tableNamesOptions=this.pageObj.underlying_tables;for(let a=0;a<this.tableNamesOptions.length;a++)this.tableNamesOptions[a].name&&this.tableNamesOptions[a].name.length>0&&(this.tableNamesOptions[a].ID=this.tableNamesOptions[a].name,this.tableNamesOptions[a].NAME=this.tableNamesOptions[a].name)}}changeTableName(t){this.error="",this.tableId=t.value,this.getReferenceFields(this.tableId),this.RefereceFieldvalue="",this.referenceFieldObj="",this.targetFieldId="",this.module.clearSelectInput(),this.fieldValue&&this.fieldValue.clearSelectInput()}getReferenceFields(t){this.attributedefinitionService.getreferenceFieldOptions(t).then(i=>{this.referenceFieldOptionsData=i.refColumns;for(let a=0;a<this.referenceFieldOptionsData.length;a++)this.referenceFieldOptionsData[a].ID=this.referenceFieldOptionsData[a].name,this.referenceFieldOptionsData[a].NAME=this.referenceFieldOptionsData[a].name}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getReferenceFields",i)})}changeTargetFieldName(t){this.error="",this.targetFieldId=t.value,this.attributeCreateObj.ref_field=this.targetFieldId}changeReferenceFieldName(t){this.error="",this.referenceFieldId=t.value,this.attributeCreateObj.ref_field=this.referenceFieldId,this.referenceFieldObj=this.referenceFieldOptionsData.find(i=>i.ID===this.referenceFieldId),this.targetFieldId="",this.reference_table=this.referenceFieldObj.table,this.getRefereceFieldData(""),this.fieldValue.clearSelectInput()}getRefereceFieldData(t){this.attributedefinitionService.getRefereceFieldData(this.reference_table,this.dataJsonObj.selectedEnterpriseId,t).then(i=>{this.referenceFieldValueOptionsData=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAttributeOwner",i)})}changeRefereceFieldData(t){this.error="",t.NAME?(this.RefereceFieldvalue=t.NAME,this.RefereceFieldvalueObj=t,this.attributeCreateObj.ref_field_value={_id:this.RefereceFieldvalueObj._id,name:this.RefereceFieldvalueObj.NAME}):(this.RefereceFieldvalue="",this.RefereceFieldvalueObj=[])}getAttributeOwner(t){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJson[l.ox.OWNER_TYPES],t).then(i=>{this.ownerOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAttributeOwner",i)})}changeOwner(t){this.error="",t.NAME?(this.defaultOwnerName=t.NAME,this.defaultOwnerObj=t):(this.defaultOwnerName="",this.defaultOwnerObj=[])}createRecord(){if(this.defaultDisplaySequence<=0)this.error="COMMON_VALIDATION_MESSAGES.VALID_DISP_SEQ_CANNOT_BE_ZERO";else if(this.attributeGroup.isValid()&&this.application.isValid()&&this.displayName.isValid()&&this.attributeType.isValid()&&(!1!==this.disable||this.lookupTypeDropdownSearch.isValid())&&this.displaySeq.isValid()&&(!this.moduleAdd||this.moduleAdd.isValid())&&(!this.TableNameAdd||this.TableNameAdd.isValid())&&(!this.fieldValue||this.fieldValue.isValid())&&(!0!==this.defaultValueMandatory||this.defaultValueInput.isValid())&&this.description.isValid()&&(!this.RangeFieldEnabled||this.rangeMaximumValue.isValid()&&this.rangeMinimumValue.isValid())){this.disableSubmitBtn=!0;const t={enterprise_id:this.defaultEnterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName};this.attributeCreateObj.table={name:this.tableId},this.attributeCreateObj.enterprise=t,this.attributeCreateObj.page_name=this.pageObj,this.attributeCreateObj.application_name=this.applicationObj,this.attributeCreateObj.attribute_type=this.defaultAttributeObj,this.attributeCreateObj.attribute_name=this.defaultAttributeName,this.attributeCreateObj.attribute_display_name=this.defaultAttributeDisplayName,this.attributeCreateObj.attribute_description=this.defaultDescription,this.attributeCreateObj.attribute_group=this.attributeGroupObj,this.attributeCreateObj.sequence_order=this.defaultDisplaySequence,this.attributeCreateObj.is_enabled=this.isEnabled,this.attributeCreateObj.is_mandatory=this.isMandatoryValue,this.attributeCreateObj.min_value=this.rangeMinValue,this.attributeCreateObj.max_value=this.rangeMaxValue,this.attributeCreateObj.prefix=this.rangePrefixValue,this.attributeCreateObj.suffix=this.rangeSuffixValue,this.defaultAttributeObj.lookup_name===l.H1.LIST_FIELD||this.defaultAttributeObj.lookup_name===l.H1.MULTI_SELECT_FIELD?(this.attributeCreateObj.default_value=this.defaultValueName,this.attributeCreateObj.attribute_lookup=this.defaultLookupObj):(this.attributeCreateObj.attribute_lookup="",this.attributeCreateObj.default_value=this.defaultValuetext),this.attributedefinitionService.create(this.attributeCreateObj).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.disableSubmitBtn=!1,this.commonService.redirectToPreviousUrl()},a=>{this.commonErrorCodes(JSON.parse(a))})}}commonErrorCodes(t){const i=JSON.parse(t[l.BU.STATUS]);409===i&&(this.error="COMMON_STATUS_CODES."+i)}cancelBtn(){this.commonService.redirectToPreviousUrl()}pageheadeActionClick(t){"BACK"==t.value&&this.cancelBtn()}static \u0275fac=function(i){return new(i||s)(e.Y36(m.K),e.Y36(v.m),e.Y36(K.F),e.Y36(I.f),e.Y36(b.F0),e.Y36(h.sK),e.Y36(b.gz),e.Y36(g.v),e.Y36(H.e),e.Y36(A.s))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-attributedefinition-create"]],viewQuery:function(i,a){if(1&i&&(e.Gf(W,5),e.Gf(X,5),e.Gf(z,5),e.Gf($,5),e.Gf(ee,5),e.Gf(te,5),e.Gf(ae,5),e.Gf(ie,5),e.Gf(ne,5),e.Gf(se,5),e.Gf(le,5),e.Gf(re,5),e.Gf(oe,5),e.Gf(ue,5),e.Gf(de,5),e.Gf(pe,5),e.Gf(ce,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.PageName=n.first),e.iGM(n=e.CRH())&&(a.application=n.first),e.iGM(n=e.CRH())&&(a.applicationInput=n.first),e.iGM(n=e.CRH())&&(a.attributeGroup=n.first),e.iGM(n=e.CRH())&&(a.attributeType=n.first),e.iGM(n=e.CRH())&&(a.defaultValueInput=n.first),e.iGM(n=e.CRH())&&(a.description=n.first),e.iGM(n=e.CRH())&&(a.displayName=n.first),e.iGM(n=e.CRH())&&(a.displaySeq=n.first),e.iGM(n=e.CRH())&&(a.lookupTypeDropdownSearch=n.first),e.iGM(n=e.CRH())&&(a.module=n.first),e.iGM(n=e.CRH())&&(a.ownerType=n.first),e.iGM(n=e.CRH())&&(a.rangeMaximumValue=n.first),e.iGM(n=e.CRH())&&(a.rangeMinimumValue=n.first),e.iGM(n=e.CRH())&&(a.TableNameAdd=n.first),e.iGM(n=e.CRH())&&(a.moduleAdd=n.first),e.iGM(n=e.CRH())&&(a.fieldValue=n.first)}},features:[e._Bn([A.s]),e.qOj],decls:64,vars:67,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["mandatory","true","disabled","true","id","attributedefinitions-create-enterprise",3,"label","value"],["mandatory","true","disabled","false","id","attributedefinitions-create-attributegroup",3,"label","options","defaultValue","selectedOption","searchValueChange"],["attributeGroup",""],["disabled","false","mandatory","true","id","attributedefinitions-create-applicationname",3,"label","defaultValue","options","valueChange"],["application",""],["class","col-md-3",4,"ngIf"],["mandatory","true","disabled","false","id","attributedefinitions-create-attributetype",3,"label","options","defaultValue","selectedOption","searchValueChange"],["attributeType",""],["mandatory","true","disabled","false","id","attributedefinitions-create-displaysequence",3,"label","value","maxlength","valueChange"],["displaySeq",""],["disabled","false","mandatory","true","id","listview-create-module",3,"label","defaultValue","options","valueChange"],["moduleAdd",""],[1,"col-md-3","d-flex","align-items-center"],["label","","id","attributedefinitions-create-enabled","mandatory","false",3,"options","checked","valueChange"],["label","","id","attributedefinitions-create-mandatory","mandatory","false",3,"options","checked","valueChange"],["mandatory","true","disabled","false","id","attributedefinitions-create-description",3,"label","maxlength","valueChange"],["description",""],[1,"col-md-12","text-end","mt-2","mb-2","btns-group","pdl-0"],["className","btn btn-primary btn-sm","id","attributedefinitions-create-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","attributedefinitions-create-cancel",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],["mandatory","true","disabled","false","id","attributedefinitions-create-attributedisplayname",3,"label","value","maxlength","valueChange"],["displayName",""],["mandatory","true","mandatory","true","disabled","true","id","attributedefinitions-create-attributename",3,"label","value"],["mandatory","true","disabled","false","id","attributedefinitions-create-RangeMinValue",3,"label","value","maxlength","valueChange"],["rangeMinimumValue",""],["mandatory","true","disabled","false","id","attributedefinitions-create-RangeMaxValue",3,"label","value","maxlength","valueChange"],["rangeMaximumValue",""],["mandatory","false","disabled","false","id","attributedefinitions-create-RangePrefixValue",3,"label","value","maxlength","valueChange"],["mandatory","false","disabled","false","id","attributedefinitions-create-RangeSuffixValue",3,"label","value","maxlength","valueChange"],["id","attributedefinitions-create-lookuptype",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["lookupTypeDropdownSearch",""],["disabled","false","mandatory","true","id","listview-create-tablename",3,"label","defaultValue","options","valueChange"],["TableNameAdd",""],["module",""],["id","attributedefinitions-create-defaultvalue",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["fieldValue",""],["defaultValueInput",""],["disabled","false","id","attributedefinitions-create-defaultvalue",3,"label","value","maxlength","mandatory","valueChange"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9)(13,"app-dropdown-search",11,12),e.NdJ("selectedOption",function(r){return a.changeAttributeGroup(r)})("searchValueChange",function(r){return a.getAttributeGroups(r)}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",9)(17,"app-dropdown-singleselect",13,14),e.NdJ("valueChange",function(r){return a.changeApplicationName(r)}),e.ALo(19,"translate"),e.qZA()(),e.YNc(20,be,4,5,"div",15),e.YNc(21,he,3,4,"div",15),e.YNc(22,fe,4,5,"div",15),e.YNc(23,_e,3,4,"div",15),e.TgZ(24,"div",9)(25,"app-dropdown-search",16,17),e.NdJ("selectedOption",function(r){return a.changeAttributeType(r)})("searchValueChange",function(r){return a.getAttributeTypesList(r)}),e.ALo(27,"translate"),e.qZA()(),e.YNc(28,me,4,5,"div",15),e.YNc(29,ge,4,5,"div",15),e.YNc(30,Te,3,5,"div",15),e.YNc(31,ve,3,5,"div",15),e.YNc(32,Ae,4,6,"div",15),e.TgZ(33,"div",9)(34,"app-inputnumber",18,19),e.NdJ("valueChange",function(r){return a.changeDisplaySequence(r)}),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div",9)(38,"app-dropdown-singleselect",20,21),e.NdJ("valueChange",function(r){return a.changePageName(r)}),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"div",22)(42,"app-checkbox",23),e.NdJ("valueChange",function(r){return a.changeFieldLevelAttributeEnabledvalue(r)}),e.qZA()(),e.YNc(43,Ce,4,5,"div",15),e.YNc(44,Oe,4,5,"div",15),e.YNc(45,Ee,4,6,"div",15),e.YNc(46,Ie,4,6,"div",15),e.YNc(47,Ne,4,6,"div",15),e.TgZ(48,"div",22)(49,"app-checkbox",23),e.NdJ("valueChange",function(r){return a.changeEnabledvalue(r)}),e.qZA()(),e.TgZ(50,"div",22)(51,"app-checkbox",24),e.NdJ("valueChange",function(r){return a.changeMandatoryValue(r)}),e.qZA()(),e.TgZ(52,"div",3)(53,"app-textarea",25,26),e.NdJ("valueChange",function(r){return a.changeDescription(r)}),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"div",27)(57,"app-button",28),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"app-button",29),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",30),e._uU(62),e.ALo(63,"translate"),e.qZA()()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,47,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(15,49,"ATTRIBUTES.ATTRIBUTE_GROUP")),e.s9C("defaultValue",a.defaultAttributeGroup),e.Q6J("options",a.groupOptions),e.xp6(4),e.s9C("label",e.lcZ(19,51,"COMMON_FIELDS.APPLICATION_NAME")),e.s9C("defaultValue",a.applicationId),e.Q6J("options",a.applicationoptions),e.xp6(3),e.Q6J("ngIf",!0===a.disable),e.xp6(1),e.Q6J("ngIf",!0===a.disable),e.xp6(1),e.Q6J("ngIf",!1===a.disable),e.xp6(1),e.Q6J("ngIf",!1===a.disable),e.xp6(2),e.s9C("label",e.lcZ(27,53,"ATTRIBUTES.ATTRIBUTE_TYPE")),e.s9C("defaultValue",a.defaultAttributeTypeName),e.Q6J("options",a.attributeTypeOptions),e.xp6(3),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",!1===a.disable),e.xp6(2),e.s9C("label",e.lcZ(36,55,"COMMON_FIELDS.DISPLAY_SEQUENCE")),e.s9C("value",a.defaultDisplaySequence),e.Q6J("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(40,57,"COMMON_FIELDS.PAGE")),e.s9C("defaultValue",a.pageId),e.Q6J("options",a.pageoptions),e.xp6(4),e.Q6J("options",a.fieldLevelAttributeOptions)("checked",a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.defaultValueDisable),e.xp6(1),e.Q6J("ngIf",!1===a.defaultValueDisable),e.xp6(2),e.Q6J("options",a.EnabledOptions)("checked",a.isEnabled),e.xp6(2),e.Q6J("options",a.MandatoryOptions)("checked",a.isMandatoryValue),e.xp6(2),e.s9C("label",e.lcZ(55,59,"COMMON_FIELDS.DESCRIPTION")),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(58,61,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(60,63,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(63,65,a.error)," "))},dependencies:[f.O5,N.r,S.a,J.k,y.b,D.R,x.K,Z.C,C.q,h.X$]})}return s})();class ye{application_name;attribute_description;attribute_display_name;attribute_group;attribute_lookup;attribute_name;attribute_owner;attribute_type;default_value;enterprise;is_enabled;is_field_level_attribute;is_mandatory;max_value;min_value;page_name;prefix;ref_field;ref_field_value;sequence_order;suffix;table}var U=u(11735);const De=["attributeName"],Ve=["attributeType"],Me=["defaultValueInput"],we=["description"],Le=["displaySeq"],je=["lookupTypeDropdwonSearch"],Re=["rangeMaximumValue"],Fe=["rangeMinimumValue"],Je=["module"],xe=["fieldValue"];function Ze(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",33,34),e.ALo(3,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_PAGE_TITLES.ATTRIBUTE")),e.s9C("value",t.defaultAttributeName),e.Q6J("maxlength",200)}}function Ue(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",33,34),e.ALo(3,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_PAGE_TITLES.ATTRIBUTE")),e.s9C("value",t.defaultAttributeName),e.Q6J("maxlength",200)}}function ke(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",35),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.ChangeAttributeDisplayName(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",t.defaultAttributeDisplayName),e.Q6J("maxlength",40)}}function Be(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",36),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.ChangeAttributeDisplayName(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",t.defaultAttributeDisplayName),e.Q6J("maxlength",40)}}function Pe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-inputnumber",37,38),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangeMinValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"ATTRIBUTES.RANGE_MIN_VALUE")),e.s9C("value",t.rangeMinValue),e.Q6J("maxlength",10)}}function Ge(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-inputnumber",39,40),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangeMaxValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"ATTRIBUTES.RANGE_MAX_VALUE")),e.s9C("value",t.rangeMaxValue),e.Q6J("maxlength",10)}}function qe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",41),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangePrefixValue(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"GENERAL_SETTINGS.PREFIX")),e.s9C("value",t.rangePrefixValue),e.Q6J("maxlength",10)}}function Qe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",42),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRangeSuffixValue(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"GENERAL_SETTINGS.SUFFIX")),e.s9C("value",t.rangeSuffixValue),e.Q6J("maxlength",10)}}function Ye(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-search",43,44),e.NdJ("selectedOption",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeLookupType(a))})("searchValueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.getLookupTypes(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_PAGE_TITLES.LOOKUP_TYPE")),e.s9C("mandatory",!t.disable),e.s9C("defaultValue",null==t.defaultLookupObj?null:t.defaultLookupObj.lookup_type_name),e.Q6J("options",t.lookupTypeOptions)}}function He(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",45),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"NEW_VARIABLES.TABLE_NAME")),e.s9C("value",null==t.viewData?null:t.viewData.table.name)}}function Ke(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-singleselect",46,47),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeTableName(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"NEW_VARIABLES.TABLE_NAME")),e.s9C("defaultValue",t.tableId),e.Q6J("options",t.tableNamesOptions)}}function We(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-singleselect",48),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeReferenceFieldName(a))}),e.ALo(2,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,3,"NEW_VARIABLES.REFERENCE_FIELD")),e.s9C("defaultValue",t.referenceFieldId),e.Q6J("options",t.referenceFieldOptionsData)}}function Xe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-search",49,50),e.NdJ("selectedOption",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeRefereceFieldData(a))})("searchValueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.getRefereceFieldData(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"ATTRIBUTES.FIELD_VALUES")),e.s9C("mandatory",t.defaultValueMandatory),e.s9C("defaultValue",t.refereceFieldvalue),e.Q6J("options",t.referenceFieldValueOptionsData)}}function ze(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-dropdown-search",51,52),e.NdJ("selectedOption",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeDefaultValue(a))})("searchValueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.getDefaultValue(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",t.defaultValueMandatory),e.s9C("defaultValue",t.defaultValueName),e.Q6J("options",t.defaultValueOptions)}}function $e(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"app-input",53,52),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeDefaultValueInput(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("value",t.defaultValueName),e.s9C("mandatory",t.defaultValueMandatory),e.Q6J("maxlength",200)}}let et=(()=>{class s extends T.O{attributedefinitionService;loggerService;navigationService;router;translateService;commonService;route;uiUtils;attributeName;attributeType;defaultValueInput;description;displaySeq;lookupTypeDropdwonSearch;rangeMaximumValue;rangeMinimumValue;module;fieldValue;RangeFieldEnabled=!1;attributeDefId;attributeEditObj=new tt;attributeTypeOptions;defaultAttributeDisplayName;defaultAttributeGroup;defaultAttributeGroupObj;defaultAttributeName;defaultAttributeObj;defaultAttributeType;defaultAttributeTypeName;defaultDescription;defaultDisplaySequence;defaultEnterprise;defaultEnterpriseId;defaultEnterpriseObj;defaultLookupObj;defaultValue;defaultValueDisable=!0;defaultValueMandatory;defaultValueName;defaultValueObj;defaultValueOptions;defaultValuetext;defaultlookupType;defaultlookupTypeName;defaultpageName;defaultpageNameObj;disable=!1;enabledOptions;error;fieldLevelAttributeOptions;isEnabled=!1;isFieldLevelAttributeEnabled=!1;isMandatoryValue=!1;lookupTypeOptions;lookupsViewJson;mandatoryOptions;object_type;ownerOptions;rangeMaxValue;rangeMinValue;rangePrefixValue;rangeSuffixValue;refereceFieldvalue;refereceFieldvalueObj;referenceFieldId;referenceFieldObj;referenceFieldOptionsData;referenceFieldValueOptionsData;reference_table;table_name;viewData;tableId;targetFieldId;targetFieldOptionsData=[];tableNameDroupDownIsEnable;applicationObj;applicationId;pageoptions;applicationoptions;applicationModuleJSON;appicationsArrayData=[];enterpriseId;tableNamesOptions=[];pageObj;tableName;dataJsonObj={};constructor(t,i,a,n,r,d,p,c){super(p,d),this.attributedefinitionService=t,this.loggerService=i,this.navigationService=a,this.router=n,this.translateService=r,this.commonService=d,this.route=p,this.uiUtils=c}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.ATTRIBUTE_DEFINITIONS,this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.dataJsonObj.selectedEnterpriseId=this.enterpriseId,this.getDynamicJson([{folderName:"lookup_codes",jsonType:"list",storingFieldName:"lookupCodesListJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"}]),this.commonService.trackView(l.sn.ATTRIBUTEDEFINITION_EDIT),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.RECORD_HISTORY),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.ATTRIBUTE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],document.getElementsByTagName("body"),this.route.params.subscribe(a=>{this.attributeDefId=a.id}),this.enabledOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.mandatoryOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.MANDATORY"),key:"checkbox2"}],this.fieldLevelAttributeOptions=[{value:"112",displayname:this.translateService.instant("ATTRIBUTES.FIELD_LEVEL_ATTRIBUTE"),key:"checkbox3"}]}getDynamicJson(t){var i=this;return(0,_.Z)(function*(){for(let a of t)try{i.dataJsonObj[a.storingFieldName]=yield i.commonService.getDynamicJson(i.dataJsonObj.selectedEnterpriseId,a.folderName,a.jsonType)}catch{i.dataJsonObj[a.storingFieldName]={}}i.applicationDetails()})()}applicationDetails(){try{this.applicationoptions=this.dataJsonObj.lookupCodesListJson[l.ox.APPLICATION_NAMES],this.getRecordById()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"applicationDetails",t)}}updateRecord(){this.defaultDisplaySequence<=0?this.error="COMMON_VALIDATION_MESSAGES.VALID_DISP_SEQ_CANNOT_BE_ZERO":!this.attributeName.isValid()||!this.displaySeq.isValid()||!0===this.defaultValueMandatory&&!this.defaultValueInput.isValid()||!this.description.isValid()||!0===this.disable&&!this.lookupTypeDropdwonSearch.isValid()||this.module&&!this.module.isValid()||this.RangeFieldEnabled&&(!this.rangeMaximumValue.isValid()||!this.rangeMinimumValue.isValid()||this.fieldValue&&!this.fieldValue.isValid())||(this.attributeEditObj.table={name:this.table_name},this.attributeEditObj.enterprise=this.defaultEnterpriseObj,this.attributeEditObj.page_name=this.defaultpageNameObj,this.attributeEditObj.attribute_type=this.defaultAttributeObj,this.attributeEditObj.attribute_name=this.defaultAttributeName,this.attributeEditObj.attribute_display_name=this.defaultAttributeDisplayName,this.attributeEditObj.attribute_description=this.defaultDescription,this.attributeEditObj.attribute_group=this.defaultAttributeGroupObj,this.attributeEditObj.sequence_order=this.defaultDisplaySequence,this.attributeEditObj.is_enabled=this.isEnabled,this.attributeEditObj.is_mandatory=this.isMandatoryValue,this.defaultAttributeObj.lookup_name===l.H1.LIST_FIELD||this.defaultAttributeObj.lookup_name===l.H1.MULTI_SELECT_FIELD?(this.attributeEditObj.default_value=this.defaultValueName,this.attributeEditObj.attribute_lookup=this.defaultLookupObj):(this.attributeEditObj.attribute_lookup="",this.attributeEditObj.default_value=this.defaultValuetext),this.attributeEditObj.min_value=this.rangeMinValue,this.attributeEditObj.max_value=this.rangeMaxValue,this.attributeEditObj.prefix=this.rangePrefixValue,this.attributeEditObj.suffix=this.rangeSuffixValue,this.attributedefinitionService.update(this.attributeDefId,this.attributeEditObj).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},i=>{this.commonErrorCodes(JSON.parse(i))}))}getRecordById(){this.attributedefinitionService.get(this.attributeDefId).subscribe(t=>{this.viewData=t,this.tableNameDroupDownIsEnable=!(this.viewData&&this.viewData.table&&this.viewData.table.name),this.defaultEnterprise=this.viewData.enterprise.short_name,this.defaultEnterpriseId=this.viewData.enterprise.enterprise_id,this.defaultEnterpriseObj=this.viewData.enterprise,this.defaultAttributeGroup=this.lookupLanguageTranslations(this.viewData.attribute_group.lookup_id),this.defaultAttributeGroupObj=this.viewData.attribute_group,this.defaultAttributeName=this.viewData.attribute_name,this.defaultpageName=this.viewData.page_name.page_display_name,this.defaultpageNameObj=this.viewData.page_name,this.defaultAttributeDisplayName=this.viewData.attribute_display_name,this.defaultAttributeType=this.viewData.attribute_type.lookup_id,this.referenceFieldId=this.viewData.ref_field,this.refereceFieldvalue=this.viewData.ref_field_value?this.viewData.ref_field_value.name:"",this.viewData.ref_field&&(this.targetFieldId=this.viewData.ref_field),this.defaultAttributeTypeName=this.lookupLanguageTranslations(this.viewData.attribute_type.lookup_id),this.defaultAttributeObj=this.viewData.attribute_type,this.defaultDisplaySequence=this.viewData.sequence_order,this.defaultDescription=this.viewData.attribute_description,this.isMandatoryValue=this.viewData.is_mandatory,this.defaultValueMandatory=this.isMandatoryValue,this.isEnabled=this.viewData.is_enabled,this.isFieldLevelAttributeEnabled=this.viewData.is_field_level_attribute,this.table_name=this.viewData.table.name,this.isFieldLevelAttributeEnabled?(this.getReferenceFields(this.table_name),this.getRefereceFieldData(this.refereceFieldvalue)):(this.applicationId=this.viewData.application_name.lookup_id,this.applicationObj=this.applicationoptions.find(i=>i.ID===parseInt(this.applicationId,10)),this.pageoptions=this.dataJsonObj.moduleManagerListJson[this.applicationObj.lookup_name]?this.dataJsonObj.moduleManagerListJson[this.applicationObj.lookup_name]:[],this.getDropDownTableData(this.viewData.page_name.page_id)),!this.defaultAttributeObj||this.viewData.attribute_type.lookup_name!==l.H1.LIST_FIELD&&this.viewData.attribute_type.lookup_name!==l.H1.MULTI_SELECT_FIELD?(this.disable=!1,this.defaultValuetext=this.viewData.default_value,this.defaultValueName=this.viewData.default_value,this.defaultValueDisable=!1):(this.disable=!0,this.defaultlookupTypeName=this.lookupLanguageTranslations(this.viewData.attribute_lookup.lookup_type_id),this.getLookupTypes(this.defaultlookupTypeName),this.defaultlookupType=this.viewData.attribute_lookup.lookup_type_id,this.defaultLookupObj=this.viewData.attribute_lookup,this.defaultValueName=this.viewData.default_value,this.defaultValueDisable=!0),this.RangeFieldEnabled=this.viewData.attribute_type.lookup_name===l.H1.RANGE_FIELD,this.rangeMinValue=this.viewData.min_value?this.viewData.min_value:"",this.rangeMaxValue=this.viewData.max_value?this.viewData.max_value:"",this.rangePrefixValue=this.viewData.prefix?this.viewData.prefix:"",this.rangeSuffixValue=this.viewData.suffix?this.viewData.suffix:""},t=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)})}getDropDownTableData(t){const i=this.pageoptions.find(a=>a.module.page_id===parseInt(t,10));this.pageObj=i.module,this.pageObj.page_display_name=i.page_display_name,this.tableNamesOptions=this.pageObj.underlying_tables;for(let a=0;a<this.tableNamesOptions.length;a++)this.tableNamesOptions[a].name&&this.tableNamesOptions[a].name.length>0&&(this.tableNamesOptions[a].ID=this.tableNamesOptions[a].name,this.tableNamesOptions[a].NAME=this.tableNamesOptions[a].name)}changeTableName(t){this.error="",this.tableId=t.value,this.getReferenceFields(this.tableId)}ChangeAttributeDisplayName(t){this.defaultAttributeDisplayName=t.value}ChangeEnabledvalue(t){this.error="",this.isEnabled=t.value}ChangeMandatoryValue(t){this.error="",this.isMandatoryValue=t.value,this.defaultValueMandatory=!0===this.isMandatoryValue}cancel(){this.commonService.redirectToPreviousUrl()}getLookupTypes(t){this.attributedefinitionService.getLookups(this.defaultEnterpriseId,t).then(i=>{this.lookupTypeOptions=i,this.getDefaultValue("")}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getLookupTypes",i)})}changeLookupType(t){this.error="",t.NAME&&(this.defaultlookupType=t.ID,this.defaultLookupObj=t,this.defaultlookupTypeName=t.NAME,this.getDefaultValue(""),this.defaultValueObj=[],this.defaultValueName="")}getDefaultValue(t){this.attributedefinitionService.getDefaultValue(this.defaultlookupType,t).then(i=>{this.defaultValueOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getDefaultValue",i)})}changeDefaultValue(t){this.error="",t.NAME?(this.defaultValue=t.ID,this.defaultValueObj=t,this.defaultValueName=this.defaultValueObj.NAME):this.defaultValueName=""}changeDefaultValueInput(t){this.error="",this.defaultValuetext=t.value?t.value:""}getReferenceFields(t){this.table_name=t,this.attributedefinitionService.getreferenceFieldOptions(t).then(i=>{this.referenceFieldOptionsData=i.refColumns;for(let a=0;a<this.referenceFieldOptionsData.length;a++)this.referenceFieldOptionsData[a].ID=this.referenceFieldOptionsData[a].name,this.referenceFieldOptionsData[a].NAME=this.referenceFieldOptionsData[a].name}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getReferenceFields",i)})}changeTargetFieldName(t){this.error="",this.targetFieldId=t.value,this.attributeEditObj.ref_field=this.targetFieldId}changeReferenceFieldName(t){this.error="",this.referenceFieldId=t.value,this.attributeEditObj.ref_field=this.referenceFieldId,this.referenceFieldObj=this.referenceFieldOptionsData.find(i=>i.ID===this.referenceFieldId),this.targetFieldId="",this.reference_table=this.referenceFieldObj.table,this.getRefereceFieldData(""),this.fieldValue.clearSelectInput()}getRefereceFieldData(t){this.reference_table&&this.attributedefinitionService.getRefereceFieldData(this.reference_table,this.defaultEnterpriseId,t).then(i=>{this.referenceFieldValueOptionsData=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAttributeOwner",i)})}changeRefereceFieldData(t){this.error="",this.refereceFieldvalue=t.NAME,this.refereceFieldvalueObj=t,this.attributeEditObj.ref_field_value={_id:this.refereceFieldvalueObj._id,name:this.refereceFieldvalueObj.NAME}}changeFieldLevelAttributeEnabledvalue(t){this.error="",t&&(this.isFieldLevelAttributeEnabled=t.value,this.attributeEditObj.is_field_level_attribute=this.isFieldLevelAttributeEnabled,this.getReferenceFields(this.table_name))}changeDescription(t){this.error="",this.defaultDescription=t.value}changeDisplaySequence(t){this.error="",this.defaultDisplaySequence=t.value}changeRangeMinValue(t){this.error="",this.rangeMinValue=t.value}changeRangeMaxValue(t){this.error="",this.rangeMaxValue=t.value}changeRangePrefixValue(t){this.error="",this.rangePrefixValue=t.value}changeRangeSuffixValue(t){this.error="",this.rangeSuffixValue=t.value}commonErrorCodes(t){409===JSON.parse(t[l.BU.STATUS])&&(this.error=this.translateService.instant(""))}static \u0275fac=function(i){return new(i||s)(e.Y36(m.K),e.Y36(v.m),e.Y36(I.f),e.Y36(b.F0),e.Y36(h.sK),e.Y36(g.v),e.Y36(b.gz),e.Y36(A.s))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-attributedefinition-edit"]],viewQuery:function(i,a){if(1&i&&(e.Gf(De,5),e.Gf(Ve,5),e.Gf(Me,5),e.Gf(we,5),e.Gf(Le,5),e.Gf(je,5),e.Gf(Re,5),e.Gf(Fe,5),e.Gf(Je,5),e.Gf(xe,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.attributeName=n.first),e.iGM(n=e.CRH())&&(a.attributeType=n.first),e.iGM(n=e.CRH())&&(a.defaultValueInput=n.first),e.iGM(n=e.CRH())&&(a.description=n.first),e.iGM(n=e.CRH())&&(a.displaySeq=n.first),e.iGM(n=e.CRH())&&(a.lookupTypeDropdwonSearch=n.first),e.iGM(n=e.CRH())&&(a.rangeMaximumValue=n.first),e.iGM(n=e.CRH())&&(a.rangeMinimumValue=n.first),e.iGM(n=e.CRH())&&(a.module=n.first),e.iGM(n=e.CRH())&&(a.fieldValue=n.first)}},features:[e.qOj],decls:67,vars:72,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["mandatory","true","disabled","true","id","attributedefinitions-edit-enterprise",3,"label","value"],["mandatory","false","disabled","true","id","attributedefinitions-edit-applicationName",3,"label","value"],["mandatory","true","disabled","true","id","attributedefinitions-edit-attributegroup",3,"label","value"],["class","col-md-3",4,"ngIf"],["mandatory","true","disabled","true","id","attributedefinitions-edit-attributedisplayname",3,"label","maxlength","value"],["mandatory","true","disabled","false","id","attributedefinitions-edit-displaysequence",3,"label","value","maxlength","valueChange"],["displaySeq",""],["mandatory","true","disabled","true","id","attributedefinitions-create-pagename",3,"label","value","maxlength"],[1,"col-md-3","d-flex","align-items-center"],["label","","id","attributedefinitions-create-enabled","mandatory","false",3,"options","checked","valueChange"],["label","","id","attributedefinitions-create-enabled","disabled","true","mandatory","false",3,"options","checked","valueChange"],["label","","id","attributedefinitions-create-mandatory","mandatory","false",3,"options","checked","valueChange"],["mandatory","true","disabled","false","id","attributedefinitions-edit-description",3,"label","defaultvalue","maxlength","valueChange"],["description",""],[1,"col-md-12","text-end","mt-2","mb-2","btns-group","pdl-0"],["className","btn btn-primary btn-sm","id","attributedefinitions-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","attributedefinitions-edit-cancel",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"row"],[1,"card"],[1,"card-content"],[3,"multiple"],[3,"createdBy","showrecordhistory","lastUpdatedBy","creationDate","lastUpdatedDate"],["mandatory","true","disabled","true","id","attributedefinitions-edit-attributename",3,"label","value","maxlength"],["attributeName",""],["mandatory","true","disabled","false","id","attributedefinitions-edit-attributedisplayname",3,"label","value","maxlength","valueChange"],["mandatory","true","disabled","false","id","attributedefinitions-edit-attributedisplayname",3,"label","maxlength","value","valueChange"],["mandatory","true","disabled","false","id","attributedefinitions-create-RangeMinValue",3,"label","value","maxlength","valueChange"],["rangeMinimumValue",""],["mandatory","true","disabled","false","id","attributedefinitions-create-RangeMaxValue",3,"label","value","maxlength","valueChange"],["rangeMaximumValue",""],["mandatory","false","disabled","false","id","attributedefinitions-create-RangePrefixValue",3,"label","value","maxlength","valueChange"],["mandatory","false","disabled","false","id","attributedefinitions-create-RangeSuffixValue",3,"label","value","maxlength","valueChange"],["id","attributedefinitions-edit-lookuptype",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["lookupTypeDropdwonSearch",""],["mandatory","true","disabled","true","id","attributedefinitions-create-pagename",3,"label","value"],["disabled","false","mandatory","true","id","listview-edit-tablename",3,"label","defaultValue","options","valueChange"],["TableNameAdd",""],["disabled","false","mandatory","true","id","listview-create-module",3,"label","defaultValue","options","valueChange"],["id","attributedefinitions-create-defaultvalue",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["fieldValue",""],["id","attributedefinitions-edit-defaultvalue",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["defaultValueInput",""],["disabled","false","id","attributedefinitions-edit-defaultvalue",3,"label","value","mandatory","maxlength","valueChange"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.YNc(18,Ze,4,5,"div",13),e.YNc(19,Ue,4,5,"div",13),e.YNc(20,ke,3,5,"div",13),e.YNc(21,Be,3,5,"div",13),e.TgZ(22,"div",9),e._UZ(23,"app-input",14),e.ALo(24,"translate"),e.qZA(),e.YNc(25,Pe,4,5,"div",13),e.YNc(26,Ge,4,5,"div",13),e.YNc(27,qe,3,5,"div",13),e.YNc(28,Qe,3,5,"div",13),e.YNc(29,Ye,4,6,"div",13),e.TgZ(30,"div",9)(31,"app-inputnumber",15,16),e.NdJ("valueChange",function(r){return a.changeDisplaySequence(r)}),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",9),e._UZ(35,"app-input",17),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"div",18)(38,"app-checkbox",19),e.NdJ("valueChange",function(r){return a.changeFieldLevelAttributeEnabledvalue(r)}),e.qZA()(),e.YNc(39,He,3,4,"div",13),e.YNc(40,Ke,4,5,"div",13),e.YNc(41,We,3,5,"div",13),e.YNc(42,Xe,4,6,"div",13),e.YNc(43,ze,4,6,"div",13),e.YNc(44,$e,4,6,"div",13),e.TgZ(45,"div",18)(46,"app-checkbox",20),e.NdJ("valueChange",function(r){return a.ChangeEnabledvalue(r)}),e.qZA()(),e.TgZ(47,"div",18)(48,"app-checkbox",21),e.NdJ("valueChange",function(r){return a.ChangeMandatoryValue(r)}),e.qZA()(),e.TgZ(49,"div",3)(50,"app-textarea",22,23),e.NdJ("valueChange",function(r){return a.changeDescription(r)}),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",24)(54,"app-button",25),e.NdJ("buttonOnClick",function(){return a.updateRecord()}),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"app-button",26),e.NdJ("buttonOnClick",function(){return a.cancel()}),e.ALo(57,"translate"),e.qZA()(),e.TgZ(58,"div",27),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",28)(62,"div",3)(63,"div",29)(64,"div",30)(65,"p-accordion",31),e._UZ(66,"app-recordhistory",32),e.qZA()()()()()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,52,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.defaultEnterprise),e.xp6(3),e.s9C("label",e.lcZ(14,54,"COMMON_FIELDS.APPLICATION_NAME")),e.s9C("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.application_name?null:a.viewData.application_name.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(17,56,"ATTRIBUTES.ATTRIBUTE_GROUP")),e.s9C("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.attribute_group?null:a.viewData.attribute_group.lookup_id)),e.xp6(2),e.Q6J("ngIf",!1===a.disable),e.xp6(1),e.Q6J("ngIf",!0===a.disable),e.xp6(1),e.Q6J("ngIf",!1===a.disable),e.xp6(1),e.Q6J("ngIf",!0===a.disable),e.xp6(2),e.s9C("label",e.lcZ(24,58,"ATTRIBUTES.ATTRIBUTE_TYPE")),e.s9C("value",a.defaultAttributeTypeName),e.Q6J("maxlength",40),e.xp6(2),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.disable),e.xp6(2),e.s9C("label",e.lcZ(33,60,"COMMON_FIELDS.DISPLAY_SEQUENCE")),e.s9C("value",a.defaultDisplaySequence),e.Q6J("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(36,62,"COMMON_FIELDS.PAGE")),e.s9C("value",a.defaultpageName),e.Q6J("maxlength",200),e.xp6(3),e.Q6J("options",a.fieldLevelAttributeOptions)("checked",a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled&&!1===a.tableNameDroupDownIsEnable),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled&&!0===a.tableNameDroupDownIsEnable),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.defaultValueDisable),e.xp6(1),e.Q6J("ngIf",!1===a.defaultValueDisable),e.xp6(2),e.Q6J("options",a.enabledOptions)("checked",a.isEnabled),e.xp6(2),e.Q6J("options",a.mandatoryOptions)("checked",a.isMandatoryValue),e.xp6(2),e.s9C("label",e.lcZ(52,64,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.defaultDescription),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(55,66,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(57,68,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(60,70,a.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("createdBy",null==a.viewData?null:a.viewData.created_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("lastUpdatedBy",null==a.viewData?null:a.viewData.updated_by)("creationDate",null==a.viewData?null:a.viewData.createdAt)("lastUpdatedDate",null==a.viewData?null:a.viewData.updatedAt))},dependencies:[f.O5,E.UQ,N.r,S.a,J.k,y.b,D.R,x.K,Z.C,U.W,C.q,h.X$]})}return s})();class tt{application_name;attribute_description;attribute_display_name;attribute_group;attribute_lookup;attribute_name;attribute_owner;attribute_type;default_value;enterprise;is_enabled;is_field_level_attribute;is_mandatory;max_value;min_value;page_name;prefix;ref_field;ref_field_value;sequence_order;suffix;table}function at(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",31),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",null==t.attributeView?null:t.attributeView.attribute_display_name)}}function it(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",16),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_PAGE_TITLES.ATTRIBUTE")),e.s9C("value",null==t.attributeView?null:t.attributeView.attribute_name)}}function nt(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",31),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",null==t.attributeView?null:t.attributeView.attribute_display_name)}}function st(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",16),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_PAGE_TITLES.ATTRIBUTE")),e.s9C("value",null==t.attributeView?null:t.attributeView.attribute_name)}}function lt(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",32),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"ATTRIBUTES.RANGE_MIN_VALUE")),e.s9C("value",null==t.attributeView?null:t.attributeView.min_value)}}function rt(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",33),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"ATTRIBUTES.RANGE_MAX_VALUE")),e.s9C("value",null==t.attributeView?null:t.attributeView.max_value)}}function ot(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",34),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"GENERAL_SETTINGS.PREFIX")),e.s9C("value",null==t.attributeView?null:t.attributeView.prefix)}}function ut(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",35),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"GENERAL_SETTINGS.SUFFIX")),e.s9C("value",null==t.attributeView?null:t.attributeView.suffix)}}function dt(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",36),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_PAGE_TITLES.LOOKUP_TYPE")),e.s9C("value",null==t.attributeView||null==t.attributeView.attribute_lookup?null:t.attributeView.attribute_lookup.lookup_type_name)}}function pt(s,o){if(1&s&&(e.TgZ(0,"div",19),e._UZ(1,"app-checkbox",37),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("options",t.fieldLevelAttributeOptions)("checked",t.isFieldLevelAttributeEnabled)}}function ct(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",18),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"NEW_VARIABLES.TABLE_NAME")),e.s9C("value",null==t.attributeView||null==t.attributeView.table?null:t.attributeView.table.name)}}function bt(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",18),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"NEW_VARIABLES.REFERENCE_FIELD")),e.s9C("value",null==t.attributeView?null:t.attributeView.ref_field)}}function ht(s,o){if(1&s&&(e.TgZ(0,"div",9),e._UZ(1,"app-input",18),e.ALo(2,"translate"),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"ATTRIBUTES.FIELD_VALUES")),e.s9C("value",null==t.attributeView||null==t.attributeView.ref_field_value?null:t.attributeView.ref_field_value.name)}}let ft=(()=>{class s extends T.O{attributeDefinitionService;loggerService;navigationService;router;translateService;activatedRoute;commonService;MandatoryOptions;RangeFieldEnabled=!1;attributeDefId;attributeType;attributeView;checkboxOptions;createdTime;disable=!1;dataJsonObj={};enterpriseId;fieldLevelAttributeOptions;isFieldLevelAttributeEnabled=!1;lastUpdatedTime;lookupsViewJson;object_type;constructor(t,i,a,n,r,d,p){super(d,p),this.attributeDefinitionService=t,this.loggerService=i,this.navigationService=a,this.router=n,this.translateService=r,this.activatedRoute=d,this.commonService=p,this.route.queryParams.subscribe(c=>{this.dataJsonObj.queryParamsObj={defaultView:c.defaultView,selectedMenuId:c.selectedMenuId,selectedSubMenuId:c.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.ATTRIBUTE_DEFINITIONS,this.commonService.trackView(l.sn.ATTRIBUTEDEFINITION_VIEW),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.ATTRIBUTE_DEFINITIONS,l.AM.ACTIONS,l.In.RECORD_HISTORY),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.ATTRIBUTE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],document.getElementsByTagName("body"),this.activatedRoute.params.subscribe(a=>{this.attributeDefId=a.id}),this.getRecordById(),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.MandatoryOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.MANDATORY"),key:"checkbox2"}],this.fieldLevelAttributeOptions=[{value:"112",displayname:this.translateService.instant("ATTRIBUTES.FIELD_LEVEL_ATTRIBUTE"),key:"checkbox3"}],this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(l.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=l.hf.ATTRIBUTE_DEFINITIONS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getRecordById(){this.attributeDefinitionService.get(this.attributeDefId).subscribe(t=>{this.attributeView=t,this.enterpriseId=this.attributeView.enterprise.enterprise_id,this.attributeType=this.lookupLanguageTranslations(this.attributeView.attribute_type.lookup_id),this.isFieldLevelAttributeEnabled=this.attributeView.is_field_level_attribute,this.disable=this.attributeView.attribute_type.lookup_name!==l.H1.LIST_FIELD&&this.attributeView.attribute_type.lookup_name!==l.H1.MULTI_SELECT_FIELD,this.RangeFieldEnabled=this.attributeView.attribute_type.lookup_name===l.H1.RANGE_FIELD,this.lastUpdatedTime=null===t.updatedAt?t.updatedAt:this.commonService.dbTimezoneFormatWithHours(t.updatedAt),this.createdTime=null===t.createdAt?t.createdAt:this.commonService.dbTimezoneFormatWithHours(t.createdAt)},t=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)})}getDynamicJson(t){var i=this;return(0,_.Z)(function*(){for(let a of t)i.dataJsonObj[a.storingFieldName]=yield i.commonService.getDynamicJson(i.dataJsonObj.enterpriseId,a.folderName,a.jsonType);i.dataJsonObj.selectedObj={},i.dataJsonObj.selectedObj.recordId=i.attributeDefId,i.dataJsonObj.selectedObj.pageObj=i.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===i.dataJsonObj.selectedPage),i.dataJsonObj.selectedObjEnabled=!0})()}cancel(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(i){return new(i||s)(e.Y36(m.K),e.Y36(v.m),e.Y36(I.f),e.Y36(b.F0),e.Y36(h.sK),e.Y36(b.gz),e.Y36(g.v))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-attributedefinition-view"]],features:[e.qOj],decls:60,vars:64,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","attributedefinitions-view-enterprise",3,"label","value"],["disabled","true","mandatory","false","id","attributedefinitions-view-attributegroup",3,"label","value"],["mandatory","false","disabled","true","id","attributedefinitions-view-applicationName",3,"label","value"],["class","col-md-3",4,"ngIf"],["disabled","true","mandatory","false","id","attributedefinitions-view-attributetype",3,"label","value"],["mandatory","false","disabled","true","id","attributedefinitions-view-displaysequence",3,"label","value"],["mandatory","true","disabled","true","id","attributedefinitions-view-attributename",3,"label","value"],["class","col-md-3 d-flex align-items-center",4,"ngIf"],["mandatory","false","disabled","true","id","attributedefinitions-view-defaultvalue",3,"label","value"],[1,"col-md-3","d-flex","align-items-center"],["label","","mandatory","true","disabled","true",3,"options","checked"],["label","","id","attributedefinitions-create-mandatory","mandatory","false","disabled","true",3,"options","checked"],["mandatory","true","disabled","true","id","attributedefinitions-edit-description",3,"label","defaultvalue"],["discription",""],[1,"col-md-12","text-end","mt-2","mb-2","pdl-0"],["id","user-create-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],[3,"multiple"],[3,"createdBy","showrecordhistory","lastUpdatedBy","creationDate","lastUpdatedDate"],["mandatory","false","disabled","true","id","attributedefinitions-view-displayname",3,"label","value"],["disabled","true","mandatory","false","id","attributedefinitions-view-range_min_value",3,"label","value"],["disabled","true","mandatory","false","id","attributedefinitions-view-range_max_value",3,"label","value"],["disabled","true","mandatory","false","id","attributedefinitions-view-range_prefix_value",3,"label","value"],["disabled","true","mandatory","false","id","attributedefinitions-view-range_suffix_value",3,"label","value"],["mandatory","false","disabled","true","id","attributedefinitions-view-lookuptype",3,"label","value"],["label","","id","attributedefinitions-create-enabled","mandatory","false","disabled","true",3,"options","checked"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.YNc(18,at,3,4,"div",13),e.YNc(19,it,3,4,"div",13),e.YNc(20,nt,3,4,"div",13),e.YNc(21,st,3,4,"div",13),e.TgZ(22,"div",9),e._UZ(23,"app-input",14),e.ALo(24,"translate"),e.qZA(),e.YNc(25,lt,3,4,"div",13),e.YNc(26,rt,3,4,"div",13),e.YNc(27,ot,3,4,"div",13),e.YNc(28,ut,3,4,"div",13),e.YNc(29,dt,3,4,"div",13),e.TgZ(30,"div",9),e._UZ(31,"app-input",15),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",9),e._UZ(34,"app-input",16),e.ALo(35,"translate"),e.qZA(),e.YNc(36,pt,2,2,"div",17),e.YNc(37,ct,3,4,"div",13),e.YNc(38,bt,3,4,"div",13),e.YNc(39,ht,3,4,"div",13),e.TgZ(40,"div",9),e._UZ(41,"app-input",18),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"div",19),e._UZ(44,"app-checkbox",20),e.qZA(),e.TgZ(45,"div",19),e._UZ(46,"app-checkbox",21),e.qZA(),e.TgZ(47,"div",3),e._UZ(48,"app-textarea",22,23),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"div",24)(52,"app-button",25),e.NdJ("buttonOnClick",function(){return a.cancel()}),e.ALo(53,"translate"),e.qZA()()(),e.TgZ(54,"div",26)(55,"div",3)(56,"div",27)(57,"div",28)(58,"p-accordion",29),e._UZ(59,"app-recordhistory",30),e.qZA()()()()()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,46,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.attributeView||null==a.attributeView.enterprise?null:a.attributeView.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,48,"ATTRIBUTES.ATTRIBUTE_GROUP")),e.s9C("value",a.lookupLanguageTranslations(null==a.attributeView||null==a.attributeView.attribute_group?null:a.attributeView.attribute_group.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(17,50,"COMMON_FIELDS.APPLICATION_NAME")),e.s9C("value",a.lookupLanguageTranslations(null==a.attributeView||null==a.attributeView.application_name?null:a.attributeView.application_name.lookup_id)),e.xp6(2),e.Q6J("ngIf",!0===a.disable),e.xp6(1),e.Q6J("ngIf",!0===a.disable),e.xp6(1),e.Q6J("ngIf",!1===a.disable),e.xp6(1),e.Q6J("ngIf",!1===a.disable),e.xp6(2),e.s9C("label",e.lcZ(24,52,"ATTRIBUTES.ATTRIBUTE_TYPE")),e.s9C("value",a.lookupLanguageTranslations(null==a.attributeView||null==a.attributeView.attribute_type?null:a.attributeView.attribute_type.lookup_id)),e.xp6(2),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",a.RangeFieldEnabled),e.xp6(1),e.Q6J("ngIf",!1===a.disable),e.xp6(2),e.s9C("label",e.lcZ(32,54,"COMMON_FIELDS.DISPLAY_SEQUENCE")),e.s9C("value",null==a.attributeView?null:a.attributeView.sequence_order),e.xp6(3),e.s9C("label",e.lcZ(35,56,"COMMON_FIELDS.PAGE")),e.s9C("value",null==a.attributeView||null==a.attributeView.page_name?null:a.attributeView.page_name.page_display_name),e.xp6(2),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(1),e.Q6J("ngIf",!0===a.isFieldLevelAttributeEnabled),e.xp6(2),e.s9C("label",e.lcZ(42,58,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("value",null==a.attributeView?null:a.attributeView.default_value),e.xp6(3),e.Q6J("options",a.checkboxOptions)("checked",null==a.attributeView?null:a.attributeView.is_enabled),e.xp6(2),e.Q6J("options",a.MandatoryOptions)("checked",null==a.attributeView?null:a.attributeView.is_mandatory),e.xp6(2),e.s9C("label",e.lcZ(50,60,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",null==a.attributeView?null:a.attributeView.attribute_description),e.xp6(4),e.s9C("label",e.lcZ(53,62,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("createdBy",null==a.attributeView?null:a.attributeView.created_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("lastUpdatedBy",null==a.attributeView?null:a.attributeView.updated_by)("creationDate",null==a.attributeView?null:a.attributeView.createdAt)("lastUpdatedDate",null==a.attributeView?null:a.attributeView.updatedAt))},dependencies:[f.O5,E.UQ,N.r,S.a,y.b,D.R,U.W,C.q,h.X$]})}return s})();var O=u(11210);const _t=[{path:"",data:{title:"Attribute Definitions"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[O.P],component:Q,data:{object_type:"ATTRIBUTE_DEFINITIONS",title:"Attribute Listing",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.ATTRIBUTE_DEFINITIONS+"."+l.In.ENABLED,pageName:l.hf.ATTRIBUTE_DEFINITIONS}},{path:":id/view",canActivate:[O.P],component:ft,data:{object_type:"Attribute Definition view",title:"Attribute Definition view",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.ATTRIBUTE_DEFINITIONS+"."+l.In.VIEW,pageName:l.hf.ATTRIBUTE_DEFINITIONS,pageSetting:l.AM.ACTIONS,settingField:l.In.VIEW}},{path:"create",canActivate:[O.P],component:Se,data:{object_type:"Attribute Definition Create",title:"Attribute Definition Create",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.ATTRIBUTE_DEFINITIONS+"."+l.In.CREATE,pageName:l.hf.ATTRIBUTE_DEFINITIONS,pageSetting:l.AM.ACTIONS,settingField:l.In.CREATE}},{path:":id/edit",canActivate:[O.P],component:et,data:{object_type:"Attribute Definition Edit",title:"Attribute Definition Edit",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.ATTRIBUTE_DEFINITIONS+"."+l.In.EDIT,pageName:l.hf.ATTRIBUTE_DEFINITIONS,pageSetting:l.AM.ACTIONS,settingField:l.In.EDIT}}]}];let mt=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[b.Bz.forChild(_t),b.Bz]})}return s})();var k=u(24006),gt=u(83748),Tt=u(93144),vt=u(65673);let At=(()=>{class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[mt,f.ez,h.aw,k.u5,k.UX,Tt.U$,E.fx,vt.Q,gt.v,f.ez]})}return s})()}}]);