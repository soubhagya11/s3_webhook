"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5581],{5581:(Xe,J,d)=>{d.r(J),d.d(J,{UserTypesModule:()=>Ke});var T=d(32174),O=d(36895),P=d(24006),Q=d(3848),H=d(83748),E=d(93144),_=d(54463),W=d(65673),N=d(11210),l=d(32236),g=d(62510),y=d(15861),v=d(71568),z=d(57936),f=d(42786),S=d(27601),m=d(7505),x=d(77129),e=d(94650),I=d(46448),A=d(70057),C=d(10805),U=d(2387),M=d(56368),Z=d(93837),w=d(24929),B=d(42919),L=d(37415);const K=["descriptionTextArea"],X=["displayNameAdd"],ee=["displayNameEdit"],ae=["displayNameInput"],te=["languageAdd"],se=["userTypeDropDown"],ne=["ownerInput"];function ie(i,o){if(1&i&&(e.TgZ(0,"tr",75)(1,"td",76),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function re(i,o){if(1&i&&e.YNc(0,ie,4,4,"tr",74),2&i){const t=e.oxw();e.Q6J("ngIf",t.languagesData&&0==t.languagesData.length)}}function le(i,o){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function oe(i,o){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,le,3,3,"th",77),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function de(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),n=a.rowIndex,r=a.$implicit,p=e.oxw();return e.KtG(p.editLanguages(n,r))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,s=e.oxw().$implicit;e.Gre("",t.class," "),e.Q6J("pSelectableRow",s),e.xp6(1),e.hij(" ",s[t.field]," ")}}function pe(i,o){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,de,2,5,"td",78),e.qZA()),2&i){const t=o.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function ue(i,o){if(1&i&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",81)(6,"br"),e.qZA()),2&i){const t=o.$implicit,s=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",s[t.field],e.oJD)}}function ge(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,ue,7,4,"div",80),e.qZA()()()),2&i){const t=o.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}function ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",82)(1,"ion-label",83),e.NdJ("click",function(){const a=e.CHM(t),n=a.index,r=a.$implicit,p=e.oxw();return e.KtG(p.editLanguages(n,r))}),e.TgZ(2,"span",84),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",85),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"span",85),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(3),e.AsE(" ",e.lcZ(4,6,"PREFERENCES.LANGUAGE"),": ",null==t?null:t.language_name_value,""),e.xp6(3),e.AsE("",e.lcZ(7,8,"COMMON_FIELDS.DISPLAY_NAME"),": ",null==t?null:t.user_type_display_name," "),e.xp6(3),e.AsE("",e.lcZ(10,10,"COMMON_FIELDS.ENABLED"),": ",null==t?null:t.is_enabled_value," ")}}function he(i,o){1&i&&(e.TgZ(0,"p",86),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),""))}let _e=(()=>{class i{loggerService;userTypesService;lookupCodesService;navigationService;router;translateService;uiUtils;commonService;enterprisesService;toastController;descriptionTextArea;displayNameAdd;displayNameEdit;displayNameInput;languageAdd;userTypeDropDown;ownerInput;addPopupError;canDisable=!1;canDisableCheckboxOptions;checkboxOptions;createParentProfileOptions=[];defaultOwner;defaultOwnerId;defaultOwnerObj;deleteLanguagesData;deleteRowIndex;description;disableSubmitBtn=!1;editRowIndex;enterpriseData;enterpriseId;enterpriseName;enterpriseShortName;enterpriseViewId;error;headerAction;headers;isEnabled=!0;isLangTransEnabled=!0;langTransDescription;langTransDisplayname;languageCode;languageName;languagesData=[];loginUserDateFormat;userTypeData;userTypes;myData;userTypesOptions;usersCreateObj=new me;ownerOptions;pageTitle;translateLanguageOptions;dataJsonObj={};languageId;language;constructor(t,s,a,n,r,p,u,c,b,h){this.loggerService=t,this.userTypesService=s,this.lookupCodesService=a,this.navigationService=n,this.router=r,this.translateService=p,this.uiUtils=u,this.commonService=c,this.enterprisesService=b,this.toastController=h}ngOnInit(){this.headerAction={BACK:!0},this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.USER_TYPES,this.commonService.trackView(l.sn.USERTYPE_CREATE),this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE);const t=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=t.dateFormat,this.commonService.addDaysToDate((new Date).toISOString(),10),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.USER_TYPES",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],document.getElementsByTagName("body"),this.getEnterprisesViewData(),this.checkboxOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dataJsonObj.languagesFromJson={},this.getLanguagesfromJson(),this.createParentProfileOptions=[{value:"",displayname:this.translateService.instant("NEW_VARIABLES.CREATE_PARENT_PROFILE"),key:"checkbox1"}],this.dataJsonObj.approvalregistration=[{value:"",displayname:this.translateService.instant("COMMON_PAGE_TITLES.ENABLE_REGISTRATION_APPROVALS"),key:"checkbox1"}],this.dataJsonObj.allowopenregistration=[{value:"",displayname:this.translateService.instant("COMMON_PAGE_TITLES.ALLOW_OPEN_REGISTRATION"),key:"checkbox1"}],this.dataJsonObj.isGroupCreate=[{value:"",displayname:this.translateService.instant("EVENTS.GROUPCREATING"),key:"checkbox1"}],this.dataJsonObj.emailVerificationRequired=[{value:"",displayname:this.translateService.instant("EVENTS.EMAIL_VERIFICATION"),key:"checkbox1"}],"0"===localStorage.getItem(l.BU.SELECTED_ENTERPRISE)||(this.canDisable=!0),this.headers=[[{headersort:"disableth",field:"language_name_value",header:"PREFERENCES.LANGUAGE",class:"w-100"},{headersort:"disableth",field:"user_type_display_name",header:"COMMON_FIELDS.DISPLAY_NAME",class:""},{headersort:"disableth",field:"is_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"}]],this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(n=>{this.dataJsonObj.lookupCodesListJSON=n})}getEnterprisesViewData(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(t=>{this.enterpriseName=t.enterprise_name,this.enterpriseViewId=t._id,this.enterpriseShortName=t.short_name},t=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)}}changeDisplayName(t){t.value&&(this.error="",this.usersCreateObj.user_type_display_name=t.value,this.description=t.value,this.usersCreateObj.user_type_name=t.value.toUpperCase().replace(/[&\/\\/ \#,+()$~%.'":*?<>{}^!@-]/g,"_"),this.usersCreateObj.description=this.usersCreateObj.user_type_display_name,this.disableSubmitBtn=!1)}changeCheckBoxValue(t,s,a){try{a[s]=t.value}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBoxValue",n)}}changeDescription(t){this.description=t.value,this.usersCreateObj.description=t.value}createRecord(){try{this.displayNameInput.isValid()&&this.descriptionTextArea.isValid()&&(this.disableSubmitBtn=!0,this.usersCreateObj.enterprise={enterprise_id:this.enterpriseViewId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},this.usersCreateObj.language_translations=this.languagesData,this.userTypesService.create(this.usersCreateObj).then(s=>{this.disableSubmitBtn=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.router.routeReuseStrategy.clearModuleRouteCache("usertypes"),this.router.navigateByUrl("admin/usertypes")},s=>{this.commonErrorCodes(JSON.parse(s))}))}catch(t){this.loggerService.setLoggerError(this.constructor.name,"createRecord",t)}}commonErrorCodes(t){409===JSON.parse(t[l.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancelBtn(){this.commonService.redirectToPreviousUrl()}clearmessage(){this.error=""}languagesAdd(t){try{t.stopPropagation(),this.displayNameAdd.clearmessage(),this.languageAdd.clearmessage(),this.languageAdd.clearSelectInput(),this.languageCode="",this.languageName="",this.addPopupError="",this.langTransDisplayname="",this.langTransDescription="",this.isLangTransEnabled=!0,this.getLanguagesList(""),$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"languagesAdd",s)}}changeLanguage(t){t&&(this.languageId=t.ID,this.languageName=t.NAME,this.language=t.language_name,this.languageCode=t.language_code)}changeLangTransDisplayname(t){t&&(this.langTransDisplayname=t.value,this.langTransDescription=t.value)}changeLangTransCheckBox(t){t&&(this.isLangTransEnabled=t.value)}changeLangTransDescription(t){t&&(this.langTransDescription=t.value)}languagesAddSubmit(){try{this.languageAdd.isValid()&&this.displayNameAdd.isValid()&&(this.languagesData.find(s=>s.language.language_id===this.languageId)?this.addPopupError="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS":(this.languagesData.push({language:{language_id:this.languageId,language_name:this.language,language_code:this.languageCode},language_name_value:this.languageName,user_type_display_name:this.langTransDisplayname,description:this.langTransDescription,is_enabled:this.isLangTransEnabled,is_enabled_value:this.isLangTransEnabled?"Yes":"No"}),$("#exampleModal1").modal("hide")))}catch(t){this.loggerService.setLoggerError(this.constructor.name,"languagesAddSubmit",t)}}editLanguages(t,s){try{this.editRowIndex=t,this.languageCode=s.language.language_code,this.languageName=s.language_name_value,this.langTransDisplayname=s.user_type_display_name,this.langTransDescription=s.description,this.isLangTransEnabled=s.is_enabled,this.displayNameEdit.clearmessage(),$("#exampleModal2").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal2")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"editLanguages",a)}}languagesEditSubmit(){try{for(let t=0;t<this.languagesData.length;t++)t===this.editRowIndex&&(this.languagesData[t].language={language_id:this.languageId,language_name:this.language,language_code:this.languageCode},this.languagesData[t].language_name_value=this.languageName,this.languagesData[t].user_type_display_name=this.langTransDisplayname,this.languagesData[t].description=this.langTransDescription,this.languagesData[t].is_enabled=this.isLangTransEnabled,this.languagesData[t].is_enabled_value=!0===this.isLangTransEnabled?"Yes":"No");$("#exampleModal2").modal("hide")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"languagesEditSubmit",t)}}removeLanguages(t,s){try{this.deleteRowIndex=t,this.languageCode=s.language.language_code,this.languageName=s.language_name_value,this.langTransDisplayname=s.user_type_display_name,this.langTransDescription=s.description,this.isLangTransEnabled=s.is_enabled,$("#exampleModal3").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal3")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"removeLanguages",a)}}languagesDeleteSubmit(){try{this.languagesData.splice(this.deleteRowIndex,1),$("#exampleModal3").modal("hide")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"languagesDeleteSubmit",t)}}getLanguagesfromJson(){var t=this;return(0,y.Z)(function*(){t.dataJsonObj.languagesFromJson=yield t.commonService.getLanguagesListJson(t.enterpriseId)})()}getLanguagesList(t){var s=this;return(0,y.Z)(function*(){try{yield s.userTypesService.getTranslateLanguages(s.enterpriseId).then(a=>{if(s.translateLanguageOptions=a[0].configoption_json.languages,s.translateLanguageOptions&&s.translateLanguageOptions.length>0){for(let n=0;n<s.translateLanguageOptions.length;n++)s.translateLanguageOptions[n].ID=s.translateLanguageOptions[n].language_id,s.translateLanguageOptions[n].NAME=s.dataJsonObj.languagesFromJson[s.translateLanguageOptions[n].language_name].language_display_name,s.translateLanguageOptions[n].language_code=s.translateLanguageOptions[n].language_code,s.translateLanguageOptions[n].language_id=s.translateLanguageOptions[n].language_id,s.translateLanguageOptions[n].language_name=s.translateLanguageOptions[n].language_name;if(s.translateLanguageOptions&&t){const n=s.translateLanguageOptions.filter(function(r){return r.NAME.toLowerCase().includes(t.toLowerCase())});s.translateLanguageOptions=n}}},a=>{s.loggerService.setLoggerError(s.constructor.name,"getLanguagesList",a)})}catch(a){s.loggerService.setLoggerError(s.constructor.name,"getLanguagesList",a)}})()}pageheadeActionClick(t){"BACK"==t.value&&this.cancelBtn()}cancelPopup(){$("#exampleModal1").modal("hide"),$("#exampleModal2").modal("hide"),$("#exampleModal3").modal("hide"),document.getElementsByTagName("body")[0].classList.remove("modale-popup-open")}static \u0275fac=function(s){return new(s||i)(e.Y36(f.m),e.Y36(m.j),e.Y36(x.X),e.Y36(I.f),e.Y36(g.F0),e.Y36(_.sK),e.Y36(S.s),e.Y36(v.v),e.Y36(z.e),e.Y36(A.yF))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-usertypes-create"]],viewQuery:function(s,a){if(1&s&&(e.Gf(K,5),e.Gf(X,5),e.Gf(ee,5),e.Gf(ae,5),e.Gf(te,5),e.Gf(se,5),e.Gf(ne,5)),2&s){let n;e.iGM(n=e.CRH())&&(a.descriptionTextArea=n.first),e.iGM(n=e.CRH())&&(a.displayNameAdd=n.first),e.iGM(n=e.CRH())&&(a.displayNameEdit=n.first),e.iGM(n=e.CRH())&&(a.displayNameInput=n.first),e.iGM(n=e.CRH())&&(a.languageAdd=n.first),e.iGM(n=e.CRH())&&(a.userTypeDropDown=n.first),e.iGM(n=e.CRH())&&(a.ownerInput=n.first)}},features:[e._Bn([m.j,S.s,x.X,v.v])],decls:145,vars:139,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],["id","extraPaddingBottomID",1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["disabled","true","id","usertype-create-enterprise",3,"label","value"],["autoCaseFlag","false","mandatory","true","disabled","false","id","usertype-create-displayname",3,"label","maxlength","valueChange","keypress"],["displayNameInput",""],[1,"col-md-3","d-flex","align-items-center"],["label","","mandatory","true","id","usertype-create-createparentprofile",3,"options","checked","valueChange"],[1,"col-md-2","d-flex","align-items-center"],["label","","mandatory","true","id","usertype-create-checkboxoptions",3,"options","checked","valueChange"],["label","","mandatory","false","id","usertype-create-checkboxoptions",3,"options","checked","valueChange"],[1,"col-md-10"],["mandatory","true","id","usertype-create-description",3,"label","defaultvalue","maxlength","valueChange"],["descriptionTextArea",""],[1,"col-md-12","text-end","mt-2","mb-2","order-md-1","order-2"],["className","btn btn-primary btn-sm","id","usertype-create-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","usertype-create-cancel",3,"label","buttonOnClick"],[1,"row"],[1,"text-danger","text-center"],[1,"card"],[1,"card-content"],[3,"multiple"],[1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["disabled","false","label","","className","btn btn-danger btn-sm btn-round btn-rounded","btnIcon","fas fa-plus","id","usertypes-create-translationsadd",3,"isEmitMouseEvent","buttonOnClick"],["selectionMode","single","dataKey","LineNum",1,"ptable","d-none","d-lg-block","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"d-lg-none"],["lines","full","class","pdl-0 pdr-0",4,"ngFor","ngForOf"],["class","text-center text-danger mb-0 no-data-txt",4,"ngIf"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body","ios-content"],[1,"col-md-4"],["mandatory","true","id","usertype-create-languagename-addpopup",3,"label","options","selectedOption","searchValueChange"],["languageAdd",""],["disabled","false","mandatory","true","autoCaseFlag","false","id","usertype-create-displayname-addpopup",3,"label","value","maxlength","valueChange"],["displayNameAdd",""],[1,"col-md-4","d-flex","align-items-center"],["label","","mandatory","true","id","usertype-create-checkboxoptions-addpopup",3,"options","checked","valueChange"],[1,"col-lg-12","col-md-12"],["mandatory","false","id","usertype-create-description-addpopup",3,"label","defaultvalue","maxlength","valueChange"],[1,"error-msg","col-md-10","text-danger","text-center","mb-0"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","usertype-translations-add-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","usertype-translations-add-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","true","disabled","true","id","usertype-create-displayname-editpopup",3,"label","value"],["disabled","false","mandatory","true","autoCaseFlag","false","id","usertype-create-displayname-editpopup",3,"label","value","maxlength","valueChange"],["displayNameEdit",""],["label","","mandatory","true","id","usertype-create-checkboxoptions-editpopup",3,"options","checked","valueChange"],["mandatory","false","id","usertype-create-description-editpopup",3,"label","defaultvalue","maxlength","valueChange"],["className","btn btn-primary btn-sm","id","usertype-translations-update-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","usertype-translations-update-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal3","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","false","disabled","true","id","usertype-create-displayname-deletepopup",3,"label","value"],["disabled","false","id","usertype-create-displayname-deletepopup","mandatory","true",3,"label","value"],["label","","mandatory","false","id","usertype-create-description-deletepopup","disabled","true",3,"options","checked"],["disabled","true","mandatory","false","id","usertype-create-description-deletepopup",3,"label","defaultvalue","maxlength"],["className","btn btn-primary btn-sm","id","usertype-translations-delete-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","usertype-translations-delete-cancel-btn",3,"label","buttonOnClick"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","class","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","click"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["lines","full",1,"pdl-0","pdr-0"],[1,"mg-0",3,"click"],["color","primary",1,"mg-0","fs-13"],[1,"mg-0","fs-11"],[1,"text-center","text-danger","mb-0","no-data-txt"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9)(13,"app-input",11,12),e.NdJ("valueChange",function(r){return a.changeDisplayName(r)})("keypress",function(){return a.clearmessage()}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",13)(17,"app-checkbox",14),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"create_parent_profile",a.usersCreateObj)}),e.qZA()(),e.TgZ(18,"div",15)(19,"app-checkbox",16),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"is_enabled",a.usersCreateObj)}),e.qZA()(),e.TgZ(20,"div",15)(21,"app-checkbox",16),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"is_registration_approval_required",a.usersCreateObj)}),e.qZA()(),e.TgZ(22,"div",15)(23,"app-checkbox",16),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"allow_open_registration",a.usersCreateObj)}),e.qZA()(),e.TgZ(24,"div",15)(25,"app-checkbox",17),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"isGroupCreate",a.usersCreateObj)}),e.qZA()(),e.TgZ(26,"div",15)(27,"app-checkbox",17),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"is_email_verification_required",a.usersCreateObj)}),e.qZA()(),e.TgZ(28,"div",18)(29,"app-textarea",19,20),e.NdJ("valueChange",function(r){return a.changeDescription(r)}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",21)(33,"app-button",22),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"app-button",23),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"div",24)(38,"div",25),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"div",24)(42,"div",3)(43,"div",26)(44,"div",27)(45,"p-accordion",28)(46,"p-accordionTab",29)(47,"p-header",30)(48,"span"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"app-button",31),e.NdJ("buttonOnClick",function(r){return a.languagesAdd(r)}),e.qZA()(),e.TgZ(52,"p-table",32),e.YNc(53,re,1,1,"ng-template",33),e.YNc(54,oe,2,1,"ng-template",34),e.YNc(55,pe,2,1,"ng-template",35),e.YNc(56,ge,4,2,"ng-template",36),e.qZA(),e.TgZ(57,"div",37)(58,"ion-list"),e.YNc(59,ce,11,12,"ion-item",38),e.qZA(),e.YNc(60,he,3,3,"p",39),e.qZA()()()()()()()()()()()()(),e.TgZ(61,"div",40)(62,"div",41)(63,"div",42)(64,"div",43)(65,"div",44),e._uU(66),e.ALo(67,"translate"),e.ALo(68,"translate"),e.qZA()(),e.TgZ(69,"div",45)(70,"div",8)(71,"div",46)(72,"app-dropdown-search",47,48),e.NdJ("selectedOption",function(r){return a.changeLanguage(r)})("searchValueChange",function(r){return a.getLanguagesList(r)}),e.ALo(74,"translate"),e.qZA()(),e.TgZ(75,"div",46)(76,"app-input",49,50),e.NdJ("valueChange",function(r){return a.changeLangTransDisplayname(r)}),e.ALo(78,"translate"),e.qZA()(),e.TgZ(79,"div",51)(80,"app-checkbox",52),e.NdJ("valueChange",function(r){return a.changeLangTransCheckBox(r)}),e.qZA()(),e.TgZ(81,"div",53)(82,"app-textarea",54),e.NdJ("valueChange",function(r){return a.changeLangTransDescription(r)}),e.ALo(83,"translate"),e.qZA()(),e.TgZ(84,"div",55),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"div",56)(88,"app-button",57),e.NdJ("buttonOnClick",function(){return a.languagesAddSubmit()}),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"app-button",58),e.NdJ("buttonOnClick",function(){return a.cancelPopup()}),e.ALo(91,"translate"),e.qZA()()()()()()(),e.TgZ(92,"div",59)(93,"div",41)(94,"div",42)(95,"div",43)(96,"div",44),e._uU(97),e.ALo(98,"translate"),e.ALo(99,"translate"),e.qZA()(),e.TgZ(100,"div",45)(101,"div",8)(102,"div",46),e._UZ(103,"app-input",60),e.ALo(104,"translate"),e.qZA(),e.TgZ(105,"div",46)(106,"app-input",61,62),e.NdJ("valueChange",function(r){return a.changeLangTransDisplayname(r)}),e.ALo(108,"translate"),e.qZA()(),e.TgZ(109,"div",51)(110,"app-checkbox",63),e.NdJ("valueChange",function(r){return a.changeLangTransCheckBox(r)}),e.qZA()(),e.TgZ(111,"div",53)(112,"app-textarea",64),e.NdJ("valueChange",function(r){return a.changeLangTransDescription(r)}),e.ALo(113,"translate"),e.qZA()(),e.TgZ(114,"div",56)(115,"app-button",65),e.NdJ("buttonOnClick",function(){return a.languagesEditSubmit()}),e.ALo(116,"translate"),e.qZA(),e.TgZ(117,"app-button",66),e.NdJ("buttonOnClick",function(){return a.cancelPopup()}),e.ALo(118,"translate"),e.qZA()()()()()()(),e.TgZ(119,"div",67)(120,"div",41)(121,"div",42)(122,"div",43)(123,"div",44),e._uU(124),e.ALo(125,"translate"),e.ALo(126,"translate"),e.qZA()(),e.TgZ(127,"div",45)(128,"div",8)(129,"div",46),e._UZ(130,"app-input",68),e.ALo(131,"translate"),e.qZA(),e.TgZ(132,"div",46),e._UZ(133,"app-input",69),e.ALo(134,"translate"),e.qZA(),e.TgZ(135,"div",51),e._UZ(136,"app-checkbox",70),e.qZA(),e.TgZ(137,"div",53),e._UZ(138,"app-textarea",71),e.ALo(139,"translate"),e.qZA(),e.TgZ(140,"div",56)(141,"app-button",72),e.NdJ("buttonOnClick",function(){return a.languagesDeleteSubmit()}),e.ALo(142,"translate"),e.qZA(),e.TgZ(143,"app-button",73),e.NdJ("buttonOnClick",function(){return a.cancelPopup()}),e.ALo(144,"translate"),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,81,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(15,83,"COMMON_FIELDS.DISPLAY_NAME")),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",a.createParentProfileOptions)("checked",a.usersCreateObj.create_parent_profile),e.xp6(2),e.Q6J("options",a.checkboxOptions)("checked",a.isEnabled),e.xp6(2),e.Q6J("options",a.dataJsonObj.approvalregistration)("checked",a.usersCreateObj.is_registration_approval_required),e.xp6(2),e.Q6J("options",a.dataJsonObj.allowopenregistration)("checked",a.usersCreateObj.allow_open_registration),e.xp6(2),e.Q6J("options",a.dataJsonObj.isGroupCreate)("checked",a.usersCreateObj.isGroupCreate),e.xp6(2),e.Q6J("options",a.dataJsonObj.emailVerificationRequired)("checked",a.usersCreateObj.is_email_verification_required),e.xp6(2),e.s9C("label",e.lcZ(31,85,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.description),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(34,87,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(36,89,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(40,91,a.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(50,93,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")),e.xp6(2),e.Q6J("isEmitMouseEvent",!0),e.xp6(1),e.Q6J("columns",a.headers)("value",a.languagesData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(7),e.Q6J("ngForOf",a.languagesData),e.xp6(1),e.Q6J("ngIf",a.languagesData&&0==a.languagesData.length),e.xp6(6),e.AsE("",e.lcZ(67,95,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(68,97,"COMMON_BUTTONS.BUTTON_ADD"),""),e.xp6(6),e.s9C("label",e.lcZ(74,99,"PREFERENCES.LANGUAGE")),e.Q6J("options",a.translateLanguageOptions),e.xp6(4),e.s9C("label",e.lcZ(78,101,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",a.langTransDisplayname),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",a.checkboxOptions)("checked",a.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(83,103,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.hij(" ",e.lcZ(86,105,a.addPopupError)," "),e.xp6(3),e.s9C("label",e.lcZ(89,107,"COMMON_BUTTONS.BUTTON_ADD")),e.xp6(2),e.s9C("label",e.lcZ(91,109,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(98,111,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(99,113,"COMMON_BUTTONS.BUTTON_UPDATE"),""),e.xp6(6),e.s9C("label",e.lcZ(104,115,"PREFERENCES.LANGUAGE")),e.s9C("value",a.languageName),e.xp6(3),e.s9C("label",e.lcZ(108,117,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",a.langTransDisplayname),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",a.checkboxOptions)("checked",a.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(113,119,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(116,121,"COMMON_BUTTONS.BUTTON_UPDATE")),e.xp6(2),e.s9C("label",e.lcZ(118,123,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(125,125,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(126,127,"COMMON_BUTTONS.BUTTON_DELETE"),""),e.xp6(6),e.s9C("label",e.lcZ(131,129,"PREFERENCES.LANGUAGE")),e.s9C("value",a.languageName),e.xp6(3),e.s9C("label",e.lcZ(134,131,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",a.langTransDisplayname),e.xp6(3),e.Q6J("options",a.checkboxOptions)("checked",a.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(139,133,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(142,135,"COMMON_BUTTONS.BUTTON_DELETE")),e.xp6(2),e.s9C("label",e.lcZ(144,137,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[O.sg,O.O5,E.iA,C.h4,C.jx,E.Ei,T.UQ,T.US,U.r,M.a,Z.b,w.R,B.C,L.q,_.X$]})}return i})();class me{description;enterprise;is_enabled;create_parent_profile;user_type_display_name;lookup_name;user_type_name;allow_open_registration;is_registration_approval_required;language_translations;isGroupCreate;is_email_verification_required}var V=d(15439),j=d(47561),D=d(26085),F=d(11735);const be=["descriptionTextArea"],Te=["displayNameAdd"],Oe=["displayNameEdit"],Ee=["displayNameInput"],ye=["languageAdd"];function Ce(i,o){if(1&i&&(e.TgZ(0,"tr",76)(1,"td",77),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function ve(i,o){if(1&i&&e.YNc(0,Ce,4,4,"tr",75),2&i){const t=e.oxw();e.Q6J("ngIf",t.languagesData&&0==t.languagesData.length)}}function Se(i,o){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function Ae(i,o){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,Se,3,3,"th",78),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Ne(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),n=a.rowIndex,r=a.$implicit,p=e.oxw();return e.KtG(p.editLanguages(n,r))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,s=e.oxw().$implicit;e.Gre("",t.class," "),e.Q6J("pSelectableRow",s),e.xp6(1),e.hij(" ",s[t.field]," ")}}function fe(i,o){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,Ne,2,5,"td",79),e.qZA()),2&i){const t=o.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Le(i,o){if(1&i&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",82)(6,"br"),e.qZA()),2&i){const t=o.$implicit,s=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",s[t.field],e.oJD)}}function De(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,Le,7,4,"div",81),e.qZA()()()),2&i){const t=o.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}function Ie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",83)(1,"ion-label",84),e.NdJ("click",function(){const a=e.CHM(t),n=a.index,r=a.$implicit,p=e.oxw();return e.KtG(p.editLanguages(n,r))}),e.TgZ(2,"span",85),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",86),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"span",86),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}if(2&i){const t=o.$implicit;e.xp6(3),e.AsE(" ",e.lcZ(4,6,"PREFERENCES.LANGUAGE"),": ",null==t?null:t.language_name_value,""),e.xp6(3),e.AsE("",e.lcZ(7,8,"COMMON_FIELDS.DISPLAY_NAME"),": ",null==t?null:t.user_type_display_name," "),e.xp6(3),e.AsE("",e.lcZ(10,10,"COMMON_FIELDS.ENABLED"),": ",null==t?null:t.is_enabled_value," ")}}function Ue(i,o){1&i&&(e.TgZ(0,"p",87),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),""))}let Me=(()=>{class i extends j.O{activatedRoute;loggerService;userTypeService;navigationService;router;translateService;uiUtils;commonService;lookupTypeService;toastController;descriptionTextArea;displayNameAdd;displayNameEdit;displayNameInput;languageAdd;addPopupError;checkboxOptions;createParentProfileOptions=[];createdBy;creationDate;defaultLookupcodes;defaultOwner;defaultOwnerId;defaultOwnerObj;deleteLanguagesData;deleteRowIndex;deleted_translation_ids=[];description;disableEditDescription=!1;disableEditDisplayName=!1;editRowIndex;enterpriseId;error;headers;isEnabled;isLangTransEnabled=!0;langTransDescription;langTransDisplayname;languageCode;languageName;languagesData=[];lastUpdatedBy;lastUpdatedDate;loginUserDateFormat;userTypeObj;usersEditObject=new Ze;nonZeroEnterpriseSettings;ownerOptions;pageTitle;recordID;translateLanguageOptions;viewData;languageId;dataJsonObj={};language;constructor(t,s,a,n,r,p,u,c,b,h){super(t,c),this.activatedRoute=t,this.loggerService=s,this.userTypeService=a,this.navigationService=n,this.router=r,this.translateService=p,this.uiUtils=u,this.commonService=c,this.lookupTypeService=b,this.toastController=h,this.activatedRoute.params.subscribe(R=>{this.recordID=R.id})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.USER_TYPES,this.commonService.trackView(l.sn.USERTYPE_EDIT),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.RECORD_HISTORY),document.getElementsByTagName("body"),this.checkboxOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.createParentProfileOptions=[{value:"",displayname:this.translateService.instant("NEW_VARIABLES.CREATE_PARENT_PROFILE"),key:"checkbox1"}],this.dataJsonObj.approvalregistration=[{value:"",displayname:this.translateService.instant("COMMON_PAGE_TITLES.ENABLE_REGISTRATION_APPROVALS"),key:"checkbox1"}],this.dataJsonObj.allowopenregistration=[{value:"",displayname:this.translateService.instant("COMMON_PAGE_TITLES.ALLOW_OPEN_REGISTRATION"),key:"checkbox1"}],this.dataJsonObj.isGroupCreate=[{value:"",displayname:this.translateService.instant("EVENTS.GROUPCREATING"),key:"checkbox1"}],this.dataJsonObj.emailVerificationRequired=[{value:"",displayname:this.translateService.instant("EVENTS.EMAIL_VERIFICATION"),key:"checkbox1"}];const s=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=s.dateFormat,this.nonZeroEnterpriseSettings="0"===localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.dataJsonObj.languagesFromJson={},this.getLanguagesfromJson(),this.headers=[[{headersort:"disableth",field:"language_name_value",header:"PREFERENCES.LANGUAGE",class:"w-100"},{headersort:"disableth",field:"user_type_display_name",header:"COMMON_FIELDS.DISPLAY_NAME",class:""},{headersort:"disableth",field:"is_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"},{headersort:"disableth",field:"updatedAt",header:"COMMON_RECORD_HISTORY.LAST_UPDATED_DATE",class:"w-140 text-end"},{headersort:"disableth",field:"updated_by_value",header:"COMMON_RECORD_HISTORY.LAST_UPDATED_BY",class:"w-140"}]]}getRecordById(t){try{this.userTypeService.get(t,this.enterpriseId).subscribe(s=>{if(this.viewData=s,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.USER_TYPE",value:this.viewData.enterpriseObj.user_type_display_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.usersEditObject.is_enabled=this.viewData.enterpriseObj.is_enabled,this.usersEditObject.enterprise=this.viewData.enterpriseObj.enterprise,this.usersEditObject.is_registration_approval_required=this.viewData.enterpriseObj.is_registration_approval_required,this.usersEditObject.allow_open_registration=this.viewData.enterpriseObj.allow_open_registration,this.usersEditObject.is_email_verification_required=this.viewData.enterpriseObj.is_email_verification_required,this.usersEditObject.user_type_name=this.viewData.user_type_name,this.usersEditObject.user_type_display_name=this.viewData.enterpriseObj.user_type_display_name,this.usersEditObject.create_parent_profile=this.viewData.enterpriseObj.create_parent_profile,this.usersEditObject.description=this.viewData.enterpriseObj.description,this.viewData.language_translations)for(let a=0;a<this.viewData.language_translations.length;a++)this.viewData.language_translations[a].language_name_value=this.dataJsonObj.languagesFromJson[this.viewData.language_translations[a].language.language_name].language_display_name,this.viewData.language_translations[a].is_enabled_value=!0===this.viewData.language_translations[a].is_enabled?"Yes":"No",this.viewData.language_translations[a].updatedAt=this.viewData.language_translations[a].updatedAt?V(this.viewData.language_translations[a].updatedAt).format(this.loginUserDateFormat):"",this.viewData.language_translations[a].updated_by_value=this.viewData.language_translations[a].updated_by.l_name+", "+this.viewData.language_translations[a].updated_by.f_name,this.languagesData.find(r=>r._id===this.viewData.language_translations[a]._id)||this.languagesData.push(this.viewData.language_translations[a]);this.getGroupData()},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)}}getGroupData(){this.userTypeService.getGroup(this.viewData.enterpriseObj.enterprise.enterprise_id,this.viewData._id).subscribe(t=>{this.usersEditObject.isGroupCreate=!!(t&&t.rows.length>0)},t=>{this.loggerService.setLoggerError(this.constructor.name,"getGroupData",t)})}changeDisplayName(t){this.usersEditObject.user_type_display_name=t.value}changeCheckBoxValue(t,s,a){try{a[s]=t.value}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBoxValue",n)}}changeDescription(t){this.usersEditObject.description=t.value}updateRecord(){try{this.displayNameInput.isValid()&&this.descriptionTextArea.isValid()&&(this.usersEditObject.language_translations=this.languagesData,this.userTypeService.update(this.recordID,this.usersEditObject).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},t=>{this.commonErrorCodes(JSON.parse(t))}))}catch(t){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",t)}}commonErrorCodes(t){409===JSON.parse(t[l.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancelBtn(){this.commonService.redirectToPreviousUrl()}languagesAdd(t){try{t.stopPropagation(),this.displayNameAdd.clearmessage(),this.languageAdd.clearmessage(),this.languageAdd.clearSelectInput(),this.languageCode="",this.languageName="",this.addPopupError="",this.langTransDisplayname="",this.langTransDescription="",this.isLangTransEnabled=!0,$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"languagesAdd",s)}}changeLanguage(t){t&&(this.languageId=t.ID,this.languageName=t.NAME,this.language=t.language_name,this.languageCode=t.language_code)}changeLangTransDisplayname(t){t&&(this.langTransDisplayname=t.value,this.langTransDescription=t.value)}changeLangTransCheckBox(t){t&&(this.isLangTransEnabled=t.value)}changeLangTransDescription(t){t&&(this.langTransDescription=t.value)}languagesAddSubmit(){try{this.languageAdd.isValid()&&this.displayNameAdd.isValid()&&(this.languagesData.find(s=>s.language.language_id===this.languageId)?this.addPopupError="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS":(this.languagesData.push({language:{language_id:this.languageId,language_name:this.language,language_code:this.languageCode},language_name_value:this.languageName,user_type_display_name:this.langTransDisplayname,description:this.langTransDescription,is_enabled:this.isLangTransEnabled,is_enabled_value:this.isLangTransEnabled?"Yes":"No"}),$("#exampleModal1").modal("hide")))}catch(t){this.loggerService.setLoggerError(this.constructor.name,"languagesAddSubmit",t)}}cancelPopup(){$("#exampleModal1").modal("hide"),$("#exampleModal2").modal("hide"),$("#exampleModal3").modal("hide"),document.getElementsByTagName("body")[0].classList.remove("modale-popup-open")}editLanguages(t,s){try{this.editRowIndex=t,this.languageId=s.language.language_id,this.language=s.language.language_name,this.languageCode=s.language.language_code,this.languageName=s.language_name_value,this.langTransDisplayname=s.user_type_display_name,this.langTransDescription=s.description,this.isLangTransEnabled=s.is_enabled,this.displayNameEdit.clearmessage(),$("#exampleModal2").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal2")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"editLanguages",a)}}languagesEditSubmit(){try{for(let t=0;t<this.languagesData.length;t++)t===this.editRowIndex&&(this.languagesData[t].language={language_name:this.language,language_code:this.languageCode,language_id:this.languageId},this.languagesData[t].language_name_value=this.languageName,this.languagesData[t].user_type_display_name=this.langTransDisplayname,this.languagesData[t].description=this.langTransDescription,this.languagesData[t].is_enabled=this.isLangTransEnabled,this.languagesData[t].is_enabled_value=!0===this.isLangTransEnabled?"Yes":"No");$("#exampleModal2").modal("hide")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"languagesEditSubmit",t)}}removeLanguages(t,s){try{this.deleteRowIndex=t,this.languageCode=s.language.language_code,this.languageName=s.language_name_value,this.langTransDisplayname=s.user_type_display_name,this.langTransDescription=s.description,this.isLangTransEnabled=s.is_enabled,$("#exampleModal3").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal3")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"removeLanguages",a)}}languagesDeleteSubmit(){try{for(let t=0;t<this.languagesData.length;t++)this.deleteRowIndex===t&&this.languagesData[t]._id&&this.deleted_translation_ids.push(this.languagesData[t]._id);this.languagesData.splice(this.deleteRowIndex,1),$("#exampleModal3").modal("hide")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"languagesDeleteSubmit",t)}}getLanguagesfromJson(){var t=this;return(0,y.Z)(function*(){t.dataJsonObj.languagesFromJson=yield t.commonService.getLanguagesListJson(t.enterpriseId),t.getRecordById(t.recordID),t.getLanguagesList("")})()}getLanguagesList(t){var s=this;return(0,y.Z)(function*(){try{yield s.userTypeService.getTranslateLanguages(s.enterpriseId).then(a=>{if(s.translateLanguageOptions=a[0].configoption_json.languages,s.translateLanguageOptions&&s.translateLanguageOptions.length>0){for(let n=0;n<s.translateLanguageOptions.length;n++)s.translateLanguageOptions[n].ID=s.translateLanguageOptions[n].language_id,s.translateLanguageOptions[n].NAME=s.dataJsonObj.languagesFromJson[s.translateLanguageOptions[n].language_name].language_display_name,s.translateLanguageOptions[n].language_code=s.translateLanguageOptions[n].language_code,s.translateLanguageOptions[n].language_id=s.translateLanguageOptions[n].language_id,s.translateLanguageOptions[n].language_name=s.translateLanguageOptions[n].language_name;if(s.translateLanguageOptions&&t){const n=s.translateLanguageOptions.filter(function(r){return r.NAME.toLowerCase().includes(t.toLowerCase())});s.translateLanguageOptions=n}}},a=>{s.loggerService.setLoggerError(s.constructor.name,"getLanguagesList",a)})}catch(a){s.loggerService.setLoggerError(s.constructor.name,"getLanguagesList",a)}})()}static \u0275fac=function(s){return new(s||i)(e.Y36(g.gz),e.Y36(f.m),e.Y36(m.j),e.Y36(I.f),e.Y36(g.F0),e.Y36(_.sK),e.Y36(S.s),e.Y36(v.v),e.Y36(D.O),e.Y36(A.yF))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-usertypes-edit"]],viewQuery:function(s,a){if(1&s&&(e.Gf(be,5),e.Gf(Te,5),e.Gf(Oe,5),e.Gf(Ee,5),e.Gf(ye,5)),2&s){let n;e.iGM(n=e.CRH())&&(a.descriptionTextArea=n.first),e.iGM(n=e.CRH())&&(a.displayNameAdd=n.first),e.iGM(n=e.CRH())&&(a.displayNameEdit=n.first),e.iGM(n=e.CRH())&&(a.displayNameInput=n.first),e.iGM(n=e.CRH())&&(a.languageAdd=n.first)}},features:[e._Bn([m.j,S.s,D.O]),e.qOj],decls:149,vars:149,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","mandatory","true","id","lookupcode-edit-enterprise",3,"label","value"],[1,"col-md-2"],["mandatory","true","disabled","true","id","usertype-edit-usertype",3,"label","value"],["mandatory","true","autoCaseFlag","false","id","usertype-edit-displayname",3,"label","value","disabled","valueChange"],["displayNameInput",""],[1,"col-md-2","d-flex","align-items-center"],["label","","mandatory","true","id","usertype-edit-createparentprofile",3,"options","checked","valueChange"],["label","","mandatory","true","id","usertype-edit-checkboxoptions",3,"options","checked","disabled","valueChange"],["label","","mandatory","true","id","usertype-edit-checkboxoptions",3,"options","checked","valueChange"],[1,"col-md-9"],["mandatory","true","id","usertype-view-description",3,"label","defaultvalue","maxlength","valueChange"],["descriptionTextArea",""],[1,"col-md-3","text-end","mt-2","mb-2","order-md-1","order-2"],["className","btn btn-primary btn-sm","id","usertype-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","usertype-edit-cancel",3,"label","buttonOnClick"],[1,"row"],[1,"text-danger","text-center"],[1,"card"],[1,"card-content"],[3,"multiple"],[1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["disabled","false","label","","className","btn btn-danger btn-sm btn-round btn-rounded","btnIcon","fas fa-plus","id","usertype-edit-translationsadd",3,"isEmitMouseEvent","buttonOnClick"],["selectionMode","single","dataKey","LineNum",1,"ptable","d-none","d-lg-block","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"d-lg-none"],["lines","full","class","pdl-0 pdr-0",4,"ngFor","ngForOf"],["class","text-center text-danger mb-0 no-data-txt",4,"ngIf"],[3,"createdBy","showrecordhistory","lastUpdatedBy","creationDate","lastUpdatedDate"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body","ios-content"],["mandatory","true","id","usertype-edit-languagename-addpopup",3,"label","options","selectedOption","searchValueChange"],["languageAdd",""],["autoCaseFlag","false","disabled","false","mandatory","true","id","usertype-edit-displayname-addpopup",3,"label","maxlength","valueChange"],["displayNameAdd",""],[1,"col-md-4","d-flex","align-items-center"],["label","","mandatory","true","id","usertype-edit-checkboxoptions-addpopup",3,"options","checked","valueChange"],[1,"col-lg-12","col-md-12"],["mandatory","false","id","usertype-edit-description-addpopup",3,"label","defaultvalue","maxlength","valueChange"],[1,"error-msg","col-md-10","text-danger","text-center","mb-0"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","usertype-translations-edit-add-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","usertype-translations-edit-add-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","true","disabled","true","id","usertype-edit-displayname-editpopup",3,"label","value"],["disabled","false","mandatory","true","autoCaseFlag","false","id","usertype-edit-displayname-editpopup",3,"label","value","maxlength","valueChange"],["displayNameEdit",""],["label","","mandatory","true","id","usertype-edit-checkboxoptions-editpopup",3,"options","checked","valueChange"],["mandatory","false","id","usertype-edit-description-editpopup",3,"label","defaultvalue","maxlength","valueChange"],["className","btn btn-primary btn-sm","id","usertype-translations-edit-update-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","usertype-translations-edit-update-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal3","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","false","disabled","true","id","usertype-edit-displayname-deletepopup",3,"label","value"],["disabled","false","id","usertype-edit-displayname-deletepopup","mandatory","true",3,"label","value"],["label","","mandatory","false","id","usertype-edit-description-deletepopup","disabled","true",3,"options","checked"],["disabled","true","mandatory","false","id","usertype-edit-description-deletepopup",3,"label","defaultvalue","maxlength"],["className","btn btn-primary btn-sm","id","usertype-edit-translations-delete-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","usertype-edit-translations-delete-cancel-btn",3,"label","buttonOnClick"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","class","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","click"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["lines","full",1,"pdl-0","pdr-0"],[1,"mg-0",3,"click"],["color","primary",1,"mg-0","fs-13"],[1,"mg-0","fs-11"],[1,"text-center","text-danger","mb-0","no-data-txt"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"app-input",12),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9)(16,"app-input",13,14),e.NdJ("valueChange",function(r){return a.changeDisplayName(r)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",15)(20,"app-checkbox",16),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"create_parent_profile",a.usersEditObject)}),e.qZA()(),e.TgZ(21,"div",15)(22,"app-checkbox",17),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"is_enabled",a.usersEditObject)}),e.qZA()(),e.TgZ(23,"div",15)(24,"app-checkbox",16),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"is_registration_approval_required",a.usersEditObject)}),e.qZA()(),e.TgZ(25,"div",15)(26,"app-checkbox",18),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"allow_open_registration",a.usersEditObject)}),e.qZA()(),e.TgZ(27,"div",15)(28,"app-checkbox",17),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"isGroupCreate",a.usersEditObject)}),e.qZA()(),e.TgZ(29,"div",15)(30,"app-checkbox",18),e.NdJ("valueChange",function(r){return a.changeCheckBoxValue(r,"is_email_verification_required",a.usersEditObject)}),e.qZA()(),e.TgZ(31,"div",19)(32,"app-textarea",20,21),e.NdJ("valueChange",function(r){return a.changeDescription(r)}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",22)(36,"app-button",23),e.NdJ("buttonOnClick",function(){return a.updateRecord()}),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"app-button",24),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",25)(41,"div",26),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",25)(45,"div",3)(46,"div",27)(47,"div",28)(48,"p-accordion",29)(49,"p-accordionTab",30)(50,"p-header",31)(51,"span"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"app-button",32),e.NdJ("buttonOnClick",function(r){return a.languagesAdd(r)}),e.qZA()(),e.TgZ(55,"p-table",33),e.YNc(56,ve,1,1,"ng-template",34),e.YNc(57,Ae,2,1,"ng-template",35),e.YNc(58,fe,2,1,"ng-template",36),e.YNc(59,De,4,2,"ng-template",37),e.qZA(),e.TgZ(60,"div",38)(61,"ion-list"),e.YNc(62,Ie,11,12,"ion-item",39),e.qZA(),e.YNc(63,Ue,3,3,"p",40),e.qZA()(),e._UZ(64,"app-recordhistory",41),e.qZA()()()()()()()()()()(),e.TgZ(65,"div",42)(66,"div",43)(67,"div",44)(68,"div",45)(69,"div",46),e._uU(70),e.ALo(71,"translate"),e.ALo(72,"translate"),e.qZA()(),e.TgZ(73,"div",47)(74,"div",8)(75,"div",9)(76,"app-dropdown-search",48,49),e.NdJ("selectedOption",function(r){return a.changeLanguage(r)})("searchValueChange",function(r){return a.getLanguagesList(r)}),e.ALo(78,"translate"),e.qZA()(),e.TgZ(79,"div",9)(80,"app-input",50,51),e.NdJ("valueChange",function(r){return a.changeLangTransDisplayname(r)}),e.ALo(82,"translate"),e.qZA()(),e.TgZ(83,"div",52)(84,"app-checkbox",53),e.NdJ("valueChange",function(r){return a.changeLangTransCheckBox(r)}),e.qZA()(),e.TgZ(85,"div",54)(86,"app-textarea",55),e.NdJ("valueChange",function(r){return a.changeLangTransDescription(r)}),e.ALo(87,"translate"),e.qZA()(),e.TgZ(88,"div",56),e._uU(89),e.ALo(90,"translate"),e.qZA(),e.TgZ(91,"div",57)(92,"app-button",58),e.NdJ("buttonOnClick",function(){return a.languagesAddSubmit()}),e.ALo(93,"translate"),e.qZA(),e.TgZ(94,"app-button",59),e.NdJ("buttonOnClick",function(){return a.cancelPopup()}),e.ALo(95,"translate"),e.qZA()()()()()()(),e.TgZ(96,"div",60)(97,"div",43)(98,"div",44)(99,"div",45)(100,"div",46),e._uU(101),e.ALo(102,"translate"),e.ALo(103,"translate"),e.qZA()(),e.TgZ(104,"div",47)(105,"div",8)(106,"div",9),e._UZ(107,"app-input",61),e.ALo(108,"translate"),e.qZA(),e.TgZ(109,"div",9)(110,"app-input",62,63),e.NdJ("valueChange",function(r){return a.changeLangTransDisplayname(r)}),e.ALo(112,"translate"),e.qZA()(),e.TgZ(113,"div",52)(114,"app-checkbox",64),e.NdJ("valueChange",function(r){return a.changeLangTransCheckBox(r)}),e.qZA()(),e.TgZ(115,"div",54)(116,"app-textarea",65),e.NdJ("valueChange",function(r){return a.changeLangTransDescription(r)}),e.ALo(117,"translate"),e.qZA()(),e.TgZ(118,"div",57)(119,"app-button",66),e.NdJ("buttonOnClick",function(){return a.languagesEditSubmit()}),e.ALo(120,"translate"),e.qZA(),e.TgZ(121,"app-button",67),e.NdJ("buttonOnClick",function(){return a.cancelPopup()}),e.ALo(122,"translate"),e.qZA()()()()()()(),e.TgZ(123,"div",68)(124,"div",43)(125,"div",44)(126,"div",45)(127,"div",46),e._uU(128),e.ALo(129,"translate"),e.ALo(130,"translate"),e.qZA()(),e.TgZ(131,"div",47)(132,"div",8)(133,"div",9),e._UZ(134,"app-input",69),e.ALo(135,"translate"),e.qZA(),e.TgZ(136,"div",9),e._UZ(137,"app-input",70),e.ALo(138,"translate"),e.qZA(),e.TgZ(139,"div",52),e._UZ(140,"app-checkbox",71),e.qZA(),e.TgZ(141,"div",54),e._UZ(142,"app-textarea",72),e.ALo(143,"translate"),e.qZA(),e.TgZ(144,"div",57)(145,"app-button",73),e.NdJ("buttonOnClick",function(){return a.languagesDeleteSubmit()}),e.ALo(146,"translate"),e.qZA(),e.TgZ(147,"app-button",74),e.NdJ("buttonOnClick",function(){return a.cancelPopup()}),e.ALo(148,"translate"),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,89,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.viewData?null:a.viewData.enterpriseObj.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,91,"COMMON_PAGE_TITLES.USER_TYPE")),e.s9C("value",null==a.viewData?null:a.viewData.user_type_name),e.xp6(3),e.s9C("label",e.lcZ(18,93,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.user_type_display_name),e.Q6J("disabled",a.disableEditDisplayName),e.xp6(4),e.Q6J("options",a.createParentProfileOptions)("checked",a.usersEditObject.create_parent_profile),e.xp6(2),e.Q6J("options",a.checkboxOptions)("checked",a.usersEditObject.is_enabled)("disabled",a.disableEditDescription),e.xp6(2),e.Q6J("options",a.dataJsonObj.approvalregistration)("checked",a.usersEditObject.is_registration_approval_required),e.xp6(2),e.Q6J("options",a.dataJsonObj.allowopenregistration)("checked",a.usersEditObject.allow_open_registration),e.xp6(2),e.s9C("disabled",a.usersEditObject.isGroupCreate),e.Q6J("options",a.dataJsonObj.isGroupCreate)("checked",a.usersEditObject.isGroupCreate),e.xp6(2),e.Q6J("options",a.dataJsonObj.emailVerificationRequired)("checked",a.usersEditObject.is_email_verification_required),e.xp6(2),e.s9C("label",e.lcZ(34,95,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",null==a.usersEditObject?null:a.usersEditObject.description),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(37,97,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(39,99,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(43,101,a.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(53,103,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")),e.xp6(2),e.Q6J("isEmitMouseEvent",!0),e.xp6(1),e.Q6J("columns",a.headers)("value",a.languagesData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(7),e.Q6J("ngForOf",a.languagesData),e.xp6(1),e.Q6J("ngIf",a.languagesData&&0==a.languagesData.length),e.xp6(1),e.Q6J("createdBy",null==a.viewData?null:a.viewData.created_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("lastUpdatedBy",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.updated_by)("creationDate",null==a.viewData?null:a.viewData.createdAt)("lastUpdatedDate",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.updatedAt),e.xp6(6),e.AsE("",e.lcZ(71,105,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(72,107,"COMMON_BUTTONS.BUTTON_ADD"),""),e.xp6(6),e.s9C("label",e.lcZ(78,109,"PREFERENCES.LANGUAGE")),e.Q6J("options",a.translateLanguageOptions),e.xp6(4),e.s9C("label",e.lcZ(82,111,"COMMON_FIELDS.DISPLAY_NAME")),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",a.checkboxOptions)("checked",a.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(87,113,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.hij(" ",e.lcZ(90,115,a.addPopupError)," "),e.xp6(3),e.s9C("label",e.lcZ(93,117,"COMMON_BUTTONS.BUTTON_ADD")),e.xp6(2),e.s9C("label",e.lcZ(95,119,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(102,121,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(103,123,"COMMON_BUTTONS.BUTTON_UPDATE"),""),e.xp6(6),e.s9C("label",e.lcZ(108,125,"PREFERENCES.LANGUAGE")),e.s9C("value",a.languageName),e.xp6(3),e.s9C("label",e.lcZ(112,127,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",a.langTransDisplayname),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",a.checkboxOptions)("checked",a.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(117,129,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(120,131,"COMMON_BUTTONS.BUTTON_UPDATE")),e.xp6(2),e.s9C("label",e.lcZ(122,133,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(129,135,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(130,137,"COMMON_BUTTONS.BUTTON_DELETE"),""),e.xp6(6),e.s9C("label",e.lcZ(135,139,"PREFERENCES.LANGUAGE")),e.s9C("value",a.languageName),e.xp6(3),e.s9C("label",e.lcZ(138,141,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",a.langTransDisplayname),e.xp6(3),e.Q6J("options",a.checkboxOptions)("checked",a.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(143,143,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",a.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(146,145,"COMMON_BUTTONS.BUTTON_DELETE")),e.xp6(2),e.s9C("label",e.lcZ(148,147,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[O.sg,O.O5,E.iA,C.h4,C.jx,E.Ei,T.UQ,T.US,U.r,M.a,Z.b,w.R,B.C,F.W,L.q,_.X$]})}return i})();class Ze{_id;lookup_id;lookup_name;description;end_date;enterprise;enterprise_name;is_enabled;create_parent_profile;is_registration_approval_required;allow_open_registration;user_type_name;user_type_display_name;language_translations;isGroupCreate;is_email_verification_required}function we(i,o){if(1&i&&(e.TgZ(0,"tr",40)(1,"td",41),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function je(i,o){if(1&i&&e.YNc(0,we,4,4,"tr",39),2&i){const t=e.oxw();e.Q6J("ngIf",t.languagesData&&0==t.languagesData.length)}}function Re(i,o){if(1&i&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function ke(i,o){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,Re,3,3,"th",42),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Je(i,o){if(1&i&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&i){const t=o.$implicit,s=e.oxw().$implicit;e.Gre("",t.class," "),e.Q6J("pSelectableRow",s),e.xp6(1),e.hij(" ",s[t.field]," ")}}function Pe(i,o){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,Je,2,5,"td",43),e.qZA()),2&i){const t=o.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}function xe(i,o){if(1&i&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",46)(6,"br"),e.qZA()),2&i){const t=o.$implicit,s=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.header)),e.xp6(3),e.Q6J("innerHTML",s[t.field],e.oJD)}}function Be(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,xe,7,4,"div",45),e.qZA()()()),2&i){const t=o.columns;e.xp6(1),e.uIk("colspan",t[0].length+2),e.xp6(2),e.Q6J("ngForOf",t[1])}}function Ve(i,o){if(1&i&&(e.TgZ(0,"ion-item",47)(1,"ion-label",48)(2,"span",49),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",50),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"span",50),e._uU(9),e.ALo(10,"translate"),e.qZA()()()),2&i){const t=o.$implicit;e.xp6(3),e.AsE(" ",e.lcZ(4,6,"PREFERENCES.LANGUAGE"),": ",null==t?null:t.language_name_value,""),e.xp6(3),e.AsE("",e.lcZ(7,8,"COMMON_FIELDS.DISPLAY_NAME"),": ",null==t?null:t.user_type_display_name," "),e.xp6(3),e.AsE("",e.lcZ(10,10,"COMMON_FIELDS.ENABLED"),": ",null==t?null:t.is_enabled_value," ")}}function Fe(i,o){1&i&&(e.TgZ(0,"p",51),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),""))}let qe=(()=>{class i extends j.O{loggerService;navigationService;router;translateService;commonService;userTypesService;lookupTypeService;route;toastController;checkboxOptions;createParentProfileOptions=[];createdBy;creationDate;defaultUsertypes;enterpriseId;headers;languagesData=[];lastUpdatedBy;lastUpdatedDate;loginUserDateFormat;pageTitle;recordId;viewData;dataJsonObj={};constructor(t,s,a,n,r,p,u,c,b){super(c,r),this.loggerService=t,this.navigationService=s,this.router=a,this.translateService=n,this.commonService=r,this.userTypesService=p,this.lookupTypeService=u,this.route=c,this.toastController=b,this.route.queryParams.subscribe(h=>{this.dataJsonObj.queryParamsObj={defaultView:h.defaultView,selectedMenuId:h.selectedMenuId,selectedSubMenuId:h.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.USER_TYPES,this.commonService.trackView(l.sn.USERTYPE_VIEW),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.RECORD_HISTORY),this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.dataJsonObj.languagesFromJson={},this.getLanguagesfromJson(),this.route.params.subscribe(n=>{this.recordId=n.id,this.getRecordById()}),document.getElementsByTagName("body"),this.checkboxOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.createParentProfileOptions=[{value:"",displayname:this.translateService.instant("NEW_VARIABLES.CREATE_PARENT_PROFILE"),key:"checkbox1"}],this.dataJsonObj.approvalregistration=[{value:"",displayname:this.translateService.instant("COMMON_PAGE_TITLES.ENABLE_REGISTRATION_APPROVALS"),key:"checkbox1"}],this.dataJsonObj.allowopenregistration=[{value:"",displayname:this.translateService.instant("COMMON_PAGE_TITLES.ALLOW_OPEN_REGISTRATION"),key:"checkbox1"}],this.dataJsonObj.isGroupCreateCheckbox=[{value:"",displayname:this.translateService.instant("EVENTS.GROUPCREATING"),key:"checkbox1"}],this.dataJsonObj.emailVerificationRequired=[{value:"",displayname:this.translateService.instant("EVENTS.EMAIL_VERIFICATION"),key:"checkbox1"}];const s=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=s.dateFormat,this.headers=[[{headersort:"disableth",field:"language_name_value",header:"PREFERENCES.LANGUAGE",class:"w-100"},{headersort:"disableth",field:"user_type_display_name",header:"COMMON_FIELDS.DISPLAY_NAME",class:""},{headersort:"disableth",field:"is_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"},{headersort:"disableth",field:"updatedAt",header:"COMMON_RECORD_HISTORY.LAST_UPDATED_DATE",class:"w-140 text-end"},{headersort:"disableth",field:"updated_by_value",header:"COMMON_RECORD_HISTORY.LAST_UPDATED_BY",class:"w-140"}]],this.dataJsonObj.selectedPage=l.hf.USER_TYPES,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(t){var s=this;return(0,y.Z)(function*(){for(let a of t)s.dataJsonObj[a.storingFieldName]=yield s.commonService.getDynamicJson(s.enterpriseId,a.folderName,a.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(){try{this.userTypesService.get(this.recordId,this.enterpriseId).subscribe(t=>{if(this.viewData=t,this.defaultUsertypes=this.lookupLanguageTranslations(this.viewData.user_role.lookup_id),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.USER_TYPE",value:this.defaultUsertypes,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.viewData.language_translations)for(let s=0;s<this.viewData.language_translations.length;s++)this.viewData.language_translations[s].language_name_value=this.dataJsonObj.languagesFromJson[this.viewData.language_translations[s].language.language_name].language_display_name,this.viewData.language_translations[s].is_enabled_value=!0===this.viewData.language_translations[s].is_enabled?"Yes":"No",this.viewData.language_translations[s].updatedAt=this.viewData.language_translations[s].updatedAt?V(this.viewData.language_translations[s].updatedAt).format(this.loginUserDateFormat):"",this.viewData.language_translations[s].updated_by_value=this.viewData.language_translations[s].updated_by.l_name+", "+this.viewData.language_translations[s].updated_by.f_name,this.languagesData.find(n=>n._id===this.viewData.language_translations[s]._id)||this.languagesData.push(this.viewData.language_translations[s]);this.getGroupData()},t=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)}}getLanguagesfromJson(){var t=this;return(0,y.Z)(function*(){t.dataJsonObj.languagesFromJson=yield t.commonService.getLanguagesListJson(t.enterpriseId)})()}cancelBtn(){this.commonService.redirectToPreviousUrl()}getGroupData(){this.userTypesService.getGroup(this.viewData.enterpriseObj.enterprise.enterprise_id,this.viewData._id).subscribe(t=>{this.dataJsonObj.isGroupCreate=!!(t&&t.rows.length>0)},t=>{this.loggerService.setLoggerError(this.constructor.name,"getGroupData",t)})}static \u0275fac=function(s){return new(s||i)(e.Y36(f.m),e.Y36(I.f),e.Y36(g.F0),e.Y36(_.sK),e.Y36(v.v),e.Y36(m.j),e.Y36(D.O),e.Y36(g.gz),e.Y36(A.yF))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-usertypes-view"]],features:[e._Bn([m.j,D.O]),e.qOj],decls:56,vars:55,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","usertype-view-enterprise",3,"label","value"],["mandatory","false","disabled","true","id","usertype-view-usertype",3,"label","value"],["mandatory","false","disabled","true","id","usertype-view-displayname",3,"label","value"],[1,"col-md-4","d-flex","align-items-center"],["label","","disabled","true","mandatory","true","id","usertype-view-createparentprofile",3,"options","checked"],["label","","disabled","true","mandatory","true","id","usertype-view-checkboxoptions",3,"options","checked"],["label","","disabled","true","mandatory","true","id","usertype-view-approvalregistration",3,"options","checked"],["label","","disabled","true","mandatory","true","id","usertype-view-allow_open_registration",3,"options","checked"],["label","","disabled","true","mandatory","true","id","usertype-view-group",3,"options","checked"],["label","","disabled","true","mandatory","true","id","usertype-view-is_email_verification_required",3,"options","checked"],[1,"col-md-10"],["disabled","true","id","usertype-view-description",3,"label","defaultvalue"],[1,"col-md-2","text-end","mt-2","mb-2"],["className","btn btn-danger btn-sm","id","usertype-view-close",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],[3,"multiple"],[1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","d-none","d-lg-block","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"d-lg-none"],["lines","full","class","pdl-0 pdr-0",4,"ngFor","ngForOf"],["class","text-center text-danger mb-0 no-data-txt",4,"ngIf"],[3,"createdBy","showrecordhistory","lastUpdatedBy","creationDate","lastUpdatedDate"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","class",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["lines","full",1,"pdl-0","pdr-0"],[1,"mg-0"],["color","primary",1,"mg-0","fs-13"],[1,"mg-0","fs-11"],[1,"text-center","text-danger","mb-0","no-data-txt"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"app-checkbox",14),e.qZA(),e.TgZ(20,"div",13),e._UZ(21,"app-checkbox",15),e.qZA(),e.TgZ(22,"div",13),e._UZ(23,"app-checkbox",16),e.qZA(),e.TgZ(24,"div",13),e._UZ(25,"app-checkbox",17),e.qZA(),e.TgZ(26,"div",13),e._UZ(27,"app-checkbox",18),e.qZA(),e.TgZ(28,"div",13),e._UZ(29,"app-checkbox",19),e.qZA(),e.TgZ(30,"div",20),e._UZ(31,"app-textarea",21),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",22)(34,"app-button",23),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"div",24)(37,"div",3)(38,"div",25)(39,"div",26)(40,"p-accordion",27)(41,"p-accordionTab",28)(42,"p-header",29)(43,"span"),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"p-table",30),e.YNc(47,je,1,1,"ng-template",31),e.YNc(48,ke,2,1,"ng-template",32),e.YNc(49,Pe,2,1,"ng-template",33),e.YNc(50,Be,4,2,"ng-template",34),e.qZA(),e.TgZ(51,"div",35)(52,"ion-list"),e.YNc(53,Ve,11,12,"ion-item",36),e.qZA(),e.YNc(54,Fe,3,3,"p",37),e.qZA()(),e._UZ(55,"app-recordhistory",38),e.qZA()()()()()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,43,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,45,"COMMON_PAGE_TITLES.USER_TYPE")),e.s9C("value",null==a.viewData?null:a.viewData.user_type_name),e.xp6(3),e.s9C("label",e.lcZ(17,47,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",null==a.viewData?null:a.viewData.enterpriseObj.user_type_display_name),e.xp6(3),e.Q6J("options",a.createParentProfileOptions)("checked",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.create_parent_profile),e.xp6(2),e.Q6J("options",a.checkboxOptions)("checked",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.is_enabled),e.xp6(2),e.Q6J("options",a.dataJsonObj.approvalregistration)("checked",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.is_registration_approval_required),e.xp6(2),e.Q6J("options",a.dataJsonObj.allowopenregistration)("checked",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.allow_open_registration),e.xp6(2),e.Q6J("options",a.dataJsonObj.isGroupCreateCheckbox)("checked",a.dataJsonObj.isGroupCreate),e.xp6(2),e.Q6J("options",a.dataJsonObj.emailVerificationRequired)("checked",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.is_email_verification_required),e.xp6(2),e.s9C("label",e.lcZ(32,49,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.description),e.xp6(3),e.s9C("label",e.lcZ(35,51,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(45,53,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")),e.xp6(2),e.Q6J("columns",a.headers)("value",a.languagesData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(7),e.Q6J("ngForOf",a.languagesData),e.xp6(1),e.Q6J("ngIf",a.languagesData&&0==a.languagesData.length),e.xp6(1),e.Q6J("createdBy",null==a.viewData?null:a.viewData.created_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("lastUpdatedBy",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.updated_by)("creationDate",null==a.viewData?null:a.viewData.createdAt)("lastUpdatedDate",null==a.viewData||null==a.viewData.enterpriseObj?null:a.viewData.enterpriseObj.updatedAt))},dependencies:[O.sg,O.O5,E.iA,C.h4,C.jx,E.Ei,T.UQ,T.US,U.r,M.a,Z.b,w.R,F.W,L.q,_.X$]})}return i})();var q=d(42863),Ye=d(28168),Y=d(30578),G=d(34942),Ge=d(88425);const Qe=["datatableComponent"];let $e=(()=>{class i extends j.O{actionSheetController;columnheaders;loggerService;router;translateService;commonService;listingVariables;userTypesService;route;toastController;uiUtils;datatableComponent;searchValueChange=new e.vpe;actionBoolean;actionStatus;actions;checkId;enabledStatus;enterpriseId;error;eventClickData;fabMobileactions;forceRefresh;headers;isFilterClicked=!1;login_enterprise_id;userTypeMobileListData;userTypesObj=new He;usertypesListData;mobileroutesArray;noDuplicates=void 0;pageTitle;show=!0;searchString;stats;statsComparisonObj;statsUsertypesListData;statsObj;statsObjs;dataJsonObj={};constructor(t,s,a,n,r,p,u,c,b,h,R){super(b,p),this.actionSheetController=t,this.columnheaders=s,this.loggerService=a,this.router=n,this.translateService=r,this.commonService=p,this.listingVariables=u,this.userTypesService=c,this.route=b,this.toastController=h,this.uiUtils=R,this.route.queryParams.subscribe(k=>{this.dataJsonObj.queryParamsObj={defaultView:k.default_view,selectedMenuId:k.selectedMenuId,selectedSubMenuId:k.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=l.hf.USER_TYPES,this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:l.hf,pageSettingEnum:l.AM,pageSettingFieldsEnum:l.In},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.USER_TYPES",value:"",showSubMenuDisplayName:!0}],this.commonService.trackView(l.sn.USERTYPE_LIST),this.login_enterprise_id=localStorage.getItem(l.BU.LOG_IN_ENTERPRISE_ID),document.getElementsByTagName("body"),this.headers=this.columnheaders.getUserTypeHeaders(),this.searchString="",this.actionBoolean=!(!this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.ACTIVATE)||!this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.INACTIVATE)),this.actions={EDIT:this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.EDIT),CHECKBOX:this.actionBoolean,VIEW:this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.VIEW)},this.statsUsertypesListData=G.h.getUsertypesListStats(this.isFilterClicked,this.eventClickData),this.forceRefresh=!1,this.commonService.currentEvent.subscribe(s=>{"usertypes"===s&&(this.forceRefresh=!0)}),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:l.gL.URL,redirectURL:"/admin/usertypes/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.FILTERS),this.getAllRecords()}ionViewWillEnter(){this.actions={EDIT:this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.EDIT),VIEW:this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.VIEW),CHECKBOX:this.actionBoolean}}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(t)}searchClose(){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}getAllRecords(){try{this.stats=this.statsObj,this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE);const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView),s=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.userTypesService.getAll(this.searchString,this.enterpriseId,this.listingVariables.sortOrderColumn,this.listingVariables.rowsPerPage,this.listingVariables.pageNumbers,this.stats,this.isFilterClicked,this.enabledStatus,this.forceRefresh,t,s,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(a=>{if(this.hideSpinner(),a.rows.length>0){this.userTypeMobileListData&&this.userTypeMobileListData.length>0||(this.userTypeMobileListData=[]);for(let n=0;n<a.rows.length;n++){a.rows[n].firstLineDisplay=a.rows[n].enterpriseObj.enterprise.enterprise_name,a.rows[n].secondLineDisplay=a.rows[n].enterpriseObj.user_type_display_name;const r={url:`admin/usertypes/${a.rows[n]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},p=r.queryParams&&Object.keys(r.queryParams).length>0?`${r.url}?${JSON.stringify(r.queryParams)}`:r.url;a.rows[n].user_type_display_name=`<a class="enable" id="user_type_display_name${a.rows[n]._id}" href=${p}>${a.rows[n].enterpriseObj.user_type_display_name}`,a.rows[n].enterpriseObj.enterprise.short_name='<a class="enable" id="enterprise.short_name'+a.rows[n]._id+'" href="enterprises/enterprises/'+a.rows[n].enterpriseObj.enterprise.enterprise_id+'/view" >'+a.rows[n].enterpriseObj.enterprise.short_name,!0===a.rows[n].enterpriseObj.is_enabled?(a.rows[n].is_enabled="Yes",a.rows[n].isEnabledText="Active"):!1===a.rows[n].enterpriseObj.is_enabled&&(a.rows[n].is_enabled="No",a.rows[n].isEnabledText="Inactive"),a.rows[n].mobile_display_data&&(a.rows[n].mobile_display_data[1]=a.rows[n].mobile_display_data[1]+a.rows[n].enterpriseObj.user_type_display_name),this.userTypeMobileListData=this.userTypeMobileListData.filter(u=>u._id!==a.rows[n]._id),this.userTypeMobileListData.push(a.rows[n])}a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.usertypesListData=this.usertypesListData.concat(a.rows)):this.usertypesListData=a.rows}else this.usertypesListData=[],this.userTypeMobileListData=[];this.userTypesObj.TOTAL_USER_TYPES=a.totalCount,this.userTypesObj.TOTAL_USER_TYPES_ENABLED=a.EnabledCount,this.userTypesObj.TOTAL_USER_TYPES_DISABLED=a.DisabledCount,this.userTypesObj.TOTAL_USER_TYPES_SYSTEM_OWNED=a.SysOwnedCount,this.userTypesObj.TOTAL_USER_TYPES_ENTERPRISE_OWNED=a.EntOwnedCount,this.statsDisabled(this.userTypesObj.TOTAL_USER_TYPES,this.userTypesObj.TOTAL_USER_TYPES_ENABLED,this.userTypesObj.TOTAL_USER_TYPES_DISABLED,this.userTypesObj.TOTAL_USER_TYPES_SYSTEM_OWNED,this.userTypesObj.TOTAL_USER_TYPES_ENTERPRISE_OWNED)},a=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)})}catch(t){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}loadPageData(t){this.forceRefresh=t.forceRefresh,this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,"user_type_display_name"===this.listingVariables.sortField&&(this.listingVariables.sortField="enterprises.user_type_display_name"),"is_enabled"===this.listingVariables.sortField&&(this.listingVariables.sortField="enterprises.is_enabled"),t.clearMobileData&&(this.userTypeMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}toggle(){this.show=!this.show}createUserType(){try{this.router.navigate(["admin/usertypes/create"])}catch(t){this.loggerService.setLoggerError(this.constructor.name,"createLookupCode",t)}}onItemClicked(t){this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.VIEW)&&this.commonService.redirectToUrl(["admin","usertypes",t._id,"view"],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}mobileEventAction(t){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.INACTIVATE)&&!1===t.isEnabled&&"0"===this.login_enterprise_id&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{this.changeStatus(t)}}),this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["admin/usertypes/"+t._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("usertypes")}}),this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.ACTIVATE)&&!0===t.isEnabled&&"0"===this.login_enterprise_id&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{this.changeStatus(t)}}),this.roleRightsValidationByPage(l.hf.USER_TYPES,l.AM.ACTIONS,l.In.VIEW)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["admin","usertypes",t._id,"view"],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.presentActionSheet(t)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"mobileeventAction",s)}}presentActionSheet(t){var s=this;return(0,y.Z)(function*(){s.mobileroutesArray&&s.mobileroutesArray.length>0&&(yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileroutesArray})).present())})()}onActionClicked(t){t.action===l.A0.EDIT?(this.router.navigate(["admin/usertypes/"+t.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("usertypes")):t.action===l.A0.VIEW?this.commonService.redirectToUrl(["admin","usertypes",t.data._id,"view"],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):t.action===l.A0.CHECKBOX&&this.changeStatus(t.data)}statsDisabled(t,s,a,n,r){this.statsComparisonObj=[],this.statsComparisonObj.push(0!==t?{value1:"TOTAL_USER_TYPES"}:{value1:""}),this.statsComparisonObj.push(0!==s?{value2:"TOTAL_USER_TYPES_ENABLED"}:{value2:""}),this.statsComparisonObj.push(0!==a?{value3:"TOTAL_USER_TYPES_DISABLED"}:{value3:""}),this.statsComparisonObj.push(0!==n?{value4:"TOTAL_USER_TYPES_SYSTEM_OWNED"}:{value4:""}),this.statsComparisonObj.push(0!==r?{value5:"TOTAL_USER_TYPES_ENTERPRISE_OWNED"}:{value5:""}),this.statsUsertypesListData=G.h.getLookupcodesListStatsDisabled(this.isFilterClicked,"",this.statsComparisonObj)}statsData(t){this.statsObj=t.value,this.isFilterClicked=!0,this.forceRefresh=!0,this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.userTypeMobileListData=[],this.getAllRecords()}changeStatus(t){this.actionStatus=t.isEnabled,this.checkId=t._id,this.userTypesService.patch(this.checkId,{is_enabled:this.actionStatus,enterprise:t.enterpriseObj.enterprise}).then(a=>{this.uiUtils.displaytoastMessage(!0===this.actionStatus?"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE":"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("usertypes"),this.router.navigateByUrl("admin/usertypes"),this.getAllRecords()})}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t||(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(s){return new(s||i)(e.Y36(A.BX),e.Y36(q.Y),e.Y36(f.m),e.Y36(g.F0),e.Y36(_.sK),e.Y36(v.v),e.Y36(Y.v),e.Y36(m.j),e.Y36(g.gz),e.Y36(A.yF),e.Y36(S.s))};static \u0275cmp=e.Xpm({type:i,selectors:[["app-usertypes-list"]],viewQuery:function(s,a){if(1&s&&e.Gf(Qe,5),2&s){let n;e.iGM(n=e.CRH())&&(a.datatableComponent=n.first)}},outputs:{searchValueChange:"searchValueChange"},features:[e._Bn([m.j,q.Y,Y.v]),e.qOj],decls:9,vars:33,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],[3,"header","actions","data","totalRecords","paginator","totalPages","listingVariables","mobileListData","expand","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","showSpinner","pageName","selectedMenuId","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(r){return a.onHeaderItemClick(r)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(r){return a.onActionClicked(r)})("itemClickEvent",function(r){return a.onItemClicked(r)})("redirectionEvent",function(r){return a.mobileEventAction(r)})("changeStats",function(r){return a.statsData(r)})("loadPageData",function(r){return a.loadPageData(r)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(r){return a.onPageLevelActionClicked(r)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.headers)("actions",a.actions)("data",a.usertypesListData)("totalRecords",a.listingVariables.totalRecords)("paginator",!0)("totalPages",a.listingVariables.totalpages)("listingVariables",a.listingVariables)("mobileListData",a.userTypeMobileListData)("expand",!1)("statsDisplay",a.statsUsertypesListData)("statData",a.userTypesObj)("statusDisplay",a.statsObj)("statsShow",a.show)("showRights",a.roleRightsValidationByPage(a.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.USER_TYPES,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",a.searchString)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("showSpinner",a.dataJsonObj.showSpinner)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[Ye.n,L.q,Ge.y]})}return i})();class He{TOTAL_USER_TYPES;TOTAL_USER_TYPES_ENABLED;TOTAL_USER_TYPES_DISABLED;TOTAL_USER_TYPES_SYSTEM_OWNED;TOTAL_USER_TYPES_ENTERPRISE_OWNED}const We=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[N.P],component:$e,data:{object_type:l.hf.USER_ROLES,title:"User Type list",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.USERTYPES+"."+l.Iu.ENABLED,pageName:l.hf.USER_TYPES}},{path:"create",canActivate:[N.P],component:_e,data:{title:"User Type Create",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.USERTYPES+"."+l.In.CREATE,pageName:l.hf.ACTIVITIES,pageSetting:l.AM.ACTIONS,settingField:l.In.CREATE}},{path:":id/edit",canActivate:[N.P],component:Me,data:{title:"User Type Edit",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.USERTYPES+"."+l.In.EDIT,pageName:l.hf.ACTIVITIES,pageSetting:l.AM.ACTIONS,settingField:l.In.EDIT}},{path:":id/view",canActivate:[N.P],component:qe,data:{title:"User Type View",responsibilityParam:l.bP.MENUS+"."+l.w1.ADMIN+"."+l.bP.SUBMENUS+"."+l.w1.USERTYPES+"."+l.In.VIEW,pageName:l.hf.ACTIVITIES,pageSetting:l.AM.ACTIONS,settingField:l.In.VIEW}}];let ze=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[g.Bz.forChild(We),g.Bz]})}return i})(),Ke=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.oAB({type:i});static \u0275inj=e.cJS({imports:[ze,O.ez,_.aw,P.u5,P.UX,E.U$,T.fx,W.Q,Q.Nh,H.v]})}return i})()}}]);