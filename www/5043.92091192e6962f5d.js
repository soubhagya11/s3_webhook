"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5043],{15043:(bt,k,l)=>{l.r(k),l.d(k,{WidgetsModule:()=>ht});var O=l(32174),y=l(67375),_=l(36895),G=l(80529),E=l(70057),u=l(24006),S=l(93144),b=l(54463),B=l(65673),v=l(11210),n=l(32236),g=l(62510),T=l(71568),f=l(47561),H=l(57936),N=l(42786),w=l(90313),C=l(99752),e=l(94650),M=l(46448),V=l(27601),J=l(2387),P=l(56368),R=l(9851),Z=l(93837),D=l(37415);const Q=["descriptionValid"],Y=["widgetNameValid"],K=["widgetThemedropdown"];function z(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"mat-button-toggle",35),e.NdJ("click",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeDeviceType(t))}),e._uU(1),e.qZA()}if(2&o){const a=d.$implicit,i=e.oxw();e.s9C("title",a.lookup_name),e.Q6J("ngClass",a.lookup_name===i.dataJsonObj.printvalue?"btn-primary":""),e.xp6(1),e.hij("",a.NAME," ")}}let X=(()=>{class o extends f.O{loggerService;navigationService;router;translateService;uiUtils;widgetsService;commonService;enterprisesService;route;descriptionValid;widgetNameValid;widgetThemedropdown;checkboxOptions;dataJsonObj={};description;error;errorHtml;errorQuery;pageTitle;submitenabled=!1;widget_html;widgetCheckbox=!0;widgetHtml;widgetName;widgetQuery;widgetTheme;widgetThemedisplayname;widgetThemeName;widgetThemeObj;widgetThemeOptions;widgetTypeObj;widgetTypeOptions;editorConfig={editable:!0,spellcheck:!0,height:"15rem",minHeight:"5rem",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",toolbarHiddenButtons:[["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["customClasses","link","unlink","insertImage","insertVideo","removeFormat","backgroundColor"]]};widgetHtmlArray=[];constructor(a,i,t,s,r,p,c,h,m){super(m,c),this.loggerService=a,this.navigationService=i,this.router=t,this.translateService=s,this.uiUtils=r,this.widgetsService=p,this.commonService=c,this.enterprisesService=h,this.route=m}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.WIDGET_DEFINITIONS,this.commonService.trackView(n.sn.WIDGETS_CREATE),this.dataJsonObj.selectedEnterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WIDGET",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.dataJsonObj.backgroundColor="#000000",this.dataJsonObj.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.getEnterprisesViewData(),this.getSportsDropdown()}getEnterprisesViewData(){this.enterprisesService.getEnterprisesViewData(this.dataJsonObj.enterpriseId).subscribe(a=>{this.dataJsonObj.enterpriseData=a,this.dataJsonObj.enterpriseId=a._id},a=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",a)}),this.commonService.getLookupCodesListJson(this.dataJsonObj.enterpriseId,"list").then(a=>{this.dataJsonObj.lookupCodesListJSON=a,this.getWidgetTypeOptions(""),this.getWidgetThemeOptions("")})}changeColor(a,i,t){try{t[i]=a.target.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeColor",s)}}changeWidgetName(a){try{this.error="",this.widgetName=a.value,this.description=a.value,this.submitenabled=!1}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getWidgetName",i)}}getWidgetThemeOptions(a){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.uP.UI_THEMES],a).then(i=>{this.widgetThemeOptions=i,this.widgetTheme=i[0].ID,this.widgetThemeName=i[0].NAME,this.widgetThemedisplayname=this.lookupLanguageTranslations(i[0].lookup_id)},i=>{this.loggerService.setLoggerError(this.constructor.name,"getwidgetThemeOptions",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getwidgetThemeOptions",i)}}changeWidgetTheme(a){try{this.widgetTheme=a.value,this.widgetThemeObj=this.widgetThemeOptions.find(i=>i.ID===parseInt(this.widgetTheme,10)),this.widgetThemeName=this.widgetThemeObj.lookup_name,this.widgetThemedisplayname=this.lookupLanguageTranslations(this.widgetThemeObj.lookup_id)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeWidgetTheme",i)}}getSportsDropdown(){this.commonService.getJsonData(`assets/enterprises/${this.dataJsonObj.selectedEnterpriseId}/sports/`,"sports.json").then(a=>{this.dataJsonObj.sportOptions=a,1==this.dataJsonObj.sportOptions.length&&(this.dataJsonObj.sportId=this.dataJsonObj.sportOptions[0].ID)})}changeSportName(a){try{a.value&&(this.dataJsonObj.sportId=a.value)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeTournamentList",i)}}getWidgetTypeOptions(a){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.WIDGET_TYPES],a).then(i=>{this.widgetTypeOptions=i,this.dataJsonObj.printvalue=this.widgetTypeOptions[0].lookup_name,this.widgetHtmlArray=[];for(let t of this.widgetTypeOptions)this.widgetHtmlArray.push({device_type:{lookup_id:t._id,lookup_name:t.lookup_name},widget_html:""})},i=>{this.loggerService.setLoggerError(this.constructor.name,"getwidgetTypeOptions",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getwidgetTypeOptions",i)}}changeDeviceType(a){try{this.dataJsonObj.printvalue=a.target.title;const i=this.widgetHtmlArray.find(t=>t.device_type.lookup_name===this.dataJsonObj.printvalue);i&&(this.widget_html=i.widget_html||"")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeDeviceType",i)}}onChange(a){try{const i=this.widgetHtmlArray.findIndex(t=>t.device_type.lookup_name===this.dataJsonObj.printvalue);-1!==i&&(this.widgetHtmlArray[i].widget_html=this.widget_html)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"onChange",i)}}changeCheckBox(a){try{this.widgetCheckbox=a.value}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBox",i)}}changeDescription(a){try{this.description=a.value}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeDescription",i)}}clearMessage(){this.errorHtml=""}clearErrorMessage(){this.errorQuery=""}createRecord(){try{if(this.widgetNameValid.isValid()&&this.descriptionValid.isValid()&&this.widgetThemedropdown.isValid())if(w.L.isEmpty(this.widgetQuery))this.errorQuery="NEW_VARIABLES.VALID_PLEASE_ENTER_WIDGET_QUERY";else if(w.L.isEmpty(this.widgetHtmlArray[0].widget_html))this.errorHtml="NEW_VARIABLES.VALID_PLEASE_ENTER_WIDGET_HTML";else{this.errorQuery="",this.errorHtml="",this.submitenabled=!0;for(let i of this.widgetHtmlArray)w.L.isEmpty(i.widget_html)&&(i.widget_html=this.widgetHtmlArray[0].widget_html);this.widgetsService.create({enterprise:{enterprise_id:this.dataJsonObj.enterpriseId,enterprise_name:this.dataJsonObj.enterpriseData.enterprise_name,short_name:this.dataJsonObj.enterpriseData.short_name},widget_theme:{lookup_id:this.widgetTheme,lookup_name:this.widgetThemeName},background_color:this.dataJsonObj.backgroundColor,text_color:this.dataJsonObj.textColor,icon_color:this.dataJsonObj.iconColor,widget_name:this.widgetName,widget_query:this.widgetQuery,widget_html:this.widgetHtmlArray,description:this.description,is_enabled:this.widgetCheckbox,sport_id:this.dataJsonObj.sportId}).then(i=>{this.submitenabled=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},i=>{this.commonErrorCodes(JSON.parse(i)),this.loggerService.setLoggerError(this.constructor.name,"createWidgets",i)})}}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createWidgets",a)}}commonErrorCodes(a){409===JSON.parse(a[n.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",a)}}static \u0275fac=function(i){return new(i||o)(e.Y36(N.m),e.Y36(M.f),e.Y36(g.F0),e.Y36(b.sK),e.Y36(V.s),e.Y36(C.L),e.Y36(T.v),e.Y36(H.e),e.Y36(g.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-widgets-create"]],viewQuery:function(i,t){if(1&i&&(e.Gf(Q,5),e.Gf(Y,5),e.Gf(K,5)),2&i){let s;e.iGM(s=e.CRH())&&(t.descriptionValid=s.first),e.iGM(s=e.CRH())&&(t.widgetNameValid=s.first),e.iGM(s=e.CRH())&&(t.widgetThemedropdown=s.first)}},features:[e._Bn([C.L]),e.qOj],decls:63,vars:64,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-5"],["disabled","false","mandatory","true","autoCaseFlag","false",3,"label","value","maxlength","valueChange"],["widgetNameValid",""],[1,"col-md-2"],["mandatory","true","id","surveys-create-theme",3,"label","options","defaultValue","valueChange"],["widgetThemedropdown",""],[1,"col-md-3"],["mandatory","false","id","teams-create-sports",3,"label","options","defaultValue","valueChange"],[1,"col-md-2","d-flex","align-items-center"],["label","","disabled","false","mandatory","true","id","widgets-view-checkboxoptions",3,"options","checked","valueChange"],["descriptionValid",""],["type","color","disabled","false",3,"label","value","change"],[1,"col-md-12","textarea-block"],["for","widgetQuery",1,"text-label"],["name","message","rows","12","cols","130","id","widgets-create-report-query",1,"form-control",3,"ngModel","keypress","ngModelChange"],["message","ngModel"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"col-md-12","pdt-14"],[1,"fs-12"],[1,"position-relative","mgb-2"],[1,"btn-group-sm"],["class","btn btn-sm mgr-5",3,"title","ngClass","click",4,"ngFor","ngForOf"],[3,"ngModel","config","ngModelChange","blur","keypress"],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-primary btn-sm","id","widgets-view-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","widgets-view-cancel",3,"label","buttonOnClick"],[1,"btn","btn-sm","mgr-5",3,"title","ngClass","click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"app-input",10,11),e.NdJ("valueChange",function(r){return t.changeWidgetName(r)}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",12)(14,"app-dropdown-singleselect",13,14),e.NdJ("valueChange",function(r){return t.changeWidgetTheme(r)}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",15)(18,"app-dropdown-singleselect",16),e.NdJ("valueChange",function(r){return t.changeSportName(r)}),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",17)(21,"app-checkbox",18),e.NdJ("valueChange",function(r){return t.changeCheckBox(r)}),e.qZA()(),e.TgZ(22,"div",3)(23,"app-input",10,19),e.NdJ("valueChange",function(r){return t.changeDescription(r)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",15)(27,"app-input",20),e.NdJ("change",function(r){return t.changeColor(r,"backgroundColor",t.dataJsonObj)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",15)(30,"app-input",20),e.NdJ("change",function(r){return t.changeColor(r,"iconColor",t.dataJsonObj)}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",15)(33,"app-input",20),e.NdJ("change",function(r){return t.changeColor(r,"textColor",t.dataJsonObj)}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",21)(36,"label",22),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("keypress",function(){return t.clearErrorMessage()})("ngModelChange",function(r){return t.widgetQuery=r}),e.qZA()(),e.TgZ(41,"div",25),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"div",26)(45,"ion-label",27),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"div",28)(49,"mat-button-toggle-group",29),e.YNc(50,z,2,3,"mat-button-toggle",30),e.qZA()(),e.TgZ(51,"angular-editor",31),e.NdJ("ngModelChange",function(r){return t.widget_html=r})("blur",function(r){return t.onChange(r)})("keypress",function(){return t.clearMessage()}),e.qZA()(),e.TgZ(52,"div",25),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"div",32)(56,"app-button",33),e.NdJ("buttonOnClick",function(){return t.createRecord()}),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"app-button",34),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",25),e._uU(61),e.ALo(62,"translate"),e.qZA()()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(12,36,"COMMON_PAGE_TITLES.WIDGET")),e.s9C("value",t.widgetName),e.Q6J("maxlength",80),e.xp6(4),e.s9C("label",e.lcZ(16,38,"WIDGETS.WIDGET_THEME")),e.s9C("defaultValue",t.widgetTheme),e.Q6J("options",t.widgetThemeOptions),e.xp6(4),e.s9C("label",e.lcZ(19,40,"COMMON_PAGE_TITLES.SPORT")),e.s9C("defaultValue",null==t.dataJsonObj?null:t.dataJsonObj.sportId),e.Q6J("options",t.dataJsonObj.sportOptions),e.xp6(3),e.Q6J("options",t.checkboxOptions)("checked",t.widgetCheckbox),e.xp6(2),e.s9C("label",e.lcZ(25,42,"COMMON_FIELDS.DESCRIPTION")),e.s9C("value",t.description),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(28,44,"NEW_VARIABLES.BACKGROUND_COLOR")),e.s9C("value",t.dataJsonObj.backgroundColor),e.xp6(3),e.s9C("label",e.lcZ(31,46,"NEW_VARIABLES.ICON_COLOR")),e.s9C("value",t.dataJsonObj.iconColor),e.xp6(3),e.s9C("label",e.lcZ(34,48,"NEW_VARIABLES.TEXT_COLOR")),e.s9C("value",t.dataJsonObj.textColor),e.xp6(4),e.hij(" ",e.lcZ(38,50,"WIDGETS.WIDGET_QUERY"),"* "),e.xp6(2),e.Q6J("ngModel",t.widgetQuery),e.xp6(3),e.hij(" ",e.lcZ(43,52,t.errorQuery)," "),e.xp6(4),e.hij(" ",e.lcZ(47,54,"WIDGETS.WIDGET_HTML"),"* "),e.xp6(4),e.Q6J("ngForOf",t.widgetTypeOptions),e.xp6(1),e.Q6J("ngModel",t.widget_html)("config",t.editorConfig),e.xp6(2),e.hij(" ",e.lcZ(54,56,t.errorHtml)," "),e.xp6(3),e.s9C("label",e.lcZ(57,58,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.Q6J("disabled",t.submitenabled),e.xp6(2),e.s9C("label",e.lcZ(59,60,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(62,62,t.error)," "))},dependencies:[_.mk,_.sg,E.Q$,J.r,P.a,R.k,Z.b,D.q,u.Fj,u.JJ,u.On,y.s6,b.X$]})}return o})();var A=l(15861),ee=l(38077),te=l(43130),W=l(15439),ae=l(24929),ie=l(92634),se=l(42919),x=l(11735),j=l(10805);const re=["descriptionValid"],oe=["paramDateValue"],ne=["paramDateValueUpdate"],le=["paramEmailValue"],de=["paramEmailValueUpdate"],pe=["paramListValue"],ce=["paramListValueUpdate"],me=["paramNumberValue"],ue=["paramNumberValueUpdate"],ge=["paramSequenceAdd"],he=["paramSequenceEdit"],_e=["paramTextValue"],be=["paramTextValueUpdate"],Ce=["parameterDisplayName"],Te=["parameterDisplayNameEdit"],we=["parameterNameDropdown"],Oe=["parameterNameEditDropdown"],Ee=["parameterTypeDropdown"],ye=["parameterTypeEditDropdown"],Se=["sourceColumnDropdown"],ve=["sourceColumnEditDropdown"],fe=["sourceDisplayColumnDropdown"],Ne=["sourceDisplayColumnEditDropdown"],De=["sourceTableDropdown"],Ae=["sourceTableEditDropdown"],Ie=["widgetNameValid"],Le=["widgetThemedropdown"];function Me(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"mat-button-toggle",84),e.NdJ("click",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeDeviceType(t))}),e._uU(1),e.qZA()}if(2&o){const a=d.$implicit,i=e.oxw();e.s9C("title",a.lookup_name),e.Q6J("ngClass",a.lookup_name===i.dataJsonObj.printvalue?"btn-primary":""),e.xp6(1),e.hij("",a.NAME," ")}}function Ve(o,d){if(1&o&&(e.TgZ(0,"tr",86)(1,"td",87),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",a[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Je(o,d){if(1&o&&e.YNc(0,Ve,4,4,"tr",85),2&o){const a=e.oxw();e.Q6J("ngIf",a.widgetParametersData&&0==a.widgetParametersData.length)}}function Pe(o,d){if(1&o&&(e.TgZ(0,"th",89),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const a=d.$implicit;e.Q6J("pSortableColumn",a.field),e.xp6(1),e.hij(" ",e.lcZ(2,2,a.header)," ")}}function Ze(o,d){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Pe,3,4,"th",88),e.qZA()),2&o){const a=d.$implicit;e.xp6(1),e.Q6J("ngForOf",a[0])}}function je(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"td",91),e.NdJ("click",function(){e.CHM(a);const t=e.oxw(),s=t.rowIndex,r=t.$implicit,p=e.oxw();return e.KtG(p.editWidgetParameters(s,r))}),e._uU(1),e.qZA()}if(2&o){const a=d.$implicit,i=e.oxw().$implicit;e.Gre("",a.class," cursor-pointer"),e.Q6J("pSelectableRow",i),e.xp6(1),e.hij(" ",i[a.field]," ")}}function Ue(o,d){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,je,2,5,"td",90),e.qZA()),2&o){const a=d.columns;e.xp6(1),e.Q6J("ngForOf",a[0])}}function ke(o,d){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",93)(6,"br"),e.qZA()),2&o){const a=d.$implicit,i=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,a.header)),e.xp6(3),e.Q6J("innerHTML",i[a.field],e.oJD)}}function Re(o,d){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,ke,7,4,"div",92),e.qZA()()()),2&o){const a=d.columns;e.xp6(1),e.uIk("colspan",a[0].length+2),e.xp6(2),e.Q6J("ngForOf",a[1])}}function We(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",94,95),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeSourceTable(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getSourceTablesList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_TABLE")),e.s9C("defaultValue",a.sourceDisplayName),e.Q6J("options",a.sourceTableOptions)}}function xe(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",96,97),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeSourceColumn(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getSourceColumnsList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_COLUMN")),e.s9C("defaultValue",a.sourceColumn),e.Q6J("options",a.sourceColumnOptions)}}function qe(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",98,99),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeSourceDisplayColumn(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getSourceDisplayColumnsList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("defaultValue",a.sourceDisplayColumn),e.Q6J("options",a.sourceDisplayColumnOptions)}}function Fe(o,d){if(1&o&&(e.TgZ(0,"div",53),e._UZ(1,"app-input",100),e.ALo(2,"translate"),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("value",a.sourceDisplayColumn)}}function Ge(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-input",101,102),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("value",a.defaultValue)}}function Be(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-inputnumber",103,104),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("value",a.defaultValue),e.Q6J("maxlength",10)}}function He(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-input",105,106),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("value",a.defaultValue)}}function Qe(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-datepicker",107,108),e.NdJ("dateChangeValue",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("defaultDate",a.defaultValue),e.s9C("mandatory",a.paramValueReqd)}}function Ye(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",109,110),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getParamValuesList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("defaultValue",a.parameterDisplayValue),e.Q6J("options",a.parameterValueOptions)}}function Ke(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",111,112),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeSourceTable(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getSourceTablesList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_TABLE")),e.s9C("defaultValue",a.sourceDisplayName),e.Q6J("options",a.sourceTableOptions)}}function $e(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",113,114),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeSourceColumn(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getSourceColumnsList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_COLUMN")),e.s9C("defaultValue",a.sourceColumn),e.Q6J("options",a.sourceColumnOptions)}}function ze(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",115,116),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeSourceDisplayColumn(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getSourceDisplayColumnsList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("defaultValue",a.sourceDisplayColumn),e.Q6J("options",a.sourceDisplayColumnOptions)}}function Xe(o,d){if(1&o&&(e.TgZ(0,"div",53),e._UZ(1,"app-input",117),e.ALo(2,"translate"),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"REPORTS.SOURCE_DISPLAY_COLUMN")),e.s9C("value",a.sourceDisplayColumn)}}function et(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-input",118,119),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("value",a.defaultValue)}}function tt(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-inputnumber",120,121),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("value",a.defaultValue),e.Q6J("maxlength",10)}}function at(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-input",122,123),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("value",a.defaultValue)}}function it(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-datepicker",124,125),e.NdJ("dateChangeValue",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(3,3,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("defaultDate",a.defaultValue),e.s9C("mandatory",a.paramValueReqd)}}function st(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",53)(1,"app-dropdown-search",126,127),e.NdJ("selectedOption",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeParameterValue(t))})("searchValueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.getParamValuesList(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,4,"COMMON_FIELDS.DEFAULT_VALUE")),e.s9C("mandatory",a.paramValueReqd),e.s9C("defaultValue",a.parameterDisplayValue),e.Q6J("options",a.parameterValueOptions)}}let rt=(()=>{class o extends f.O{listViewService;loggerService;navigationService;router;translateService;uiUtils;widgetsService;commonService;route;descriptionValid;paramDateValue;paramDateValueUpdate;paramEmailValue;paramEmailValueUpdate;paramListValue;paramListValueUpdate;paramNumberValue;paramNumberValueUpdate;paramSequenceAdd;paramSequenceEdit;paramTextValue;paramTextValueUpdate;parameterDisplayName;parameterDisplayNameEdit;parameterNameDropdown;parameterNameEditDropdown;parameterTypeDropdown;parameterTypeEditDropdown;sourceColumnDropdown;sourceColumnEditDropdown;sourceDisplayColumnDropdown;sourceDisplayColumnEditDropdown;sourceTableDropdown;sourceTableEditDropdown;widgetNameValid;widgetThemedropdown;checkboxOptions;createdBy;createdDate;date;defaultValue;description;disableSourceDisplayColumn=!1;displayName;enabledFlag;enabledOptions;enterpriseData;enterpriseId;enterpriseName;enterpriseShortName;error1;error;errorHtml;errorQuery;headers;lastUpdatedBy;lastUpdatedDate;mandatoryOptions;newDate;pageTitle;paramSequence;paramValueReqd;parameterDescription;parameterDisplayValue;parameterName;parameterNameOptions=[];parameterType;parameterTypeDisplayName;parameterTypeName;parameterTypeOptions;parameterValueOptions;recordId;rowIndex;sourceColumn;sourceColumnOptions;sourceDisplayColumn;sourceDisplayColumnOptions;sourceDisplayName;sourceLower;sourceTable;sourceTableName;sourceTableOptions;submitenabled=!1;widgetCheckbox=!0;widgetHtml;widgetName;widgetParametersData;widgetQuery;widgetTheme;widgetThemeName;widgetThemeObj;widgetThemeOptions;widgetThemedisplayname;widgetTypeObj;widgetTypeOptions;widgetsViewData;widgetHtmlArray=[];editorConfig={editable:!0,spellcheck:!0,height:"15rem",minHeight:"5rem",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!1,toolbarPosition:"top",toolbarHiddenButtons:[["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["customClasses","link","unlink","insertImage","insertVideo","removeFormat","backgroundColor"]]};dataJsonObj={};widget_html;constructor(a,i,t,s,r,p,c,h,m){super(m,h),this.listViewService=a,this.loggerService=i,this.navigationService=t,this.router=s,this.translateService=r,this.uiUtils=p,this.widgetsService=c,this.commonService=h,this.route=m,this.route.params.subscribe(L=>{this.recordId=L.id})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.WIDGET_DEFINITIONS,this.commonService.trackView(n.sn.WIDGETS_EDIT),this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(n.hf.WIDGET_DEFINITIONS,n.AM.ACTIONS,n.In.RECORD_HISTORY),document.getElementsByTagName("body"),this.date=W(new Date,"DD-MM-YYYY"),this.newDate=W(this.date,"DD-MM-YYYY").subtract(365,"days"),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.headers=[[{headersort:"disableth",field:"param_display_sequence",header:"COMMON_FIELDS.SEQUENCE",class:"w-60"},{headersort:"disableth",field:"parameter_name",header:"REPORTS.PARAMETER_NAME",class:""},{headersort:"disableth",field:"parameter_display_name",header:"COMMON_FIELDS.DISPLAY_NAME",class:""},{headersort:"disableth",field:"parameter_description",header:"COMMON_FIELDS.DESCRIPTION",class:"w-100"},{headersort:"disableth",field:"parameter_type_value",header:"COMMON_FIELDS.TYPE",class:""},{headersort:"disableth",field:"param_data_source_table_value",header:"REPORTS.SOURCE_TABLE",class:""},{headersort:"disableth",field:"param_data_source_column",header:"REPORTS.SOURCE_COLUMN",class:""},{headersort:"disableth",field:"param_data_source_display_column",header:"REPORTS.SOURCE_DISPLAY_COLUMN",class:""},{headersort:"disableth",field:"default_value_to_display",header:"COMMON_FIELDS.DEFAULT_VALUE",class:""},{headersort:"disableth",field:"param_mandatory_value",header:"COMMON_FIELDS.MANDATORY",class:"w-60"},{headersort:"disableth",field:"param_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"}]],this.enabledOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.mandatoryOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.MANDATORY"),key:"checkbox2"}],this.getRecordById()}getSportsDropdown(a){var i=this;return(0,A.Z)(function*(){const t=yield i.commonService.getJsonData(`assets/enterprises/${i.enterpriseId}/sports/`,"sports.json");i.dataJsonObj.sportOptions=t;const s=i.dataJsonObj.sportOptions.find(r=>r.ID===a);s&&(i.dataJsonObj.sportId=s.ID,i.dataJsonObj.sportName=s.NAME)})()}getRecordById(){try{this.widgetsService.get(this.recordId).subscribe(a=>{if(this.widgetsViewData=a,this.dataJsonObj.widgetSportId=this.widgetsViewData.sport_id,this.dataJsonObj.widgetSportId&&this.getSportsDropdown(this.dataJsonObj.widgetSportId),this.widgetCheckbox=this.widgetsViewData.is_enabled,this.dataJsonObj.backgroundColor=this.widgetsViewData.background_color,this.dataJsonObj.textColor=this.widgetsViewData.text_color,this.dataJsonObj.iconColor=this.widgetsViewData.icon_color,this.enterpriseId=this.widgetsViewData.enterprise.enterprise_id,this.enterpriseName=this.widgetsViewData.enterprise.enterprise_name,this.enterpriseShortName=this.widgetsViewData.enterprise.enterprise_short_name,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(i=>{this.dataJsonObj.lookupCodesListJSON=i,this.getWidgetTypeOptions(""),this.getWidgetThemeOptions("")}),this.widgetName=this.widgetsViewData.widget_name,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WIDGET_DEFINITIONS",value:this.widgetName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.widgetQuery=this.widgetsViewData.widget_query,this.description=this.widgetsViewData.description,this.widgetHtmlArray=this.widgetsViewData.widget_html,this.widget_html=this.widgetHtmlArray[0].widget_html,this.widgetTheme=this.widgetsViewData.widget_theme.lookup_id,this.widgetThemeName=this.widgetsViewData.widget_theme.lookup_name,this.widgetThemedisplayname=this.lookupLanguageTranslations(this.widgetsViewData.widget_theme.lookup_id),this.enterpriseShortName=this.widgetsViewData.enterprise.short_name,this.lastUpdatedBy=this.widgetsViewData.updated_by,this.createdBy=this.widgetsViewData.created_by,this.widgetParametersData=this.widgetsViewData.widget_params,this.widgetParametersData&&this.widgetParametersData.length>0)for(let i=0;i<this.widgetParametersData.length;i++)this.widgetParametersData[i].parameter_type_value=this.widgetParametersData[i].parameter_type?this.lookupLanguageTranslations(this.widgetParametersData[i].parameter_type.lookup_id):"",this.widgetParametersData[i].param_data_source_table_value=this.widgetParametersData[i].param_data_source_table?this.widgetParametersData[i].param_data_source_table.page_display_name:"",this.widgetParametersData[i].param_enabled_value=!0===this.widgetParametersData[i].param_enabled?"Yes":"No",this.widgetParametersData[i].param_mandatory_value=!0===this.widgetParametersData[i].param_mandatory?"Yes":"No"},a=>{this.loggerService.setLoggerError(this.constructor.name,"getWidgetsViewData",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getWidgetsView",a)}}changeWidgetName(a){this.widgetName=a.value}getWidgetThemeOptions(a){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.uP.UI_THEMES],a).then(i=>{this.widgetThemeOptions=i},i=>{this.loggerService.setLoggerError(this.constructor.name,"getwidgetThemeOptions",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getwidgetThemeOptions",i)}}changeWidgetTheme(a){try{this.widgetTheme=a.value,this.widgetThemeObj=this.widgetThemeOptions.find(i=>i.ID===parseInt(this.widgetTheme,10)),this.widgetThemeName=this.widgetThemeObj.lookup_name,this.widgetThemedisplayname=this.lookupLanguageTranslations(this.widgetThemeObj.lookup_id)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeWidgetTheme",i)}}getWidgetTypeOptions(a){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.WIDGET_TYPES],a).then(i=>{this.widgetTypeOptions=i,this.dataJsonObj.printvalue=this.widgetTypeOptions[0].lookup_name;for(let t=0;t<this.widgetTypeOptions.length;t++){let s=this.widgetTypeOptions[t];this.widgetHtmlArray.find(p=>p.device_type.lookup_name===s.lookup_name)||this.widgetHtmlArray.push({device_type:{lookup_id:s.lookup_id,lookup_name:s.lookup_name},widget_html:""})}},i=>{this.loggerService.setLoggerError(this.constructor.name,"getwidgetTypeOptions",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getwidgetTypeOptions",i)}}changeDeviceType(a){try{this.widget_html="",this.dataJsonObj.printvalue=a.target.title;for(let i of this.widgetHtmlArray)if(i.device_type.lookup_name===this.dataJsonObj.printvalue){this.widget_html=i.widget_html;break}}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeDeviceType",i)}}onChange(a){try{for(let i of this.widgetHtmlArray)if(i.device_type.lookup_name===this.dataJsonObj.printvalue){i.widget_html=this.widget_html;break}}catch(i){this.loggerService.setLoggerError(this.constructor.name,"onChange",i)}}changeColor(a,i,t){try{t[i]=a.target.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeColor",s)}}changeCheckBox(a){this.widgetCheckbox=a.value}changeDescription(a){this.description=a.value}clearMessage(){this.errorHtml=""}clearErrorMessage(){this.errorQuery=""}updateRecord(){try{if(this.widgetNameValid.isValid()&&this.descriptionValid.isValid()&&this.widgetThemedropdown.isValid())if(w.L.isEmpty(this.widgetQuery))this.errorQuery="NEW_VARIABLES.VALID_PLEASE_ENTER_WIDGET_QUERY";else if(w.L.isEmpty(this.widgetHtmlArray[0].widget_html))this.errorHtml="NEW_VARIABLES.VALID_PLEASE_ENTER_WIDGET_HTML";else if(!1===this.checkForValidParameters())this.errorHtml="COMMON_VALIDATION_MESSAGES.VALID_PARAMETER_DEFINED_IS_MSSING_IN_QUERY";else if(this.checkSeqUniqueness().length>0)this.errorHtml="COMMON_VALIDATION_MESSAGES.VALID_PARAMETER_SEQUENCE_UNIQUENESS";else{this.errorQuery="",this.errorHtml="",this.submitenabled=!0;for(let i of this.widgetHtmlArray)w.L.isEmpty(i.widget_html)&&(i.widget_html=this.widgetHtmlArray[0].widget_html);this.widgetsService.update(this.recordId,{enterprise:{enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},background_color:this.dataJsonObj.backgroundColor,text_color:this.dataJsonObj.textColor,icon_color:this.dataJsonObj.iconColor,widget_theme:{lookup_id:this.widgetTheme,lookup_name:this.widgetThemeName},widget_name:this.widgetName,widget_query:this.widgetQuery,widget_html:this.widgetHtmlArray,description:this.description,is_enabled:this.widgetCheckbox,widget_params:this.widgetParametersData}).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},i=>{this.commonErrorCodes(JSON.parse(i)),this.loggerService.setLoggerError(this.constructor.name,"updateRecord",i)})}}catch(a){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",a)}}commonErrorCodes(a){const i=JSON.parse(a[n.BU.STATUS]);409===i&&(this.error="COMMON_STATUS_CODES."+i)}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",a)}}checkForValidParameters(){try{this.getParameterNamesList();const a={};for(let t=0;t<this.parameterNameOptions.length;t++)a[this.parameterNameOptions[t].ID]=this.parameterNameOptions[t];let i=!0;for(let t=0;t<this.widgetParametersData.length;t++)!0===this.widgetParametersData[t].param_enabled&&!a[this.widgetParametersData[t].parameter_name]&&(i=!1);return i}catch(a){this.loggerService.setLoggerError(this.constructor.name,"checkForValidParameters",a)}}checkSeqUniqueness(){try{const a=this.widgetParametersData.reduce((i,t)=>(i[t.param_display_sequence]=++i[t.param_display_sequence]||0,i),{});return this.widgetParametersData.filter(i=>a[i.param_display_sequence])}catch(a){this.loggerService.setLoggerError(this.constructor.name,"checkSeqUniqueness",a)}}parametersAdd(a){try{a.stopPropagation(),this.parameterName="",this.displayName="",this.parameterType="",this.parameterDescription="",this.sourceTable="",this.sourceTableName="",this.sourceDisplayName="",this.sourceColumn="",this.defaultValue="",this.sourceDisplayColumn="";let i=1;this.widgetParametersData&&this.widgetParametersData.length>0&&(i=Math.max.apply(Math,this.widgetParametersData.map(function(s){return s.param_display_sequence}))+1),this.paramSequence=i,this.enabledFlag=!0,this.paramValueReqd=!0,this.error1="",this.sourceColumnOptions=[],this.sourceDisplayColumnOptions=[],this.getParameterNamesList(),this.getParameterTypes(),this.getSourceTablesList(""),this.parameterNameDropdown.clearmessage(),this.parameterDisplayName.clearmessage(),this.parameterTypeDropdown.clearmessage(),this.paramSequenceAdd.clearMessage(),this.sourceTableDropdown&&this.sourceTableDropdown.clearmessage(),this.sourceColumnDropdown&&this.sourceColumnDropdown.clearmessage(),this.sourceTableDropdown&&this.sourceTableDropdown.clearSelectInput(),this.sourceColumnDropdown&&this.sourceColumnDropdown.clearSelectInput(),this.sourceDisplayColumnDropdown&&this.sourceDisplayColumnDropdown.clearSelectInput(),this.sourceDisplayColumnDropdown&&this.sourceDisplayColumnDropdown.clearmessage(),this.paramTextValue&&this.paramTextValue.clearmessage(),this.paramNumberValue&&this.paramNumberValue.clearMessage(),this.paramEmailValue&&this.paramEmailValue.clearmessage(),this.paramListValue&&this.paramListValue.clearmessage(),this.paramListValue&&this.paramListValue.clearSelectInput(),this.paramDateValue&&this.paramDateValue.clearmessage(),$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"parametersAdd",i)}}getParameterNamesList(){try{this.parameterNameOptions=[];let a=this.widgetQuery.split("const dynamicParams = [")[1].split("];")[0];if(a=a.replace(/\'/gi,""),a=a.split(","),a&&a.length>0)for(let i=0;i<a.length;i++){const t={ID:a[i].trim(),NAME:a[i].trim()};this.parameterNameOptions.push(t)}}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getParameterNamesList",a)}}getParameterTypes(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.WIDGET_PARAMETER_TYPES],"").then(a=>{this.parameterTypeOptions=a},a=>{this.loggerService.setLoggerError(this.constructor.name,"getParameterTypes",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getParameterTypes",a)}}getSourceTablesList(a){try{this.commonService.getApplicationNames(this.enterpriseId).then(i=>{if(this.sourceTableOptions=i,this.sourceTableOptions&&""!==a){const t=this.sourceTableOptions.filter(function(s){return s.NAME.toLowerCase().includes(a.toLowerCase())});this.sourceTableOptions=t}}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getSourceTablesList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSourceTablesList",i)}}changeParameterNames(a){this.parameterName=a.value,this.displayName=a.value}changeParameterDescription(a){this.parameterDescription=a.value}changeDisplayName(a){this.displayName=a.value}getDefaultvalue(a){this.defaultValue=a.value}changeSequence(a){this.paramSequence=a.value}changeEnabled(a){this.enabledFlag=a.value}changeMandatory(a){this.paramValueReqd=a.value}changeParameterTypes(a){try{if(a){const i=this.parameterTypeOptions.find(t=>t.ID===parseInt(a.value,10));i&&(this.parameterTypeDisplayName=i.NAME,this.parameterType=a.value,this.parameterTypeName=i.lookup_name,this.sourceTable="",this.sourceColumn="",this.defaultValue="",this.parameterDisplayValue="",i.lookup_name===n.oP.INPUT_DATE&&!0===this.paramValueReqd&&(this.defaultValue=this.commonService.dbTimezoneFormat(this.newDate),this.parameterDisplayValue=this.commonService.dbTimezoneFormat(this.newDate)),this.error1="")}}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeParameterTypes",i)}}changeSourceTable(a){try{if(a){this.sourceTable=a.ID;const i=this.sourceTableOptions.find(t=>t.module.page_name===a.module.page_name);i&&(this.sourceTableName=i.module.page_name,this.sourceDisplayName=i.module.page_display_name,this.sourceLower=i.module.underlying_tables[0].name,this.getSourceColumnsList(""),"LOOKUP_CODES"===this.sourceTableName||"LOOKUP_TYPES"===this.sourceTableName?(this.sourceDisplayColumn="lookup_display_name",this.disableSourceDisplayColumn=!0,this.sourceLower=i.module.underlying_tables[0].name):(this.sourceLower=i.module.underlying_tables[0].name,this.disableSourceDisplayColumn=!1,this.getSourceDisplayColumnsList("")))}else this.sourceTable="",this.sourceTableName="",this.sourceDisplayName="",this.sourceColumn="",this.sourceDisplayColumn="",this.parameterDisplayValue="",this.sourceColumnOptions=[],this.sourceDisplayColumnOptions=[],this.parameterValueOptions=[]}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeSourceTable",i)}}getSourceColumnsList(a){try{"LOOKUP_TYPES"===this.sourceTableName||"LOOKUP_CODES"===this.sourceTableName?this.getSourceColumnsLookupsList(a):this.listViewService.getreferenceFieldOptions(this.sourceLower,a).then(i=>{this.sourceColumnOptions=[];let t=i.columns;for(let s=0;s<t.length;s++){let r={ID:"",NAME:""};if(r.ID=t[s],r.NAME=t[s],this.sourceColumnOptions.push(r),this.sourceColumnOptions&&""!==a){const p=this.sourceColumnOptions.filter(function(c){return c.NAME.toLowerCase().includes(a.toLowerCase())});this.sourceColumnOptions=p}}}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getSourceColumnsList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSourceColumnsList",i)}}getSourceColumnsLookupsList(a){try{this.widgetsService.getOptions(this.sourceLower,this.enterpriseId,a).then(i=>{this.sourceColumnOptions=[];for(let t=0;t<i.length;t++)this.sourceColumnOptions.push({ID:i[t].NAME,NAME:i[t].NAME});if(this.sourceColumnOptions&&""!==a){const t=this.sourceColumnOptions.filter(function(s){return s.NAME.toLowerCase().includes(a.toLowerCase())});this.sourceColumnOptions=t}},i=>{this.loggerService.setLoggerError(this.constructor.name,"getSourceColumnsLookupsList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSourceColumnsLookupsList",i)}}getSourceDisplayColumnsList(a){try{this.listViewService.getreferenceFieldOptions(this.sourceLower,a).then(i=>{this.sourceDisplayColumnOptions=[];let t=i.columns;for(let s=0;s<t.length;s++){let r={ID:"",NAME:""};r.ID=t[s],r.NAME=t[s],this.sourceDisplayColumnOptions.push(r)}if(this.sourceDisplayColumnOptions&&""!==a){const s=this.sourceDisplayColumnOptions.filter(function(r){return r.NAME.toLowerCase().includes(a.toLowerCase())});this.sourceDisplayColumnOptions=s}},i=>{this.loggerService.setLoggerError(this.constructor.name,"getSourceDisplayColumnsList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSourceDisplayColumnsList",i)}}changeSourceColumn(a){try{a?this.sourceColumn=a.ID:(this.parameterDisplayValue="",this.parameterValueOptions=[])}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeSourceColumn",i)}}changeSourceDisplayColumn(a){try{a?this.sourceDisplayColumn=a.ID:(this.parameterDisplayValue="",this.parameterValueOptions=[])}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeSourceDisplayColumn",i)}}getParamValuesList(a){try{this.parameterValueOptions=[],this.sourceTable&&this.sourceColumn?this.widgetsService.getWidgetParametersValue(this.sourceLower,this.sourceColumn,this.sourceDisplayColumn,this.enterpriseId,a).then(i=>{this.parameterValueOptions=i},i=>{this.commonErrorCodes(JSON.parse(i)),this.loggerService.setLoggerError(this.constructor.name,"getWidgetParametersValue",i)}):this.parameterValueOptions=[]}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getParamValuesList",i)}}changeParameterValue(a){try{this.parameterValueOptions=[],a?this.parameterTypeName===n.oP.INPUT_LIST?(this.defaultValue=a.ID,this.parameterDisplayValue=a.NAME):(this.defaultValue=a.value,this.parameterDisplayValue=a.value):(this.error1="",this.defaultValue="",this.parameterDisplayValue="")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeParameterValue",i)}}widgetParametersAdd(){try{if((this.parameterName||this.parameterNameDropdown.isValid())&&this.parameterDisplayName.isValid()&&(this.parameterType||this.parameterTypeDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||this.sourceTableDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||this.sourceColumnDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||!this.sourceDisplayColumnDropdown||this.sourceDisplayColumnDropdown.isValid())&&(!this.paramValueReqd||!this.paramTextValue||this.paramTextValue.isValid())&&(!this.paramValueReqd||!this.paramNumberValue||this.paramNumberValue.isValid())&&(!this.paramValueReqd||!this.paramEmailValue||this.paramEmailValue.isValid())&&(!this.paramValueReqd||!this.paramDateValue||this.paramDateValue.isValid())&&(!this.paramValueReqd||!this.paramListValue||this.paramListValue.isValid())&&this.paramSequenceAdd.isValid())if(this.widgetParametersData.find(i=>i.parameter_name===this.parameterName))this.error1="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS";else{let i="";i=this.parameterTypeName===n.oP.INPUT_DATE?this.commonService.dbTimezoneFormat(this.defaultValue):this.defaultValue;const r={parameter_name:this.parameterName,parameter_display_name:this.displayName,parameter_description:this.parameterDescription,parameter_type:{lookup_id:this.parameterType,lookup_name:this.parameterTypeName},parameter_type_value:this.parameterTypeDisplayName,param_data_source_table:{page_id:this.sourceTable,page_name:this.sourceTableName,page_display_name:this.sourceDisplayName},param_data_source_table_value:this.sourceDisplayName,param_data_source_column:this.sourceColumn,param_data_source_display_column:this.sourceDisplayColumn,default_value:i,default_value_to_display:this.parameterTypeName===n.oP.INPUT_DATE?this.commonService.dbTimezoneFormat(this.parameterDisplayValue):this.parameterDisplayValue,param_display_sequence:this.paramSequence,param_enabled:this.enabledFlag,param_enabled_value:!0===this.enabledFlag?"Yes":"No",param_mandatory:this.paramValueReqd,param_mandatory_value:!0===this.paramValueReqd?"Yes":"No",underlying_tables:this.sourceLower};this.widgetParametersData.push(r),this.widgetParametersData.sort((p,c)=>p.param_display_sequence-c.param_display_sequence),$("#exampleModal1").modal("hide")}}catch(a){this.loggerService.setLoggerError(this.constructor.name,"widgetParametersAdd",a)}}cancel(){document.getElementsByTagName("body")[0].classList.remove("modale-popup-open")}editWidgetParameters(a,i){try{this.rowIndex=a,this.error1="",this.getParameterNamesList(),this.getParameterTypes(),this.parameterName=i.parameter_name,this.displayName=i.parameter_display_name,this.parameterType=i.parameter_type.lookup_id,this.parameterTypeName=i.parameter_type.lookup_name,this.parameterTypeDisplayName=this.lookupLanguageTranslations(i.parameter_type.lookup_id),this.parameterDescription=i.parameter_description,this.parameterTypeName===n.oP.INPUT_LIST&&(this.getSourceTablesList(""),this.sourceTable=i.param_data_source_table.page_id,this.sourceTableName=i.param_data_source_table.page_name,this.sourceDisplayName=i.param_data_source_table.page_display_name,this.getSourceColumnsList(""),this.sourceColumn=i.param_data_source_column,"LOOKUP_TYPES"===this.sourceTableName||"LOOKUP_CODES"===this.sourceTableName?(this.sourceLower=i.underlying_tables?i.underlying_tables:i.param_data_source_table.page_name.toLowerCase(),this.disableSourceDisplayColumn=!0):(this.sourceLower=i.underlying_tables?i.underlying_tables:i.param_data_source_table.page_name.toLowerCase(),this.disableSourceDisplayColumn=!1,this.getSourceDisplayColumnsList("")),this.sourceDisplayColumn=i.param_data_source_display_column,this.sourceTable&&this.sourceColumn&&this.sourceDisplayColumn&&this.getParamValuesList("")),this.defaultValue=i.default_value,this.parameterDisplayValue=i.default_value_to_display,this.paramSequence=i.param_display_sequence,this.enabledFlag=i.param_enabled,this.paramValueReqd=i.param_mandatory,this.parameterNameEditDropdown.clearmessage(),this.parameterDisplayNameEdit.clearmessage(),this.parameterTypeEditDropdown.clearmessage(),this.paramSequenceEdit.clearMessage(),this.sourceTableEditDropdown&&this.sourceTableEditDropdown.clearmessage(),this.sourceColumnEditDropdown&&this.sourceColumnEditDropdown.clearmessage(),this.sourceDisplayColumnEditDropdown&&this.sourceDisplayColumnEditDropdown.clearmessage(),this.paramTextValueUpdate&&this.paramTextValueUpdate.clearmessage(),this.paramNumberValueUpdate&&this.paramNumberValueUpdate.clearMessage(),this.paramEmailValueUpdate&&this.paramEmailValueUpdate.clearmessage(),this.paramListValueUpdate&&this.paramListValueUpdate.clearmessage(),this.paramDateValueUpdate&&this.paramDateValueUpdate.clearmessage(),$("#exampleModal2").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal2")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"editWidgetParameters",t)}}widgetParametersUpdate(){try{if((this.parameterName||this.parameterNameEditDropdown.isValid())&&this.parameterDisplayNameEdit.isValid()&&(this.parameterType||this.parameterTypeEditDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||this.sourceTableEditDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||this.sourceColumnEditDropdown.isValid())&&(this.parameterTypeName!==n.oP.INPUT_LIST||!this.sourceDisplayColumnEditDropdown||this.sourceDisplayColumnEditDropdown.isValid())&&(!this.paramValueReqd||!this.paramTextValueUpdate||this.paramTextValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramNumberValueUpdate||this.paramNumberValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramEmailValueUpdate||this.paramEmailValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramDateValueUpdate||this.paramDateValueUpdate.isValid())&&(!this.paramValueReqd||!this.paramListValueUpdate||this.paramListValueUpdate.isValid())&&this.paramSequenceEdit.isValid()&&""===this.error1){const a=this.widgetParametersData.findIndex(i=>i.parameter_name===this.parameterName);if(-1===a||a===this.rowIndex){for(let i=0;i<this.widgetParametersData.length;i++)i===this.rowIndex&&(this.widgetParametersData[i].parameter_name=this.parameterName,this.widgetParametersData[i].parameter_display_name=this.displayName,this.widgetParametersData[i].parameter_description=this.parameterDescription,this.widgetParametersData[i].parameter_type={lookup_id:this.parameterType,lookup_name:this.parameterTypeName},this.widgetParametersData[i].parameter_type_value=this.parameterTypeDisplayName,this.widgetParametersData[i].param_data_source_table={page_id:this.sourceTable,page_name:this.sourceTableName,page_display_name:this.sourceDisplayName},this.widgetParametersData[i].param_data_source_table_value=this.sourceDisplayName,this.widgetParametersData[i].param_data_source_column=this.sourceColumn,this.widgetParametersData[i].param_data_source_display_column=this.sourceDisplayColumn,this.widgetParametersData[i].default_value=this.parameterType===n.oP.INPUT_DATE?this.commonService.dbTimezoneFormat(this.defaultValue):this.defaultValue,this.widgetParametersData[i].default_value_to_display=this.parameterTypeName===n.oP.INPUT_DATE?this.commonService.dbTimezoneFormat(this.parameterDisplayValue):this.parameterDisplayValue,this.widgetParametersData[i].param_display_sequence=this.paramSequence,this.widgetParametersData[i].param_enabled=this.enabledFlag,this.widgetParametersData[i].param_mandatory=this.paramValueReqd,this.widgetParametersData[i].param_enabled_value=!0===this.enabledFlag?"Yes":"No",this.widgetParametersData[i].param_mandatory_value=!0===this.paramValueReqd?"Yes":"No",this.widgetParametersData[i].underlying_tables=this.sourceLower);this.widgetParametersData.sort((i,t)=>i.param_display_sequence-t.param_display_sequence),$("#exampleModal2").modal("hide")}else this.error1="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS"}}catch(a){this.loggerService.setLoggerError(this.constructor.name,"widgetParametersUpdate",a)}}static \u0275fac=function(i){return new(i||o)(e.Y36(te.x),e.Y36(N.m),e.Y36(M.f),e.Y36(g.F0),e.Y36(b.sK),e.Y36(V.s),e.Y36(C.L),e.Y36(T.v),e.Y36(g.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-widgets-edit"]],viewQuery:function(i,t){if(1&i&&(e.Gf(re,5),e.Gf(oe,5),e.Gf(ne,5),e.Gf(le,5),e.Gf(de,5),e.Gf(pe,5),e.Gf(ce,5),e.Gf(me,5),e.Gf(ue,5),e.Gf(ge,5),e.Gf(he,5),e.Gf(_e,5),e.Gf(be,5),e.Gf(Ce,5),e.Gf(Te,5),e.Gf(we,5),e.Gf(Oe,5),e.Gf(Ee,5),e.Gf(ye,5),e.Gf(Se,5),e.Gf(ve,5),e.Gf(fe,5),e.Gf(Ne,5),e.Gf(De,5),e.Gf(Ae,5),e.Gf(Ie,5),e.Gf(Le,5)),2&i){let s;e.iGM(s=e.CRH())&&(t.descriptionValid=s.first),e.iGM(s=e.CRH())&&(t.paramDateValue=s.first),e.iGM(s=e.CRH())&&(t.paramDateValueUpdate=s.first),e.iGM(s=e.CRH())&&(t.paramEmailValue=s.first),e.iGM(s=e.CRH())&&(t.paramEmailValueUpdate=s.first),e.iGM(s=e.CRH())&&(t.paramListValue=s.first),e.iGM(s=e.CRH())&&(t.paramListValueUpdate=s.first),e.iGM(s=e.CRH())&&(t.paramNumberValue=s.first),e.iGM(s=e.CRH())&&(t.paramNumberValueUpdate=s.first),e.iGM(s=e.CRH())&&(t.paramSequenceAdd=s.first),e.iGM(s=e.CRH())&&(t.paramSequenceEdit=s.first),e.iGM(s=e.CRH())&&(t.paramTextValue=s.first),e.iGM(s=e.CRH())&&(t.paramTextValueUpdate=s.first),e.iGM(s=e.CRH())&&(t.parameterDisplayName=s.first),e.iGM(s=e.CRH())&&(t.parameterDisplayNameEdit=s.first),e.iGM(s=e.CRH())&&(t.parameterNameDropdown=s.first),e.iGM(s=e.CRH())&&(t.parameterNameEditDropdown=s.first),e.iGM(s=e.CRH())&&(t.parameterTypeDropdown=s.first),e.iGM(s=e.CRH())&&(t.parameterTypeEditDropdown=s.first),e.iGM(s=e.CRH())&&(t.sourceColumnDropdown=s.first),e.iGM(s=e.CRH())&&(t.sourceColumnEditDropdown=s.first),e.iGM(s=e.CRH())&&(t.sourceDisplayColumnDropdown=s.first),e.iGM(s=e.CRH())&&(t.sourceDisplayColumnEditDropdown=s.first),e.iGM(s=e.CRH())&&(t.sourceTableDropdown=s.first),e.iGM(s=e.CRH())&&(t.sourceTableEditDropdown=s.first),e.iGM(s=e.CRH())&&(t.widgetNameValid=s.first),e.iGM(s=e.CRH())&&(t.widgetThemedropdown=s.first)}},features:[e._Bn([C.L,T.v]),e.qOj],decls:179,vars:184,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-5"],["disabled","false","mandatory","true","autoCaseFlag","false",3,"label","value","maxlength","valueChange"],["widgetNameValid",""],[1,"col-md-2"],["mandatory","true","id","widgets-create-theme",3,"label","options","defaultValue","valueChange"],["widgetThemedropdown",""],[1,"col-md-3"],["disabled","true","id","team-create-enterprise",3,"label","value"],[1,"col-md-2","d-flex","align-items-center"],["label","","disabled","false","mandatory","true","id","widgets-edit-checkboxoptions",3,"options","checked","valueChange"],["descriptionValid",""],["type","color","disabled","false",3,"label","value","change"],[1,"col-md-12","textarea-block"],["for","widgetQuery",1,"text-label"],["name","message","rows","12","cols","130","id","widgets-edit-report-query",1,"form-control",3,"ngModel","keypress","ngModelChange"],["message","ngModel"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"col-md-12","pdt-14"],[1,"fs-12"],[1,"position-relative","mgb-2"],[1,"btn-group-sm"],["class","btn btn-sm mgr-5",3,"title","ngClass","click",4,"ngFor","ngForOf"],[3,"ngModel","config","ngModelChange","blur","keypress"],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-primary btn-sm","id","widgets-edit-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","widgets-edit-cancel",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],[1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["disabled","false","label","","className","btn btn-danger btn-sm btn-round btn-rounded","btnIcon","fas fa-plus","id","widgets-edit-parametersadd",3,"isEmitMouseEvent","buttonOnClick"],["selectionMode","single","dataKey","LineNum",1,"ptable","d-none","d-lg-block","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body","ios-content"],[1,"col-md-4"],["mandatory","true","id","widgets-edit-parameter-name",3,"label","options","defaultValue","valueChange"],["parameterNameDropdown",""],["mandatory","true","autoCaseFlag","false","id","widgets-edit-parameter-displayName",3,"label","value","valueChange"],["parameterDisplayName",""],["mandatory","true","id","widgets-edit-parameter-type",3,"label","options","defaultValue","valueChange"],["parameterTypeDropdown",""],["id","widgets-edit-parameter-description",3,"label","maxlength","defaultvalue","valueChange"],["class","col-md-4",4,"ngIf"],["mandatory","true","type","CacheSettings","id","widgets-edit-parameter-sequence",3,"label","maxlength","value","valueChange"],["paramSequenceAdd",""],[1,"col-md-4","d-flex","align-items-center"],["label","","id","widgets-edit-parameters-mandatory","disabled","false","mandatory","false",3,"options","checked","valueChange"],["label","","id","widgets-edit-parameters-enabled","disabled","false","mandatory","false",3,"options","checked","valueChange"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","widget-parameters-add",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","widget-parameters-cancel",3,"label","buttonOnClick"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","true","id","widgets-update-parameter-name",3,"label","options","defaultValue","valueChange"],["parameterNameEditDropdown",""],["mandatory","true","id","widgets-update-parameter-displayName",3,"label","value","valueChange"],["parameterDisplayNameEdit",""],["mandatory","true","id","widgets-update-parameter-type",3,"label","options","defaultValue","valueChange"],["parameterTypeEditDropdown",""],["id","widgets-update-parameter-description",3,"label","maxlength","defaultvalue","valueChange"],["mandatory","true","type","CacheSettings","id","widgets-update-parameter-sequence",3,"label","maxlength","value","valueChange"],["paramSequenceEdit",""],["label","","id","widgets-update-parameters-mandatory","disabled","false","mandatory","false",3,"options","checked","valueChange"],["label","","id","widgets-update-parameters-enabled","disabled","false","mandatory","false",3,"options","checked","valueChange"],["className","btn btn-primary btn-sm","id","widgets-update",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","widgets-close",3,"label","buttonOnClick"],[1,"btn","btn-sm","mgr-5",3,"title","ngClass","click"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","class","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","click"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["mandatory","true","id","widgets-edit-sourcetable",3,"label","options","defaultValue","selectedOption","searchValueChange"],["sourceTableDropdown",""],["mandatory","true","id","widgets-edit-sourcecolumn",3,"label","options","defaultValue","selectedOption","searchValueChange"],["sourceColumnDropdown",""],["mandatory","true","id","widgets-edit-sourcedisplaycolumn",3,"label","options","defaultValue","selectedOption","searchValueChange"],["sourceDisplayColumnDropdown",""],["mandatory","true","id","widgets-edit-sourcedisplaycolumn","disabled","true","type","text",3,"label","value"],["disabled","false","id","widgets-edit-parameter-value",3,"label","mandatory","value","valueChange"],["paramTextValue",""],["disabled","false","id","widgets-edit-parameter-value",3,"label","mandatory","maxlength","value","valueChange"],["paramNumberValue",""],["disabled","false","type","email","id","widgets-edit-parameter-value",3,"label","mandatory","value","valueChange"],["paramEmailValue",""],["id","widgets-edit-parameter-value","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue"],["paramDateValue",""],["id","widgets-edit-parameter-value",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["paramListValue",""],["mandatory","true","id","widgets-update-sourcetable",3,"label","defaultValue","options","selectedOption","searchValueChange"],["sourceTableEditDropdown",""],["mandatory","true","id","widgets-update-sourcecolumn",3,"label","defaultValue","options","selectedOption","searchValueChange"],["sourceColumnEditDropdown",""],["mandatory","true","id","widgets-update-sourcedisplaycolumn",3,"label","defaultValue","options","selectedOption","searchValueChange"],["sourceDisplayColumnEditDropdown",""],["mandatory","true","id","widgets-update-sourcedisplaycolumn","disabled","true","type","text",3,"label","value"],["disabled","false","id","widgets-update-parameter-value",3,"label","mandatory","value","valueChange"],["paramTextValueUpdate",""],["disabled","false","id","widgets-update-parameter-value",3,"label","mandatory","maxlength","value","valueChange"],["paramNumberValueUpdate",""],["disabled","false","type","email","id","widgets-update-parameter-value",3,"label","mandatory","value","valueChange"],["paramEmailValueUpdate",""],["id","widgets-update-parameter-value","dateformat","dd-MMM-yyyy","currentDate","false",3,"placeholder","defaultDate","mandatory","dateChangeValue"],["paramDateValueUpdate",""],["id","widgets-update-parameter-value",3,"label","options","mandatory","defaultValue","selectedOption","searchValueChange"],["paramListValueUpdate",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"app-input",10,11),e.NdJ("valueChange",function(r){return t.changeWidgetName(r)}),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",12)(14,"app-dropdown-singleselect",13,14),e.NdJ("valueChange",function(r){return t.changeWidgetTheme(r)}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",15),e._UZ(18,"app-input",16),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",17)(21,"app-checkbox",18),e.NdJ("valueChange",function(r){return t.changeCheckBox(r)}),e.qZA()(),e.TgZ(22,"div",3)(23,"app-input",10,19),e.NdJ("valueChange",function(r){return t.changeDescription(r)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",15)(27,"app-input",20),e.NdJ("change",function(r){return t.changeColor(r,"backgroundColor",t.dataJsonObj)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",15)(30,"app-input",20),e.NdJ("change",function(r){return t.changeColor(r,"iconColor",t.dataJsonObj)}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",15)(33,"app-input",20),e.NdJ("change",function(r){return t.changeColor(r,"textColor",t.dataJsonObj)}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",21)(36,"label",22),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("keypress",function(){return t.clearErrorMessage()})("ngModelChange",function(r){return t.widgetQuery=r}),e.qZA()(),e.TgZ(41,"div",25),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"div",26)(45,"ion-label",27),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"div",28)(49,"mat-button-toggle-group",29),e.YNc(50,Me,2,3,"mat-button-toggle",30),e.qZA()(),e.TgZ(51,"angular-editor",31),e.NdJ("ngModelChange",function(r){return t.widget_html=r})("blur",function(r){return t.onChange(r)})("keypress",function(){return t.clearMessage()}),e.qZA()(),e.TgZ(52,"div",25),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"div",32)(56,"app-button",33),e.NdJ("buttonOnClick",function(){return t.updateRecord()}),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"app-button",34),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",25),e._uU(61),e.ALo(62,"translate"),e.qZA()(),e.TgZ(63,"div",3)(64,"div",35)(65,"div",36)(66,"p-accordion",37)(67,"p-accordionTab",38)(68,"p-header",39)(69,"span"),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"app-button",40),e.NdJ("buttonOnClick",function(r){return t.parametersAdd(r)}),e.qZA()(),e.TgZ(73,"p-table",41),e.YNc(74,Je,1,1,"ng-template",42),e.YNc(75,Ze,2,1,"ng-template",43),e.YNc(76,Ue,2,1,"ng-template",44),e.YNc(77,Re,4,2,"ng-template",45),e.qZA()(),e._UZ(78,"app-recordhistory",46),e.qZA()()()()()()()()()(),e.TgZ(79,"div",47)(80,"div",48)(81,"div",49)(82,"div",50)(83,"div",51),e._uU(84),e.ALo(85,"translate"),e.ALo(86,"translate"),e.qZA()(),e.TgZ(87,"div",52)(88,"div",8)(89,"div",53)(90,"app-dropdown-singleselect",54,55),e.NdJ("valueChange",function(r){return t.changeParameterNames(r)}),e.ALo(92,"translate"),e.qZA()(),e.TgZ(93,"div",53)(94,"app-input",56,57),e.NdJ("valueChange",function(r){return t.changeDisplayName(r)}),e.ALo(96,"translate"),e.qZA()(),e.TgZ(97,"div",53)(98,"app-dropdown-singleselect",58,59),e.NdJ("valueChange",function(r){return t.changeParameterTypes(r)}),e.ALo(100,"translate"),e.qZA()(),e.TgZ(101,"div",3)(102,"app-textarea",60),e.NdJ("valueChange",function(r){return t.changeParameterDescription(r)}),e.ALo(103,"translate"),e.qZA()(),e.YNc(104,We,4,5,"div",61),e.YNc(105,xe,4,5,"div",61),e.YNc(106,qe,4,5,"div",61),e.YNc(107,Fe,3,4,"div",61),e.YNc(108,Ge,4,5,"div",61),e.YNc(109,Be,4,6,"div",61),e.YNc(110,He,4,5,"div",61),e.YNc(111,Qe,4,5,"div",61),e.YNc(112,Ye,4,6,"div",61),e.TgZ(113,"div",53)(114,"app-inputnumber",62,63),e.NdJ("valueChange",function(r){return t.changeSequence(r)}),e.ALo(116,"translate"),e.qZA()(),e.TgZ(117,"div",64)(118,"app-checkbox",65),e.NdJ("valueChange",function(r){return t.changeMandatory(r)}),e.qZA()(),e.TgZ(119,"div",64)(120,"app-checkbox",66),e.NdJ("valueChange",function(r){return t.changeEnabled(r)}),e.qZA()(),e.TgZ(121,"div",25),e._uU(122),e.ALo(123,"translate"),e.qZA(),e.TgZ(124,"div",67)(125,"app-button",68),e.NdJ("buttonOnClick",function(){return t.widgetParametersAdd()}),e.ALo(126,"translate"),e.qZA(),e.TgZ(127,"app-button",69),e.NdJ("buttonOnClick",function(){return t.cancel()}),e.ALo(128,"translate"),e.qZA()()()()()()(),e.TgZ(129,"div",70)(130,"div",48)(131,"div",49)(132,"div",50)(133,"div",51),e._uU(134),e.ALo(135,"translate"),e.ALo(136,"translate"),e.qZA()(),e.TgZ(137,"div",52)(138,"div",8)(139,"div",53)(140,"app-dropdown-singleselect",71,72),e.NdJ("valueChange",function(r){return t.changeParameterNames(r)}),e.ALo(142,"translate"),e.qZA()(),e.TgZ(143,"div",53)(144,"app-input",73,74),e.NdJ("valueChange",function(r){return t.changeDisplayName(r)}),e.ALo(146,"translate"),e.qZA()(),e.TgZ(147,"div",53)(148,"app-dropdown-singleselect",75,76),e.NdJ("valueChange",function(r){return t.changeParameterTypes(r)}),e.ALo(150,"translate"),e.qZA()(),e.TgZ(151,"div",3)(152,"app-textarea",77),e.NdJ("valueChange",function(r){return t.changeParameterDescription(r)}),e.ALo(153,"translate"),e.qZA()(),e.YNc(154,Ke,4,5,"div",61),e.YNc(155,$e,4,5,"div",61),e.YNc(156,ze,4,5,"div",61),e.YNc(157,Xe,3,4,"div",61),e.YNc(158,et,4,5,"div",61),e.YNc(159,tt,4,6,"div",61),e.YNc(160,at,4,5,"div",61),e.YNc(161,it,4,5,"div",61),e.YNc(162,st,4,6,"div",61),e.TgZ(163,"div",53)(164,"app-inputnumber",78,79),e.NdJ("valueChange",function(r){return t.changeSequence(r)}),e.ALo(166,"translate"),e.qZA()(),e.TgZ(167,"div",64)(168,"app-checkbox",80),e.NdJ("valueChange",function(r){return t.changeMandatory(r)}),e.qZA()(),e.TgZ(169,"div",64)(170,"app-checkbox",81),e.NdJ("valueChange",function(r){return t.changeEnabled(r)}),e.qZA()(),e.TgZ(171,"div",25),e._uU(172),e.ALo(173,"translate"),e.qZA(),e.TgZ(174,"div",67)(175,"app-button",82),e.NdJ("buttonOnClick",function(){return t.widgetParametersUpdate()}),e.ALo(176,"translate"),e.qZA(),e.TgZ(177,"app-button",83),e.NdJ("buttonOnClick",function(){return t.cancel()}),e.ALo(178,"translate"),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(12,114,"COMMON_PAGE_TITLES.WIDGET")),e.s9C("value",t.widgetName),e.Q6J("maxlength",80),e.xp6(4),e.s9C("label",e.lcZ(16,116,"WIDGETS.WIDGET_THEME")),e.s9C("defaultValue",t.widgetTheme),e.Q6J("options",t.widgetThemeOptions),e.xp6(4),e.s9C("label",e.lcZ(19,118,"COMMON_PAGE_TITLES.SPORT")),e.s9C("value",t.dataJsonObj.sportName),e.xp6(3),e.Q6J("options",t.checkboxOptions)("checked",t.widgetCheckbox),e.xp6(2),e.s9C("label",e.lcZ(25,120,"COMMON_FIELDS.DESCRIPTION")),e.s9C("value",t.description),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(28,122,"NEW_VARIABLES.BACKGROUND_COLOR")),e.s9C("value",t.dataJsonObj.backgroundColor),e.xp6(3),e.s9C("label",e.lcZ(31,124,"NEW_VARIABLES.ICON_COLOR")),e.s9C("value",t.dataJsonObj.iconColor),e.xp6(3),e.s9C("label",e.lcZ(34,126,"NEW_VARIABLES.TEXT_COLOR")),e.s9C("value",t.dataJsonObj.textColor),e.xp6(4),e.hij(" ",e.lcZ(38,128,"WIDGETS.WIDGET_QUERY"),"*"),e.xp6(2),e.Q6J("ngModel",t.widgetQuery),e.xp6(3),e.hij(" ",e.lcZ(43,130,t.errorQuery)," "),e.xp6(4),e.hij(" ",e.lcZ(47,132,"WIDGETS.WIDGET_HTML"),"* "),e.xp6(4),e.Q6J("ngForOf",t.widgetTypeOptions),e.xp6(1),e.Q6J("ngModel",t.widget_html)("config",t.editorConfig),e.xp6(2),e.hij(" ",e.lcZ(54,134,t.errorHtml)," "),e.xp6(3),e.s9C("label",e.lcZ(57,136,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.Q6J("disabled",t.submitenabled),e.xp6(2),e.s9C("label",e.lcZ(59,138,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(62,140,t.error)," "),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(71,142,"REPORTS.PARAMETERS")),e.xp6(2),e.Q6J("isEmitMouseEvent",!0),e.xp6(1),e.Q6J("columns",t.headers)("value",t.widgetParametersData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("createdBy",t.createdBy)("lastUpdatedBy",t.lastUpdatedBy)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.widgetsViewData?null:t.widgetsViewData.createdAt)("lastUpdatedDate",null==t.widgetsViewData?null:t.widgetsViewData.updatedAt),e.xp6(6),e.AsE("",e.lcZ(85,144,"COMMON_FIELDS.PARAMETER")," - ",e.lcZ(86,146,"COMMON_BUTTONS.BUTTON_ADD"),""),e.xp6(6),e.s9C("label",e.lcZ(92,148,"REPORTS.PARAMETER_NAME")),e.s9C("defaultValue",t.parameterName),e.Q6J("options",t.parameterNameOptions),e.xp6(4),e.s9C("label",e.lcZ(96,150,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",t.displayName),e.xp6(4),e.s9C("label",e.lcZ(100,152,"COMMON_FIELDS.TYPE")),e.s9C("defaultValue",t.parameterType),e.Q6J("options",t.parameterTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(103,154,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",t.parameterDescription),e.Q6J("maxlength",240),e.xp6(2),e.Q6J("ngIf","LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!1===t.disableSourceDisplayColumn&&"LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!0===t.disableSourceDisplayColumn&&"LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_TEXT"===t.parameterTypeName||""===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_NUMBER"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_EMAIL"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","DATE"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===t.parameterTypeName),e.xp6(2),e.s9C("label",e.lcZ(116,156,"COMMON_FIELDS.SEQUENCE")),e.s9C("value",t.paramSequence),e.Q6J("maxlength",2),e.xp6(4),e.Q6J("options",t.mandatoryOptions)("checked",t.paramValueReqd),e.xp6(2),e.Q6J("options",t.enabledOptions)("checked",!0),e.xp6(2),e.hij(" ",e.lcZ(123,158,t.error1)," "),e.xp6(3),e.s9C("label",e.lcZ(126,160,"COMMON_BUTTONS.BUTTON_ADD")),e.xp6(2),e.s9C("label",e.lcZ(128,162,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(135,164,"COMMON_FIELDS.PARAMETER")," - ",e.lcZ(136,166,"COMMON_BUTTONS.BUTTON_EDIT"),""),e.xp6(6),e.s9C("label",e.lcZ(142,168,"REPORTS.PARAMETER_NAME")),e.s9C("defaultValue",t.parameterName),e.Q6J("options",t.parameterNameOptions),e.xp6(4),e.s9C("label",e.lcZ(146,170,"COMMON_FIELDS.DISPLAY_NAME")),e.s9C("value",t.displayName),e.xp6(4),e.s9C("label",e.lcZ(150,172,"COMMON_FIELDS.TYPE")),e.s9C("defaultValue",t.parameterType),e.Q6J("options",t.parameterTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(153,174,"COMMON_FIELDS.DESCRIPTION")),e.s9C("defaultvalue",t.parameterDescription),e.Q6J("maxlength",240),e.xp6(2),e.Q6J("ngIf","LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!1===t.disableSourceDisplayColumn&&"LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf",!0===t.disableSourceDisplayColumn&&"LIST"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_TEXT"===t.parameterTypeName||""===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_NUMBER"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","INPUT_EMAIL"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","DATE"===t.parameterTypeName),e.xp6(1),e.Q6J("ngIf","LIST"===t.parameterTypeName),e.xp6(2),e.s9C("label",e.lcZ(166,176,"COMMON_FIELDS.SEQUENCE")),e.s9C("value",t.paramSequence),e.Q6J("maxlength",2),e.xp6(4),e.Q6J("options",t.mandatoryOptions)("checked",t.paramValueReqd),e.xp6(2),e.Q6J("options",t.enabledOptions)("checked",t.enabledFlag),e.xp6(2),e.hij(" ",e.lcZ(173,178,t.error1)," "),e.xp6(3),e.s9C("label",e.lcZ(176,180,"COMMON_BUTTONS.BUTTON_UPDATE")),e.xp6(2),e.s9C("label",e.lcZ(178,182,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[_.mk,_.sg,_.O5,E.Q$,J.r,P.a,R.k,Z.b,ee.Q,ae.R,ie.K,se.C,x.W,D.q,O.UQ,O.US,j.h4,j.jx,u.Fj,u.JJ,u.On,S.iA,S.lQ,S.Ei,y.s6,b.X$]})}return o})();var q=l(42863),F=l(28168),I=l(30578),ot=l(21413),nt=l(88425);const lt=["datatableComponent"];function pt(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"mat-button-toggle",42),e.NdJ("click",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeDeviceType(t))}),e._uU(1),e.qZA()}if(2&o){const a=d.$implicit,i=e.oxw();e.s9C("title",a.lookup_name),e.Q6J("ngClass",a.lookup_name===i.dataJsonObj.printvalue?"btn-primary":""),e.xp6(1),e.hij("",a.NAME," ")}}function ct(o,d){if(1&o){const a=e.EpF();e.TgZ(0,"div",3)(1,"app-datatable",43),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.paginationChange(t))}),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.Q6J("header",a.headers)("data",a.widgetParametersData)("expand",!1)("totalRecords",a.listingVariables.totalRecords)("paginator",!0)("totalPages",a.listingVariables.totalpages)("ignoreDisplayView",!0)}}const ut=[{path:"",data:{title:"Widgets"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[v.P],component:(()=>{class o extends f.O{ColumnHeader;actionSheetController;loggerService;router;translateService;uiUtils;widgetsService;commonService;listingVariables;route;dashboardService;datatableComponent;searchValueChange=new e.vpe;actionBoolean;actionStatus;actions;checkId;fabMobileactions;listData;noDuplicates=void 0;objectType;pageTitle;show=!0;searchString;status;statusObj;tableColumnheaders;widgetsMobileList;dataJsonObj={};constructor(a,i,t,s,r,p,c,h,m,L,_t){super(L,h),this.ColumnHeader=a,this.actionSheetController=i,this.loggerService=t,this.router=s,this.translateService=r,this.uiUtils=p,this.widgetsService=c,this.commonService=h,this.listingVariables=m,this.route=L,this.dashboardService=_t,this.route.queryParams.subscribe(U=>{this.dataJsonObj.queryParamsObj={defaultView:U.default_view,selectedMenuId:U.selectedMenuId,selectedSubMenuId:U.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=n.hf.WIDGET_DEFINITIONS,this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:n.hf,pageSettingEnum:n.AM,pageSettingFieldsEnum:n.In},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.WIDGET_DEFINITIONS",value:"",showSubMenuDisplayName:!0}],this.commonService.trackView(n.sn.WIDGETS_LIST),this.objectType=this.route.snapshot.data.object_type,document.getElementsByTagName("body"),this.dataJsonObj.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.tableColumnheaders=this.ColumnHeader.getWidgetsColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.actionBoolean=!0===this.roleRightsValidationByPage(n.hf.WIDGET_DEFINITIONS,n.AM.ACTIONS,n.In.INACTIVATE)&&!0===this.roleRightsValidationByPage(n.hf.WIDGET_DEFINITIONS,n.AM.ACTIONS,n.In.ACTIVATE),this.actions={EDIT:this.roleRightsValidationByPage(n.hf.WIDGET_DEFINITIONS,n.AM.ACTIONS,n.In.EDIT),CHECKBOX:this.actionBoolean},this.getSportsDropdown(),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(n.hf.WIDGET_DEFINITIONS,n.AM.ACTIONS,n.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:n.gL.URL,redirectURL:"/admin/widgetdefinitions/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(n.hf.WIDGET_DEFINITIONS,n.AM.ACTIONS,n.In.FILTERS)}getSearchResult(a){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(a)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",i)}}searchClose(){try{this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"searchClose",a)}}getSportsDropdown(){this.commonService.getJsonData(`assets/enterprises/${this.dataJsonObj.enterpriseId}/sports/`,"sports.json").then(a=>{this.dataJsonObj.sportOptions=this.commonService.getFormattedSportsJSONBySport(a)})}getAllRecords(){try{const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.status=this.statusObj;const i=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.widgetsService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.dataJsonObj.enterpriseId,this.status,a,i,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(this.hideSpinner(),t.rows.length>0){this.widgetsMobileList&&this.widgetsMobileList.length>0||(this.widgetsMobileList=[]);for(let s=0;s<t.rows.length;s++){const r={url:`admin/widgetdefinitions/${t.rows[s]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},p=r.queryParams&&Object.keys(r.queryParams).length>0?`${r.url}?${JSON.stringify(r.queryParams)}`:r.url;t.rows[s].widget_name=`<a class="enable" id="widget_name${t.rows[s]._id}" href=${p}>${t.rows[s].widget_name}`,t.rows[s].enterprise.short_name='<a class="enable" id="enterprise.short_name'+t.rows[s]._id+'" href="enterprises/enterprises/'+t.rows[s].enterprise.enterprise_id+'/view/" >'+t.rows[s].enterprise.short_name,t.rows[s].sport_id&&(t.rows[s].sportName=this.dataJsonObj.sportOptions[t.rows[s].sport_id+""]?.NAME),!0===t.rows[s].is_enabled?t.rows[s].is_enabled="Yes":!1===t.rows[s].is_enabled&&(t.rows[s].is_enabled="No"),this.widgetsMobileList=this.widgetsMobileList.filter(c=>c._id!==t.rows[s]._id),this.widgetsMobileList.push(t.rows[s])}t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.listData=this.listData.concat(t.rows)):this.listData=t.rows}else this.listData=[],this.widgetsMobileList=[]},t=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getWidgetsList",t)})}catch(a){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getWidgetsListing",a)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.widgetsMobileList=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}toggle(){this.show=!this.show}statusData(a){try{this.statusObj=a.value,this.getAllRecords()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"statusData",i)}}createWidgets(){try{this.router.navigate(["admin/widgetdefinitions/create"])}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createWidgets",a)}}onActionClicked(a){try{a.action===n.A0.EDIT?(this.router.navigate(["admin/widgetdefinitions/"+a.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("widgetdefinitions")):a.action===n.A0.VIEW?this.commonService.redirectToUrl(["..",a.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):a.action===n.A0.CHECKBOX&&this.toCheckWidgetDependency(a.data)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",i)}}toCheckWidgetDependency(a){const i=a._id;this.dataJsonObj.actionStatusDashboard=a.isEnabled;const t=a;this.dataJsonObj.isWidgetBelongsToDasboard=!1,this.dashboardService.getDashboardsData(this.dataJsonObj.enterpriseId).then(s=>{for(let r of s)for(let p of r.widgets)for(let c of p.widgets)if(c.widget_id===i){this.dataJsonObj.isWidgetBelongsToDasboard=!0,t.isEnabled=!0;break}this.dataJsonObj.isWidgetBelongsToDasboard?this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_ALREADY_USED_INTHE_DASHBOARD"):this.changeWidgetActivationStatus(t)},s=>{this.loggerService.setLoggerError(this.constructor.name,"toCheckWidgetDependency",s)})}changeWidgetActivationStatus(a){this.actionStatus=a.isEnabled,this.checkId=a._id,this.widgetsService.editWidgetsCheckboxData(this.checkId,{is_enabled:this.actionStatus}).then(t=>{this.uiUtils.displaytoastMessage(!0===this.actionStatus?"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE":"COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.router.routeReuseStrategy.clearModuleRouteCache("widgetdefinitions"),this.getAllRecords()})}mobileEventAction(a){this.presentActionSheet(a)}presentActionSheet(a){var i=this;return(0,A.Z)(function*(){yield(yield i.actionSheetController.create({cssClass:"actionsheet",buttons:[{text:i.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{i.router.navigate(["/admin/widgetdefinitions/"+a._id+"/edit"]),i.router.routeReuseStrategy.clearModuleRouteCache("widgetdefinitions")}}]})).present()})()}onItemClicked(a){try{this.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getRedirectWidgets",i)}}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a||(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(i){return new(i||o)(e.Y36(q.Y),e.Y36(E.BX),e.Y36(N.m),e.Y36(g.F0),e.Y36(b.sK),e.Y36(V.s),e.Y36(C.L),e.Y36(T.v),e.Y36(I.v),e.Y36(g.gz),e.Y36(ot.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-widgets-list"]],viewQuery:function(i,t){if(1&i&&e.Gf(lt,5),2&i){let s;e.iGM(s=e.CRH())&&(t.datatableComponent=s.first)}},outputs:{searchValueChange:"searchValueChange"},features:[e._Bn([q.Y,I.v,C.L]),e.qOj],decls:9,vars:30,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",3,"header","actions","totalPages","listingVariables","paginator","totalRecords","data","mobileListData","expand","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","showSpinner","pageName","selectedMenuId","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(r){return t.onHeaderItemClick(r)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(r){return t.onActionClicked(r)})("itemClickEvent",function(r){return t.onItemClicked(r)})("redirectionEvent",function(r){return t.mobileEventAction(r)})("changeStats",function(r){return t.statusData(r)})("loadPageData",function(r){return t.loadPageData(r)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(r){return t.onPageLevelActionClicked(r)}),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",t.tableColumnheaders)("actions",t.actions)("totalPages",t.listingVariables.totalpages)("listingVariables",t.listingVariables)("paginator",!0)("totalRecords",t.listingVariables.totalRecords)("data",t.listData)("mobileListData",t.widgetsMobileList)("expand",!1)("statsShow",t.show)("showRights",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.WIDGET_DEFINITIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",t.searchString)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("showSpinner",t.dataJsonObj.showSpinner)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList))},dependencies:[F.n,D.q,nt.y]})}return o})(),data:{object_type:n.hf.WIDGET_DEFINITIONS,responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.WIDGETS+"."+n.In.ENABLED,pageName:n.hf.WIDGET_DEFINITIONS}},{path:"create",canActivate:[v.P],component:X,data:{responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.WIDGETS+"."+n.In.CREATE,pageName:n.hf.WIDGET_DEFINITIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.CREATE}},{path:":id/view",canActivate:[v.P],component:(()=>{class o extends f.O{loggerService;navigationService;router;translateService;widgetsService;commonService;listingVariables;route;checkboxOptions;ckEitorMessage;createdBy;createdDate;description;enterpriseShortName;headers;lastUpdatedBy;lastUpdatedDate;object_type;pageTitle;recordId;widgetCheckbox;widgetName;widgetParametersData;widgetQuery;widgetTheme;widgetType;widgetsViewData;widget_html;widgetHtmlArray=[];widgetTypeOptions;dataJsonObj={};enterpriseId;editorConfig={editable:!1,spellcheck:!0,height:"15rem",minHeight:"5rem",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!1,showToolbar:!1,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",toolbarHiddenButtons:[["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["customClasses","link","unlink","insertImage","insertVideo","removeFormat","backgroundColor"]]};constructor(a,i,t,s,r,p,c,h){super(h,p),this.loggerService=a,this.navigationService=i,this.router=t,this.translateService=s,this.widgetsService=r,this.commonService=p,this.listingVariables=c,this.route=h,this.route.queryParams.subscribe(m=>{this.dataJsonObj.queryParamsObj={defaultView:m.defaultView,selectedMenuId:m.selectedMenuId,selectedSubMenuId:m.selectedSubMenuId}}),this.route.params.subscribe(m=>{this.recordId=m.id})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.WIDGET_DEFINITIONS,this.commonService.trackView(n.sn.WIDGETS_VIEW),this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.object_type=this.route.snapshot.data.object_type,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(n.hf.WIDGET_DEFINITIONS,n.AM.ACTIONS,n.In.RECORD_HISTORY),this.checkboxOptions=[{value:"112",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.headers=[[{headersort:"disableth",field:"param_display_sequence",header:"COMMON_FIELDS.SEQUENCE",class:"w-60"},{headersort:"disableth",field:"parameter_name",header:"REPORTS.PARAMETER_NAME",class:""},{headersort:"disableth",field:"parameter_display_name",header:"COMMON_FIELDS.DISPLAY_NAME",class:""},{headersort:"disableth",field:"parameter_description",header:"COMMON_FIELDS.DESCRIPTION",class:"w-100"},{headersort:"disableth",field:"parameter_type_value",header:"COMMON_FIELDS.TYPE",class:""},{headersort:"disableth",field:"param_data_source_table_value",header:"REPORTS.SOURCE_TABLE",class:""},{headersort:"disableth",field:"param_data_source_column",header:"REPORTS.SOURCE_COLUMN",class:""},{headersort:"disableth",field:"param_data_source_display_column",header:"REPORTS.SOURCE_DISPLAY_COLUMN",class:""},{headersort:"disableth",field:"default_value_to_display",header:"COMMON_FIELDS.DEFAULT_VALUE",class:""},{headersort:"disableth",field:"param_mandatory_value",header:"COMMON_FIELDS.MANDATORY",class:"w-60"},{headersort:"disableth",field:"param_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"}]],this.getRecordById(),this.dataJsonObj.selectedPage=n.hf.WIDGET_DEFINITIONS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(a){var i=this;return(0,A.Z)(function*(){for(let t of a)i.dataJsonObj[t.storingFieldName]=yield i.commonService.getDynamicJson(i.enterpriseId,t.folderName,t.jsonType);i.dataJsonObj.selectedObj={},i.dataJsonObj.selectedObj.recordId=i.recordId,i.dataJsonObj.selectedObj.pageObj=i.dataJsonObj.menuDataJson.filter(t=>t.menu_page.page_name===i.dataJsonObj.selectedPage),i.dataJsonObj.selectedObjEnabled=!0})()}getSportsDropdown(a){var i=this;return(0,A.Z)(function*(){const t=yield i.commonService.getJsonData(`assets/enterprises/${i.enterpriseId}/sports/`,"sports.json");i.dataJsonObj.sportOptions=t;const s=i.dataJsonObj.sportOptions.find(r=>r.ID===a);s&&(i.dataJsonObj.sportId=s.ID,i.dataJsonObj.sportName=s.NAME)})()}getRecordById(){try{this.widgetsService.get(this.recordId).subscribe(a=>{if(this.widgetsViewData=a,this.dataJsonObj.widgetSportId=this.widgetsViewData.sport_id,this.dataJsonObj.widgetSportId&&this.getSportsDropdown(this.dataJsonObj.widgetSportId),this.enterpriseId=this.widgetsViewData.enterprise.enterprise_id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(i=>{this.dataJsonObj.lookupCodesListJSON=i,this.getWidgetTypeOptions("")}),this.dataJsonObj.backgroundColor=this.widgetsViewData.background_color,this.dataJsonObj.iconColor=this.widgetsViewData.icon_color,this.dataJsonObj.textColor=this.widgetsViewData.text_color,this.widgetCheckbox=this.widgetsViewData.is_enabled,this.widgetName=this.widgetsViewData.widget_name,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WIDGET_DEFINITIONS",value:this.widgetName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.widgetQuery=this.widgetsViewData.widget_query,this.description=this.widgetsViewData.description,this.widgetHtmlArray=this.widgetsViewData.widget_html,this.widget_html=this.widgetHtmlArray[0].widget_html,this.widgetTheme=this.widgetsViewData.widget_theme?this.lookupLanguageTranslations(this.widgetsViewData.widget_theme.lookup_id):"",this.enterpriseShortName=this.widgetsViewData.enterprise.short_name,this.lastUpdatedBy=this.widgetsViewData.updated_by,this.createdBy=this.widgetsViewData.created_by,this.widgetParametersData=this.widgetsViewData.widget_params,this.widgetParametersData&&this.widgetParametersData.length>0)for(let i=0;i<this.widgetParametersData.length;i++)this.widgetParametersData[i].parameter_type_value=this.widgetParametersData[i].parameter_type?this.lookupLanguageTranslations(this.widgetParametersData[i].parameter_type.lookup_id):"",this.widgetParametersData[i].param_data_source_table_value=this.widgetParametersData[i].param_data_source_table?this.widgetParametersData[i].param_data_source_table.page_display_name:"",this.widgetParametersData[i].param_enabled_value=!0===this.widgetParametersData[i].param_enabled?"Yes":"No",this.widgetParametersData[i].param_mandatory_value=!0===this.widgetParametersData[i].param_mandatory?"Yes":"No"},a=>{this.loggerService.setLoggerError(this.constructor.name,"getWidgetsViewData",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getWidgetsView",a)}}cancelBtn(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",a)}}paginationChange(a){try{this.listingVariables.pageNumbers=Math.floor((a.first+a.rows)/a.rows),this.listingVariables.sortColumn=this.listingVariables.sortField,this.listingVariables.sortOrderAscDsc=this.listingVariables.sortOrder,this.listingVariables.sortOrderColumn=this.listingVariables.sortColumn+"$"+this.listingVariables.sortOrderAscDsc,this.getRecordById()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"paginationChange",i)}}getWidgetTypeOptions(a){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.WIDGET_TYPES],a).then(i=>{this.widgetTypeOptions=i,this.dataJsonObj.printvalue=this.widgetTypeOptions[0].lookup_name},i=>{this.loggerService.setLoggerError(this.constructor.name,"getwidgetTypeOptions",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getwidgetTypeOptions",i)}}changeDeviceType(a){try{this.dataJsonObj.printvalue=a.target.title;for(let i of this.widgetHtmlArray)i.device_type.lookup_name===this.dataJsonObj.printvalue&&(this.widget_html=i.widget_html)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeDeviceType",i)}}static \u0275fac=function(i){return new(i||o)(e.Y36(N.m),e.Y36(M.f),e.Y36(g.F0),e.Y36(b.sK),e.Y36(C.L),e.Y36(T.v),e.Y36(I.v),e.Y36(g.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-widgets-view"]],features:[e._Bn([C.L,T.v,I.v]),e.qOj],decls:67,vars:68,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-6"],["disabled","true","id","lookuptype-create",3,"label","value"],["disabled","true","mandatory","true","autoCaseFlag","false",3,"label","value","maxlength"],["widgetNameValid",""],[1,"col-md-5"],["disabled","true","mandatory","true","autoCaseFlag","false",3,"label","value"],[1,"col-md-2","d-flex","align-items-center"],["label","","disabled","true","mandatory","true",3,"options","checked","id"],[1,"col-md-4"],["disabled","true","id","team-create-enterprise",3,"label","value"],["descriptionValid",""],[1,"col-md-3"],["type","color","disabled","true",3,"label","value"],[1,"col-md-12","textarea-block"],["for","widgetQuery",1,"text-label"],["name","message","rows","12","cols","130","disabled","true","id","reportdefinition-create-report-query",1,"form-control",3,"ngModel","ngModelChange"],["message","ngModel"],[1,"col-md-12","pdt-14"],[1,"fs-12"],[1,"position-relative","mgb-2"],[1,"btn-group-sm"],["class","btn btn-sm mgr-5",3,"title","ngClass","click",4,"ngFor","ngForOf"],["ng-disabled","true",3,"ngModel","config","ngModelChange"],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-danger btn-sm",3,"label","id","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","paramsId",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["class","col-md-12",4,"ngIf"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[1,"btn","btn-sm","mgr-5",3,"title","ngClass","click"],[3,"header","data","expand","totalRecords","paginator","totalPages","ignoreDisplayView","valueChange"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11,12),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-input",14),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",15),e._UZ(20,"app-checkbox",16),e.qZA(),e.TgZ(21,"div",17),e._UZ(22,"app-input",18),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",3),e._UZ(25,"app-input",11,19),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",20),e._UZ(29,"app-input",21),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div",20),e._UZ(32,"app-input",21),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div",20),e._UZ(35,"app-input",21),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"div",22)(38,"label",23),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"textarea",24,25),e.NdJ("ngModelChange",function(r){return t.widgetQuery=r}),e.qZA()(),e.TgZ(43,"div",26)(44,"ion-label",27),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"div",28)(48,"mat-button-toggle-group",29),e.YNc(49,pt,2,3,"mat-button-toggle",30),e.qZA()(),e.TgZ(50,"angular-editor",31),e.NdJ("ngModelChange",function(r){return t.widget_html=r}),e.qZA()(),e.TgZ(51,"div",32)(52,"app-button",33),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(53,"translate"),e.qZA()()(),e.TgZ(54,"div",34)(55,"div",3)(56,"div",35)(57,"div",36)(58,"p-accordion",37)(59,"p-accordionTab",38)(60,"p-header",39)(61,"span"),e._uU(62),e.ALo(63,"translate"),e.qZA()(),e.TgZ(64,"div",34),e.YNc(65,ct,2,7,"div",40),e.qZA()(),e._UZ(66,"app-recordhistory",41),e.qZA()()()()()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,44,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",t.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(15,46,"COMMON_PAGE_TITLES.WIDGET")),e.s9C("value",t.widgetName),e.Q6J("maxlength",80),e.xp6(4),e.s9C("label",e.lcZ(18,48,"WIDGETS.WIDGET_THEME")),e.s9C("value",t.widgetTheme),e.xp6(3),e.MGl("id","lookupcode-",t.object_type,"-view-checkboxoptions"),e.Q6J("options",t.checkboxOptions)("checked",t.widgetCheckbox),e.xp6(2),e.s9C("label",e.lcZ(23,50,"COMMON_PAGE_TITLES.SPORT")),e.s9C("value",t.dataJsonObj.sportName),e.xp6(3),e.s9C("label",e.lcZ(27,52,"COMMON_FIELDS.DESCRIPTION")),e.s9C("value",t.description),e.Q6J("maxlength",2e3),e.xp6(4),e.s9C("label",e.lcZ(30,54,"NEW_VARIABLES.BACKGROUND_COLOR")),e.s9C("value",t.dataJsonObj.backgroundColor),e.xp6(3),e.s9C("label",e.lcZ(33,56,"NEW_VARIABLES.ICON_COLOR")),e.s9C("value",t.dataJsonObj.iconColor),e.xp6(3),e.s9C("label",e.lcZ(36,58,"NEW_VARIABLES.TEXT_COLOR")),e.s9C("value",t.dataJsonObj.textColor),e.xp6(4),e.hij(" ",e.lcZ(40,60,"WIDGETS.WIDGET_QUERY")," "),e.xp6(2),e.Q6J("ngModel",t.widgetQuery),e.xp6(4),e.hij(" ",e.lcZ(46,62,"WIDGETS.WIDGET_HTML")," "),e.xp6(4),e.Q6J("ngForOf",t.widgetTypeOptions),e.xp6(1),e.Q6J("ngModel",t.widget_html)("config",t.editorConfig),e.xp6(2),e.s9C("label",e.lcZ(53,64,"COMMON_BUTTONS.BUTTON_CLOSE")),e.MGl("id","lookupcode-",t.object_type,"-view-close"),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(63,66,"REPORTS.PARAMETERS")),e.xp6(3),e.Q6J("ngIf",t.widgetParametersData.length>0),e.xp6(1),e.Q6J("createdBy",t.createdBy)("lastUpdatedBy",t.lastUpdatedBy)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.widgetsViewData?null:t.widgetsViewData.createdAt)("lastUpdatedDate",null==t.widgetsViewData?null:t.widgetsViewData.updatedAt))},dependencies:[_.mk,_.sg,_.O5,E.Q$,J.r,P.a,Z.b,F.n,x.W,D.q,O.UQ,O.US,j.h4,u.Fj,u.JJ,u.On,y.s6,b.X$]})}return o})(),data:{responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.WIDGETS+"."+n.In.VIEW,pageName:n.hf.WIDGET_DEFINITIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}},{path:":id/edit",canActivate:[v.P],component:rt,data:{responsibilityParam:n.bP.MENUS+"."+n.w1.ADMIN+"."+n.bP.SUBMENUS+"."+n.w1.WIDGETS+"."+n.In.EDIT,pageName:n.hf.WIDGET_DEFINITIONS,pageSetting:n.AM.ACTIONS,settingField:n.In.EDIT}}]}];let gt=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[g.Bz.forChild(ut),g.Bz]})}return o})(),ht=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[_.ez,gt,E.Pc,B.Q,b.aw,O.fx,u.UX,u.u5,S.U$,G.JF,y.UM]})}return o})()}}]);