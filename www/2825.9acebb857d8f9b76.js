"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2825],{32825:(ze,X,r)=>{r.r(X),r.d(X,{AdminModule:()=>Q});var B=r(32174),P=r(11210),U=r(15861),u=r(32236),d=r(42863),R=r(71568),e=r(94650),W=r(47561),J=r(28168),G=r(75875),M=r(90313),ee=r(80529);let H=(()=>{class n{authService;http;constructor(t,l){this.authService=t,this.http=l}getAll(t,l,a,p,m,b,j,A,O,_,y){const se=b?"&condition="+b:"",ne=_||"",oe=M.L.isEmpty(y)?"":"&advSearchString="+JSON.stringify(y);return M.L.isEmpty(se)?this.authService.getApiCall("api/v1/flaggedposts?&skip="+t+"&limit="+l+"&sort="+a+"&type=list&search="+p+"&enterprise.enterprise_id="+m+O+ne+oe,A):this.authService.getApiCall("api/v1/flaggedposts?&skip="+t+"&limit="+l+"&sort="+a+"&type=list&search="+p+"&enterprise.enterprise_id="+m+se+O+ne+oe,A)}get(t){return this.authService.getApiCall("api/v1/flaggedposts/"+t,!0)}update(t,l){return new Promise((a,p)=>{this.authService.patchApiCall("api/v1/flaggedposts/"+l,t).subscribe(m=>{a(m)},m=>{p(m)})})}static \u0275fac=function(l){return new(l||n)(e.LFG(G.e),e.LFG(ee.eN))};static \u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var w=r(30578),k=r(42786),E=r(34942),I=r(27601),f=r(70057),T=r(62510),N=r(54463),F=r(37415),x=r(88425);const le=["datatableComponent"];let z=(()=>{class n extends W.O{ColumnHeader;actionSheetController;flaggedPostsService;loggerService;router;translateService;commonService;listingVariables;route;toastController;datatableComponent;searchValueChange=new e.vpe;actions;compareObj;enterpriseId;eventClickData;flaggedPostsListData;flaggedPostsMobileListData;flaggedPostsStatsObj=new ve;flaggedpostsSubscriptionObj;forcerefresh=!1;header;isFilterClicked=!1;noDuplicates=void 0;show=!0;searchString;statsStatus;statsflagedpostslistData;statusObj;dataJsonObj={};constructor(t,l,a,p,m,b,j,A,O,_){super(O,j),this.ColumnHeader=t,this.actionSheetController=l,this.flaggedPostsService=a,this.loggerService=p,this.router=m,this.translateService=b,this.commonService=j,this.listingVariables=A,this.route=O,this.toastController=_,this.route.queryParams.subscribe(y=>{this.dataJsonObj.queryParamsObj={defaultView:y.default_view,selectedMenuId:y.selectedMenuId,selectedSubMenuId:y.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:u.hf,pageSettingEnum:u.AM,pageSettingFieldsEnum:u.In},this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageName=u.hf.FLAGGED_POSTS,this.commonService.trackView(u.sn.FLAGGEDPOSTS_LIST),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.FLAGGED_POSTS",value:"",showSubMenuDisplayName:!0}],document.getElementsByTagName("body"),this.header=this.ColumnHeader.getflaggedPostsData(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.commonService.currentEvent.subscribe(l=>{"flaggedposts"===l&&(this.forcerefresh=!0)}),this.searchString="",this.actions={VIEW:this.roleRightsValidationByPage(u.hf.FLAGGED_POSTS,u.AM.ACTIONS,u.In.VIEW)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(u.hf.FLAGGED_POSTS,u.AM.ACTIONS,u.In.CREATE),this.roleRightsValidationByPage(u.hf.FLAGGED_POSTS,u.AM.ACTIONS,u.In.FILTERS)}ionViewWillEnter(){this.statsflagedpostslistData=E.h.getFlaggedPostsListStats(this.isFilterClicked,this.eventClickData)}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(t)}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}getAllRecords(){try{this.statsStatus=this.statusObj,this.enterpriseId=localStorage.getItem(u.BU.SELECTED_ENTERPRISE),this.flaggedpostsSubscriptionObj&&(this.flaggedpostsSubscriptionObj.unsubscribe(),this.flaggedpostsSubscriptionObj=void 0);const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.flaggedpostsSubscriptionObj=this.flaggedPostsService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,this.statsStatus,this.isFilterClicked,this.forcerefresh,t,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(a=>{if(this.forcerefresh||(this.flaggedpostsSubscriptionObj.unsubscribe(),this.flaggedpostsSubscriptionObj=void 0),a.rows.length>0){this.flaggedPostsMobileListData&&this.flaggedPostsMobileListData.length>0||(this.flaggedPostsMobileListData=[]),this.forcerefresh&&(this.flaggedPostsMobileListData=[]);for(let p=0;p<a.rows.length;p++)a.rows[p].enterprise.enterpriseshort_name=a.rows[p].enterprise.short_name,a.rows[p].enterprise.short_name='<a class="enable" id="enterprise.short_name'+a.rows[p]._id+'" href="enterprises/enterprises/'+a.rows[p].enterprise.enterprise_id+'/view" >'+a.rows[p].enterprise.short_name,a.rows[p].postOwner=a.rows[p].post.post_owner.f_name+", "+a.rows[p].post.post_owner.l_name,this.flaggedPostsMobileListData=this.flaggedPostsMobileListData.filter(m=>m._id!==a.rows[p]._id),this.flaggedPostsMobileListData.push(a.rows[p]);a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.flaggedPostsListData=this.flaggedPostsListData.concat(a.rows)):this.flaggedPostsListData=a.rows}else this.flaggedPostsListData=[],this.flaggedPostsMobileListData=[];this.flaggedPostsStatsObj.TOTAL_POSTS_FLAGGED=a.totalCount,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS1_FLAGGED=a.Status1Count,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS2_FLAGGED=a.Status2Count,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS3_FLAGGED=a.Status3Count,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS4_FLAGGED=a.Status4Count,this.statsDisabled(this.flaggedPostsStatsObj.TOTAL_POSTS_FLAGGED,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS1_FLAGGED,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS2_FLAGGED,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS3_FLAGGED,this.flaggedPostsStatsObj.TOTAL_POSTS_STATUS4_FLAGGED)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.flaggedPostsMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}toggle(){this.show=!this.show}onActionClicked(t){try{t.action===u.A0.VIEW&&this.commonService.redirectToUrl(["..",t.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(l){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",l)}}mobileEventAction(t){this.presentActionSheet(t)}presentActionSheet(t){var l=this;return(0,U.Z)(function*(){yield(yield l.actionSheetController.create({cssClass:"actionsheet",buttons:[{text:l.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{localStorage.setItem(u.BU.FLAGGED_POSTS_DATA,JSON.stringify({enterprise_id:l.enterpriseId,page_nummber:l.listingVariables.pageNumbers,rowsperpage:l.listingVariables.rowsPerPage,searchstring:l.searchString})),l.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,l.dataJsonObj.queryParamsObj?l.dataJsonObj.queryParamsObj:"",l.route)}}]})).present()})()}statsDisabled(t,l,a,p,m){try{this.compareObj=[],this.compareObj.push(0!==t?{value1:"TOTAL_POSTS_FLAGGED"}:{value1:""}),this.compareObj.push(0!==l?{value2:"TOTAL_POSTS_STATUS1_FLAGGED"}:{value2:""}),this.compareObj.push(0!==a?{value3:"TOTAL_POSTS_STATUS2_FLAGGED"}:{value3:""}),this.compareObj.push(0!==p?{value4:"TOTAL_POSTS_STATUS3_FLAGGED"}:{value4:""}),this.compareObj.push(0!==m?{value5:"TOTAL_POSTS_STATUS4_FLAGGED"}:{value5:""}),this.statsflagedpostslistData=E.h.getFlaggedPostsListStatsDisabled(this.isFilterClicked,"",this.compareObj)}catch(b){this.loggerService.setLoggerError(this.constructor.name,"statsDisabled",b)}}statsData(t){try{this.isFilterClicked=!0,this.statusObj=t.value,this.forcerefresh=!0,this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.flaggedPostsMobileListData=[],this.getAllRecords()}catch(l){this.loggerService.setLoggerError(this.constructor.name,"statsData",l)}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(l){return new(l||n)(e.Y36(d.Y),e.Y36(f.BX),e.Y36(H),e.Y36(k.m),e.Y36(T.F0),e.Y36(N.sK),e.Y36(R.v),e.Y36(w.v),e.Y36(T.gz),e.Y36(f.yF))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-flaggedposts-list"]],viewQuery:function(l,a){if(1&l&&e.Gf(le,5),2&l){let p;e.iGM(p=e.CRH())&&(a.datatableComponent=p.first)}},outputs:{searchValueChange:"searchValueChange"},features:[e._Bn([w.v,H,d.Y,I.s]),e.qOj],decls:9,vars:32,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",1,"",3,"header","totalRecords","totalPages","mobileListData","paginator","data","expand","actions","listingVariables","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(m){return a.onHeaderItemClick(m)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(m){return a.onActionClicked(m)})("redirectionEvent",function(m){return a.mobileEventAction(m)})("changeStats",function(m){return a.statsData(m)})("loadPageData",function(m){return a.loadPageData(m)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(m){return a.onPageLevelActionClicked(m)}),e.qZA()()()()()),2&l&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.header)("totalRecords",a.listingVariables.totalRecords)("totalPages",a.listingVariables.totalpages)("mobileListData",a.flaggedPostsMobileListData)("paginator",!0)("data",a.flaggedPostsListData)("expand",!1)("actions",a.actions)("listingVariables",a.listingVariables)("statsDisplay",a.statsflagedpostslistData)("statData",a.flaggedPostsStatsObj)("statusDisplay",a.statusObj)("statsShow",a.show)("showRights",a.roleRightsValidationByPage(a.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.FLAGGED_POSTS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",a.searchString)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[J.n,F.q,x.y]})}return n})();class ve{TOTAL_POSTS_FLAGGED;TOTAL_POSTS_STATUS1_FLAGGED;TOTAL_POSTS_STATUS2_FLAGGED;TOTAL_POSTS_STATUS3_FLAGGED;TOTAL_POSTS_STATUS4_FLAGGED}var K=r(15439),te=r(46448),Y=r(36895),$=r(10805),ae=r(2387),re=r(11735),q=r(93144);function be(n,v){if(1&n&&(e.TgZ(0,"span",34),e._UZ(1,"div",35),e.TgZ(2,"span",36),e._uU(3),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Udp("background-image","url("+t.apiEndPoint+(null==t.viewData?null:t.viewData.imageDisplay)+")"),e.xp6(2),e.Oqu(t.dynamicImgName(null==t.viewData?null:t.viewData.imageName))}}function de(n,v){if(1&n&&(e.TgZ(0,"div",37)(1,"span",38),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.AsE("",null==t.viewData?null:t.viewData.imageName.charAt(0).toUpperCase(),"",t.getSecondChar(null==t.viewData?null:t.viewData.imageName),"")}}function fe(n,v){if(1&n&&(e.TgZ(0,"span",39),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("(",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_owner?null:t.viewData.post.post_owner.nick_name,")")}}function _e(n,v){if(1&n&&(e.TgZ(0,"span",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"POSTS.POST_AUDIENCE"),": ",null==t.viewData||null==t.viewData.post||null==t.viewData.post.group?null:t.viewData.post.group.group_name," ")}}function Se(n,v){if(1&n&&(e.TgZ(0,"span",41),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"POSTS.POST_POSTED")," ",null==t.viewData?null:t.viewData.publish_datetime," ",e.lcZ(3,5,"COMMON_FIELDS.AGO"),"")}}function Oe(n,v){if(1&n&&(e.TgZ(0,"span",63),e._UZ(1,"div",35),e.TgZ(2,"span",36),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Udp("background-image","url("+t.apiEndPoint+(null==t.viewData?null:t.viewData.shareUserimage)+")"),e.xp6(2),e.Oqu(t.dynamicImgName(null==t.viewData?null:t.viewData.shareUserName))}}function Te(n,v){if(1&n&&(e.TgZ(0,"div",64)(1,"span",38),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.AsE("",null==t.viewData?null:t.viewData.shareUserName.charAt(0).toUpperCase(),"",t.getSecondChar(null==t.viewData?null:t.viewData.shareUserName),"")}}function De(n,v){if(1&n&&(e.TgZ(0,"span",65),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("(",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post||null==t.viewData.post.post_id.parent_post.sent_by?null:t.viewData.post.post_id.parent_post.sent_by.nick_name,") ")}}function ye(n,v){if(1&n&&(e.TgZ(0,"div",66),e._UZ(1,"img",67),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.FAE("src","",t.apiEndPoint,"",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post?null:t.viewData.post.post_id.parent_post.post_file_path,"/",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post?null:t.viewData.post.post_id.parent_post.post_file_name,"?aa=",t.clencache,"",e.LSH)}}function Ce(n,v){if(1&n&&(e.TgZ(0,"div",68)(1,"video",69),e._UZ(2,"source",70),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.hYB("poster","",t.apiEndPoint,"",t.viewData.post_file_thumbnail_path,"",e.LSH),e.xp6(1),e.FAE("src","",t.apiEndPoint,"",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post?null:t.viewData.post.post_id.parent_post.post_file_path,"/",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post?null:t.viewData.post.post_id.parent_post.post_file_name,"?aa=",t.clencache,"",e.LSH)}}function Ae(n,v){if(1&n&&(e.TgZ(0,"div",71)(1,"audio",72),e._UZ(2,"source",73),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.cQ8("src","",t.apiEndPoint,"",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post?null:t.viewData.post.post_id.parent_post.post_file_path,"/",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post?null:t.viewData.post.post_id.parent_post.post_file_name,"",e.LSH)}}function we(n,v){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"span",74),e._uU(2),e.TgZ(3,"ion-icon",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.downloadFile(a.viewData))}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij("",t.truncate(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post?null:t.viewData.post.post_id.parent_post.post_file_name)," ")}}function Ee(n,v){1&n&&(e.TgZ(0,"div",76),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"NEW_VARIABLES.VALID_ARCHIVED_FILE")))}function ce(n,v){if(1&n&&(e.TgZ(0,"div")(1,"ion-row",42)(2,"ion-col",43)(3,"p",44),e._UZ(4,"span",45),e.qZA()()(),e.TgZ(5,"ion-row",46)(6,"ion-col",43)(7,"ion-card-content",47)(8,"div",48)(9,"ion-item",49)(10,"ion-avatar",50),e.YNc(11,Oe,4,3,"span",51),e.YNc(12,Te,3,2,"div",52),e.qZA(),e.TgZ(13,"ion-label",53)(14,"span")(15,"span",54),e._uU(16),e.YNc(17,De,2,1,"span",55),e.qZA()()()(),e.TgZ(18,"div",56)(19,"p",57),e._UZ(20,"span",58),e.qZA(),e.YNc(21,ye,2,4,"div",59),e.YNc(22,Ce,3,6,"div",60),e.YNc(23,Ae,3,3,"div",61),e.YNc(24,we,4,1,"div",21),e.YNc(25,Ee,3,3,"div",62),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("innerHTML",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_text,e.oJD),e.xp6(7),e.Q6J("ngIf",null!==(null==t.viewData?null:t.viewData.shareUserimage)),e.xp6(1),e.Q6J("ngIf",null===(null==t.viewData?null:t.viewData.shareUserimage)),e.xp6(4),e.AsE(" ",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post||null==t.viewData.post.post_id.parent_post.sent_by?null:t.viewData.post.post_id.parent_post.sent_by.l_name," ",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post||null==t.viewData.post.post_id.parent_post.sent_by?null:t.viewData.post.post_id.parent_post.sent_by.f_name," "),e.xp6(1),e.Q6J("ngIf",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id||null==t.viewData.post.post_id.parent_post||null==t.viewData.post.post_id.parent_post.sent_by?null:t.viewData.post.post_id.parent_post.sent_by.nick_name),e.xp6(3),e.Q6J("innerHtml",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.parent_post.post_text,e.oJD),e.xp6(1),e.Q6J("ngIf","IMAGE"===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)),e.xp6(1),e.Q6J("ngIf","VIDEO"===(null==t.viewData||null==t.viewData.post_type?null:t.viewData.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)),e.xp6(1),e.Q6J("ngIf","AUDIO"===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)),e.xp6(1),e.Q6J("ngIf","OTHER"===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)),e.xp6(1),e.Q6J("ngIf","TEXT"!==(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!0===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive))}}function Ie(n,v){if(1&n&&(e.TgZ(0,"div",81),e._UZ(1,"img",67),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.FAE("src","",t.apiEndPoint,"",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_path,"/",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_name,"?aa=",t.clencache,"",e.LSH)}}function pe(n,v){if(1&n&&(e.TgZ(0,"div",82)(1,"video",69),e._UZ(2,"source",83),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.hYB("poster","",t.apiEndPoint,"",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_thumbnail_path,"",e.LSH),e.xp6(1),e.cQ8("src","",t.apiEndPoint,"",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_path,"/",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_name,"",e.LSH)}}function Ne(n,v){if(1&n&&(e.TgZ(0,"div",84)(1,"audio",72),e._UZ(2,"source",73),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.cQ8("src","",t.apiEndPoint,"",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_path,"/",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_name,"",e.LSH)}}function Me(n,v){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"span",74),e._uU(2),e.TgZ(3,"ion-icon",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.downloadFile(a.viewData.post.post_id))}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij("",t.truncate(null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_name)," ")}}function Le(n,v){1&n&&(e.TgZ(0,"div",76),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"NEW_VARIABLES.VALID_ARCHIVED_FILE")))}function ue(n,v){if(1&n&&(e.TgZ(0,"ion-card-content")(1,"div")(2,"span")(3,"p",77),e._UZ(4,"span",45),e.qZA(),e.YNc(5,Ie,2,4,"div",78),e.YNc(6,pe,3,5,"div",79),e.YNc(7,Ne,3,3,"div",80),e.YNc(8,Me,4,1,"div",21),e.YNc(9,Le,3,3,"div",62),e.qZA()()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("innerHTML",null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_text,e.oJD),e.xp6(1),e.Q6J("ngIf","IMAGE"===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)),e.xp6(1),e.Q6J("ngIf","VIDEO"===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)),e.xp6(1),e.Q6J("ngIf","AUDIO"===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)),e.xp6(1),e.Q6J("ngIf","OTHER"===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!1===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive)&&(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.post_file_path)),e.xp6(1),e.Q6J("ngIf","TEXT"!==(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_type?null:t.viewData.post.post_type.lookup_name)&&!0===(null==t.viewData||null==t.viewData.post||null==t.viewData.post.post_id?null:t.viewData.post.post_id.is_archive))}}function ge(n,v){if(1&n&&(e.TgZ(0,"tr",86)(1,"td",87),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function je(n,v){if(1&n&&e.YNc(0,ge,4,4,"tr",85),2&n){const t=e.oxw();e.Q6J("ngIf",(null==t.viewData?null:t.viewData.post_flagged_details)&&0==(null==t.viewData?null:t.viewData.post_flagged_details.length))}}function Pe(n,v){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=v.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function Je(n,v){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,Pe,3,3,"th",88),e.qZA()),2&n){const t=v.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function Ve(n,v){if(1&n){const t=e.EpF();e.TgZ(0,"i",94),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,p=e.oxw();return e.KtG(p.blockedMembersView(a))}),e.qZA()}if(2&n){const t=e.oxw(3).rowIndex;e.MGl("id","flaggedpost-view-unblockbtn",t,"")}}function Be(n,v){if(1&n&&(e.TgZ(0,"span",92),e.YNc(1,Ve,1,1,"i",93),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!0===t.enable)}}function Ue(n,v){if(1&n&&(e.TgZ(0,"td",90),e._uU(1),e.YNc(2,Be,2,1,"span",91),e.qZA()),2&n){const t=v.$implicit,l=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",l),e.xp6(1),e.hij(" ",l[t.field]," "),e.xp6(1),e.Q6J("ngIf","Actions"==t.header)}}function Fe(n,v){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,Ue,3,6,"td",89),e.qZA()),2&n){const t=v.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}let Ze=(()=>{class n extends W.O{apiEndPointUrl;flaggedPostsService;loggerService;navigationService;router;translateService;uiUtils;commonService;listingVariables;route;apiEndPoint;clencache;enterpriseId;forcerefresh=!1;header;recordId;viewData;dataJsonObj={};blockStatus;constructor(t,l,a,p,m,b,j,A,O,_){super(_,A),this.apiEndPointUrl=t,this.flaggedPostsService=l,this.loggerService=a,this.navigationService=p,this.router=m,this.translateService=b,this.uiUtils=j,this.commonService=A,this.listingVariables=O,this.route=_,this.route.params.subscribe(y=>{this.recordId=y.id})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=u.hf.FLAGGED_POSTS,this.commonService.trackView(u.sn.FLAGGEDPOSTS_LIST),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(u.hf.FLAGGED_POSTS,u.AM.ACTIONS,u.In.RECORD_HISTORY),this.apiEndPoint=localStorage.getItem(u.BU.S3_URL)?localStorage.getItem(u.BU.S3_URL):this.apiEndPointUrl,this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(u.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.header=[[{field:"userName",header:this.translateService.instant("COMMON_FIELDS.USER_NAME"),class:"w-60"},{field:"reason",header:this.translateService.instant("COMMON_FIELDS.REASON"),class:"w-100"},{field:"flaggedDate",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-60"}]],this.commonService.currentEvent.subscribe(l=>{"flaggedposts"===l&&(this.forcerefresh=!0)}),this.getRecordById(),this.dataJsonObj.selectedPage=u.hf.FLAGGED_POSTS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(t){var l=this;return(0,U.Z)(function*(){for(let a of t)l.dataJsonObj[a.storingFieldName]=yield l.commonService.getDynamicJson(l.dataJsonObj.enterpriseId,a.folderName,a.jsonType);l.dataJsonObj.selectedObj={},l.dataJsonObj.selectedObj.recordId=l.recordId,l.dataJsonObj.selectedObj.pageObj=l.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===l.dataJsonObj.selectedPage),l.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(){try{this.flaggedPostsService.get(this.recordId).subscribe(t=>{this.viewData=t,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FLAGGED_POSTS",value:this.dataJsonObj.viewData?.imageName,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.viewData.postOwner=this.viewData.post.post_owner.f_name+", "+this.viewData.post.post_owner.l_name,this.blockStatus=this.lookupLanguageTranslations(this.viewData.post_flag_status.lookup_id);for(let l=0;l<this.viewData.post_flagged_details.length;l++)this.viewData.post_flagged_details[l].userName=this.viewData.post_flagged_details[l].post_flagged_by.f_name+" , "+this.viewData.post_flagged_details[l].post_flagged_by.l_name,this.viewData.post_flagged_details[l].reason=this.lookupLanguageTranslations(this.viewData.post_flagged_details[l].post_flag_reason.lookup_id),this.viewData.post_flagged_details[l].flaggedDate=K(this.viewData.post_flagged_details[l].flaggedAt).format("DD-MMM-YYYY");"Reported"==this.blockStatus?(this.dataJsonObj.blockbutton=!1,this.dataJsonObj.voilationbutton=!1):"Blocked"==this.blockStatus?(this.dataJsonObj.blockbutton=!0,this.dataJsonObj.voilationbutton=!1):(this.dataJsonObj.blockbutton=!1,this.dataJsonObj.voilationbutton=!0),this.viewData.shareUserimage=this.viewData.post.post_id.parent_post&&this.viewData.post.post_id.parent_post.sent_by&&!M.L.isEmpty(this.viewData.post.post_id.parent_post.sent_by.user_image_path)&&this.viewData.post.post_id.parent_post.sent_by.user_image_name?this.viewData.post.post_id.parent_post.sent_by.user_image_path+"/"+this.viewData.post.post_id.parent_post.sent_by.user_image_name:null,this.viewData.post.post_id.parent_post&&this.viewData.post.post_id.parent_post.sent_by&&(this.viewData.shareUserName=this.viewData.post.post_id.parent_post.sent_by.f_name+" "+this.viewData.post.post_id.parent_post.sent_by.l_name),this.viewData.imageDisplay=!M.L.isEmpty(this.viewData.post.post_owner.user_image_path)&&this.viewData.post.post_owner.user_image_name?this.viewData.post.post_owner.user_image_path+"/"+this.viewData.post.post_owner.user_image_name:null,this.clencache=Math.random(),this.viewData.publish_datetime=K(this.viewData.post.post_id.publish_datetime).startOf("second").fromNow(!0),this.viewData.imageName=this.viewData.post.post_owner.f_name+" "+this.viewData.post.post_owner.l_name})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"listeddetail",t)}}getSecondChar(t){try{if(t){const l=t.split(" ")[1];return M.L.isEmpty(l)?"":l.charAt(0).toUpperCase()}return""}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getSecondChar",l)}}dynamicImgName(t){try{return t?t.charAt(0).toUpperCase()+this.getSecondChar(t):""}catch(l){this.loggerService.setLoggerError(this.constructor.name,"dynamicImgName",l)}}Block(t){this.flaggedPostsService.update({status:t,post_id:this.viewData.post.post_id,enterprise_id:this.viewData.enterprise.enterprise_id},this.viewData._id).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},a=>{this.loggerService.setLoggerError(this.constructor.name,"Block",a)})}Close(){this.commonService.redirectToPreviousUrl()}truncate(t){try{if(t)return t.length>20?t.substring(0,20)+"..."+(t.split(".")[2]?t.split(".")[2]:t.split(".")[1]):t}catch(l){this.loggerService.setLoggerError(this.constructor.name,"truncate",l)}}downloadFile(t){this.commonService.attachmentFileDownload(t.post_file_path,t.post_file_name)}static \u0275fac=function(l){return new(l||n)(e.Y36("apiEndPoint"),e.Y36(H),e.Y36(k.m),e.Y36(te.f),e.Y36(T.F0),e.Y36(N.sK),e.Y36(I.s),e.Y36(R.v),e.Y36(w.v),e.Y36(T.gz))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-flaggedposts-view"]],features:[e._Bn([w.v,H]),e.qOj],decls:46,vars:43,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],["id","extraPaddingBottomID",1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"pdt-0"],[1,"mgt-1","mgb-5","mgl-0","mgr-0"],["lines","none",1,"ion-no-padding","pdl-5"],["id","viewpostdetails_userId_id","slot","start",1,"mgr-5","bd-1"],["class","profilepic-wrap","id","viewpostdetails_users_imgPath_imgName_id",4,"ngIf"],["class","profileImage",4,"ngIf"],["id","viewpostdetails_userProfile_userId_id",1,"mgt-0","mgb-0"],["id","viewpostdetails_users_fname_lname_id",1,"d-inline-block","fs-13","user-title-post"],["id","viewpostdetails_users_nickname_id",4,"ngIf"],["class","d-block mg-0 fs-11 sub-title-post",4,"ngIf"],[1,"d-flex","date-info-post","mgb-5","fs-11"],["id","viewpostdetails_publishDateTime_id","class","lightgray",4,"ngIf"],[1,"pdl-10","pdr-10","sharedpost-details"],[4,"ngIf"],[1,"col-md-0","text-end","mt-2"],["id","flaggedpost-view-close","className","btn btn-danger btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["id","flaggedpost-view-block","className","btn btn-danger btn-sm",1,"mgr-5",3,"label","disabled","buttonOnClick"],["id","flaggedpost-view-no-violation","className","btn btn-danger btn-sm",1,"mgr-5",3,"label","disabled","buttonOnClick"],["id","report_members",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],[1,"row"],["selectionMode","single","dataKey","LineNum",1,"ptable",3,"columns","value","paginator","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","viewpostdetails_users_imgPath_imgName_id",1,"profilepic-wrap"],[1,"imagediv"],[1,"initialletters"],[1,"profileImage"],[1,"initials"],["id","viewpostdetails_users_nickname_id"],[1,"d-block","mg-0","fs-11","sub-title-post"],["id","viewpostdetails_publishDateTime_id",1,"lightgray"],[1,"plr16"],["size","12",1,"ion-no-padding"],["id","viewpostdetails_",1,"pdl-0","pdr-15","mb-0"],[3,"innerHTML"],["no-padding","",1,"shared-post"],[1,""],[1,"spdetails","mg-0"],["no-padding","","lines","none"],["id","viewpostdetails_profile_list_id","slot","start",1,"mgt-0","mgb-0","mgr-5","bd-1"],["id","viewpostdetails_sharedPost_users_imgPath_imgName","class","profilepic-wrap",4,"ngIf"],["class","mg-0 profileImage",4,"ngIf"],[1,"postlabel"],["id","viewpostdetails_sharedPost_users_fname_lname",1,"fs-13","user-title-post"],["id","viewpostdetails_sharedPost_users_nickname",4,"ngIf"],[1,"post-content-wrap"],["id","viewpostdetails_sharedPost_postText",1,"fs-13","pdl-0","pdr-15","mb-0"],[3,"innerHtml"],["id","viewpostdetails_","class","text-center",4,"ngIf"],["class","playcontent text-center",4,"ngIf"],["id","home.page_view_data_id","class","playcontent text-center text-center",4,"ngIf"],["class","txt-danger",4,"ngIf"],["id","viewpostdetails_sharedPost_users_imgPath_imgName",1,"profilepic-wrap"],[1,"mg-0","profileImage"],["id","viewpostdetails_sharedPost_users_nickname"],["id","viewpostdetails_",1,"text-center"],["id","viewpostdetails_post_filePath_fileName_id",3,"src"],[1,"playcontent","text-center"],["preload","metadata","id","viewVideo","controls","controls","controlsList","nodownload","disablePictureInPicture","","width","300","height","240","onError","this.onerror=null;this.poster='/assets/images/thumbnail.jpeg';",1,"videoPlayer",3,"poster"],["id","viewpostdetails_post_filePath_fileName_id","type","video/mp4","position","middle",3,"src"],["id","home.page_view_data_id",1,"playcontent","text-center","text-center"],["width","200","preload","metadata","controls","controls","controlsList","nodownload","height","240",1,"videoPlayer"],["id","home.page_viewData_filePath_fileName_mp3_id","type","video/mp4","position","middle",3,"src"],[1,"download-text","fs-12","d-flex","align-items-center","pdl-5"],["color","primary","no-padding","",1,"mgl-5","download-file","fas","fa-download",3,"click"],[1,"txt-danger"],["id","viewpostdetails_postText_id",1,"pdl-0","pdr-15","mb-0"],["class","ms-auto text-center",4,"ngIf"],["class","playcontent ms-auto text-center",4,"ngIf"],["id","home.page_view_data_id","class","playcontent ms-auto text-center",4,"ngIf"],[1,"ms-auto","text-center"],[1,"playcontent","ms-auto","text-center"],["id","viewpostdetails_post_filePath_fileName_mp4_id","type","video/mp4","position","middle",3,"src"],["id","home.page_view_data_id",1,"playcontent","ms-auto","text-center"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"],["class","ui-column-values",4,"ngIf"],[1,"ui-column-values"],["aria-hidden","true","class","fas fa-15x fa-unlock","title","UnBlock",3,"id","click",4,"ngIf"],["aria-hidden","true","title","UnBlock",1,"fas","fa-15x","fa-unlock",3,"id","click"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"ion-list",8)(9,"ion-card",9)(10,"ion-item",10)(11,"ion-avatar",11),e.YNc(12,be,4,3,"span",12),e.YNc(13,de,3,2,"div",13),e.qZA(),e.TgZ(14,"ion-label",14)(15,"span",15),e._uU(16),e.YNc(17,fe,2,1,"span",16),e.qZA(),e.YNc(18,_e,3,4,"span",17),e.TgZ(19,"span",18),e.YNc(20,Se,4,7,"span",19),e.qZA()()(),e.TgZ(21,"ion-card-content",20),e.YNc(22,ce,26,12,"div",21),e.YNc(23,ue,10,6,"ion-card-content",21),e.qZA()()(),e.TgZ(24,"div",22)(25,"app-button",23),e.NdJ("buttonOnClick",function(){return a.Close()}),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"span")(28,"app-button",24),e.NdJ("buttonOnClick",function(){return a.Block("BLOCKED")}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"span")(31,"app-button",25),e.NdJ("buttonOnClick",function(){return a.Block("NO_VIOLATION")}),e.ALo(32,"translate"),e.qZA()()()(),e.TgZ(33,"p-accordion")(34,"p-accordionTab",26)(35,"p-header",27)(36,"span"),e._uU(37),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"div",28)(40,"div",3)(41,"p-table",29),e.YNc(42,je,1,1,"ng-template",30),e.YNc(43,Je,2,1,"ng-template",31),e.YNc(44,Fe,2,1,"ng-template",32),e.qZA()()()(),e._UZ(45,"app-recordhistory",33),e.qZA()()()()()()),2&l&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(6),e.Q6J("ngIf",null!==(null==a.viewData?null:a.viewData.imageDisplay)),e.xp6(1),e.Q6J("ngIf",null===(null==a.viewData?null:a.viewData.imageDisplay)),e.xp6(3),e.AsE(" ",null==a.viewData||null==a.viewData.post||null==a.viewData.post.post_owner?null:a.viewData.post.post_owner.l_name,", ",null==a.viewData||null==a.viewData.post||null==a.viewData.post.post_owner?null:a.viewData.post.post_owner.f_name," "),e.xp6(1),e.Q6J("ngIf",null==a.viewData||null==a.viewData.post||null==a.viewData.post.post_owner?null:a.viewData.post.post_owner.nick_name),e.xp6(1),e.Q6J("ngIf",null==a.viewData||null==a.viewData.post||null==a.viewData.post.group?null:a.viewData.post.group.group_name),e.xp6(2),e.Q6J("ngIf",null==a.viewData||null==a.viewData.post||null==a.viewData.post.post_id?null:a.viewData.post.post_id.is_published),e.xp6(2),e.Q6J("ngIf",(null==a.viewData||null==a.viewData.post||null==a.viewData.post.post_id?null:a.viewData.post.post_id.parent_post)&&(null==a.viewData||null==a.viewData.post||null==a.viewData.post.post_id||null==a.viewData.post.post_id.parent_post?null:a.viewData.post.post_id.parent_post.post_id)),e.xp6(1),e.Q6J("ngIf",!(null!=a.viewData&&null!=a.viewData.post&&null!=a.viewData.post.post_id&&a.viewData.post.post_id.parent_post&&null!=a.viewData&&null!=a.viewData.post&&null!=a.viewData.post.post_id&&a.viewData.post.post_id.parent_post.post_id)),e.xp6(2),e.s9C("label",e.lcZ(26,35,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(3),e.s9C("label",e.lcZ(29,37,"COMMON_BUTTONS.BUTTON_BLOCK")),e.Q6J("disabled",null==a.dataJsonObj?null:a.dataJsonObj.blockbutton),e.xp6(3),e.s9C("label",e.lcZ(32,39,"REPORTS.NO_VIOLATION")),e.Q6J("disabled",null==a.dataJsonObj?null:a.dataJsonObj.voilationbutton),e.xp6(3),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(38,41,"REPORTS.FLAGGED_USER")," (",null==a.viewData?null:a.viewData.post_flagged_details.length,")"),e.xp6(4),e.Q6J("columns",a.header)("value",null==a.viewData?null:a.viewData.post_flagged_details)("paginator",!1)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(4),e.Q6J("createdBy",null==a.viewData?null:a.viewData.created_by)("lastUpdatedBy",null==a.viewData?null:a.viewData.updated_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",null==a.viewData?null:a.viewData.createdAt)("lastUpdatedDate",null==a.viewData?null:a.viewData.updatedAt))},dependencies:[Y.sg,Y.O5,B.UQ,B.US,$.h4,$.jx,ae.r,re.W,F.q,q.iA,q.Ei,f.BJ,f.PM,f.FN,f.wI,f.gu,f.Ie,f.Q$,f.q_,f.Nd,N.X$]})}return n})();var Re=r(61135);let ie=(()=>{class n{authService;http;messageSource=new Re.X("");currentMessage=this.messageSource.asObservable();constructor(t,l){this.authService=t,this.http=l}changeMessage(t){this.messageSource.next(t)}getAll(t,l,a,p,m,b,j,A,O,_,y){const se=b?"&condition="+b:"",ne=_||"",oe=M.L.isEmpty(y)?"":"&advSearchString="+JSON.stringify(y);return M.L.isEmpty(se)?this.authService.getApiCall("api/v1/flaggedusers?&skip="+t+"&limit="+l+"&sort="+a+"&type=list&search="+p+"&enterprise.enterprise_id="+m+O+ne+oe,A):this.authService.getApiCall("api/v1/flaggedusers?&skip="+t+"&limit="+l+"&sort="+a+"&type=list&search="+p+"&enterprise.enterprise_id="+m+se+O+ne+oe,A)}update(t){return new Promise((l,a)=>{this.authService.putApiCall("api/v1/flaggedusers",t).subscribe(p=>{l(p)},p=>{a(p)})})}static \u0275fac=function(l){return new(l||n)(e.LFG(G.e),e.LFG(ee.eN))};static \u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const he=["datatableComponent"];let Ge=(()=>{class n extends W.O{ColumnHeader;actionSheetController;flaggedUsersService;loggerService;router;translateService;commonService;listingVariables;route;toastController;datatableComponent;searchValueChange=new e.vpe;actionStatus;actions;checkId;compareObj;contact_name;enterpriseId;eventClickData;flagedusersStatsObj=new ke;flaggedUsersListData;flaggedUsersMobileListData;flaggedusersSubscriptionObj;forcerefresh=!1;header;isFilterClicked=!1;noDuplicates=void 0;object_type;show=!0;searchString;statsflageduserslistData;status;statusObj;dataJsonObj={};constructor(t,l,a,p,m,b,j,A,O,_){super(O,j),this.ColumnHeader=t,this.actionSheetController=l,this.flaggedUsersService=a,this.loggerService=p,this.router=m,this.translateService=b,this.commonService=j,this.listingVariables=A,this.route=O,this.toastController=_,this.route.queryParams.subscribe(y=>{this.dataJsonObj.queryParamsObj={defaultView:y.default_view,selectedMenuId:y.selectedMenuId,selectedSubMenuId:y.selectedSubMenuId}})}ngOnInit(){document.getElementsByTagName("body"),this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=u.hf.FLAGGED_USERS,this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:u.hf,pageSettingEnum:u.AM,pageSettingFieldsEnum:u.In},this.dataJsonObj.advancedSearchObj={},this.commonService.trackView(u.sn.FLAGGEDUSERS_LIST),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.FLAGGED_USERS",value:"",showSubMenuDisplayName:!0}],this.object_type=this.route.snapshot.data.object_type,this.header=this.ColumnHeader.getflaggedUsersData(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.commonService.currentEvent.subscribe(t=>{"flaggedusers"===t&&(this.forcerefresh=!0)}),this.actions={VIEW:this.roleRightsValidationByPage(u.hf.FLAGGED_USERS,u.AM.ACTIONS,u.In.VIEW)},this.dataJsonObj.pageActionsList=[],this.dataJsonObj.addFiltersList=[],this.roleRightsValidationByPage(u.hf.FLAGGED_USERS,u.AM.ACTIONS,u.In.CREATE),this.roleRightsValidationByPage(u.hf.FLAGGED_USERS,u.AM.ACTIONS,u.In.FILTERS)}ionViewWillEnter(){}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit(t)}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset(),this.searchValueChange.emit("")}getAllRecords(){try{this.status=this.statusObj,this.enterpriseId=localStorage.getItem(u.BU.SELECTED_ENTERPRISE),this.flaggedusersSubscriptionObj&&(this.flaggedusersSubscriptionObj.unsubscribe(),this.flaggedusersSubscriptionObj=void 0);const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.flaggedusersSubscriptionObj=this.flaggedUsersService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,this.status,this.isFilterClicked,this.forcerefresh,t,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(a=>{if(a.rows.length>0){this.flaggedUsersMobileListData&&this.flaggedUsersMobileListData.length>0||(this.flaggedUsersMobileListData=[]),this.forcerefresh&&(this.flaggedUsersMobileListData=[]);for(let p=0;p<a.rows.length;p++)a.rows[p].enterprise.enterpriseshort_name=a.rows[p].enterprise.short_name,a.rows[p].enterprise.short_name='<a class="enable" id="enterprise.short_name'+a.rows[p]._id+'" href="enterprises/enterprises/'+a.rows[p].enterprise.enterprise_id+'/view" >'+a.rows[p].enterprise.short_name,a.rows[p].users.reported_user_profile.f_name=a.rows[p].users.reported_user_profile.f_name?a.rows[p].users.reported_user_profile.f_name+", "+a.rows[p].users.reported_user_profile.l_name:"","0"==a.rows[p].count_groups_active&&(a.rows[p].count_groups_active="0"),this.flaggedUsersMobileListData=this.flaggedUsersMobileListData.filter(m=>m._id!==a.rows[p]._id),this.flaggedUsersMobileListData.push(a.rows[p]);a.totalCount&&(this.listingVariables.totalRecords=a.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=a.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.flaggedUsersListData=this.flaggedUsersListData.concat(a.rows)):this.flaggedUsersListData=a.rows}else this.flaggedUsersListData=[],this.flaggedUsersMobileListData=[]})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.flaggedUsersMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}onActionClicked(t){t.action===u.A0.VIEW&&(localStorage.setItem(u.BU.FLAGGED_USERS_DATA,JSON.stringify({enterprise_id:this.enterpriseId,page_nummber:this.listingVariables.pageNumbers,rowsperpage:this.listingVariables.rowsPerPage,searchstring:this.searchString})),this.commonService.redirectToUrl(["..",t.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route))}mobileEventAction(t){this.presentActionSheet(t)}presentActionSheet(t){var l=this;return(0,U.Z)(function*(){yield(yield l.actionSheetController.create({cssClass:"actionsheet",buttons:[{text:l.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{localStorage.setItem(u.BU.FLAGGED_USERS_DATA,JSON.stringify({enterprise_id:l.enterpriseId,page_nummber:l.listingVariables.pageNumbers,"Contact Types":l.listingVariables.rowsPerPage})),l.commonService.redirectToUrl(["..",t._id,"view"],!0,!0,l.dataJsonObj.queryParamsObj?l.dataJsonObj.queryParamsObj:"",l.route)}}]})).present()})()}toggle(){this.show=!this.show}statsData(t){try{this.isFilterClicked=!0,this.statusObj=t.value,this.forcerefresh=!0,this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.flaggedUsersMobileListData=[],this.getAllRecords()}catch(l){this.loggerService.setLoggerError(this.constructor.name,"statsData",l)}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(l){return new(l||n)(e.Y36(d.Y),e.Y36(f.BX),e.Y36(ie),e.Y36(k.m),e.Y36(T.F0),e.Y36(N.sK),e.Y36(R.v),e.Y36(w.v),e.Y36(T.gz),e.Y36(f.yF))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-flaggedusers-list"]],viewQuery:function(l,a){if(1&l&&e.Gf(he,5),2&l){let p;e.iGM(p=e.CRH())&&(a.datatableComponent=p.first)}},outputs:{searchValueChange:"searchValueChange"},features:[e._Bn([w.v,ie,d.Y,I.s]),e.qOj],decls:9,vars:29,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",1,"",3,"header","totalRecords","data","expand","paginator","actions","totalPages","mobileListData","listingVariables","statsShow","showRights","statsSearch","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(m){return a.onHeaderItemClick(m)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(m){return a.onActionClicked(m)})("redirectionEvent",function(m){return a.mobileEventAction(m)})("changeStats",function(m){return a.statsData(m)})("loadPageData",function(m){return a.loadPageData(m)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(m){return a.onPageLevelActionClicked(m)}),e.qZA()()()()()),2&l&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.header)("totalRecords",a.listingVariables.totalRecords)("data",a.flaggedUsersListData)("expand",!1)("paginator",!0)("actions",a.actions)("totalPages",a.listingVariables.totalpages)("mobileListData",a.flaggedUsersMobileListData)("listingVariables",a.listingVariables)("statsShow",a.show)("showRights",a.roleRightsValidationByPage(a.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.FLAGGED_USERS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,a.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",a.searchString)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[J.n,F.q,x.y]})}return n})();class ke{TOTAL_USERS_FLAGGED;TOTAL_USERS_ACTIVE_FLAGGED;TOTAL_USERS_INACTIVE_FLAGGED}var Ye=r(56368);function Qe(n,v){if(1&n&&(e.TgZ(0,"tr",29)(1,"td",30),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",t[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function me(n,v){if(1&n&&e.YNc(0,Qe,4,4,"tr",28),2&n){const t=e.oxw();e.Q6J("ngIf",(null==t.viewData?null:t.viewData.userReports)&&0==(null==t.viewData?null:t.viewData.userReports.length))}}function He(n,v){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=v.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.header)," ")}}function qe(n,v){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,He,3,3,"th",31),e.qZA()),2&n){const t=v.$implicit;e.xp6(1),e.Q6J("ngForOf",t[0])}}function We(n,v){if(1&n){const t=e.EpF();e.TgZ(0,"i",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,p=e.oxw();return e.KtG(p.blockedMembersView(a))}),e.qZA()}if(2&n){const t=e.oxw(3).rowIndex;e.MGl("id","flaggeduser-view-unblockbtn",t,"")}}function xe(n,v){if(1&n&&(e.TgZ(0,"span",35),e.YNc(1,We,1,1,"i",36),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!0===t.enable)}}function h(n,v){if(1&n&&(e.TgZ(0,"td",33),e._uU(1),e.YNc(2,xe,2,1,"span",34),e.qZA()),2&n){const t=v.$implicit,l=e.oxw().$implicit;e.Tol(t.class),e.Q6J("pSelectableRow",l),e.xp6(1),e.hij(" ",l[t.field]," "),e.xp6(1),e.Q6J("ngIf","Actions"==t.header)}}function V(n,v){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,h,3,6,"td",32),e.qZA()),2&n){const t=v.columns;e.xp6(1),e.Q6J("ngForOf",t[0])}}let s=(()=>{class n extends W.O{flaggedUsersService;loggerService;navigationService;router;translateService;uiUtils;commonService;listingVariables;route;apiData;enterpriseId;forcerefresh=!1;header1;recordId;searchString;userName;viewData;dataJsonObj={};constructor(t,l,a,p,m,b,j,A,O){super(O,j),this.flaggedUsersService=t,this.loggerService=l,this.navigationService=a,this.router=p,this.translateService=m,this.uiUtils=b,this.commonService=j,this.listingVariables=A,this.route=O,this.route.params.subscribe(_=>{this.recordId=_.id}),this.route.queryParams.subscribe(_=>{this.dataJsonObj.queryParamsObj={defaultView:_.defaultView,selectedMenuId:_.selectedMenuId,selectedSubMenuId:_.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=u.hf.FLAGGED_USERS,this.commonService.trackView(u.sn.FLAGGEDUSERS_VIEW),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FLAGGED_USERS",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.flaggedUsersService.currentMessage.subscribe(a=>this.viewData=a),this.header1=[[{field:"userName",header:this.translateService.instant("COMMON_FIELDS.USER_NAME")},{field:"reason",header:this.translateService.instant("COMMON_FIELDS.REASON")}]],this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(u.hf.FLAGGED_USERS,u.AM.ACTIONS,u.In.RECORD_HISTORY);const t=localStorage.getItem(u.BU.FLAGGED_USERS_DATA);this.apiData=JSON.parse(t),localStorage.removeItem(u.BU.FLAGGED_USERS_DATA),this.enterpriseId=this.apiData.enterprise_id,this.commonService.currentEvent.subscribe(a=>{"flaggedusers"===a&&(this.forcerefresh=!0)}),this.dataJsonObj.selectedPage=u.hf.FLAGGED_USERS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}]),this.searchString=void 0!==this.apiData.searchstring?this.apiData.searchstring:"",this.listingVariables.pageNumbers=this.apiData.page_nummber,this.listingVariables.rowsPerPage=this.apiData.rowsperpage,this.getAllRecords()}getDynamicJson(t){var l=this;return(0,U.Z)(function*(){for(let a of t)l.dataJsonObj[a.storingFieldName]=yield l.commonService.getDynamicJson(l.enterpriseId,a.folderName,a.jsonType);l.dataJsonObj.selectedObj={},l.dataJsonObj.selectedObj.recordId=l.recordId,l.dataJsonObj.selectedObj.pageObj=l.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===l.dataJsonObj.selectedPage),l.dataJsonObj.selectedObjEnabled=!0})()}getAllRecords(){try{this.flaggedUsersService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,"","",this.forcerefresh).subscribe(t=>{if(t.rows.length>0){for(let l=0;l<t.rows.length;l++)-1!==this.recordId.indexOf(t.rows[l]._id)&&this.recordId==t.rows[l]._id&&(this.viewData=t.rows[l],this.userName=this.viewData.f_name?this.viewData.f_name+", "+this.viewData.l_name:"");for(let l=0;l<this.viewData.userReports.length;l++)this.viewData.userReports[l].userName=this.viewData.userReports[l].user_flagged_by.f_name+" , "+this.viewData.userReports[l].user_flagged_by.l_name,this.viewData.userReports[l].reason=this.lookupLanguageTranslations(this.viewData.userReports[l].user_flag_reason.lookup_id),this.viewData.userReports[l].reported_user_profile.user_profile_id===parseInt(this.recordId,10)&&(this.viewData.created_by=this.viewData.userReports[l].created_by,this.viewData.updated_by=this.viewData.userReports[l].updated_by,this.viewData.createdAt=this.viewData.userReports[l].createdAt,this.viewData.updatedAt=this.viewData.userReports[l].updatedAt)}})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}Block(t){this.flaggedUsersService.update({status:t,user_id:this.viewData._id}).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},a=>{this.loggerService.setLoggerError(this.constructor.name,"Block",a)})}Close(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(l){return new(l||n)(e.Y36(ie),e.Y36(k.m),e.Y36(te.f),e.Y36(T.F0),e.Y36(N.sK),e.Y36(I.s),e.Y36(R.v),e.Y36(w.v),e.Y36(T.gz))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-flaggedusers-view"]],features:[e._Bn([w.v]),e.qOj],decls:45,vars:48,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","flaggeduser-view-enterprisesname",3,"label","value"],["disabled","true","id","flaggeduser-view-username",3,"label","value"],["mandatory","false","disabled","true","id","flaggeduser-view-status",3,"label","value"],["disabled","true","id","flaggeduser-view-groups",3,"label","value"],[1,"col-md-8","text-end","mt-2","mb-2"],["id","flaggeduser-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","flaggeduser-view-block","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","flaggeduser-view-unblock","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],["id","report_members",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable",3,"columns","value","paginator","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"],["class","ui-column-values",4,"ngIf"],[1,"ui-column-values"],["aria-hidden","true","class","fas fa-15x fa-unlock","title","UnBlock",3,"id","click",4,"ngIf"],["aria-hidden","true","title","UnBlock",1,"fas","fa-15x","fa-unlock",3,"id","click"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",13),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",14)(22,"app-button",15),e.NdJ("buttonOnClick",function(){return a.Close()}),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"app-button",16),e.NdJ("buttonOnClick",function(){return a.Block("block")}),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"app-button",17),e.NdJ("buttonOnClick",function(){return a.Block("unblock")}),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"div",18)(29,"div",3)(30,"div",19)(31,"div",20)(32,"p-accordion")(33,"p-accordionTab",21)(34,"p-header",22)(35,"span"),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",18)(39,"div",3)(40,"p-table",23),e.YNc(41,me,1,1,"ng-template",24),e.YNc(42,qe,2,1,"ng-template",25),e.YNc(43,V,2,1,"ng-template",26),e.qZA()()()(),e._UZ(44,"app-recordhistory",27),e.qZA()()()()()()()()()()()),2&l&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,32,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.viewData||null==a.viewData.enterprise?null:a.viewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,34,"COMMON_FIELDS.USER_NAME")),e.s9C("value",null==a.viewData?null:a.viewData.f_name),e.xp6(3),e.s9C("label",e.lcZ(17,36,"COMMON_FIELDS.STATUS")),e.s9C("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.users||null==a.viewData.users.user_flag_status?null:a.viewData.users.user_flag_status.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(20,38,"REPORTS.ACTIVE_GROUPS")),e.s9C("value",null==a.viewData?null:a.viewData.count_groups_active),e.xp6(3),e.s9C("label",e.lcZ(23,40,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(2),e.s9C("label",e.lcZ(25,42,"COMMON_BUTTONS.BUTTON_BLOCK")),e.xp6(2),e.s9C("label",e.lcZ(27,44,"REPORTS.NO_VIOLATION")),e.xp6(7),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(37,46,"COMMON_PAGE_TITLES.FLAGGED_USERS")," (",null==a.viewData?null:a.viewData.UserReportsCount,")"),e.xp6(4),e.Q6J("columns",a.header1)("value",null==a.viewData?null:a.viewData.userReports)("paginator",!1)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(4),e.Q6J("createdBy",null==a.viewData?null:a.viewData.created_by)("lastUpdatedBy",null==a.viewData?null:a.viewData.updated_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",null==a.viewData?null:a.viewData.createdAt)("lastUpdatedDate",null==a.viewData?null:a.viewData.updatedAt))},dependencies:[Y.sg,Y.O5,B.UQ,B.US,$.h4,$.jx,ae.r,Ye.a,re.W,F.q,q.iA,q.Ei,N.X$]})}return n})(),o=(()=>{class n{http;authService;constructor(t,l){this.http=t,this.authService=l}getAll(t){return new Promise((l,a)=>{this.authService.getApiCall("api/v1/logsdata/?logdate="+t).subscribe(p=>{l(p)},p=>{a(p)})})}static \u0275fac=function(l){return new(l||n)(e.LFG(ee.eN),e.LFG(G.e))};static \u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var i=r(24006),c=r(17867);const C=[{path:"",redirectTo:"lookuptypes",pathMatch:"full"},{path:"lookupcodes",loadChildren:()=>Promise.all([r.e(8592),r.e(8485)]).then(r.bind(r,68485)).then(n=>n.LookupCodesModule)},{path:"lookuptypes",loadChildren:()=>Promise.all([r.e(8592),r.e(9663)]).then(r.bind(r,19663)).then(n=>n.LookupTypesModule)},{path:"languages",loadChildren:()=>r.e(9371).then(r.bind(r,19371)).then(n=>n.LanguagesModule)},{path:"uiicons",loadChildren:()=>r.e(9388).then(r.bind(r,9388)).then(n=>n.UiIconsModule)},{path:"usertypes",loadChildren:()=>Promise.all([r.e(8592),r.e(5581)]).then(r.bind(r,5581)).then(n=>n.UserTypesModule)},{path:"eventcategories",loadChildren:()=>r.e(4102).then(r.bind(r,24102)).then(n=>n.EventcategoriesModule)},{path:"rolerightsbypage",loadChildren:()=>r.e(1186).then(r.bind(r,51186)).then(n=>n.RolerightsbypageModule)},{path:"loginhistory",loadChildren:()=>r.e(6123).then(r.bind(r,36123)).then(n=>n.LoginHistoryModule)},{path:"attributedefinitions",loadChildren:()=>Promise.all([r.e(8592),r.e(7016)]).then(r.bind(r,77016)).then(n=>n.AttributeDefinitionModule)},{path:"widgetdefinitions",loadChildren:()=>Promise.all([r.e(8592),r.e(5043)]).then(r.bind(r,15043)).then(n=>n.WidgetsModule)},{path:"statsdefinitions",loadChildren:()=>Promise.all([r.e(8592),r.e(9470)]).then(r.bind(r,19470)).then(n=>n.StatDefinationsModule)},{path:"reportdefinitions",loadChildren:()=>Promise.all([r.e(8592),r.e(2827)]).then(r.bind(r,22827)).then(n=>n.ReportDefinitionsModule)},{path:"wellnesselements",loadChildren:()=>r.e(9484).then(r.bind(r,39484)).then(n=>n.WellnessElementsModule)},{path:"flaggedposts/list",component:z,canActivate:[P.P],data:{object_type:u.hf.FLAGGED_POSTS,title:"flaggedposts Listing",responsibilityParam:u.bP.MENUS+"."+u.w1.ADMIN+"."+u.bP.SUBMENUS+"."+u.w1.FLAGGED_POSTS+"."+u.Iu.ENABLED,pageName:u.hf.FLAGGED_POSTS}},{path:"flaggedposts/:id/view",canActivate:[P.P],component:Ze,data:{object_type:u.hf.FLAGGED_POSTS,title:"flaggedpost View",responsibilityParam:u.bP.MENUS+"."+u.w1.ADMIN+"."+u.bP.SUBMENUS+"."+u.w1.FLAGGED_POSTS+"."+u.In.VIEW,pageName:u.hf.FLAGGED_POSTS,pageSetting:u.AM.ACTIONS,settingField:u.In.VIEW}},{path:"flaggedusers/list",canActivate:[P.P],component:Ge,data:{object_type:u.hf.FLAGGED_USERS,title:"flaggedusers Listing",responsibilityParam:u.bP.MENUS+"."+u.w1.ADMIN+"."+u.bP.SUBMENUS+"."+u.w1.FLAGGED_USERS+"."+u.Iu.ENABLED,pageName:u.hf.FLAGGED_USERS}},{path:"flaggedusers/:id/view",canActivate:[P.P],component:s,data:{object_type:u.hf.FLAGGED_USERS,title:"flaggedusers View",responsibilityParam:u.bP.MENUS+"."+u.w1.ADMIN+"."+u.bP.SUBMENUS+"."+u.w1.FLAGGED_USERS+"."+u.In.VIEW,pageName:u.hf.FLAGGED_USERS,pageSetting:u.AM.ACTIONS,settingField:u.In.VIEW}},{path:"serverlogs/list",component:(()=>{class n{navigationService;router;serverLogs;translateService;commonService;dateValue;defaultValue;error;dataJsonObj={};constructor(t,l,a,p,m){this.navigationService=t,this.router=l,this.serverLogs=a,this.translateService=p,this.commonService=m}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=u.hf.SERVER_LOGS,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.SERVER_LOGS",value:"",showSubMenuDisplayName:!1}],this.commonService.trackView(u.sn.SERVER_LOGS),document.getElementsByTagName("body"),this.dateValue=K(new Date).format("YYYY-MM-DD"),this.getAllRecords()}chageDate(t){this.dateValue=K(t.value).format("YYYY-MM-DD"),this.error=""}cancelBtn(){this.commonService.redirectToPreviousUrl()}getAllRecords(){this.serverLogs.getAll(this.dateValue).then(t=>{this.defaultValue=t,t||(this.error=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_LOGFILE_DOES_NOT_EXIST"))},t=>{this.commonErrorCodes(JSON.parse(t)),this.defaultValue=""})}commonErrorCodes(t){500===JSON.parse(t[u.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_LOGFILE_DOES_NOT_EXIST"))}static \u0275fac=function(l){return new(l||n)(e.Y36(te.f),e.Y36(T.F0),e.Y36(o),e.Y36(N.sK),e.Y36(R.v))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-server-logs"]],decls:26,vars:21,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-3"],["dateformat","dd-MM-yyyy",3,"placeholder","defaultDate","dateChangeValue"],[1,"col-md-9","text-end","mt-2","btns-group","pdl-0"],["className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"col-md-12","textarea-block"],["for","widgetQuery",1,"text-label"],["disabled","true","rows","23","cols","200",1,"form-control",3,"ngModel","ngModelChange"],["message","ngModel"]],template:function(l,a){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"app-advsearchdatepicker",10),e.NdJ("dateChangeValue",function(m){return a.chageDate(m)}),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",11)(13,"app-button",12),e.NdJ("buttonOnClick",function(){return a.getAllRecords()}),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"app-button",13),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",14),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",15)(21,"label",16),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"textarea",17,18),e.NdJ("ngModelChange",function(m){return a.defaultValue=m}),e.qZA()()()()()()()()()),2&l&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("placeholder",e.lcZ(11,11,"COMMON_FIELDS.DATE")),e.s9C("defaultDate",a.dateValue),e.xp6(3),e.s9C("label",e.lcZ(14,13,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(16,15,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(19,17,a.error)," "),e.xp6(4),e.hij(" ",e.lcZ(23,19,"COMMON_PAGE_TITLES.SERVER_LOGS")," "),e.xp6(2),e.Q6J("ngModel",a.defaultValue))},dependencies:[i.Fj,i.JJ,i.On,ae.r,c.H,F.q,N.X$]})}return n})(),canActivate:[P.P],data:{module:u.w1.ADMIN,pageName:u.hf.SERVER_LOGS}},{path:"workappraisalelements",loadChildren:()=>r.e(7655).then(r.bind(r,77655)).then(n=>n.WorkAppraisalElementsModule)},{path:"workskillelements",loadChildren:()=>r.e(8910).then(r.bind(r,28910)).then(n=>n.WorkSkillElementsModule)},{path:"workskilltemplates",loadChildren:()=>r.e(6170).then(r.bind(r,96170)).then(n=>n.WorkSkillTemplatesModule)},{path:"workinfraelements",loadChildren:()=>r.e(2463).then(r.bind(r,2463)).then(n=>n.WorkInfraelementsModule)},{path:"workabsencesettings",loadChildren:()=>Promise.resolve().then(r.bind(r,44649)).then(n=>n.WorkAbsenceLogSettingsModule)},{path:"workappraisaltemplates",loadChildren:()=>r.e(3028).then(r.bind(r,73028)).then(n=>n.WorkAppraisalTemplatesModule)},{path:"beacons",loadChildren:()=>Promise.resolve().then(r.bind(r,75352)).then(n=>n.BeaconMgmtModule)},{path:"beaconmessages",loadChildren:()=>r.e(3001).then(r.bind(r,63001)).then(n=>n.BeaconMessagesModule)},{path:"buildmanager",loadChildren:()=>r.e(6279).then(r.bind(r,76279)).then(n=>n.BuildManagerModule)},{path:"visitorhistory",loadChildren:()=>r.e(4648).then(r.bind(r,64648)).then(n=>n.VisitorhistoryModule)},{path:"languagetranslations",loadChildren:()=>Promise.all([r.e(8592),r.e(3356)]).then(r.bind(r,83356)).then(n=>n.LanguageTranslationsModule)},{path:"datapublish",loadChildren:()=>Promise.all([r.e(8592),r.e(4341)]).then(r.bind(r,24341)).then(n=>n.DataPublishModule)},{path:"data",loadChildren:()=>Promise.all([r.e(8592),r.e(1176)]).then(r.bind(r,71176)).then(n=>n.RollbackModule)}];let S=(()=>{class n{static \u0275fac=function(l){return new(l||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[T.Bz.forChild(C),T.Bz]})}return n})();var D=r(75352),L=r(83748),Z=r(65673);let Q=(()=>{class n{static \u0275fac=function(l){return new(l||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[Y.ez,N.aw,i.u5,S,i.UX,B.fx,Z.Q,L.v,q.U$,Y.ez,D.BeaconMgmtModule,f.Pc.forRoot()]})}return n})()},75352:(ze,X,r)=>{r.r(X),r.d(X,{BeaconMgmtModule:()=>xe});var B=r(32174),P=r(11210),U=r(15861),u=r(75875),d=r(32236),R=r(90313),e=r(94650),W=r(80529);let J=(()=>{class h{authService;http;userToken=localStorage.getItem(d.BU.TOKEN);constructor(s,o){this.authService=s,this.http=o}getAll(s,o,i,c,g,C,S,D,L,Z){const Q=C?"&condition="+C:"",n=L||"",v=R.L.isEmpty(Z)?"":"&advSearchString="+JSON.stringify(Z);return R.L.isEmpty(Q)?this.authService.getApiCall("api/v1/beacons?&enterprise.enterprise_id="+o+"&skip="+g+"&limit="+c+"&sort="+i+"&search="+s+D+n+v,S):this.authService.getApiCall("api/v1/beacons?&enterprise.enterprise_id="+o+"&skip="+g+"&limit="+c+"&sort="+i+"&search="+s+Q+D+n+v,S)}create(s){return new Promise((o,i)=>{this.authService.postApiCall("api/v1/beacons/",s).subscribe(c=>{o(c)},c=>{i(c)})})}update(s,o){return new Promise((i,c)=>{this.authService.putApiCall("api/v1/beacons/"+s,o).subscribe(g=>{i(g)},g=>{c(g)})})}get(s){return this.authService.getApiCall("api/v1/beacons/"+s,!0)}delete(s){return new Promise((o,i)=>{this.authService.deleteApiCall("api/v1/beacons/"+s).subscribe(c=>{o(c)},c=>{i(c)})})}patch(s,o){return new Promise((i,c)=>{this.authService.patchApiCall("api/v1/beacons/"+s,o).subscribe(g=>{i(g)},g=>{c(g)})})}getParentFacility(s,o){return new Promise((i,c)=>{this.authService.getApiCall("api/v1/facilities?type=drop&enterprise.enterprise_id="+s+"&facility_type.facility_type_name="+o).subscribe(g=>{i(g)},g=>{c(g)})})}statusUpdate(s,o){return new Promise((i,c)=>{this.authService.patchApiCall("api/v1/beacons/"+o,s).subscribe(g=>{i(g)},g=>{c(g)})})}static \u0275fac=function(o){return new(o||h)(e.LFG(u.e),e.LFG(W.eN))};static \u0275prov=e.Yz7({token:h,factory:h.\u0275fac})}return h})();var G=r(71568),M=r(47561),ee=r(57936),H=r(75023),w=r(42786),k=r(46448),E=r(62510),I=r(54463),f=r(27601),T=r(70057),N=r(2387),F=r(56368),x=r(9851),le=r(92634),z=r(37415);const ve=["validBeaconAddress"],K=["validBeaconName"],te=["validCoolOffInMins"],Y=["validDurInSec"],$=["validFacility"],ae=["validFacilityType"],re=["validLatitude"],q=["validLongitude"];let be=(()=>{class h extends M.O{facilitiesService;loggerService;navigationService;router;translateService;uiUtils;beaconManagementService;commonService;enterprisesService;route;toastController;validBeaconAddress;validBeaconName;validCoolOffInMins;validDurInSec;validFacility;validFacilityType;validLatitude;validLongitude;beaconAddress;beaconName;beaconTypeId;beaconTypeObj;beaconTypeOptions;coolOffInMins;defaultStatus;disableSubmitBtn=!1;durationInSecs;enterpriseId;enterpriseName;enterpriseShortName;enterpriseViewId;error;facilityId;facilityObj;facilityOptions;facilityTypeName;facilityTypeId;facilityTypeObj;facilityTypeOptions;headerAction;latitude;longitude;statusObj;statusOptions;dataJsonObj={};constructor(s,o,i,c,g,C,S,D,L,Z,Q){super(Z,D),this.facilitiesService=s,this.loggerService=o,this.navigationService=i,this.router=c,this.translateService=g,this.uiUtils=C,this.beaconManagementService=S,this.commonService=D,this.enterprisesService=L,this.route=Z,this.toastController=Q}ngOnInit(){this.headerAction={BACK:!0},this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=d.hf.BEACONS,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.BEACON",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE),this.getDynamicJson([{folderName:d.sb.FACILITY_TYPES,jsonType:"list",storingFieldName:"facilityTypesListJson"}]),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(o=>{this.dataJsonObj.lookupCodesListJSON=o,this.getEnterprisesViewData()})}getDynamicJson(s){var o=this;return(0,U.Z)(function*(){for(let i of s)o.dataJsonObj[i.storingFieldName]=yield o.commonService.getDynamicJson(o.enterpriseId,i.folderName,i.jsonType);o.getFacilityTypes("")})()}getEnterprisesViewData(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(s=>{this.enterpriseName=s.enterprise_name,this.enterpriseViewId=s._id,this.enterpriseShortName=s.short_name},s=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",s)}this.getBeaconType(),this.getFacility(),this.getStatusOptions()}changeBeaconName(s){this.beaconName=s.value,this.disableSubmitBtn=!1}getBeaconType(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.BEACON_TYPES],"").then(s=>{this.beaconTypeOptions=s,this.beaconTypeId=this.beaconTypeOptions[0].ID,this.beaconTypeObj=this.beaconTypeOptions[0]},s=>{this.loggerService.setLoggerError(this.constructor.name,"getBeaconType",s)})}changeBeaconType(s){this.beaconTypeId=s.value,this.beaconTypeObj=this.beaconTypeOptions.find(o=>o.ID===parseInt(this.beaconTypeId,10))}getFacilityTypes(s){try{this.facilityTypeOptions=[],this.commonService.getFilteredDynamicJSONData(this.dataJsonObj.facilityTypesListJson,"facility_type_display_name",s).then(o=>{this.facilityTypeOptions=o,this.facilityTypeOptions?.length>0&&(this.facilityTypeObj=o[0],this.facilityTypeName=o?o[0].facility_type_name:"")}).catch(o=>{this.loggerService.setLoggerError(this.constructor.name,"getFacilityOptions",o)})}catch(o){this.loggerService.setLoggerError(this.constructor.name,"getFacilityTypes",o)}}changeFacilityType(s){this.facilityTypeId=s.value,this.facilityTypeObj=this.facilityTypeOptions.find(o=>o.ID===parseInt(this.facilityTypeId,10)),this.facilityTypeName=this.facilityTypeObj.facility_type_name,this.getFacility()}getFacility(){try{this.beaconManagementService.getParentFacility(this.enterpriseId,this.facilityTypeName).then(s=>{this.facilityOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getFacility",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getFacility",s)}}changeFacility(s){try{this.facilityId=s.value,this.facilityObj=this.facilityOptions.find(o=>o.ID===parseInt(this.facilityId,10))}catch(o){this.loggerService.setLoggerError(this.constructor.name,"changeFacility",o)}}changeMacAddress(s){this.beaconAddress=s.value}changeLatitude(s){this.latitude=s.value}changeLongitude(s){this.longitude=s.value}changeDurationInSec(s){this.durationInSecs=s.value}changeCoolOffInMins(s){this.coolOffInMins=s.value}getStatusOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.ENTERPRISE_STATUSES],"").then(s=>{s.sort((o,i)=>o.lookup_name.localeCompare(i.lookup_name)),s.length>0&&(this.statusOptions=s,this.defaultStatus=s[0].ID,this.statusObj=s[0])})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",s)}}changeStatus(s){this.defaultStatus=s.value,this.statusObj=this.statusOptions.find(o=>o.ID===parseInt(this.defaultStatus,10))}createRecord(){try{if(this.validBeaconName.isValid()&&this.validBeaconAddress.isValid()&&this.validLatitude.isValid()&&this.validLongitude.isValid()&&this.validFacilityType.isValid()&&this.validFacility.isValid()&&this.validDurInSec.isValid()&&this.validCoolOffInMins.isValid()){this.disableSubmitBtn=!0;const s=this.latitude.replace("+","%2B"),o=this.longitude.replace("+","%2B");this.beaconManagementService.create({enterprise:{enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},beacon_name:this.beaconName,beacon_type:this.beaconTypeObj,beacon_address:this.beaconAddress,display_duration_in_sec:this.durationInSecs,cool_off_period_in_min:this.coolOffInMins,facility_type:{facility_type_id:this.facilityTypeObj.ID,facility_type_name:this.facilityTypeObj.NAME},facility:{facility_id:this.facilityId,facility_name:this.facilityObj.facility_name,geo_coordinates:[s,o]},status:{lookup_id:this.statusObj.lookup_id,lookup_name:this.statusObj.lookup_name}}).then(c=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.disableSubmitBtn=!1,this.commonService.redirectToPreviousUrl()},c=>{this.commonErrorCodes(JSON.parse(c)),this.loggerService.setLoggerError(this.constructor.name,"createRecord",c)})}}catch(s){this.loggerService.setLoggerError(this.constructor.name,"createRecord",s)}}commonErrorCodes(s){409===JSON.parse(s[d.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancelBtn(){this.commonService.redirectToPreviousUrl()}pageheadeActionClick(s){"BACK"==s.value&&this.cancelBtn()}static \u0275fac=function(o){return new(o||h)(e.Y36(H.g),e.Y36(w.m),e.Y36(k.f),e.Y36(E.F0),e.Y36(I.sK),e.Y36(f.s),e.Y36(J),e.Y36(G.v),e.Y36(ee.e),e.Y36(E.gz),e.Y36(T.yF))};static \u0275cmp=e.Xpm({type:h,selectors:[["app-beacon-mgmt-create"]],viewQuery:function(o,i){if(1&o&&(e.Gf(ve,5),e.Gf(K,5),e.Gf(te,5),e.Gf(Y,5),e.Gf($,5),e.Gf(ae,5),e.Gf(re,5),e.Gf(q,5)),2&o){let c;e.iGM(c=e.CRH())&&(i.validBeaconAddress=c.first),e.iGM(c=e.CRH())&&(i.validBeaconName=c.first),e.iGM(c=e.CRH())&&(i.validCoolOffInMins=c.first),e.iGM(c=e.CRH())&&(i.validDurInSec=c.first),e.iGM(c=e.CRH())&&(i.validFacility=c.first),e.iGM(c=e.CRH())&&(i.validFacilityType=c.first),e.iGM(c=e.CRH())&&(i.validLatitude=c.first),e.iGM(c=e.CRH())&&(i.validLongitude=c.first)}},features:[e._Bn([J]),e.qOj],decls:60,vars:60,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","beacon-mgt-create-enterprise",3,"label","value"],["autoCaseFlag","true","mandatory","true","disabled","false","id","beacon-mgt-create-beaconname",3,"label","maxlength","valueChange"],["validBeaconName",""],["disabled","false","mandatory","true","id","beacon-mgt-create-beacontype",3,"label","defaultValue","options","valueChange"],["elementGroupValidation",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","beacon-mgt-create-macaddress",3,"label","maxlength","valueChange"],["validBeaconAddress",""],["autoCaseFlag","true","mandatory","true","disabled","false","inputType","number","id","beacon-mgt-create-latitude",3,"label","maxlength","valueChange"],["validLatitude",""],["autoCaseFlag","true","mandatory","true","disabled","false","inputType","number","id","beacon-mgt-create-longitude",3,"label","maxlength","valueChange"],["validLongitude",""],["disabled","false","mandatory","true","id","beacon-mgt-create-beacontype",3,"label","options","valueChange"],["validFacilityType",""],["validFacility",""],["mandatory","true","id","beacon-mgt-create-durationinsec","disabled","false","autoCaseFlag","false",3,"label","maxlength","valueChange"],["validDurInSec",""],["mandatory","true","id","beacon-mgt-create-cooloffinmins","disabled","false","autoCaseFlag","false",3,"label","maxlength","valueChange"],["validCoolOffInMins",""],["mandatory","true","id","beacon-mgt-create-status",3,"label","options","defaultValue","valueChange"],["statusDropDown",""],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-primary btn-sm","id","beacon-mgt-create-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","beacon-mgt-create-cancel",3,"label","buttonOnClick"],[1,"text-danger","text-center"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9)(13,"app-input",11,12),e.NdJ("valueChange",function(g){return i.changeBeaconName(g)}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",9)(17,"app-dropdown-singleselect",13,14),e.NdJ("valueChange",function(g){return i.changeBeaconType(g)}),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",9)(21,"app-input",15,16),e.NdJ("valueChange",function(g){return i.changeMacAddress(g)}),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",9)(25,"app-inputnumber",17,18),e.NdJ("valueChange",function(g){return i.changeLatitude(g)}),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",9)(29,"app-inputnumber",19,20),e.NdJ("valueChange",function(g){return i.changeLongitude(g)}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",9)(33,"app-dropdown-singleselect",21,22),e.NdJ("valueChange",function(g){return i.changeFacilityType(g)}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",9)(37,"app-dropdown-singleselect",21,23),e.NdJ("valueChange",function(g){return i.changeFacility(g)}),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"div",9)(41,"app-inputnumber",24,25),e.NdJ("valueChange",function(g){return i.changeDurationInSec(g)}),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",9)(45,"app-inputnumber",26,27),e.NdJ("valueChange",function(g){return i.changeCoolOffInMins(g)}),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"div",9)(49,"app-dropdown-singleselect",28,29),e.NdJ("valueChange",function(g){return i.changeStatus(g)}),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"div",30)(53,"app-button",31),e.NdJ("buttonOnClick",function(){return i.createRecord()}),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"app-button",32),e.NdJ("buttonOnClick",function(){return i.cancelBtn()}),e.ALo(56,"translate"),e.qZA()()(),e.TgZ(57,"div",33),e._uU(58),e.ALo(59,"translate"),e.qZA()()()()()()()),2&o&&(e.xp6(6),e.Q6J("pageName",i.dataJsonObj.pageName)("pageTitle",i.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,32,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",i.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(15,34,"NEW_VARIABLES.BEACON_NAME")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(19,36,"NEW_VARIABLES.BEACON_TYPE")),e.s9C("defaultValue",i.beaconTypeId),e.Q6J("options",i.beaconTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(23,38,"NEW_VARIABLES.BEACON_ADDRESS")),e.Q6J("maxlength",80),e.xp6(4),e.s9C("label",e.lcZ(27,40,"NEW_VARIABLES.LATITUDE")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(31,42,"NEW_VARIABLES.LONGITUDE")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(35,44,"NEW_VARIABLES.ASSET_TYPE")),e.Q6J("options",i.facilityTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(39,46,"RESERVATIONS.ASSET")),e.Q6J("options",i.facilityOptions),e.xp6(4),e.s9C("label",e.lcZ(43,48,"NEW_VARIABLES.DURATION_IN_SECS")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(47,50,"NEW_VARIABLES.COOL_OFF_IN_MINS")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(51,52,"COMMON_FIELDS.STATUS")),e.s9C("defaultValue",i.defaultStatus),e.Q6J("options",i.statusOptions),e.xp6(4),e.s9C("label",e.lcZ(54,54,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",i.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(56,56,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(59,58,i.error)," "))},dependencies:[N.r,F.a,x.k,le.K,z.q,I.X$]})}return h})();var de=r(11735);const fe=["validBeaconAddress"],_e=["validBeaconName"],Se=["validCoolOffInMins"],Oe=["validDurInSec"],Te=["validFacility"],De=["validFacilityType"],ye=["validLatitude"],Ce=["validLongitude"];let Ae=(()=>{class h extends M.O{facilitiesService;loggerService;navigationService;router;translateService;uiUtils;beaconManagementService;commonService;route;validBeaconAddress;validBeaconName;validCoolOffInMins;validDurInSec;validFacility;validFacilityType;validLatitude;validLongitude;beaconAddress;beaconName;beaconTypeId;beaconTypeObj;beaconTypeOptions;coolOffInMins;defaultStatus;durationInSecs;enterpriseId;error;facilityId;facilityName;facilityObj;facilityOptions;facilityTypeName;facilityTypeId;facilityTypeObj;facilityTypeOptions;latitude;longitude;recordId;statusObj;statusOptions;viewData;dataJsonObj={};constructor(s,o,i,c,g,C,S,D,L){super(L,D),this.facilitiesService=s,this.loggerService=o,this.navigationService=i,this.router=c,this.translateService=g,this.uiUtils=C,this.beaconManagementService=S,this.commonService=D,this.route=L}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=d.hf.BEACONS,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.RECORD_HISTORY),this.route.params.subscribe(s=>{this.recordId=s.id,this.getRecordById()})}cancelBtn(){this.commonService.redirectToPreviousUrl()}getRecordById(){try{this.beaconManagementService.get(this.recordId).subscribe(s=>{this.viewData=s,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.BEACON",value:this.viewData?.beacon_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=this.viewData.enterprise.enterprise_id,this.getDynamicJson([{folderName:d.sb.FACILITY_TYPES,jsonType:"list",storingFieldName:"facilityTypesListJson"}]),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(i=>{this.dataJsonObj.lookupCodesListJSON=i,this.getBeaconType()}),this.beaconName=this.viewData.beacon_name,this.beaconTypeObj=this.viewData.beacon_type,this.beaconAddress=this.viewData.beacon_address,this.facilityTypeObj=this.viewData.facility_type,this.facilityTypeId=this.viewData.facility_type.facility_type_id,this.facilityTypeName=this.viewData.facility_type.facility_type_name,this.getFacility(),this.facilityId=this.viewData.facility.facility_id,this.facilityName=this.viewData.facility.facility_name,this.latitude=this.viewData.facility.geo_coordinates[0],this.longitude=this.viewData.facility.geo_coordinates[1],this.durationInSecs=this.viewData.display_duration_in_sec,this.coolOffInMins=this.viewData.cool_off_period_in_min,this.statusObj=this.viewData.status},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)}}getDynamicJson(s){var o=this;return(0,U.Z)(function*(){for(let i of s)o.dataJsonObj[i.storingFieldName]=yield o.commonService.getDynamicJson(o.enterpriseId,i.folderName,i.jsonType);o.getFacilityTypes("")})()}changeBeaconName(s){this.beaconName=s.value}getBeaconType(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.BEACON_TYPES],"").then(s=>{this.beaconTypeOptions=s,this.beaconTypeId=this.beaconTypeOptions[0].ID,this.beaconTypeObj=this.beaconTypeOptions[0]},s=>{this.loggerService.setLoggerError(this.constructor.name,"getBeaconType",s)})}changeBeaconType(s){this.beaconTypeId=s.value,this.beaconTypeObj=this.beaconTypeOptions.find(o=>o.ID===parseInt(this.beaconTypeId,10))}getFacilityTypes(s){try{this.facilityTypeOptions=[],this.commonService.getFilteredDynamicJSONData(this.dataJsonObj.facilityTypesListJson,"facility_type_display_name",s).then(o=>{this.facilityTypeOptions=o,this.facilityTypeOptions?.length>0&&(this.facilityTypeObj=o[0],this.facilityTypeName=o?o[0].facility_type_name:"")}).catch(o=>{this.loggerService.setLoggerError(this.constructor.name,"getFilteredDynamicJSONData",o)})}catch(o){this.loggerService.setLoggerError(this.constructor.name,"getFacilityTypes",o)}}changeFacilityType(s){this.facilityTypeId=s.value,this.facilityTypeObj=this.facilityTypeOptions.find(o=>o.ID===parseInt(this.facilityTypeId,10)),this.facilityTypeName=this.facilityTypeObj.facility_type_name,this.facilityId="",this.facilityName="",this.getFacility()}getFacility(){try{this.beaconManagementService.getParentFacility(this.enterpriseId,this.facilityTypeName).then(s=>{this.facilityOptions=s},s=>{this.loggerService.setLoggerError(this.constructor.name,"getFacility",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getFacility",s)}}changeFacility(s){try{this.facilityId=s.value,this.facilityObj=this.facilityOptions.find(o=>o.ID===parseInt(this.facilityId,10)),this.facilityName=this.facilityObj.facility_name}catch(o){this.loggerService.setLoggerError(this.constructor.name,"changeFacility",o)}}changeBeaconAddress(s){this.beaconAddress=s.value}changeLatitude(s){this.latitude=s.value}changeLongitude(s){this.longitude=s.value}changeDurationInSec(s){this.durationInSecs=s.value}changeCoolOffInMins(s){this.coolOffInMins=s.value}updateRecord(){try{if(this.validBeaconName.isValid()&&this.validBeaconAddress.isValid()&&this.validLatitude.isValid()&&this.validLongitude.isValid()&&this.validFacilityType.isValid()&&this.validFacility.isValid()&&this.validDurInSec.isValid()&&this.validCoolOffInMins.isValid()){const s=this.latitude.replace("+","%2B"),o=this.longitude.replace("+","%2B");this.beaconManagementService.update(this.recordId,{enterprise:this.viewData.enterprise,beacon_name:this.beaconName,beacon_type:this.beaconTypeObj,beacon_address:this.beaconAddress,display_duration_in_sec:this.durationInSecs,cool_off_period_in_min:this.coolOffInMins,facility_type:{facility_type_id:this.facilityTypeId,facility_type_name:this.facilityTypeName},facility:{facility_id:this.facilityId,facility_name:this.facilityName,geo_coordinates:[s,o]},status:this.statusObj}).then(c=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},c=>{this.commonErrorCodes(JSON.parse(c))})}}catch(s){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",s)}}commonErrorCodes(s){409===JSON.parse(s[d.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}static \u0275fac=function(o){return new(o||h)(e.Y36(H.g),e.Y36(w.m),e.Y36(k.f),e.Y36(E.F0),e.Y36(I.sK),e.Y36(f.s),e.Y36(J),e.Y36(G.v),e.Y36(E.gz))};static \u0275cmp=e.Xpm({type:h,selectors:[["app-beacon-mgmt-edit"]],viewQuery:function(o,i){if(1&o&&(e.Gf(fe,5),e.Gf(_e,5),e.Gf(Se,5),e.Gf(Oe,5),e.Gf(Te,5),e.Gf(De,5),e.Gf(ye,5),e.Gf(Ce,5)),2&o){let c;e.iGM(c=e.CRH())&&(i.validBeaconAddress=c.first),e.iGM(c=e.CRH())&&(i.validBeaconName=c.first),e.iGM(c=e.CRH())&&(i.validCoolOffInMins=c.first),e.iGM(c=e.CRH())&&(i.validDurInSec=c.first),e.iGM(c=e.CRH())&&(i.validFacility=c.first),e.iGM(c=e.CRH())&&(i.validFacilityType=c.first),e.iGM(c=e.CRH())&&(i.validLatitude=c.first),e.iGM(c=e.CRH())&&(i.validLongitude=c.first)}},features:[e._Bn([J]),e.qOj],decls:61,vars:68,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","beacon-mgt-view-enterprise",3,"label","value"],["autoCaseFlag","true","mandatory","true","disabled","false","id","beacon-mgt-edit-beaconname",3,"label","maxlength","value","valueChange"],["validBeaconName",""],["disabled","false","mandatory","true","id","beacon-mgt-edit-beacontype",3,"label","defaultValue","options","valueChange"],["autoCaseFlag","true","mandatory","true","disabled","false","id","beacon-mgt-edit-macaddress",3,"label","value","maxlength","valueChange"],["validBeaconAddress",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","beacon-mgt-edit-latitude",3,"label","maxlength","value","valueChange"],["validLatitude",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","beacon-mgt-create-longitude",3,"label","maxlength","value","valueChange"],["validLongitude",""],["validFacilityType",""],["validFacility",""],["mandatory","true","id","beacon-mgt-edit-durationinsec","disabled","false","autoCaseFlag","false",3,"label","value","maxlength","valueChange"],["validDurInSec",""],["mandatory","true","id","beacon-mgt-edit-cooloffinmins","disabled","false","autoCaseFlag","false",3,"label","value","maxlength","valueChange"],["validCoolOffInMins",""],["autoCaseFlag","true","mandatory","true","disabled","true","id","beacon-mgt-edit-macaddress",3,"label","value"],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-primary btn-sm","id","beacon-mgt-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","beacon-mgt-edit-close",3,"label","buttonOnClick"],[1,"row"],[1,"card"],[1,"card-content"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9)(13,"app-input",11,12),e.NdJ("valueChange",function(g){return i.changeBeaconName(g)}),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",9)(17,"app-dropdown-singleselect",13),e.NdJ("valueChange",function(g){return i.changeBeaconType(g)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",9)(20,"app-input",14,15),e.NdJ("valueChange",function(g){return i.changeBeaconAddress(g)}),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"div",9)(24,"app-input",16,17),e.NdJ("valueChange",function(g){return i.changeLatitude(g)}),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",9)(28,"app-input",18,19),e.NdJ("valueChange",function(g){return i.changeLongitude(g)}),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"div",9)(32,"app-dropdown-singleselect",13,20),e.NdJ("valueChange",function(g){return i.changeFacilityType(g)}),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"div",9)(36,"app-dropdown-singleselect",13,21),e.NdJ("valueChange",function(g){return i.changeFacility(g)}),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"div",9)(40,"app-inputnumber",22,23),e.NdJ("valueChange",function(g){return i.changeDurationInSec(g)}),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"div",9)(44,"app-inputnumber",24,25),e.NdJ("valueChange",function(g){return i.changeCoolOffInMins(g)}),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",9),e._UZ(48,"app-input",26),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",27)(51,"app-button",28),e.NdJ("buttonOnClick",function(){return i.updateRecord()}),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"app-button",29),e.NdJ("buttonOnClick",function(){return i.cancelBtn()}),e.ALo(54,"translate"),e.qZA()()(),e.TgZ(55,"div",30)(56,"div",3)(57,"div",31)(58,"div",32)(59,"p-accordion"),e._UZ(60,"app-recordhistory",33),e.qZA()()()()()()()()()()()),2&o&&(e.xp6(6),e.Q6J("pageName",i.dataJsonObj.pageName)("pageTitle",i.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,42,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==i.viewData?null:i.viewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(15,44,"NEW_VARIABLES.BEACON_NAME")),e.s9C("value",null==i.viewData?null:i.viewData.beacon_name),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(18,46,"NEW_VARIABLES.BEACON_TYPE")),e.s9C("defaultValue",null==i.beaconTypeObj?null:i.beaconTypeObj.lookup_id),e.Q6J("options",i.beaconTypeOptions),e.xp6(3),e.s9C("label",e.lcZ(22,48,"NEW_VARIABLES.BEACON_ADDRESS")),e.s9C("value",null==i.viewData?null:i.viewData.beacon_address),e.Q6J("maxlength",80),e.xp6(4),e.s9C("label",e.lcZ(26,50,"NEW_VARIABLES.LATITUDE")),e.s9C("value",i.latitude),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(30,52,"NEW_VARIABLES.LONGITUDE")),e.s9C("value",i.longitude),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(34,54,"NEW_VARIABLES.ASSET_TYPE")),e.s9C("defaultValue",i.facilityTypeId),e.Q6J("options",i.facilityTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(38,56,"RESERVATIONS.ASSET")),e.s9C("defaultValue",i.facilityId),e.Q6J("options",i.facilityOptions),e.xp6(4),e.s9C("label",e.lcZ(42,58,"NEW_VARIABLES.DURATION_IN_SECS")),e.s9C("value",i.durationInSecs),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(46,60,"NEW_VARIABLES.COOL_OFF_IN_MINS")),e.s9C("value",i.coolOffInMins),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(49,62,"COMMON_FIELDS.STATUS")),e.s9C("value",i.lookupLanguageTranslations(null==i.statusObj?null:i.statusObj.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(52,64,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(54,66,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(7),e.Q6J("createdBy",null==i.viewData?null:i.viewData.created_by)("lastUpdatedBy",null==i.viewData?null:i.viewData.updated_by)("showrecordhistory",i.dataJsonObj.showrecordhistory)("creationDate",null==i.viewData?null:i.viewData.createdAt)("lastUpdatedDate",null==i.viewData?null:i.viewData.updatedAt))},dependencies:[B.UQ,N.r,F.a,x.k,le.K,de.W,z.q,I.X$]})}return h})();var we=r(35226),Ee=r.n(we),ce=r(42863),Ie=r(28168),pe=r(30578),Ne=r(88425);const Me=["datatableComponent"];let Le=(()=>{class h extends M.O{actionSheetController;columnheaders;loggerService;router;translateService;beaconManagementService;commonService;listingVariables;route;toastController;uiUtils;datatableComponent;actions;beaconMgmtListData;beaconMgmtMobileListData=[];enabledStatus;enterpriseId;fabMobileactions;forceRefresh;headers;isFilterClicked=!1;mobileroutesArray;noDuplicates=void 0;show=!0;statsShow=!0;searchString;statusObj;dataJsonObj={};constructor(s,o,i,c,g,C,S,D,L,Z,Q){super(L,S),this.actionSheetController=s,this.columnheaders=o,this.loggerService=i,this.router=c,this.translateService=g,this.beaconManagementService=C,this.commonService=S,this.listingVariables=D,this.route=L,this.toastController=Z,this.uiUtils=Q,this.route.queryParams.subscribe(n=>{this.dataJsonObj.queryParamsObj={defaultView:n.default_view,selectedMenuId:n.selectedMenuId,selectedSubMenuId:n.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageName=d.hf.BEACONS,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.BEACONS",value:"",showSubMenuDisplayName:!0}],this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:d.hf,pageSettingEnum:d.AM,pageSettingFieldsEnum:d.In},document.getElementsByTagName("body"),this.headers=this.columnheaders.getBeaconsHeaders(),this.searchString="",this.actions={EDIT:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.EDIT),DELETE:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.DELETE),ACTIVATE:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.ACTIVATE),INACTIVATE:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.INACTIVATE)},this.forceRefresh=!1,this.commonService.currentEvent.subscribe(o=>{"beacon-mgmt"===o&&(this.forceRefresh=!0)}),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:d.gL.URL,redirectURL:"/admin/beacons/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidation("ADMIN","BEACON","FILTERS")}ionViewWillEnter(){this.actions={EDIT:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.EDIT),DELETE:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.DELETE),ACTIVATE:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.ACTIVATE),INACTIVATE:this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.INACTIVATE)}}getSearchResults(s){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=s,this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.getAllRecords(),this.datatableComponent.reset()}getAllRecords(){try{this.enterpriseId=localStorage.getItem(d.BU.SELECTED_ENTERPRISE);const s=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView),o=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.beaconManagementService.getAll(this.searchString,this.enterpriseId,this.listingVariables.sortOrderColumn,this.listingVariables.rowsPerPage,this.listingVariables.pageNumbers,this.statusObj,this.forceRefresh,s,o,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(i=>{if(this.hideSpinner(),i.rows.length>0){this.beaconMgmtMobileListData&&this.beaconMgmtMobileListData.length>0||(this.beaconMgmtMobileListData=[]);for(let c=0;c<i.rows.length;c++){const g={url:`admin/beacons/${i.rows[c]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},C=g.queryParams&&Object.keys(g.queryParams).length>0?`${g.url}?${JSON.stringify(g.queryParams)}`:g.url;i.rows[c].beacon_name=`<a class="enable" id="beacon_name${i.rows[c]._id}" href=${C}>${i.rows[c].beacon_name}`,i.rows[c].enterprise.short_name='<a class="enable" id="enterprise.short_name'+i.rows[c]._id+'" href="enterprises/enterprises/'+i.rows[c].enterprise.enterprise_id+'/view" >'+i.rows[c].enterprise.short_name,this.beaconMgmtMobileListData=this.beaconMgmtMobileListData.filter(S=>S._id!==i.rows[c]._id),this.beaconMgmtMobileListData.push(i.rows[c])}i.totalCount&&(this.listingVariables.totalRecords=i.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=i.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.beaconMgmtListData=this.beaconMgmtListData.concat(i.rows)):this.beaconMgmtListData=i.rows}else this.beaconMgmtListData=[],this.beaconMgmtMobileListData=[]},i=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",i)})}catch(s){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",s)}}loadPageData(s){this.listingVariables.pageNumbers=s.listingVariables.pageNumbers,s.clearMobileData&&(this.beaconMgmtMobileListData=this.noDuplicates),s.isPaginationChange&&(this.dataJsonObj.selectedFilter=s.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=s.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=s.selectedAdvancedSearchObj),this.getAllRecords()}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}toggle(){this.show=!this.show}createBeacon(){try{this.router.navigate(["admin/beacons/create"])}catch(s){this.loggerService.setLoggerError(this.constructor.name,"createBeacon",s)}}onItemClicked(s){this.commonService.redirectToUrl(["..",s._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}mobileEventAction(s){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.INACTIVATE)&&s.status.lookup_name===d.oP.INACTIVE&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{this.router.navigate(["/admin/beacons/"+s._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-mgmt")}}),this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.DELETE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_DELETE"),handler:()=>{this.delete(s._id),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-mgmt")}}),this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["admin/beacons/"+s._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-mgmt")}}),this.roleRightsValidationByPage(d.hf.BEACONS,d.AM.ACTIONS,d.In.ACTIVATE)&&s.status.lookup_name===d.oP.ACTIVE&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{this.router.navigate(["/admin/beacons/"+s._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-mgmt")}}),this.presentActionSheet(s)}catch(o){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",o)}}presentActionSheet(s){var o=this;return(0,U.Z)(function*(){o.mobileroutesArray&&o.mobileroutesArray.length>0&&(yield(yield o.actionSheetController.create({cssClass:"actionsheet",buttons:o.mobileroutesArray})).present())})()}onActionClicked(s){s.action===d.A0.EDIT?(this.router.navigate(["admin/beacons/"+s.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-mgmt")):s.action===d.A0.DELETE?this.delete(s.data._id):(s.action===d.A0.ACTIVATE||s.action===d.A0.INACTIVATE)&&(this.router.navigate(["admin/beacons/"+s.data._id+"/status"]),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-mgmt"))}delete(s){try{Ee().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_RECORD_DELETE"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(o=>{o.value&&this.beaconManagementService.delete(s).then(i=>{this.beaconMgmtMobileListData=this.noDuplicates,this.getAllRecords(),this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_DELETE"),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-mgmt")},i=>{}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"delete",i)})})}catch(o){this.loggerService.setLoggerError(this.constructor.name,"delete",o)}}statusData(s){try{this.isFilterClicked=!0,this.statusObj=s.value,this.getAllRecords()}catch(o){this.loggerService.setLoggerError(this.constructor.name,"statusData",o)}}statsToggle(){try{this.statsShow=!this.statsShow}catch(s){this.loggerService.setLoggerError(this.constructor.name,"toggle",s)}}selectedViewType(s){this.dataJsonObj.selectedDisplayView=s}selectedFilterType(s){s?this.dataJsonObj.selectedFilter=s:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(s){}advancedSearchFilterClicked(s){this.dataJsonObj.selectedAdvancedSearchObj=s}onHeaderItemClick(s){switch(s.type){case"search":this.getSearchResults(s.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(s.event);break;case"filters":this.selectedFilterType(s.event);break;case"advanced_search":this.advancedSearchFilterClicked(s.event);break;case"page_actions":this.onPageLevelActionClicked(s.event)}}static \u0275fac=function(o){return new(o||h)(e.Y36(T.BX),e.Y36(ce.Y),e.Y36(w.m),e.Y36(E.F0),e.Y36(I.sK),e.Y36(J),e.Y36(G.v),e.Y36(pe.v),e.Y36(E.gz),e.Y36(T.yF),e.Y36(f.s))};static \u0275cmp=e.Xpm({type:h,selectors:[["app-beacon-mgmt-list"]],viewQuery:function(o,i){if(1&o&&e.Gf(Me,5),2&o){let c;e.iGM(c=e.CRH())&&(i.datatableComponent=c.first)}},features:[e._Bn([J,pe.v,ce.Y]),e.qOj],decls:9,vars:30,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],[3,"header","actions","data","paginator","totalRecords","totalPages","mobileListData","expand","statsShow","showRights","statsSearch","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(g){return i.onHeaderItemClick(g)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(g){return i.onActionClicked(g)})("itemClickEvent",function(g){return i.onItemClicked(g)})("redirectionEvent",function(g){return i.mobileEventAction(g)})("changeStats",function(g){return i.statusData(g)})("loadPageData",function(g){return i.loadPageData(g)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(g){return i.onPageLevelActionClicked(g)}),e.qZA()()()()()),2&o&&(e.xp6(3),e.Q6J("pageName",i.dataJsonObj.pageName)("defaultView",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",i.dataJsonObj.pageActionsList)("pageTitle",i.dataJsonObj.pageTitle)("selectedMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",i.headers)("actions",i.actions)("data",i.beaconMgmtListData)("paginator",!0)("totalRecords",i.listingVariables.totalRecords)("totalPages",i.listingVariables.totalpages)("mobileListData",i.beaconMgmtMobileListData)("expand",!1)("statsShow",i.statsShow)("showRights",i.roleRightsValidationByPage(i.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.BEACONS,i.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,i.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",i.searchString)("listingVariables",i.listingVariables)("selectedDisplayViewType",i.dataJsonObj.selectedDisplayView)("selectedFilterType",i.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",i.dataJsonObj.selectedAdvancedSearchObj)("pageName",i.dataJsonObj.pageName)("selectedMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",i.dataJsonObj.showSpinner)("selectedSubMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",i.dataJsonObj.pageActionsList))},dependencies:[Ie.n,z.q,Ne.y]})}return h})();var ue=r(15439),ge=r(36895);const je=["activedropdown"];function Pe(h,V){if(1&h&&(e.TgZ(0,"div",27),e._UZ(1,"app-input",28),e.ALo(2,"translate"),e.qZA()),2&h){const s=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("value",s.lookupLanguageTranslations(null==s.viewData||null==s.viewData.reason_activate?null:s.viewData.reason_activate.lookup_id))}}function Je(h,V){if(1&h){const s=e.EpF();e.TgZ(0,"div",27)(1,"app-dropdown-singleselect",29,30),e.NdJ("valueChange",function(i){e.CHM(s);const c=e.oxw();return e.KtG(c.changeReasonInactive(i))}),e.ALo(3,"translate"),e.qZA()()}if(2&h){const s=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("defaultValue",s.reasonInactiveId),e.Q6J("options",s.reasonInactiveOptions)}}function Ve(h,V){if(1&h&&(e.TgZ(0,"div",27),e._UZ(1,"app-input",31),e.ALo(2,"translate"),e.qZA()),2&h){const s=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("value",s.lookupLanguageTranslations(null==s.viewData||null==s.viewData.reason_inactivate?null:s.viewData.reason_inactivate.lookup_id))}}function Be(h,V){if(1&h){const s=e.EpF();e.TgZ(0,"div",27)(1,"app-dropdown-singleselect",32,30),e.NdJ("valueChange",function(i){e.CHM(s);const c=e.oxw();return e.KtG(c.changeReasonActive(i))}),e.ALo(3,"translate"),e.qZA()()}if(2&h){const s=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("defaultValue",s.reasonActiveId),e.Q6J("options",s.reasonActiveOptions)}}function Ue(h,V){if(1&h){const s=e.EpF();e.TgZ(0,"app-button",36),e.NdJ("buttonOnClick",function(){e.CHM(s);const i=e.oxw(2);return e.KtG(i.updateRecord())}),e.ALo(1,"translate"),e.qZA()}2&h&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_ACTIVATE"))}function Fe(h,V){if(1&h){const s=e.EpF();e.TgZ(0,"app-button",36),e.NdJ("buttonOnClick",function(){e.CHM(s);const i=e.oxw(2);return e.KtG(i.updateRecord())}),e.ALo(1,"translate"),e.qZA()}2&h&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_INACTIVATE"))}function Ze(h,V){if(1&h){const s=e.EpF();e.TgZ(0,"app-button",37),e.NdJ("buttonOnClick",function(){e.CHM(s);const i=e.oxw(2);return e.KtG(i.cancelBtn())}),e.ALo(1,"translate"),e.qZA()}2&h&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_CANCEL"))}function Re(h,V){if(1&h&&(e.TgZ(0,"div",33),e.YNc(1,Ue,2,3,"app-button",34),e.YNc(2,Fe,2,3,"app-button",34),e.YNc(3,Ze,2,3,"app-button",35),e.qZA()),2&h){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",!1===s.reasonActiveDisable&&!1===s.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===s.reasonInactiveDisable&&!0===s.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===s.reasonActiveDisable||!1===s.reasonInactiveDisable)}}function ie(h,V){if(1&h){const s=e.EpF();e.TgZ(0,"div",38)(1,"app-button",37),e.NdJ("buttonOnClick",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.cancelBtn())}),e.ALo(2,"translate"),e.qZA()()}2&h&&(e.xp6(1),e.s9C("label",e.lcZ(2,1,"COMMON_BUTTONS.BUTTON_CLOSE")))}let he=(()=>{class h extends M.O{loggerService;navigationService;router;translateService;uiUtils;beaconManagementService;commonService;route;activedropdown;beaconEditObj=new Ge;beaconStatusName;enterpriseId;error;reasonActiveDisable=!0;reasonActiveId;reasonActiveObj;reasonActiveOptions;reasonInactiveDisable=!0;reasonInactiveId;reasonInactiveObj;reasonInactiveOptions;reasonViewenable;recordId;status;statusObj;statusOptions;statusPagetitle;url;viewData;dataJsonObj={};constructor(s,o,i,c,g,C,S,D){super(D,S),this.loggerService=s,this.navigationService=o,this.router=i,this.translateService=c,this.uiUtils=g,this.beaconManagementService=C,this.commonService=S,this.route=D}ngOnInit(){this.initializeComponent()}initializeComponent(){this.url=this.router.url.split("/")[4],this.route.params.subscribe(o=>{this.recordId=o.id,this.getRecordById()}),this.dataJsonObj.selectedPage=d.hf.BEACON_MANAGEMENT,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(s){var o=this;return(0,U.Z)(function*(){for(let i of s)o.dataJsonObj[i.storingFieldName]=yield o.commonService.getDynamicJson(o.enterpriseId,i.folderName,i.jsonType);o.dataJsonObj.showrecordhistory=o.roleRightsValidationByPage(d.hf.BEACON_MANAGEMENT,d.AM.ACTIONS,d.In.RECORD_HISTORY),o.dataJsonObj.selectedObj={},o.dataJsonObj.selectedObj.recordId=o.recordId,o.dataJsonObj.selectedObj.pageObj=o.dataJsonObj.menuDataJson.filter(i=>i.menu_page.page_name===o.dataJsonObj.selectedPage),o.dataJsonObj.selectedObjEnabled=!0})()}cancelBtn(){this.commonService.redirectToPreviousUrl()}getRecordById(){try{this.beaconManagementService.get(this.recordId).subscribe(s=>{this.viewData=s,this.enterpriseId=this.viewData.enterprise.enterprise_id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(o=>{this.dataJsonObj.lookupCodesListJSON=o,this.getReasonActiveOptions(this.viewData.enterprise.enterprise_id),this.getReasonInactiveOptions(this.viewData.enterprise.enterprise_id)}),this.viewData.createdAt=ue(this.viewData.createdAt).format("DD-MMM-YYYY HH:mm"),this.viewData.updatedAt=ue(this.viewData.updatedAt).format("DD-MMM-YYYY HH:mm"),this.status=this.viewData.status?this.viewData.status.lookup_name:"",this.status===d.oP.ACTIVE?this.reasonViewenable=!0:this.status===d.oP.INACTIVE&&(this.reasonViewenable=!1),"status"!==this.url&&(this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.BEACON",value:this.viewData?.beacon_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}]),"status"===this.url&&this.status===d.oP.ACTIVE&&(this.reasonInactiveDisable=!1,this.statusPagetitle=!0,this.reasonViewenable=!0,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.BEACON",value:this.viewData?.beacon_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}]),"status"===this.url&&this.status===d.oP.INACTIVE&&(this.reasonActiveDisable=!1,this.statusPagetitle=!0,this.reasonViewenable=!1,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.BEACON",value:this.viewData?.beacon_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}])},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",s)}}changeReasonActive(s){try{this.reasonActiveId=s.value,this.reasonActiveObj=this.reasonActiveOptions.find(o=>o.ID===parseInt(this.reasonActiveId,10)),this.beaconStatusName=d.oP.ACTIVE,this.getStatusOptions(this.enterpriseId)}catch(o){this.loggerService.setLoggerError(this.constructor.name,"changeReasonActive",o)}}changeReasonInactive(s){try{this.reasonInactiveId=s.value,this.reasonInactiveObj=this.reasonInactiveOptions.find(o=>o.ID===parseInt(this.reasonInactiveId,10)),this.beaconStatusName=d.oP.INACTIVE,this.getStatusOptions(this.enterpriseId)}catch(o){this.loggerService.setLoggerError(this.constructor.name,"changeReasonInactive",o)}}getReasonActiveOptions(s){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.REASONS_ENTERPRISE_ACTIVATE],"").then(o=>{this.reasonActiveOptions=o})}catch(o){this.loggerService.setLoggerError(this.constructor.name,"getReasonActiveOptions",o)}}getReasonInactiveOptions(s){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.REASONS_ENTERPRISE_INACTIVATE],"").then(o=>{this.reasonInactiveOptions=o})}catch(o){this.loggerService.setLoggerError(this.constructor.name,"getReasonInactiveOptions",o)}}getStatusOptions(s){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[d.ox.ENTERPRISE_STATUSES],"").then(o=>{this.statusOptions=o,this.statusObj=this.statusOptions.find(i=>i.lookup_name===this.beaconStatusName)})}catch(o){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",o)}}updateRecord(){try{!1===this.reasonActiveDisable&&!1===this.reasonViewenable?this.activedropdown.isValid()&&(this.beaconEditObj.reason_activate=this.reasonActiveObj,this.beaconEditObj.reason_inactivate=this.reasonInactiveObj,this.beaconEditObj.status=this.statusObj,this.beaconManagementService.statusUpdate(this.beaconEditObj,this.recordId).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE"),this.commonService.changeEvent("beacon-mgmt"),this.getRecordById(),this.commonService.redirectToPreviousUrl()},s=>{this.commonErrorCodes(JSON.parse(s))})):this.activedropdown.isValid()&&(this.beaconEditObj.reason_activate=this.reasonActiveObj,this.beaconEditObj.reason_inactivate=this.reasonInactiveObj,this.beaconEditObj.status=this.statusObj,this.beaconManagementService.statusUpdate(this.beaconEditObj,this.recordId).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.getRecordById(),this.commonService.redirectToPreviousUrl()},s=>{this.commonErrorCodes(JSON.parse(s))}))}catch(s){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",s)}}commonErrorCodes(s){const o=JSON.parse(s[d.BU.STATUS]);switch(o){case 500:case 404:default:break;case 409:this.error="COMMON_STATUS_CODES."+o}}static \u0275fac=function(o){return new(o||h)(e.Y36(w.m),e.Y36(k.f),e.Y36(E.F0),e.Y36(I.sK),e.Y36(f.s),e.Y36(J),e.Y36(G.v),e.Y36(E.gz))};static \u0275cmp=e.Xpm({type:h,selectors:[["app-beacon-mgmt-view"]],viewQuery:function(o,i){if(1&o&&e.Gf(je,5),2&o){let c;e.iGM(c=e.CRH())&&(i.activedropdown=c.first)}},features:[e._Bn([J]),e.qOj],decls:54,vars:61,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs","pdl-3","prd-3"],[1,"col-md-4"],["disabled","true","id","beacon-mgt-view-enterprise",3,"label","value"],["disabled","true","id","beacon-mgt-view-beaconname",3,"label","value"],["disabled","true","id","beacon-mgt-view-beacontype",3,"label","value"],["mandatory","false","disabled","true","id","beacon-mgt-view-macaddress",3,"label","value"],["mandatory","false","disabled","true","id","beacon-mgt-view-latitude",3,"label","value"],["disabled","true","id","beacon-mgt-view-longitude",3,"label","value"],["disabled","true","id","beacon-mgt-view-assettype",3,"label","value"],["mandatory","false","disabled","true","id","beacon-mgt-view-asset",3,"label","value"],["mandatory","false","disabled","true","id","beacon-mgt-view-durationinsec",3,"label","value"],["mandatory","false","disabled","true","id","beacon-mgt-view-cooloffinmins",3,"label","value"],["class","col-md-4 order-md-1 order-2",4,"ngIf"],["class","col-md-8 text-end mt-2 order-md-1 order-2",4,"ngIf"],["class","col-md-12 text-end mt-2 mb-2 order-md-1 order-2",4,"ngIf"],[1,"row"],[1,"card"],[1,"card-content"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[1,"col-md-4","order-md-1","order-2"],["disabled","true","id","enterprise-view-reasonactive",3,"label","value"],["disabled","false","mandatory","true","id","enterprise-view-reasoninactive",3,"label","defaultValue","options","valueChange"],["activedropdown",""],["disabled","true","id","enterprise-view-reasoninactive",3,"label","value"],["disabled","false","mandatory","true","id","enterprise-view-reasonactive",3,"label","defaultValue","options","valueChange"],[1,"col-md-8","text-end","mt-2","order-md-1","order-2"],["id","user-create-submit","className","btn btn-primary btn-sm","class","mgr-5","id","enterprise-edit-updateRecordstatus",3,"label","buttonOnClick",4,"ngIf"],["id","enterprise-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick",4,"ngIf"],["id","user-create-submit","className","btn btn-primary btn-sm","id","enterprise-edit-updateRecordstatus",1,"mgr-5",3,"label","buttonOnClick"],["id","enterprise-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"col-md-12","text-end","mt-2","mb-2","order-md-1","order-2"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",13),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",9),e._UZ(22,"app-input",14),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",9),e._UZ(25,"app-input",15),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",9),e._UZ(28,"app-input",16),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",9),e._UZ(31,"app-input",17),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",9),e._UZ(34,"app-input",18),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"div",9),e._UZ(37,"app-input",19),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"div",9),e._UZ(40,"app-input",19),e.ALo(41,"translate"),e.qZA(),e.YNc(42,Pe,3,4,"div",20),e.YNc(43,Je,4,5,"div",20),e.YNc(44,Ve,3,4,"div",20),e.YNc(45,Be,4,5,"div",20),e.YNc(46,Re,4,3,"div",21),e.YNc(47,ie,3,3,"div",22),e.qZA(),e.TgZ(48,"div",23)(49,"div",3)(50,"div",24)(51,"div",25)(52,"p-accordion"),e._UZ(53,"app-recordhistory",26),e.qZA()()()()()()()()()()()),2&o&&(e.xp6(6),e.Q6J("pageName",i.dataJsonObj.pageName)("pageTitle",i.dataJsonObj.pageTitle)("selectedMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==i.dataJsonObj.queryParamsObj?null:i.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,39,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==i.viewData||null==i.viewData.enterprise?null:i.viewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,41,"NEW_VARIABLES.BEACON_NAME")),e.s9C("value",null==i.viewData?null:i.viewData.beacon_name),e.xp6(3),e.s9C("label",e.lcZ(17,43,"NEW_VARIABLES.BEACON_TYPE")),e.s9C("value",i.lookupLanguageTranslations(null==i.viewData||null==i.viewData.beacon_type?null:i.viewData.beacon_type.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(20,45,"NEW_VARIABLES.BEACON_ADDRESS")),e.s9C("value",null==i.viewData?null:i.viewData.beacon_address),e.xp6(3),e.s9C("label",e.lcZ(23,47,"NEW_VARIABLES.LATITUDE")),e.s9C("value",null==i.viewData||null==i.viewData.facility?null:i.viewData.facility.geo_coordinates[0]),e.xp6(3),e.s9C("label",e.lcZ(26,49,"NEW_VARIABLES.LONGITUDE")),e.s9C("value",null==i.viewData||null==i.viewData.facility?null:i.viewData.facility.geo_coordinates[1]),e.xp6(3),e.s9C("label",e.lcZ(29,51,"NEW_VARIABLES.ASSET_TYPE")),e.s9C("value",null==i.viewData||null==i.viewData.facility_type?null:i.viewData.facility_type.facility_type_name),e.xp6(3),e.s9C("label",e.lcZ(32,53,"RESERVATIONS.ASSET")),e.s9C("value",null==i.viewData||null==i.viewData.facility?null:i.viewData.facility.facility_name),e.xp6(3),e.s9C("label",e.lcZ(35,55,"NEW_VARIABLES.DURATION_IN_SECS")),e.s9C("value",null==i.viewData?null:i.viewData.display_duration_in_sec),e.xp6(3),e.s9C("label",e.lcZ(38,57,"NEW_VARIABLES.COOL_OFF_IN_MINS")),e.s9C("value",null==i.viewData?null:i.viewData.cool_off_period_in_min),e.xp6(3),e.s9C("label",e.lcZ(41,59,"COMMON_FIELDS.STATUS")),e.s9C("value",i.lookupLanguageTranslations(null==i.viewData||null==i.viewData.status?null:i.viewData.status.lookup_id)),e.xp6(2),e.Q6J("ngIf",!0===i.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===i.reasonInactiveDisable&&!0===i.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===i.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===i.reasonActiveDisable&&!1===i.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===i.reasonActiveDisable||!1===i.reasonInactiveDisable),e.xp6(1),e.Q6J("ngIf",!0===i.reasonActiveDisable&&!0===i.reasonInactiveDisable),e.xp6(6),e.Q6J("createdBy",null==i.viewData?null:i.viewData.created_by)("lastUpdatedBy",null==i.viewData?null:i.viewData.updated_by)("showrecordhistory",i.dataJsonObj.showrecordhistory)("creationDate",null==i.viewData?null:i.viewData.createdAt)("lastUpdatedDate",null==i.viewData?null:i.viewData.updatedAt))},dependencies:[B.UQ,ge.O5,N.r,F.a,x.k,de.W,z.q,I.X$]})}return h})();class Ge{status;reason_inactivate;reason_activate}const ke=[{path:"",data:{title:"Beacon Management"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",canActivate:[P.P],component:Le,data:{object_type:d.hf.BEACONS,title:"Beacon list",responsibilityParam:d.bP.MENUS+"."+d.w1.ADMIN+"."+d.bP.SUBMENUS+"."+d.w1.BEACON+"."+d.Iu.ENABLED,pageName:d.hf.BEACONS}},{path:"create",canActivate:[P.P],component:be,data:{title:"Beacon Create",responsibilityParam:d.bP.MENUS+"."+d.w1.ADMIN+"."+d.bP.SUBMENUS+"."+d.w1.BEACON+"."+d.In.CREATE,pageName:d.hf.SURVEYS,pageSetting:d.AM.ACTIONS,settingField:d.In.CREATE}},{path:":id/edit",canActivate:[P.P],component:Ae,data:{title:"Beacon Edit",responsibilityParam:d.bP.MENUS+"."+d.w1.ADMIN+"."+d.bP.SUBMENUS+"."+d.w1.BEACON+"."+d.In.EDIT,pageName:d.hf.SURVEYS,pageSetting:d.AM.ACTIONS,settingField:d.In.EDIT}},{path:":id/view",canActivate:[P.P],component:he,data:{title:"Beacon View",responsibilityParam:d.bP.MENUS+"."+d.w1.ADMIN+"."+d.bP.SUBMENUS+"."+d.w1.BEACON+"."+d.In.VIEW,pageName:d.hf.SURVEYS,pageSetting:d.AM.ACTIONS,settingField:d.In.VIEW}},{path:":id/status",canActivate:[P.P],component:he,data:{title:"Beacon View",responsibilityParam:d.bP.MENUS+"."+d.w1.ADMIN+"."+d.bP.SUBMENUS+"."+d.w1.BEACON+"."+d.In.VIEW,pageName:d.hf.SURVEYS,pageSetting:d.AM.ACTIONS,settingField:d.In.VIEW}}]}];let Ye=(()=>{class h{static \u0275fac=function(o){return new(o||h)};static \u0275mod=e.oAB({type:h});static \u0275inj=e.cJS({imports:[E.Bz.forChild(ke),E.Bz]})}return h})();var Qe=r(32137),me=r(24006),He=r(83748),qe=r(93144),We=r(65673);let xe=(()=>{class h{static \u0275fac=function(o){return new(o||h)};static \u0275mod=e.oAB({type:h});static \u0275inj=e.cJS({imports:[B.fx,Ye,ge.ez,Qe.D,me.u5,me.UX,He.v,qe.U$,I.aw,We.Q]})}return h})()}}]);