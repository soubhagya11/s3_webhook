"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9132],{99132:(B,E,o)=>{o.r(E),o.d(E,{EnterprisestoreModule:()=>U});var u=o(36895),c=o(11210),R=o(15861),S=o(71568),n=o(45359),T=o(42786),i=o(32236),e=o(94650),l=o(62510),O=o(11481),h=o(70057),f=o(30958);let I=(()=>{class s{route;loggerService;estoreSettingsService;sanitizer;modalController;navparms;commonService;theme;token;url;useremail;dataJsonObj;objectType;enterpriseId;key;estoreSettingsData=[];getEntEstoreurl;constructor(t,r,a,d,p,g,m){this.route=t,this.loggerService=r,this.estoreSettingsService=a,this.sanitizer=d,this.modalController=p,this.navparms=g,this.commonService=m,this.token=JSON.parse(localStorage.getItem(i.BU.USER)),this.useremail=this.token.email}ngOnInit(){this.objectType=this.route.snapshot.data.object_type,this.enterpriseId=localStorage.getItem(i.BU.SELECTED_ENTERPRISE),this.route.params.subscribe(t=>{this.key=t.name})}getUrl(){try{this.estoreSettingsService.getAll(this.enterpriseId).then(t=>{for(let r=0;r<t.rows.length;r++)this.estoreSettingsData.push(t.rows[r]),this.getEntEstoreurl=this.estoreSettingsData[r].configoption_json.estoreConfigOptions.enterprise_estore_url,this.url=this.sanitizer.bypassSecurityTrustResourceUrl("https://"+this.getEntEstoreurl+"dashboard/?theme="+this.theme+"/&token="+this.useremail+1)},t=>{this.loggerService.setLoggerError(this.constructor.name,"getUrl",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getUrl",t)}}closeModal(){this.modalController.dismiss()}static \u0275fac=function(r){return new(r||s)(e.Y36(l.gz),e.Y36(T.m),e.Y36(n.t),e.Y36(O.H7),e.Y36(h.IN),e.Y36(f.X1),e.Y36(S.v))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-vendordashboard"]],features:[e._Bn([n.t])],decls:2,vars:1,consts:[["width","100%","frameborder","0",2,"height","100vh",3,"src"],[1,"fas","fa-close"]],template:function(r,a){1&r&&e._UZ(0,"iframe",0)(1,"span",1),2&r&&e.Q6J("src",a.url,e.uOi)}})}return s})();var P=o(73951),v=o(54463),C=o(37415);function N(s,j){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"iframe",11),e.NdJ("load",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.dismissLoading())}),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(2),e.Q6J("src",t.dataJsonObj.iframeLoadUrl,e.uOi)}}function b(s,j){1&s&&(e.TgZ(0,"div",9)(1,"div",12),e._uU(2,"Not able to load the User Details "),e.qZA()())}let y=(()=>{class s{estoreSettingsService;loggerService;route;sanitizer;commonService;loadingCtrl;translateService;modalController;platform;configData;enterpriseId;estoreSettingsData=[];getEntEstoreurl;key;loading;objectType;storeUrl;theme;token;useremail;dataJsonObj={};errorObj={};userid;entid;enterpriseName;constructor(t,r,a,d,p,g,m,J,w){this.estoreSettingsService=t,this.loggerService=r,this.route=a,this.sanitizer=d,this.commonService=p,this.loadingCtrl=g,this.translateService=m,this.modalController=J,this.platform=w,this.route.params.subscribe(G=>{this.key=G.key}),this.token=JSON.parse(localStorage.getItem(i.BU.USER))?JSON.parse(localStorage.getItem(i.BU.USER)):"",this.useremail=this.token?.email?this.token.email:"",this.entid=this.token?.enterprise.enterprise_id?this.token.enterprise.enterprise_id:"",this.userid=this.token?.user_id?this.token.user_id:"",this.theme=this.configData?this.configData.estore_theme:"mlg"}ngOnInit(){this.dataJsonObj.pageName=i.hf.ENTERPRISE_ESTORE,this.objectType=this.route.snapshot.data.object_type,this.enterpriseId=localStorage.getItem(i.BU.SELECTED_ENTERPRISE),this.enterpriseName=localStorage.getItem(i.BU.SELECTED_ENTERPRISE_NAME),this.getUrl(),this.route.params.subscribe(t=>{this.key=t.name}),this.dataJsonObj.isLoadIframe=!1}swtchMethod(){const t={catalog:{urlPath:"",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_CATALOG"},enterpriseestore:{urlPath:"",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_CATALOG"},yourorders:{urlPath:"/my-account/orders",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},orders:{urlPath:"/my-account/orders",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},shippingpolicy:{urlPath:"/shipping-policy",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},privacypolicy:{urlPath:"/shipping-policy",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},returnpolicy:{urlPath:"/return-policy",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},"terms&conditions":{urlPath:"/shipping-policy",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},food:{urlPath:"/food",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},registerasvendor:{urlPath:"/dashboard",pageTitleKey:"COMMON_PAGE_TITLES.ESTORE_ORDERS"},vendorlist:{urlPath:"/vendors",pageTitleKey:"CUSTOM_TITLE_FOR_VENDORDASHBOARD"},vendordashboard:{urlPath:"/dashboard",pageTitleKey:"CUSTOM_TITLE_FOR_VENDORDASHBOARD"},products:{urlPath:"/dashboard",pageTitleKey:"CUSTOM_TITLE_FOR_VENDORDASHBOARD"},default:{urlPath:"",pageTitleKey:this.objectType==i.hf.CATALOG?"COMMON_PAGE_TITLES.ESTORE_CATALOG":"COMMON_PAGE_TITLES.ESTORE"}};this.useremail?(this.dataJsonObj.url="//"+this.getEntEstoreurl+(t[this.key]||t.default).urlPath+"/?theme="+this.theme+"&token="+this.useremail+"&ent="+this.enterpriseName,this.loadIframeUrl(this.dataJsonObj.url)):this.dataJsonObj.url=""}loadIframeUrl(t){this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone")?(this.dataJsonObj.isLoadIframe=!1,P.A.open({url:t,windowName:"_blank"}),this.commonService.redirectToPreviousUrl()):(this.dataJsonObj.isLoadIframe=!0,this.dataJsonObj.iframeLoadUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t))}presentStatusPopup(){var t=this;return(0,R.Z)(function*(){return yield(yield t.modalController.create({component:I,cssClass:"fullscreen"})).present()})()}getUrl(){try{this.estoreSettingsService.getAll(this.enterpriseId).then(t=>{for(let r=0;r<t.rows.length;r++)this.estoreSettingsData.push(t.rows[r]),this.getEntEstoreurl=this.estoreSettingsData[r].configoption_json.estoreConfigOptions.enterprise_estore_url,this.swtchMethod()},t=>{this.loggerService.setLoggerError(this.constructor.name,"getUrl",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getUrl",t)}}presentLoading(){try{this.loading=this.loadingCtrl.create({message:"Loading Please Wait..."}).then(t=>{t.present(),t.onDidDismiss().then(r=>{})}),this.dismissLoading()}catch(t){this.loggerService.setLoggerError(this.constructor.name,"presentLoading",t)}}dismissLoading(){try{this.loadingCtrl.dismiss(!0)}catch(t){this.loggerService.setLoggerError(this.constructor.name,"dismissLoading",t)}}static \u0275fac=function(r){return new(r||s)(e.Y36(n.t),e.Y36(T.m),e.Y36(l.gz),e.Y36(O.H7),e.Y36(S.v),e.Y36(h.HT),e.Y36(v.sK),e.Y36(h.IN),e.Y36(f.t4))};static \u0275cmp=e.Xpm({type:s,selectors:[["app-enterprisestore"]],features:[e._Bn([n.t])],decls:10,vars:6,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],["class","row form-bs",4,"ngIf"],[1,"row","form-bs"],["ng-class","isPlatfromIOS? 'ios' : 'md'",1,"col-md-12"],["width","100%","frameborder","0","sandbox","allow-scripts allow-same-origin allow-top-navigation allow-forms allow-popups allow-pointer-lock allow-popups-to-escape-sandbox",1,"pdt-60",2,"height","calc(100vh - 129px)",3,"src","load"],[1,"text-danger","text-center"]],template:function(r,a){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7),e.YNc(8,N,3,1,"div",8),e.YNc(9,b,3,0,"div",8),e.qZA()()()()()()),2&r&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("ngIf",a.dataJsonObj.isLoadIframe),e.xp6(1),e.Q6J("ngIf",!a.dataJsonObj.isLoadIframe))},dependencies:[u.O5,C.q],styles:["@media (min-width: 991px){.main-content-wrapper[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{height:calc(100vh - 50px)!important}}"]})}return s})();const L=[{path:"",redirectTo:"enterpriseestore/catalog/list",canActivate:[c.P],data:{object_type:i.hf.ESTORE,title:"estore",responsibilityParam:i.bP.MENUS+"."+i.w1.ESTORE+"."+i.Iu.ENABLED,pageName:i.hf.ENTERPRISE_ESTORE}},{path:"enterpriseestore/catalog/list",component:y,canActivate:[c.P],data:{object_type:i.hf.CATALOG,title:"Enterprise Store",responsibilityParam:i.bP.MENUS+"."+i.w1.ESTORE+"."+i.Iu.ENABLED,pageName:i.hf.ENTERPRISE_ESTORE}},{path:"enterpriseestore/:name/list",component:y,canActivate:[c.P],data:{object_type:i.hf.ESTORE,title:"Enterprise Store",responsibilityParam:i.bP.MENUS+"."+i.w1.ESTORE+"."+i.Iu.ENABLED,pageName:i.hf.ENTERPRISE_ESTORE}}];let A=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[l.Bz.forChild(L),l.Bz]})}return s})();var M=o(24006),D=o(65673);let U=(()=>{class s{static \u0275fac=function(r){return new(r||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[u.ez,h.Pc,D.Q,v.aw,M.u5,A]})}return s})()}}]);