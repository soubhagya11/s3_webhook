"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4996],{14996:(Ne,N,d)=>{d.r(N),d.d(N,{BillsandpaymentsModule:()=>Te});var I=d(36895),y=d(54463),C=d(24006),k=d(93144),g=d(32174),F=d(65673),b=d(62510),n=d(32236),L=d(15861),A=d(42863),E=d(30578),q=d(28168),G=d(75875),H=d(90313),e=d(94650);let _=(()=>{class o{authService;constructor(a){this.authService=a}getAll(a,s,t,i,l,m,r,h,u,p,c,R){const Y=c||"",U=H.L.isEmpty(R)?"":"&advSearchString="+JSON.stringify(R);return this.authService.getApiCall(!0===h?"api/v1/billsandpayments?skip="+s+"&limit="+t+"&sort="+i+"&type=list&search="+a+"&enterprise.enterprise_id="+l+(m?"&condition="+m:"")+(r?"&invoice_payment_status.lookup_name="+r:"")+p+U+Y:"api/v1/billsandpayments?skip="+s+"&limit="+t+"&sort="+i+"&type=list&search="+a+"&enterprise.enterprise_id="+l+p+U+Y,u)}get(a){return this.authService.getApiCall("api/v1/billsandpayments/"+a,!0)}update(a,s){return new Promise((t,i)=>{this.authService.putApiCall("api/v1/billsandpayments/"+a,s).subscribe(l=>{t(l)},l=>{i(l)})})}delete(a){return new Promise((s,t)=>{this.authService.deleteApiCall("api/v1/billsandpayments/"+a).subscribe(i=>{s(i)},i=>{t(i)})})}static \u0275fac=function(s){return new(s||o)(e.LFG(G.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var v=d(71568),S=d(47561),Q=d(35226),K=d.n(Q),P=d(34942),T=d(42786),z=d(70057),M=d(27601),D=d(37415),W=d(88425);const X=["datatableComponent"];function $(o,Ie){1&o&&e._UZ(0,"div",10)}let x=(()=>{class o extends S.O{columnHeader;actionSheetController;loggerService;router;translateService;billsandpaymentsservice;commonService;listingVariables;route;uiUtils;datatableComponent;actions;activeObj;billsAndPaymentsId;billsandpaymentsListData;billsandpaymentsMobileListData;billsandpaymentsStatsObj=new ee;billspaymentsStatsObj;enterpriseId;eventClickData;forcerefresh;isFilterClicked=!1;mobileroutesArray=[];noDuplicates=void 0;show=!0;searchString;statsObj;statsbillsandpaymentslistData;status;statusObjs;tableColumnheaders;eventChange;pageTitle;dataJsonObj={};constructor(a,s,t,i,l,m,r,h,u,p){super(u,r),this.columnHeader=a,this.actionSheetController=s,this.loggerService=t,this.router=i,this.translateService=l,this.billsandpaymentsservice=m,this.commonService=r,this.listingVariables=h,this.route=u,this.uiUtils=p,this.route.queryParams.subscribe(c=>{this.dataJsonObj.queryParamsObj={defaultView:c.defaultView,selectedMenuId:c.selectedMenuId,selectedSubMenuId:c.selectedSubMenuId}}),this.route.params.subscribe(c=>{this.enterpriseId=c.parentId})}ngOnInit(){this.initializeComponent(),document.getElementsByTagName("body")}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=n.hf.BILLS_AND_PAYMENTS,this.dataJsonObj.htmlPageRolesEnumValuesJson={pageEnum:n.hf,pageSettingEnum:n.AM,pageSettingFieldsEnum:n.In},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS",value:"",showSubMenuDisplayName:!0}],this.commonService.trackView(n.sn.BILLSANDPAYMENTS_LIST),this.commonService.currentEvent.subscribe(a=>{"billsandpayments"===a&&(this.forcerefresh=!0)}),this.tableColumnheaders=this.columnHeader.getBillsAndPayments(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.actions={EDIT:this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.EDIT),VIEW:this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.VIEW),DELETE:this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.DELETE)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:n.gL.URL,redirectURL:"",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.FILTERS),this.statsbillsandpaymentslistData=P.h.getBillsAndPaymentsListStats(this.isFilterClicked,this.eventClickData)}getAllRecords(){try{this.showSpinner();const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.status=this.statsObj,this.activeObj=this.statusObjs;const s=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.billsandpaymentsservice.getAll(this.searchString,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.enterpriseId,this.status,this.activeObj,this.isFilterClicked,this.forcerefresh,a,s,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(this.hideSpinner(),this.forcerefresh&&(this.billsandpaymentsMobileListData=[]),t.rows.length>0){this.billsandpaymentsMobileListData&&this.billsandpaymentsMobileListData.length>0||(this.billsandpaymentsMobileListData=[]);for(let i=0;i<t.rows.length;i++)t.rows[i].display_grid_title=t.rows[i].enterprise.short_name,t.rows[i].imageName=t.rows[i].enterprise.short_name,t.rows[i].enterprise.short_name='<a class="disabled" id="enterprise.short_name'+t.rows[i]._id+'" href="enterprises/enterprises/'+t.rows[i].enterprise.enterprise_id+'/view">'+t.rows[i].enterprise.short_name,t.rows[i].amount_due=this.commonService.numberWithCommas(t.rows[i].amount_due,2),t.rows[i].invoice_period_start_date=this.commonService.dbTimezoneFormat(t.rows[i].invoice_period_start_date),t.rows[i].invoice_period_end_date=this.commonService.dbTimezoneFormat(t.rows[i].invoice_period_end_date),t.rows[i].invoice_date=this.commonService.dbTimezoneFormat(t.rows[i].invoice_date),t.rows[i].txn_date=this.commonService.dbTimezoneFormat(t.rows[i].txn_date),this.billsandpaymentsMobileListData=this.billsandpaymentsMobileListData.filter(l=>l._id!==t.rows[i]._id),this.billsandpaymentsMobileListData.push(t.rows[i]);t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.billsandpaymentsListData=this.billsandpaymentsListData.concat(t.rows)):this.billsandpaymentsListData=t.rows}else this.billsandpaymentsListData=[],this.billsandpaymentsMobileListData=[];this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS=t.totalCount,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_ACTIVE=t.ActiveCount,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_CLOSED=t.InActiveCount,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_60_DAYS=t.Activity60,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_120_DAYS=t.Activity120,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_365_DAYS=t.Activity365,this.statsDisabled(this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_ACTIVE,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_CLOSED,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_60_DAYS,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_120_DAYS,this.billsandpaymentsStatsObj.TOTAL_BILLS_AND_PAYMENTS_365_DAYS)},t=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)})}catch(a){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.billsandpaymentsMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}getSearchResult(a){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.datatableComponent.reset(),this.getAllRecords()}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.datatableComponent.reset(),this.getAllRecords()}onActionClicked(a){this.billsAndPaymentsId=a.data._id,a.action===n.A0.EDIT?this.router.navigate(["/enterprises/billsandpayments/"+this.billsAndPaymentsId+"/edit"]):a.action===n.A0.VIEW?this.commonService.redirectToUrl(["..",a.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):a.action===n.A0.DELETE&&this.delete(this.billsAndPaymentsId)}delete(a){try{K().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_RECORD_DELETE"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(s=>{s.value?this.billsandpaymentsservice.delete(a).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_DELETE"),this.getAllRecords()}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"delete",t)}):this.getAllRecords()})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"delete",s)}}getRedirectBillsandPayments(a){!0===this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.VIEW)&&this.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}mobileEventAction(a){this.mobileroutesArray=[],this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.DELETE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_DELETE"),handler:()=>{this.delete(a._id)}}),this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["/enterprises/billsandpayments/"+a._id+"/edit"])}}),this.presentActionSheet(a)}presentActionSheet(a){var s=this;return(0,L.Z)(function*(){yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileroutesArray})).present()})()}toggle(){this.show=!this.show}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}statsDisabled(a,s,t,i,l,m){try{this.billspaymentsStatsObj=[],this.billspaymentsStatsObj.push(0!==a?{value1:"TOTAL_BILLS_AND_PAYMENTS"}:{value1:""}),this.billspaymentsStatsObj.push(0!==s?{value2:"TOTAL_BILLS_AND_PAYMENTS_ACTIVE"}:{value2:""}),this.billspaymentsStatsObj.push(0!==t?{value3:"TOTAL_BILLS_AND_PAYMENTS_CLOSED"}:{value3:""}),this.billspaymentsStatsObj.push(0!==i?{value4:"TOTAL_BILLS_AND_PAYMENTS_60_DAYS"}:{value4:""}),this.billspaymentsStatsObj.push(0!==l?{value5:"TOTAL_BILLS_AND_PAYMENTS_120_DAYS"}:{value5:""}),this.billspaymentsStatsObj.push(0!==m?{value6:"TOTAL_BILLS_AND_PAYMENTS_365_DAYS"}:{value6:""}),this.statsbillsandpaymentslistData=P.h.getBillsAndPaymentsListStatsDisabled(this.isFilterClicked,"",this.billspaymentsStatsObj)}catch(r){this.loggerService.setLoggerError(this.constructor.name,"statsDisabled",r)}}statsData(a){try{this.isFilterClicked=!0,this.statsObj=a.value,this.forcerefresh=!0,this.billsandpaymentsMobileListData=[],this.listingVariables.pageNumbers=1,this.datatableComponent.reset(),this.getAllRecords()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"statsData",s)}}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a||(this.dataJsonObj.selectedFilter="")}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(s){return new(s||o)(e.Y36(A.Y),e.Y36(z.BX),e.Y36(T.m),e.Y36(b.F0),e.Y36(y.sK),e.Y36(_),e.Y36(v.v),e.Y36(E.v),e.Y36(b.gz),e.Y36(M.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-billsandpayments-list"]],viewQuery:function(s,t){if(1&s&&e.Gf(X,5),2&s){let i;e.iGM(i=e.CRH())&&(t.datatableComponent=i.first)}},features:[e._Bn([E.v,A.Y]),e.qOj],decls:10,vars:34,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],[1,"card-body","pdt-0","pdb-0"],["class","statistics-body d-none d-lg-block",4,"ngIf"],["id","tagid",1,"",3,"actions","header","totalRecords","totalPages","paginator","mobileListData","data","expand","statsDisplay","statData","statusDisplay","statsShow","showRights","statsSearch","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"],[1,"statistics-body","d-none","d-lg-block"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(l){return t.onHeaderItemClick(l)}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,$,1,0,"div",5),e.TgZ(6,"app-datatable",6,7),e.NdJ("actionClicked",function(l){return t.onActionClicked(l)})("itemClickEvent",function(l){return t.getRedirectBillsandPayments(l)})("redirectionEvent",function(l){return t.mobileEventAction(l)})("changeStats",function(l){return t.statsData(l)})("loadPageData",function(l){return t.loadPageData(l)}),e.qZA(),e.TgZ(8,"div",8)(9,"app-page-actions",9),e.NdJ("selectedAction",function(l){return t.onPageLevelActionClicked(l)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("ngIf",t.show&&t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.BILLS_AND_PAYMENTS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS)),e.xp6(1),e.Q6J("actions",t.actions)("header",t.tableColumnheaders)("totalRecords",t.listingVariables.totalRecords)("totalPages",t.listingVariables.totalpages)("paginator",!0)("mobileListData",t.billsandpaymentsMobileListData)("data",t.billsandpaymentsListData)("expand",!1)("statsDisplay",t.statsbillsandpaymentslistData)("statData",t.billsandpaymentsStatsObj)("statusDisplay",t.statsObj)("statsShow",t.show)("showRights",t.roleRightsValidationByPage(t.dataJsonObj.htmlPageRolesEnumValuesJson.pageEnum.BILLS_AND_PAYMENTS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingEnum.ACTIONS,t.dataJsonObj.htmlPageRolesEnumValuesJson.pageSettingFieldsEnum.STATS))("statsSearch",t.searchString)("listingVariables",t.listingVariables)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",t.dataJsonObj.showSpinner)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList))},dependencies:[I.O5,q.n,D.q,W.y]})}return o})();class ee{TOTAL_BILLS_AND_PAYMENTS;TOTAL_BILLS_AND_PAYMENTS_ACTIVE;TOTAL_BILLS_AND_PAYMENTS_CLOSED;TOTAL_BILLS_AND_PAYMENTS_60_DAYS;TOTAL_BILLS_AND_PAYMENTS_120_DAYS;TOTAL_BILLS_AND_PAYMENTS_365_DAYS}var w=d(71238),f=d(46448),B=d(10805),j=d(2387),V=d(56368),Z=d(11735),J=d(68896);let te=(()=>{class o extends S.O{columnsheaders;loggerService;navigationService;router;sharedService;translateService;billsandpaymentsservice;commonService;route;actionType;attachmentColumnHeaders;attachmentsData;billsAndPaymentsViewData;createdBy;creationDate;endDate;invoiceDate;lastUpdatedDate;objectType;pageTitle;paidDate;recordData;recordId;spinner=!0;startDate;totalRecords;updatedBy;dataJsonObj={};constructor(a,s,t,i,l,m,r,h,u){super(u,h),this.columnsheaders=a,this.loggerService=s,this.navigationService=t,this.router=i,this.sharedService=l,this.translateService=m,this.billsandpaymentsservice=r,this.commonService=h,this.route=u,this.route.queryParams.subscribe(p=>{this.dataJsonObj.queryParamsObj={defaultView:p.defaultView,selectedMenuId:p.selectedMenuId,selectedSubMenuId:p.selectedSubMenuId}}),this.route.params.subscribe(p=>{this.recordId=p.id,this.recordData=this.recordId.split("$")})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=n.hf.BILLS_AND_PAYMENTS,this.objectType=this.route.snapshot.data.object_type,this.commonService.trackView(n.sn.BILLSANDPAYMENTS_VIEW),this.getRecordById(),this.actionType=n.In.VIEW,this.attachmentColumnHeaders=this.columnsheaders.getAttachmentsColumnHeaders(),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.RECORD_HISTORY),this.getAttachmentsList(),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(n.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=n.hf.BILLS_AND_PAYMENTS,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(a){var s=this;return(0,L.Z)(function*(){for(let t of a)s.dataJsonObj[t.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.enterpriseId,t.folderName,t.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(t=>t.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(){try{this.billsandpaymentsservice.get(this.recordData).subscribe(a=>{this.billsAndPaymentsViewData=a,this.startDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_start_date),this.endDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_end_date),this.invoiceDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_date),this.paidDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.txn_date),this.createdBy=this.billsAndPaymentsViewData.created_by,this.updatedBy=this.billsAndPaymentsViewData.updated_by,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS",value:this.billsAndPaymentsViewData,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}]}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",a)}}getAttachmentsList(){try{this.commonService.getAttachmentsList(this.objectType,this.recordId,"","","").then(a=>{if(this.sharedService.emitChangeLoaders(!1),a.rows.length>0)for(let s=0;s<a.rows.length;s++)a.rows[s].user_name=a.rows[s].f_name+", "+a.rows[s].l_name,a.rows[s].last_uploaded_date=this.commonService.dbTimezoneFormat(a.rows[s].last_uploaded_date),this.attachmentsData=a.rows;else this.attachmentsData=[];this.totalRecords=a.totalCount,this.spinner=!1},a=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)}}cancelBtn(){this.commonService.redirectToPreviousUrl()}static \u0275fac=function(s){return new(s||o)(e.Y36(A.Y),e.Y36(T.m),e.Y36(f.f),e.Y36(b.F0),e.Y36(w.F),e.Y36(y.sK),e.Y36(_),e.Y36(v.v),e.Y36(b.gz))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-billsandpayments-view"]],features:[e._Bn([A.Y]),e.qOj],decls:85,vars:106,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","billsandpayments-view-enterprisename",3,"label","value"],["disabled","true","id","billsandpayments-view-invoicenumber",3,"label","value"],["disabled","true","id","billsandpayments-view-invoicedate",3,"label","value"],["disabled","true","id","billsandpayments-view-periodtype",3,"label","value"],["disabled","true","id","billsandpayments-view-startdate",3,"label","value"],["disabled","true","id","billsandpayments-view-enddate",3,"label","value"],["disabled","true","id","billsandpayments-view-amountdue",3,"label","value"],["id","billsandpayments-view-paymentstatus","disabled","true",3,"label","value"],[1,"col-md-4","text-end","mt-2"],["id","billsandpayments-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["id","billsandpayments-view-orderid","disabled","true",3,"label","value"],["disabled","true","id","billsandpayments-view-mid",3,"label","value"],["disabled","true","id","billsandpayments-view-txnid",3,"label","value"],["id","billsandpayments-view-txnamount","disabled","true",3,"label","value"],["id","billsandpayments-view-paymentmode","disabled","true",3,"label","value"],["id","billsandpayments-view-currency","disabled","true",3,"label","value"],["disabled","true","id","billsandpayments-view-txndate",3,"label","value"],["id","billsandpayments-view-respcode","disabled","true",3,"label","value"],["id","billsandpayments-view-respmsg","disabled","true",3,"label","value"],["id","billsandpayments-view-gateway","disabled","true",3,"label","value"],["id","billsandpayments-view-banktxnid","disabled","true",3,"label","value"],["id","billsandpayments-view-status","disabled","true",3,"label","value"],["id","viewattachmentId"],[3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",13),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",9),e._UZ(22,"app-input",14),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",9),e._UZ(25,"app-input",15),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",9),e._UZ(28,"app-input",16),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",9),e._UZ(31,"app-input",17),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",18)(34,"app-button",19),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(35,"translate"),e.qZA()()()()()(),e.TgZ(36,"div",3)(37,"div",20)(38,"div",21)(39,"p-accordion",22)(40,"p-accordionTab",23)(41,"p-header",24)(42,"span"),e._uU(43),e.ALo(44,"translate"),e.qZA()(),e.TgZ(45,"div",8)(46,"div",9),e._UZ(47,"app-input",25),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"div",9),e._UZ(50,"app-input",26),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"div",9),e._UZ(53,"app-input",27),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"div",9),e._UZ(56,"app-input",28),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"div",9),e._UZ(59,"app-input",29),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"div",9),e._UZ(62,"app-input",30),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"div",9),e._UZ(65,"app-input",31),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"div",9),e._UZ(68,"app-input",32),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"div",9),e._UZ(71,"app-input",33),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"div",9),e._UZ(74,"app-input",34),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"div",9),e._UZ(77,"app-input",35),e.ALo(78,"translate"),e.qZA(),e.TgZ(79,"div",9),e._UZ(80,"app-input",36),e.ALo(81,"translate"),e.qZA()()(),e.TgZ(82,"p-accordion",37),e._UZ(83,"app-attachment",38),e.qZA(),e._UZ(84,"app-recordhistory",39),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,62,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,64,"BANK_DETAILS.INVOICE_NUMBER")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.invoice_number),e.xp6(3),e.s9C("label",e.lcZ(17,66,"BILLS_AND_PAYMENTS.INVOICE_DATE")),e.s9C("value",t.invoiceDate),e.xp6(3),e.s9C("label",e.lcZ(20,68,"BILLS_AND_PAYMENTS.PERIOD_TYPE")),e.Q6J("value",t.lookupLanguageTranslations(null==t.billsAndPaymentsViewData||null==t.billsAndPaymentsViewData.invoice_period_type?null:t.billsAndPaymentsViewData.invoice_period_type.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(23,70,"BILLS_AND_PAYMENTS.PERIOD_START_DATE")),e.s9C("value",t.startDate),e.xp6(3),e.s9C("label",e.lcZ(26,72,"BILLS_AND_PAYMENTS.PERIOD_END_DATE")),e.s9C("value",t.endDate),e.xp6(3),e.s9C("label",e.lcZ(29,74,"BILLS_AND_PAYMENTS.AMOUNT_DUE")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.amount_due),e.xp6(3),e.s9C("label",e.lcZ(32,76,"COMMON_FIELDS.STATUS")),e.Q6J("value",t.lookupLanguageTranslations(null==t.billsAndPaymentsViewData||null==t.billsAndPaymentsViewData.invoice_payment_status?null:t.billsAndPaymentsViewData.invoice_payment_status.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(35,78,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(44,80,"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS")),e.xp6(4),e.s9C("label",e.lcZ(48,82,"BANK_DETAILS.ORDER_ID")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.order_id),e.xp6(3),e.s9C("label",e.lcZ(51,84,"BANK_DETAILS.MERCHANT_IDENTIFIER")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.mid),e.xp6(3),e.s9C("label",e.lcZ(54,86,"BANK_DETAILS.TXN_ID")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.trx_id),e.xp6(3),e.s9C("label",e.lcZ(57,88,"BANK_DETAILS.TXN_AMOUNT")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.txn_amount),e.xp6(3),e.s9C("label",e.lcZ(60,90,"BANK_DETAILS.PAYMENT_MODE")),e.Q6J("value",t.lookupLanguageTranslations(null==t.billsAndPaymentsViewData||null==t.billsAndPaymentsViewData.payment_mode?null:t.billsAndPaymentsViewData.payment_mode.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(63,92,"COMMON_FIELDS.CURRENCY")),e.Q6J("value",t.lookupLanguageTranslations(null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.invoice_currency_code.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(66,94,"BANK_DETAILS.TXN_DATE")),e.s9C("value",t.paidDate),e.xp6(3),e.s9C("label",e.lcZ(69,96,"BANK_DETAILS.RESP_CODE")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.respcode),e.xp6(3),e.s9C("label",e.lcZ(72,98,"BANK_DETAILS.RESP_MSG")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.respmsg),e.xp6(3),e.s9C("label",e.lcZ(75,100,"BANK_DETAILS.GATEWAY_NAME")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.gatewayname),e.xp6(3),e.s9C("label",e.lcZ(78,102,"BANK_DETAILS.BANK_TXN_ID")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.banktrx_id),e.xp6(3),e.s9C("label",e.lcZ(81,104,"COMMON_FIELDS.STATUS")),e.Q6J("value",t.lookupLanguageTranslations(null==t.billsAndPaymentsViewData||null==t.billsAndPaymentsViewData.invoice_payment_status?null:t.billsAndPaymentsViewData.invoice_payment_status.lookup_id)),e.xp6(3),e.Q6J("header",t.attachmentColumnHeaders)("data",t.attachmentsData)("totalRecords",t.totalRecords)("objectType",t.objectType)("objectId",t.recordId)("actionType",t.actionType)("spinner",t.spinner),e.xp6(1),e.Q6J("createdBy",t.createdBy)("lastUpdatedBy",t.updatedBy)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.createdAt)("lastUpdatedDate",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.updatedAt))},dependencies:[g.UQ,g.US,B.h4,j.r,V.a,Z.W,J.Y,D.q,y.X$]})}return o})();var ae=d(38077),se=d(9851),ie=d(92634);const ne=["txnAmountInput"],le=["bankTxId"],de=["currencyDropdown"],re=["gateWay"],oe=["midInput"],pe=["orderIdInput"],ue=["paymentmodeDropdown"],me=["respCode"],ce=["respMsg"],he=["txnDate"],be=["txnInput"];let ye=(()=>{class o extends S.O{_sharedService;columnsheaders;loggerService;navigationService;router;translateService;billsandpaymentsservice;commonService;route;uiUtils;txnAmountInput;bankTxId;currencyDropdown;gateWay;midInput;orderIdInput;paymentmodeDropdown;respCode;respMsg;txnDate;txnInput;actionType;attachmentColumnHeaders;attachmentsData;bankTrxId;billsAndPaymentObj=new Ae;billsAndPaymentsViewData;createdBy;creationDate;currency;currencyObj;currencyOptions;endDate;enterpriseId;enterpriseObj;gatewayName;invoiceDate;invoicestatus;lastUpdatedDate;merchantIdentifier;objectType;orderId;pageTitle;paidDate;paymentMode;paymentModeObj;paymentOptions;periodTypeObj;recordData;recordId;rescode;resmsg;spinner=!0;startDate;statusObj;totalRecords;txnAmount;txnId;updatedBy;dataJsonObj={};constructor(a,s,t,i,l,m,r,h,u,p){super(u,h),this._sharedService=a,this.columnsheaders=s,this.loggerService=t,this.navigationService=i,this.router=l,this.translateService=m,this.billsandpaymentsservice=r,this.commonService=h,this.route=u,this.uiUtils=p,this.route.params.subscribe(c=>{this.recordId=c.id,this.recordData=this.recordId.split("$")})}ngOnInit(){this.initializeComponent(),document.getElementsByTagName("body")}initializeComponent(){this.dataJsonObj.pageName=n.hf.BILLS_AND_PAYMENTS,this.commonService.trackView(n.sn.BILLSANDPAYMENTS_EDIT),this.objectType=this.route.snapshot.data.object_type,this.getRecordById(),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(n.hf.BILLS_AND_PAYMENTS,n.AM.ACTIONS,n.In.RECORD_HISTORY),this.actionType=n.In.EDIT,this.attachmentColumnHeaders=this.columnsheaders.getAttachmentsColumnHeaders(),this.getAttachmentsList()}getRecordById(){try{this.billsandpaymentsservice.get(this.recordData).subscribe(a=>{this.billsAndPaymentsViewData=a,this.orderId=this.billsAndPaymentsViewData.order_id,this.merchantIdentifier=this.billsAndPaymentsViewData.mid,this.txnId=this.billsAndPaymentsViewData.trx_id,this.txnAmount=this.billsAndPaymentsViewData.txn_amount,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS",value:this.orderId,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.billsAndPaymentsViewData.payment_mode&&(this.paymentMode=this.billsAndPaymentsViewData.payment_mode.lookup_id),this.billsAndPaymentsViewData.invoice_currency_code&&(this.currency=this.billsAndPaymentsViewData.invoice_currency_code.lookup_id),this.rescode=this.billsAndPaymentsViewData.respcode,this.resmsg=this.billsAndPaymentsViewData.respmsg,this.gatewayName=this.billsAndPaymentsViewData.gatewayname,this.bankTrxId=this.billsAndPaymentsViewData.banktrx_id,this.enterpriseId=this.billsAndPaymentsViewData.enterprise.enterprise_id,this.enterpriseObj=this.billsAndPaymentsViewData.enterprise,this.periodTypeObj=this.billsAndPaymentsViewData.invoice_period_type,this.statusObj=this.billsAndPaymentsViewData.invoice_payment_status,this.startDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_start_date),this.endDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_period_end_date),this.invoiceDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.invoice_date),this.paidDate=this.commonService.dbTimezoneFormat(this.billsAndPaymentsViewData.txn_date),this.createdBy=this.billsAndPaymentsViewData.created_by,this.updatedBy=this.billsAndPaymentsViewData.updated_by,this.invoicestatus=this.billsAndPaymentsViewData.invoice_payment_status?this.lookupLanguageTranslations(this.billsAndPaymentsViewData.invoice_payment_status.lookup_id):"",this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(s=>{this.dataJsonObj.lookupCodesListJSON=s,this.getCurrency(),this.getPaymentModes()})},a=>{this.loggerService.setLoggerError(this.constructor.name,"getRecordById",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",a)}}cancelBtn(){this.commonService.redirectToPreviousUrl()}changeOrderNumber(a){this.orderId=a.value}changeTxn(a){this.txnId=a.value}changeMid(a){this.merchantIdentifier=a.value}changeTxnAmount(a){this.txnAmount=a.value}changePaymentMode(a){this.paymentMode=a.value}changeCurrency(a){this.currency=a.value}getPaymentModes(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.BILLING_CYCLES],"").then(a=>{this.paymentOptions=a}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getPaymentModes",a)})}changePaymentModeOptions(a){a.value&&(this.paymentMode=a.value,this.paymentModeObj=this.paymentOptions.find(s=>s.ID===parseInt(this.paymentMode,10)))}getCurrency(){this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[n.ox.CURRENCIES],"").then(a=>{this.currencyOptions=a,this.currencyObj=a[0]}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getCurrency",a)})}changeCurrencyOptions(a){a.value&&(this.currency=a.value,this.currencyObj=this.currencyOptions.find(s=>s.ID===parseInt(this.currency,10)))}changeTrxAmount(a){this.txnAmount=a.value}changeRescode(a){this.rescode=a.value}changeResmsg(a){this.resmsg=a.value}changeGatewayName(a){this.gatewayName=a.value}changeBankTrxId(a){this.bankTrxId=a.value}changeTrxDate(a){this.paidDate=a.value}updateRecord(){try{this.orderIdInput.isValid()&&this.midInput.isValid()&&this.txnInput.isValid()&&this.txnAmountInput.isValid()&&this.paymentmodeDropdown.isValid()&&this.currencyDropdown.isValid()&&this.txnDate.isValid()&&this.respCode.isValid()&&this.respMsg.isValid()&&this.gateWay.isValid()&&this.bankTxId.isValid()&&(this.billsAndPaymentObj.enterprise=this.enterpriseObj,this.billsAndPaymentObj.invoice_period_type=this.periodTypeObj,this.billsAndPaymentObj.invoice_currency_code=this.currencyObj,this.billsAndPaymentObj.invoice_payment_status=this.statusObj,this.billsAndPaymentObj.invoice_number=this.billsAndPaymentsViewData.invoice_number,this.billsAndPaymentObj.invoice_period_start_date=this.startDate,this.billsAndPaymentObj.invoice_period_end_date=this.endDate,this.billsAndPaymentObj.invoice_date=this.invoiceDate,this.billsAndPaymentObj.respcode=this.rescode,this.billsAndPaymentObj.respmsg=this.resmsg,this.billsAndPaymentObj.amount_due=this.billsAndPaymentsViewData.amount_due,this.billsAndPaymentObj.order_id=this.orderId,this.billsAndPaymentObj.mid=this.merchantIdentifier,this.billsAndPaymentObj.trx_id=this.txnId,this.billsAndPaymentObj.txn_amount=this.txnAmount,this.billsAndPaymentObj.payment_mode=this.paymentModeObj,this.billsAndPaymentObj.txn_date=this.paidDate,this.billsAndPaymentObj.banktrx_id=this.bankTrxId,this.billsAndPaymentObj.gatewayname=this.gatewayName,this.billsandpaymentsservice.update(this.recordData,this.billsAndPaymentObj).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"updateRecord",a)}))}catch(a){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",a)}}getAttachmentsList(){try{this.commonService.getAttachmentsList(this.objectType,this.recordId,"","","").then(a=>{if(this._sharedService.emitChangeLoaders(!1),a.rows.length>0)for(let s=0;s<a.rows.length;s++)a.rows[s].user_name=a.rows[s].f_name+", "+a.rows[s].l_name,a.rows[s].last_uploaded_date=this.commonService.dbTimezoneFormat(a.rows[s].last_uploaded_date),this.attachmentsData=a.rows;else this.attachmentsData=[];this.totalRecords=a.totalCount,this.spinner=!1}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)}}static \u0275fac=function(s){return new(s||o)(e.Y36(w.F),e.Y36(A.Y),e.Y36(T.m),e.Y36(f.f),e.Y36(b.F0),e.Y36(y.sK),e.Y36(_),e.Y36(v.v),e.Y36(b.gz),e.Y36(M.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-billsandpayments-edit"]],viewQuery:function(s,t){if(1&s&&(e.Gf(ne,5),e.Gf(le,5),e.Gf(de,5),e.Gf(re,5),e.Gf(oe,5),e.Gf(pe,5),e.Gf(ue,5),e.Gf(me,5),e.Gf(ce,5),e.Gf(he,5),e.Gf(be,5)),2&s){let i;e.iGM(i=e.CRH())&&(t.txnAmountInput=i.first),e.iGM(i=e.CRH())&&(t.bankTxId=i.first),e.iGM(i=e.CRH())&&(t.currencyDropdown=i.first),e.iGM(i=e.CRH())&&(t.gateWay=i.first),e.iGM(i=e.CRH())&&(t.midInput=i.first),e.iGM(i=e.CRH())&&(t.orderIdInput=i.first),e.iGM(i=e.CRH())&&(t.paymentmodeDropdown=i.first),e.iGM(i=e.CRH())&&(t.respCode=i.first),e.iGM(i=e.CRH())&&(t.respMsg=i.first),e.iGM(i=e.CRH())&&(t.txnDate=i.first),e.iGM(i=e.CRH())&&(t.txnInput=i.first)}},features:[e._Bn([A.Y]),e.qOj],decls:98,vars:110,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","billsandpayments-edit-enterprisename",3,"label","value"],["disabled","true","id","billsandpayments-edit-invoicenumber",3,"label","value"],["disabled","true","id","billsandpayments-edit-invoicedate",3,"label","value"],["disabled","true","id","billsandpayments-edit-periodtype",3,"label","value"],["disabled","true","id","billsandpayments-edit-startdate",3,"label","value"],["disabled","true","id","billsandpayments-edit-enddate",3,"label","value"],["disabled","true","id","billsandpayments-edit-amountdue",3,"label","value"],["disabled","true","id","billsandpayments-edit-paymentstatus",3,"label","value"],[1,"col-md-4","text-end","mt-2"],["id","billsandpayments-edit-updateRecord","className","btn btn-primary btn-sm",1,"mgr-5",3,"label","buttonOnClick"],["id","billsandpayments-edit-cancel","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],[3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["id","billsandpayments-edit-orderid","disabled","false","mandatory","true",3,"label","value","valueChange"],["orderIdInput",""],["disabled","false","mandatory","true","id","billsandpayments-edit-mid",3,"label","value","valueChange"],["midInput",""],["disabled","false","mandatory","true","id","billsandpayments-edit-txnid",3,"label","value","valueChange"],["txnInput",""],["id","billsandpayments-edit-txnamount","disabled","false","mandatory","true",3,"label","value","valueChange"],["txnAmountInput",""],["mandatory","true","id","billsandpayments-edit-paymentmode",3,"label","options","defaultValue","valueChange"],["paymentmodeDropdown",""],["mandatory","true","id","billsandpayments-edit-currency",3,"label","options","defaultValue","valueChange"],["currencyDropdown",""],["id","billsandpayments-edit-txndate","mandatory","true","dateformat","dd-MMM-yyyy","disabled","false",3,"placeholder","defaultDate","dateChangeValue"],["txnDate",""],["id","billsandpayments-edit-respcode","disabled","false","mandatory","true",3,"label","value","maxlength","valueChange"],["respCode",""],["id","billsandpayments-edit-respmsg","disabled","false","mandatory","true",3,"label","value","valueChange"],["respMsg",""],["disabled","false","mandatory","true","id","billsandpayments-edit-gateway",3,"label","value","valueChange"],["gateWay",""],["disabled","false","mandatory","true","id","billsandpayments-edit-banktxnid",3,"label","value","valueChange"],["bankTxId",""],["disabled","true","id","billsandpayments-edit-status",3,"label","value"],["id","viewattachmentId"],[3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",13),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",9),e._UZ(22,"app-input",14),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",9),e._UZ(25,"app-input",15),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",9),e._UZ(28,"app-input",16),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",9),e._UZ(31,"app-input",17),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",18)(34,"app-button",19),e.NdJ("buttonOnClick",function(){return t.updateRecord()}),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"app-button",20),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(37,"translate"),e.qZA()()()()()(),e.TgZ(38,"div",3)(39,"div",21)(40,"div",22)(41,"p-accordion",23)(42,"p-accordionTab",24)(43,"p-header",25)(44,"span"),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"div",8)(48,"div",9)(49,"app-inputnumber",26,27),e.NdJ("valueChange",function(l){return t.changeOrderNumber(l)}),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"div",9)(53,"app-input",28,29),e.NdJ("valueChange",function(l){return t.changeMid(l)}),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"div",9)(57,"app-input",30,31),e.NdJ("valueChange",function(l){return t.changeTxn(l)}),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",9)(61,"app-inputnumber",32,33),e.NdJ("valueChange",function(l){return t.changeTxnAmount(l)}),e.ALo(63,"translate"),e.qZA()(),e.TgZ(64,"div",9)(65,"app-dropdown-singleselect",34,35),e.NdJ("valueChange",function(l){return t.changePaymentModeOptions(l)}),e.ALo(67,"translate"),e.qZA()(),e.TgZ(68,"div",9)(69,"app-dropdown-singleselect",36,37),e.NdJ("valueChange",function(l){return t.changeCurrencyOptions(l)}),e.ALo(71,"translate"),e.qZA()(),e.TgZ(72,"div",9)(73,"app-datepicker",38,39),e.NdJ("dateChangeValue",function(l){return t.changeTrxDate(l)}),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"div",9)(77,"app-inputnumber",40,41),e.NdJ("valueChange",function(l){return t.changeRescode(l)}),e.ALo(79,"translate"),e.qZA()(),e.TgZ(80,"div",9)(81,"app-input",42,43),e.NdJ("valueChange",function(l){return t.changeResmsg(l)}),e.ALo(83,"translate"),e.qZA()(),e.TgZ(84,"div",9)(85,"app-input",44,45),e.NdJ("valueChange",function(l){return t.changeGatewayName(l)}),e.ALo(87,"translate"),e.qZA()(),e.TgZ(88,"div",9)(89,"app-input",46,47),e.NdJ("valueChange",function(l){return t.changeBankTrxId(l)}),e.ALo(91,"translate"),e.qZA()(),e.TgZ(92,"div",9),e._UZ(93,"app-input",48),e.ALo(94,"translate"),e.qZA()()(),e.TgZ(95,"p-accordion",49),e._UZ(96,"app-attachment",50),e.qZA(),e._UZ(97,"app-recordhistory",51),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,64,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==t.billsAndPaymentsViewData||null==t.billsAndPaymentsViewData.enterprise?null:t.billsAndPaymentsViewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,66,"BANK_DETAILS.INVOICE_NUMBER")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.invoice_number),e.xp6(3),e.s9C("label",e.lcZ(17,68,"BILLS_AND_PAYMENTS.INVOICE_DATE")),e.s9C("value",t.invoiceDate),e.xp6(3),e.s9C("label",e.lcZ(20,70,"BILLS_AND_PAYMENTS.PERIOD_TYPE")),e.Q6J("value",t.lookupLanguageTranslations(null==t.billsAndPaymentsViewData||null==t.billsAndPaymentsViewData.invoice_period_type?null:t.billsAndPaymentsViewData.invoice_period_type.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(23,72,"BILLS_AND_PAYMENTS.PERIOD_START_DATE")),e.s9C("value",t.startDate),e.xp6(3),e.s9C("label",e.lcZ(26,74,"BILLS_AND_PAYMENTS.PERIOD_END_DATE")),e.s9C("value",t.endDate),e.xp6(3),e.s9C("label",e.lcZ(29,76,"BILLS_AND_PAYMENTS.AMOUNT_DUE")),e.s9C("value",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.amount_due),e.xp6(3),e.s9C("label",e.lcZ(32,78,"COMMON_FIELDS.STATUS")),e.Q6J("value",t.lookupLanguageTranslations(null==t.billsAndPaymentsViewData||null==t.billsAndPaymentsViewData.invoice_payment_status?null:t.billsAndPaymentsViewData.invoice_payment_status.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(35,80,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(37,82,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(46,84,"COMMON_PAGE_TITLES.BILLS_AND_PAYMENTS")),e.xp6(4),e.s9C("label",e.lcZ(51,86,"BANK_DETAILS.ORDER_ID")),e.s9C("value",t.orderId),e.xp6(4),e.s9C("label",e.lcZ(55,88,"BANK_DETAILS.MERCHANT_IDENTIFIER")),e.s9C("value",t.merchantIdentifier),e.xp6(4),e.s9C("label",e.lcZ(59,90,"BANK_DETAILS.TXN_ID")),e.s9C("value",t.txnId),e.xp6(4),e.s9C("label",e.lcZ(63,92,"BANK_DETAILS.TXN_AMOUNT")),e.s9C("value",t.txnAmount),e.xp6(4),e.s9C("label",e.lcZ(67,94,"BANK_DETAILS.PAYMENT_MODE")),e.s9C("defaultValue",t.paymentMode),e.Q6J("options",t.paymentOptions),e.xp6(4),e.s9C("label",e.lcZ(71,96,"COMMON_FIELDS.CURRENCY")),e.s9C("defaultValue",t.currency),e.Q6J("options",t.currencyOptions),e.xp6(4),e.s9C("placeholder",e.lcZ(75,98,"BANK_DETAILS.TXN_DATE")),e.s9C("defaultDate",t.paidDate),e.xp6(4),e.s9C("label",e.lcZ(79,100,"BANK_DETAILS.RESP_CODE")),e.s9C("value",t.rescode),e.Q6J("maxlength",10),e.xp6(4),e.s9C("label",e.lcZ(83,102,"BANK_DETAILS.RESP_MSG")),e.s9C("value",t.resmsg),e.xp6(4),e.s9C("label",e.lcZ(87,104,"BANK_DETAILS.GATEWAY_NAME")),e.s9C("value",t.gatewayName),e.xp6(4),e.s9C("label",e.lcZ(91,106,"BANK_DETAILS.BANK_TXN_ID")),e.s9C("value",t.bankTrxId),e.xp6(4),e.s9C("label",e.lcZ(94,108,"COMMON_FIELDS.STATUS")),e.s9C("value",t.invoicestatus),e.xp6(3),e.Q6J("header",t.attachmentColumnHeaders)("data",t.attachmentsData)("totalRecords",t.totalRecords)("objectType",t.objectType)("objectId",t.recordId)("actionType",t.actionType)("spinner",t.spinner),e.xp6(1),e.Q6J("createdBy",t.createdBy)("lastUpdatedBy",t.updatedBy)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.createdAt)("lastUpdatedDate",null==t.billsAndPaymentsViewData?null:t.billsAndPaymentsViewData.updatedAt))},dependencies:[g.UQ,g.US,B.h4,j.r,V.a,se.k,ae.Q,ie.K,Z.W,J.Y,D.q,y.X$]})}return o})();class Ae{enterprise;invoice_period_type;invoice_currency_code;invoice_payment_status;invoice_number;invoice_period_start_date;invoice_period_end_date;invoice_date;respcode;respmsg;amount_due;order_id;mid;trx_id;txn_amount;payment_mode;txn_date;banktrx_id;gatewayname;status}var O=d(11210);const ge=[{path:"",data:{title:"billsandpayments"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"enterprisesbillsandpayments-list",canActivate:[O.P],component:x,data:{object_type:n.hf.BILLS_AND_PAYMENTS,title:"",responsibilityParam:n.bP.MENUS+"."+n.w1.ENTERPRISES+"."+n.bP.SUBMENUS+"."+n.w1.BILLS_AND_PAYMENTS+"."+n.Iu.ENABLED,pageName:n.hf.BILLS_AND_PAYMENTS}},{path:":id/view",canActivate:[O.P],component:te,data:{object_type:n.hf.BILLS_AND_PAYMENTS,title:"",responsibilityParam:n.bP.MENUS+"."+n.w1.ENTERPRISES+"."+n.bP.SUBMENUS+"."+n.w1.BILLS_AND_PAYMENTS+"."+n.In.VIEW,pageName:n.hf.BILLS_AND_PAYMENTS,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}},{path:":id/edit",canActivate:[O.P],component:ye,data:{object_type:n.hf.BILLS_AND_PAYMENTS,title:"",responsibilityParam:n.bP.MENUS+"."+n.w1.ENTERPRISES+"."+n.bP.SUBMENUS+"."+n.w1.BILLS_AND_PAYMENTS+"."+n.In.EDIT,pageName:n.hf.BILLS_AND_PAYMENTS,pageSetting:n.AM.ACTIONS,settingField:n.In.EDIT}}]}];let _e=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[b.Bz.forChild(ge),b.Bz]})}return o})();var ve=d(32137),Se=d(83748);let Te=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[g.fx,_e,I.ez,ve.D,C.u5,C.UX,Se.v,k.U$,y.aw,F.Q]})}return o})()}}]);