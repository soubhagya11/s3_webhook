"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[886],{10886:(ea,Q,g)=>{g.r(Q),g.d(Q,{ProximitymessagesModule:()=>Xt});var p=g(36895),v=g(32174),P=g(67375),ne=g(65673),f=g(54463),y=g(93144),oe=g(83748),T=g(24006),le=g(32137),h=g(62510),M=g(11210),l=g(32236),_=g(15861),j=g(71568),W=g(57936),N=g(42786),L=g(75023),S=g(15439),J=g(47561),re=g(75875),Y=g(90313),e=g(94650);let C=(()=>{class o{authService;constructor(a){this.authService=a}getAll(a,i,t,s,n,d,c,m,u,b){const O=d?"&condition="+d:"",w=u||"",D=Y.L.isEmpty(b)?"":"&advSearchString="+JSON.stringify(b);return Y.L.isEmpty(O)?this.authService.getApiCall("api/v1/beaconmessages?&enterprise.enterprise_id="+i+"&skip="+n+"&limit="+s+"&sort="+t+"&search="+a+m+D+w,c):this.authService.getApiCall("api/v1/beaconmessages?&enterprise.enterprise_id="+i+"&skip="+n+"&limit="+s+"&sort="+t+"&search="+a+O+m+D+w,c)}create(a,i,t,s){return new Promise((n,d)=>{const c=new FormData;i&&c.append("Imagefile",i,"Imagefile"),c.append("AudioFile",t),c.append("VideoFile",s),c.append("beaconMessagesData",JSON.stringify(a)),this.authService.postApiCall("api/v1/beaconmessages/",c).subscribe(m=>{n(m)},m=>{d(m)})})}update(a,i,t,s,n){return new Promise((d,c)=>{const m=new FormData;t&&m.append("Imagefile",t,"Imagefile"),m.append("AudioFile",s),m.append("VideoFile",n),m.append("beaconMessagesData",JSON.stringify(a)),this.authService.putApiCall("api/v1/beaconmessages/"+i,m).subscribe(u=>{d(u)},u=>{c(u)})})}get(a,i){let t;return t=i?"api/v1/beaconmessages/"+a+"?enterprise.enterprise_id="+localStorage.getItem(l.BU.SELECTED_ENTERPRISE)+i:"api/v1/beaconmessages/"+a,this.authService.getApiCall(t,!0)}delete(a){return new Promise((i,t)=>{this.authService.deleteApiCall("api/v1/beaconmessages/"+a).subscribe(s=>{i(s)},s=>{t(s)})})}patch(a,i){return new Promise((t,s)=>{this.authService.patchApiCall("api/v1/beaconmessages/"+a,i).subscribe(n=>{t(n)},n=>{s(n)})})}getTranslateLanguages(a){return new Promise((i,t)=>{this.authService.getApiCall("api/v1/configoptions?type=drop&enterprise.enterprise_id="+a+"&configoption_name=generalSettings").subscribe(s=>{i(s)},s=>{t(s)})})}getParentFacility(a,i){return new Promise((t,s)=>{this.authService.getApiCall("api/v1/facilities?type=drop&enterprise.enterprise_id="+a+"&facility_type.facility_type_name="+i).subscribe(n=>{t(n)},n=>{s(n)})})}getbeconName(a){return new Promise((i,t)=>{this.authService.getApiCall("api/v1/beacons?type=drop&enterprise.enterprise_id="+a).subscribe(s=>{i(s)},s=>{t(s)})})}statusUpdate(a,i){return new Promise((t,s)=>{this.authService.patchApiCall("api/v1/beacons/"+i,a).subscribe(n=>{t(n)},n=>{s(n)})})}static \u0275fac=function(i){return new(i||o)(e.LFG(re.e))};static \u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var E=g(70057),Z=g(27601),F=g(46448),A=g(10805),B=g(2387),I=g(56368),U=g(30222),R=g(9851),k=g(93837),H=g(24929),K=g(92634),X=g(47386),ee=g(42919),x=g(37415);const de=["buttonsWrapper"],ge=["validFacilityType"],ce=["validFacility"],me=["validMessageType"],pe=["validBeaconName"],ue=["validTitle"],_e=["validLatitude"],he=["validLongitude"],be=["displayNameAdd"],Oe=["languageAdd"],fe=["displayNameEdit"],Te=["validRadius"],Ce=function(o){return[o]};function ve(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"div",119)(1,"app-checkbox",120),e.NdJ("valueChange",function(t){const n=e.CHM(a).$implicit,d=e.oxw();return e.KtG(d.changeCheckBoxValue(t,"is_enabled",n))}),e.qZA()()}if(2&o){const a=r.$implicit;e.xp6(1),e.Q6J("options",e.VKq(2,Ce,a))("checked",null==a?null:a.is_enabled)}}const V=function(o,r,a,i){return{background:o,color:r,"font-family":a,"font-size":i}};function ye(o,r){if(1&o&&(e.TgZ(0,"div",121),e._UZ(1,"i",122),e._uU(2),e.qZA()),2&o){const a=r.$implicit,i=e.oxw();e.Q6J("ngStyle",e.l5B(3,V,i.dataJsonObj.messageFooterButtonBgColor,i.dataJsonObj.messageFooterButtonTextColor,null==i.dataJsonObj.messageFooterButtonFontFamilyObj?null:i.dataJsonObj.messageFooterButtonFontFamilyObj.NAME,i.dataJsonObj.messageFooterButtonsFontSizeObj+"rem")),e.xp6(1),e.Q6J("ngClass",null!=a&&a.iconClassName?null==a?null:a.iconClassName:""),e.xp6(1),e.hij("",null==a?null:a.display_name," ")}}function Se(o,r){if(1&o&&(e.TgZ(0,"tr",124)(1,"td",125),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",a[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Ee(o,r){if(1&o&&e.YNc(0,Se,4,4,"tr",123),2&o){const a=e.oxw();e.Q6J("ngIf",a.languagesData&&0===a.languagesData.length)}}function Ae(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const a=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,a.header)," ")}}function De(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Ae,3,3,"th",126),e.qZA()),2&o){const a=r.$implicit;e.xp6(1),e.Q6J("ngForOf",a[0])}}function Me(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"td",128),e.NdJ("click",function(){e.CHM(a);const t=e.oxw(),s=t.rowIndex,n=t.$implicit,d=e.oxw();return e.KtG(d.editLanguages(s,n))}),e._uU(1),e.qZA()}if(2&o){const a=r.$implicit,i=e.oxw().$implicit;e.Gre("",a.class," "),e.Q6J("pSelectableRow",i),e.xp6(1),e.hij(" ",i[a.field]," ")}}function je(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Me,2,5,"td",127),e.qZA()),2&o){const a=r.columns;e.xp6(1),e.Q6J("ngForOf",a[0])}}function Ne(o,r){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",130)(6,"br"),e.qZA()),2&o){const a=r.$implicit,i=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,a.header)),e.xp6(3),e.Q6J("innerHTML",i[a.field],e.oJD)}}function Le(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,Ne,7,4,"div",129),e.qZA()()()),2&o){const a=r.columns;e.xp6(1),e.uIk("colspan",a[0].length+2),e.xp6(2),e.Q6J("ngForOf",a[1])}}function Je(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"ion-item",131)(1,"ion-label",132),e.NdJ("click",function(){const t=e.CHM(a),s=t.index,n=t.$implicit,d=e.oxw();return e.KtG(d.editLanguages(s,n))}),e.TgZ(2,"div",133)(3,"span",134),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.qZA()(),e.TgZ(8,"div",135)(9,"span",136),e._uU(10),e.ALo(11,"translate"),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"div",135)(16,"span",136),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"span"),e._uU(20),e.qZA()()()()}if(2&o){const a=r.$implicit;e.xp6(4),e.hij("",e.lcZ(5,7,"PREFERENCES.LANGUAGE"),":"),e.xp6(3),e.Oqu(null==a?null:a.language_name_value),e.xp6(3),e.AsE("",e.lcZ(11,9,"COMMON_FIELDS.BEACON_TITLE_NAME")," (",e.lcZ(12,11,"NEW_VARIABLES.TRANSLATED"),"):"),e.xp6(4),e.Oqu(null==a?null:a.beacon_title_display_name),e.xp6(3),e.hij("",e.lcZ(18,13,"COMMON_FIELDS.ENABLED"),":"),e.xp6(3),e.Oqu(null==a?null:a.is_enabled_value)}}function Ze(o,r){1&o&&(e.TgZ(0,"p",137),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),""))}const Fe=function(o){return{background:o}},Ie=function(o,r,a){return{color:o,"font-family":r,"font-size":a}},xe=function(o){return{color:o}},we=function(o,r,a){return{background:o,color:r,"border-color":a}};let Pe=(()=>{class o extends J.O{commonService;enterprisesService;toastController;uiUtils;facilitiesService;router;route;proximityMessageService;translateService;loggerService;navigationService;buttonsWrapper;validFacilityType;validFacility;validMessageType;validBeaconName;validTitle;validLatitude;validLongitude;displayNameAdd;languageAdd;displayNameEdit;validRadius;previousWidth="";audioFile;audioUpload=!1;beaconDisplayName;beaconId;beaconImage;proximityMessageCreateObj;beaconPromotionsEnable=!1;beconName=!1;beconNameObj;beconOptions;checkboxOptions;editorConfig={editable:!0,spellcheck:!0,height:"15rem",minHeight:"5rem",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",toolbarHiddenButtons:[["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["customClasses","insertImage","insertVideo","removeFormat","backgroundColor"]]};viewSignature={editable:!1,spellcheck:!0,height:"15rem",minHeight:"5rem",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!1,showToolbar:!1,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",toolbarHiddenButtons:[["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["customClasses","insertImage","insertVideo","removeFormat","backgroundColor"]]};defaultScreenType;defaultTimeZone;description;disableSubmitBtn=!1;endDate;enterpriseId;enterpriseName;enterpriseShortName;enterpriseViewId;error;facilityId;facilityObj;facilityOptions;facilityTypeName;facilityTypeId;facilityTypeObj;facilityTypeOptions;imageError;imageUpload=!1;imgFile;latitude;longitude;languagesData=[];messageTypeDisplayName;messageTypeId;messageTypeObj;messageTypeOptions;navigationId;navigationPath;objectId;screenTypeName;screenTypeObj;screenTypeOptions;startDate;textEnable=!1;timeZoneOptions;title;utcTimeZoneString;utctimezone;videoFile;videoUpload;isEnabled;headerAction;loginUserDateFormat;userTimeZoneObj={};utccurrentTime;dataJsonObj={};audioExtensions=[];videoExtensions=[];headers;translateLanguageOptions;langTransMessageTitleName;languageCode;languageName;addPopupError;langTransDescription;isLangTransEnabled;languageId;language;editRowIndex;deleteRowIndex;constructor(a,i,t,s,n,d,c,m,u,b,O){super(c,a),this.commonService=a,this.enterprisesService=i,this.toastController=t,this.uiUtils=s,this.facilitiesService=n,this.router=d,this.route=c,this.proximityMessageService=m,this.translateService=u,this.loggerService=b,this.navigationService=O}ngOnInit(){this.headerAction={BACK:!0},this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.BEACON_MESSAGES,this.dataJsonObj.latLongFieldDisabled=!1,this.dataJsonObj.pageTitle=[{key:"PROXIMITY_MESSAGES.PROXIMITY_MESSAGE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.getDefaultUiSettingData(),this.getDynamicJson([{folderName:l.sb.FACILITY_TYPES,jsonType:"list",storingFieldName:"facilityTypesListJson"},{folderName:l.sb.FACILITIES,jsonType:"list",storingFieldName:"facilitiesListJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"}]),this.getEnterprisesViewData(),this.getBeconName();const i=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=i.dateFormat,this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(i.timeZoneDescription),this.userTimeZoneObj.timeZoneCode=i.timeZoneCode,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(s=>{this.dataJsonObj.lookupCodesListJSON=s,this.getTimeZone(this.userTimeZoneObj.timeZoneCode),this.getMessageTypes(),this.getScreenTypeOptions(),this.getFontData()}),this.getLanguagesList(""),this.dataJsonObj.languagesFromJson={},this.getLanguagesfromJson(),this.checkboxOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.headers=[[{headersort:"disableth",field:"language_name_value",header:"PREFERENCES.LANGUAGE",class:"w-100"},{headersort:"disableth",field:"beacon_title_display_name",header:"COMMON_FIELDS.BEACON_TITLE_NAME",class:""},{headersort:"disableth",field:"description",header:"COMMON_PAGE_TITLES.MESSAGE",class:""},{headersort:"disableth",field:"is_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"}]],this.utccurrentTime=(new Date).toISOString();const t=this.displayDateFormatter(this.utccurrentTime,!0,!0);this.startDate=t.startDate,this.endDate=t.endDate}ngAfterViewChecked(){this.calculateButtonsWidth()}calculateButtonsWidth(){const a=this.buttonsWrapper.nativeElement.children;let i=0;for(let s=0;s<a.length;s++){const n=a[s];i+=n.offsetWidth+parseInt(getComputedStyle(n).marginLeft)+parseInt(getComputedStyle(n).marginRight)}const t=`${i}px`;this.previousWidth!==t&&(this.buttonsWrapper.nativeElement.style.width=t,this.previousWidth=t)}getDynamicJson(a){var i=this;return(0,_.Z)(function*(){for(let n of a)i.dataJsonObj[n.storingFieldName]=yield i.commonService.getDynamicJson(i.enterpriseId,n.folderName,n.jsonType);const s=(yield i.commonService.getAllPagesFromModuleManagerJSON(i.dataJsonObj.moduleManagerListJson)).find(n=>n.module.page_name===l.hf.BEACON_MESSAGES);s?.actions&&(i.dataJsonObj.actionsListData=Object.keys(s.actions).map(n=>({field:i.toTitleCase(n.split("_").join(" ")),displayname:n.split("_").join(" "),display_name:i.toTitleCase(n.split("_").join(" ")),is_enabled:!1})),i.dataJsonObj.actionsListData1=i.dataJsonObj.actionsListData,i.dataJsonObj.actionsListData=i.dataJsonObj.actionsListData.filter(n=>"bookmarks"!==n.field.toLowerCase())),i.dataJsonObj.actionsData=[],i.getFacilityTypes(""),i.getFacility()})()}getEnterprisesViewData(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(a=>{this.enterpriseName=a.enterprise_name,this.enterpriseViewId=a._id,this.enterpriseShortName=a.short_name},a=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",a)}}changeTitle(a){this.title=a.value}getBeconName(){try{this.proximityMessageService.getbeconName(this.enterpriseId).then(a=>{this.beconOptions=a,this.beconNameObj=a[0]},a=>{this.loggerService.setLoggerError(this.constructor.name,"getBeconName",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getBeconName",a)}}changeBeaconName(a){this.beaconId=a.value,this.beconNameObj=this.beconOptions.find(i=>i.ID===parseInt(this.beaconId,10))}getFacilityTypes(a){try{this.facilityTypeOptions=[],this.commonService.getFilteredDynamicJSONData(this.dataJsonObj.facilityTypesListJson,"facility_type_display_name",a).then(i=>{this.facilityTypeOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getFilteredDynamicJSONData",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getFacilityTypes",i)}}changeFacilityType(a){this.facilityTypeId=a.ID,this.facilityTypeObj=this.facilityTypeOptions.find(i=>i.ID===parseInt(this.facilityTypeId,10)),this.facilityTypeName=this.facilityTypeObj?.facility_type_name,this.latitude="",this.longitude="",this.facilityObj={},this.dataJsonObj.latLongFieldDisabled=!1,this.facilityOptions=[],this.validFacility.clearSelectInput(),this.getFacility()}getMessageTypes(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.MESSAGE_TYPES],"").then(a=>{this.messageTypeOptions=a,this.messageTypeObj=a[0],this.messageTypeId=a[0].ID},a=>{this.loggerService.setLoggerError(this.constructor.name,"getMessageTypes",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getMessageTypes",a)}}changeMessageType(a){this.messageTypeId=a.value,this.messageTypeObj=this.messageTypeOptions.find(i=>i.ID===parseInt(this.messageTypeId,10)),this.messageTypeDisplayName=this.lookupLanguageTranslations(this.messageTypeObj.lookup_id),this.messageTypeObj.lookup_name===l.V8.AUDIO?(this.audioUpload=!0,this.imageUpload=!1,this.videoUpload=!1,this.videoFile="",this.imgFile=""):this.messageTypeObj.lookup_name===l.V8.IMAGE?(this.imageUpload=!0,this.audioUpload=!1,this.videoUpload=!1,this.audioFile="",this.videoFile=""):this.messageTypeObj.lookup_name===l.V8.VIDEO?(this.videoUpload=!0,this.audioUpload=!1,this.imageUpload=!1,this.audioFile="",this.imgFile=""):this.messageTypeObj.lookup_name===l.V8.TEXT&&(this.videoUpload=!1,this.audioUpload=!1,this.imageUpload=!1,this.audioFile="",this.imgFile="",this.videoFile=""),this.getFacility()}getFacility(){try{this.facilityOptions=[],this.facilityOptions=this.facilityTypeId?this.dataJsonObj.facilitiesListJson.filter(a=>a.facility_type.facility_type_id===parseInt(this.facilityTypeId,10)):this.dataJsonObj.facilitiesListJson}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getFacility",a)}}getFacilityForSearch(a){try{this.dataJsonObj.filteredFacilityOptions=this.facilityTypeId?this.dataJsonObj.facilitiesListJson.filter(i=>i.facility_type.facility_type_id===parseInt(this.facilityTypeId,10)):this.dataJsonObj.facilitiesListJson,this.commonService.getFilteredDynamicJSONData(this.dataJsonObj.filteredFacilityOptions,"facility_display_name",a).then(i=>{this.facilityOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getFilteredDynamicJSONData",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getFacilityForSearch",i)}}changeFacility(a){try{if(this.validLatitude.clearmessage(),this.validLongitude.clearmessage(),this.facilityId=a.ID,this.facilityId)this.dataJsonObj.actionsListData=this.dataJsonObj.actionsListData1;else{this.dataJsonObj.actionsListData=this.dataJsonObj.actionsListData.filter(t=>t.field.toLowerCase()!==l.In.BOOKMARKS);const i=this.dataJsonObj.actionsData.find(t=>t.field===l.A0.BOOKMARKS);i&&(i.is_enabled=!1)}this.facilityObj=this.facilityOptions.find(i=>i.ID===parseInt(this.facilityId,10)),this.latitude=this.facilityObj?.address?this.facilityObj.address.geo_coordinates[0]:"",this.longitude=this.facilityObj?.address?this.facilityObj.address.geo_coordinates[1]:"",this.dataJsonObj.latLongFieldDisabled=!(!this.latitude||!this.longitude)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeFacility",i)}}getScreenTypeOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.SCREEN_TYPES],"").then(a=>{this.screenTypeOptions=a,this.screenTypeName=a[0].NAME,this.defaultScreenType=a[0].ID},a=>{this.loggerService.setLoggerError(this.constructor.name,"getScreenTypeOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getScreenTypeOptions",a)}}changeScreenType(a){try{a.value&&(this.defaultScreenType=a.value,this.screenTypeObj=this.screenTypeOptions.find(i=>i.ID===parseInt(this.defaultScreenType,10)),this.screenTypeName=this.screenTypeObj.NAME)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changePositionType",i)}}changeNavigationId(a){this.navigationId=a.value}changeObjectId(a){this.objectId=a.value}changeNavigationPath(a){this.navigationPath=a.value}changeDescription(a){this.description=a.value}changeLatitude(a){this.latitude=a.value}changeLongitude(a){this.longitude=a.value}changeRadius(a){this.error="",this.dataJsonObj.radius=a.value}getTimeZone(a){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.TIME_ZONES],a).then(i=>{if(this.timeZoneOptions=i,this.timeZoneOptions.length>0){for(let t=0;t<this.timeZoneOptions.length;t++)this.timeZoneOptions[t].NAME=this.timeZoneOptions[t].lookup_display_name+" - "+this.timeZoneOptions[t].description;this.timeZoneOptions=this.timeZoneOptions}},i=>{this.loggerService.setLoggerError(this.constructor.name,"getTimeZone",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getTimeZone",i)}}changeTimeZone(a){if(a)try{this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(a.description),this.userTimeZoneObj.timeZoneCode=a.lookup_name;const i=this.displayDateFormatter(this.utccurrentTime,!0,!0);this.startDate=i.startDate,this.endDate=i.endDate}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeTimeZone",i)}}changeStartDate(a){try{const i=this.displayDateFormatter(a.value,!1,!1);this.startDate=i.startDate}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeStartDate",i)}}changeEndDate(a){try{const i=this.displayDateFormatter(a.value,!1,!1);this.endDate=i.startDate,this.error=this.commonService.getUTCDateObj(this.startDate)>=this.commonService.getUTCDateObj(this.endDate)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":""}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeEndDate",i)}}getExcelFile(a){if(a){this.error="";const i=a.target.files,s=(document.getElementById("importFile"),a.target.files[0].type),n=s.substring(s.lastIndexOf("/"));this.audioExtensions=this.commonService.getExtension(l.wE),-1==this.audioExtensions.indexOf(n)?(this.error="COMMON_VALIDATION_MESSAGES.VALID_FILETYPE",this.audioFile=""):(this.audioFile=i[0],this.displayFileName(i[0].name))}}displayFileName(a){const i=document.getElementById("importFile");let t=a;null!=t&&""!==t&&t.split(".")[0].length>25&&(t=t.split(".")[0].substring(0,25)+".."+t.split(".")[1]),i.innerHTML=t}getExcelFile1(a){if(a){this.error="";const i=a.target.files,s=(document.getElementById("importFile"),a.target.files[0].type),n=s.substring(s.lastIndexOf("/"));this.videoExtensions=this.commonService.getExtension(l.sc),-1==this.videoExtensions.indexOf(n)?(this.error="COMMON_VALIDATION_MESSAGES.VALID_FILETYPE",this.videoFile=""):(this.videoFile=i[0],this.displayFileName(i[0].name))}}clearErrorMessage(){this.error=""}clearMessage(){this.error=""}displayFileName1(a){const i=document.getElementById("importFile");let t=a;null!=t&&""!==t&&t.split(".")[0].length>25&&(t=t.split(".")[0].substring(0,25)+".."+t.split(".")[1]),i.innerHTML=t}changeImage(a){""===a.error?(this.imageError="",this.imgFile=a.value,this.imgFile=this.commonService.dataURItoImgBlob(this.imgFile,"image/jpeg")):this.imageError=a.error}backgroundImageRemove(){this.beaconImage="",this.imageError=""}validVideoType(){}createRecord(){const a=this.latitude?this.latitude.replace("+","").replace("%2B",""):"",i=this.longitude?this.longitude.replace("+","").replace("%2B",""):"";if(this.validMessageType.isValid()&&this.validTitle.isValid()&&this.validLatitude.isValid()&&this.validLongitude.isValid()&&this.validRadius.isValid())if(this.commonService.getUTCDateObj(this.endDate)>=this.commonService.getUTCDateObj(this.startDate)){const t={enterprise:{enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},beacon:{beacon_id:this.beaconId,beacon_name:this.beconNameObj?this.beconNameObj.NAME:"",facility_type:{facility_type_id:this.facilityTypeObj?this.facilityTypeObj.ID:"",facility_type_name:this.facilityTypeObj?this.facilityTypeObj.NAME:""},facility:{facility_id:this.facilityObj?this.facilityObj.ID:"",facility_name:this.facilityObj?this.facilityObj.NAME:""}},geo_coordinates:[a,i],message_description:this.description,message_type:this.messageTypeObj,start_datetime:this.commonService.convertUserTimeZoneDateToUTC(this.startDate,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign),end_datetime:this.commonService.convertUserTimeZoneDateToUTC(this.endDate,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign),message_title:this.title,link_to_screen:{screen_type:{lookup_id:this.defaultScreenType,lookup_name:this.screenTypeName},object_id:this.objectId,navigation_id:this.navigationId,navigation_path:this.navigationPath,params:[]},language_translations:this.languagesData,radius:this.dataJsonObj.radius,actions:this.dataJsonObj.actionsData,message_ui_setting:{message_title_bg_color:this.dataJsonObj.messageTitleBgColor,message_title_text_color:this.dataJsonObj.messageTitleTextcolor,message_title_font_family:this.dataJsonObj.messageTitleFontFamilyObj,message_title_font_size:this.dataJsonObj.messageTitleFontSizeObj,message_description_bg_color:this.dataJsonObj.messageDescriptionBgColor,message_description_text_color:this.dataJsonObj.messageDescriptionTextColor,message_description_font_family:this.dataJsonObj.messageDescriptionFontFamilyObj,message_description_font_size:this.dataJsonObj.messageDescriptionFontSizeObj,message_footer_border_color:this.dataJsonObj.messageFooterBorderColor,message_footer_bg_color:this.dataJsonObj.messageFooterBgColor,message_footer_button_bg_color:this.dataJsonObj.messageFooterButtonBgColor,message_footer_button_text_color:this.dataJsonObj.messageFooterButtonTextColor,message_footer_button_font_family:this.dataJsonObj.messageFooterButtonFontFamilyObj,message_footer_button_font_size:this.dataJsonObj.messageFooterButtonsFontSizeObj}};this.proximityMessageService.create(t,this.imgFile,this.audioFile,this.videoFile).then(s=>{this.disableSubmitBtn=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},s=>{this.commonErrorCodes(JSON.parse(s))})}else this.error="COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START"}displayDateFormatter(a,i,t){try{const s=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,n={startDate:"",endDate:""};if(n.startDate=this.commonService.convertDateToUserFormat(s,l.eZ.HOURS_MINS,!0,"",!1),i){const d=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,c=S.utc(d).add(1,"days");n.endDate=this.commonService.convertDateToUserFormat(c,l.eZ.HOURS_MINS,!0,"",!1)}return n}catch(s){this.loggerService.setLoggerError(this.constructor.name,"displayDateFormatter",s)}}commonErrorCodes(a){409===JSON.parse(a[l.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancelBtn(){this.commonService.redirectToPreviousUrl()}clearmessage(){this.error=""}languagesAdd(a){try{a.stopPropagation(),this.displayNameAdd.clearmessage(),this.languageAdd.clearmessage(),this.languageAdd.clearSelectInput(),this.languageCode="",this.languageName="",this.addPopupError="",this.langTransMessageTitleName="",this.langTransDescription="",this.isLangTransEnabled=!0,this.getLanguagesList(""),$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"languagesAdd",i)}}changeLanguage(a){a&&(this.languageId=a.ID,this.languageName=a.NAME,this.language=a.language_name,this.languageCode=a.language_code)}changelangTransMessageTitleName(a){a&&(this.langTransMessageTitleName=a.value)}changeLangTransCheckBox(a){a&&(this.isLangTransEnabled=a.value)}changeLangTransDescription(a){a&&(this.langTransDescription=a.value)}languagesAddSubmit(){try{this.languageAdd.isValid()&&this.displayNameAdd.isValid()&&(this.languagesData.find(i=>i.language.language_id===this.languageCode)?this.addPopupError="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS":(this.languagesData.push({language:{language_id:this.languageId,language_name:this.language,language_code:this.languageCode},language_name_value:this.languageName,beacon_title_display_name:this.langTransMessageTitleName,description:this.langTransDescription,is_enabled:this.isLangTransEnabled,is_enabled_value:this.isLangTransEnabled?"Yes":"No"}),$("#exampleModal1").modal("hide")))}catch(a){this.loggerService.setLoggerError(this.constructor.name,"languagesAddSubmit",a)}}editLanguages(a,i){try{this.editRowIndex=a,this.languageCode=i.language.language_code,this.languageName=i.language_name_value,this.langTransMessageTitleName=i.beacon_title_display_name,this.langTransDescription=i.description,this.isLangTransEnabled=i.is_enabled,this.displayNameEdit.clearmessage(),$("#exampleModal2").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal2")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"editLanguages",t)}}languagesEditSubmit(){try{for(let a=0;a<this.languagesData.length;a++)a===this.editRowIndex&&(this.languagesData[a].language={language_id:this.languageId,language_name:this.language,language_code:this.languageCode},this.languagesData[a].language_name_value=this.languageName,this.languagesData[a].beacon_title_display_name=this.langTransMessageTitleName,this.languagesData[a].description=this.langTransDescription,this.languagesData[a].is_enabled=this.isLangTransEnabled,this.languagesData[a].is_enabled_value=!0===this.isLangTransEnabled?"Yes":"No");$("#exampleModal2").modal("hide")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"languagesEditSubmit",a)}}removeLanguages(a,i){try{this.deleteRowIndex=a,this.languageCode=i.language.language_code,this.languageName=i.language_name_value,this.langTransMessageTitleName=i.beacon_title_display_name,this.langTransDescription=i.description,this.isLangTransEnabled=i.is_enabled,$("#exampleModal3").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal3")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"removeLanguages",t)}}languagesDeleteSubmit(){try{this.languagesData.splice(this.deleteRowIndex,1),$("#exampleModal3").modal("hide")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"languagesDeleteSubmit",a)}}getLanguagesfromJson(){var a=this;return(0,_.Z)(function*(){a.dataJsonObj.languagesFromJson=yield a.commonService.getLanguagesListJson(a.enterpriseId)})()}getLanguagesList(a){var i=this;return(0,_.Z)(function*(){try{yield i.proximityMessageService.getTranslateLanguages(i.enterpriseId).then(t=>{if(i.translateLanguageOptions=t[0].configoption_json.languages,i.translateLanguageOptions&&i.translateLanguageOptions.length>0){for(let s=0;s<i.translateLanguageOptions.length;s++)i.translateLanguageOptions[s].ID=i.translateLanguageOptions[s].language_id,i.translateLanguageOptions[s].NAME=i.dataJsonObj?.languagesFromJson[i.translateLanguageOptions[s].language_name]?.language_display_name,i.translateLanguageOptions[s].language_code=i.translateLanguageOptions[s]?.language_code,i.translateLanguageOptions[s].language_id=i.translateLanguageOptions[s]?.language_id,i.translateLanguageOptions[s].language_name=i.translateLanguageOptions[s]?.language_name;if(i.translateLanguageOptions&&a){const s=i.translateLanguageOptions.filter(function(n){return n.NAME.toLowerCase().includes(a.toLowerCase())});i.translateLanguageOptions=s}}},t=>{i.loggerService.setLoggerError(i.constructor.name,"getLanguagesList",t)})}catch(t){i.loggerService.setLoggerError(i.constructor.name,"getLanguagesList",t)}})()}pageheadeActionClick(a){"BACK"==a.value&&this.cancelBtn()}cancelPopup(){$("#exampleModal1").modal("hide"),$("#exampleModal2").modal("hide"),$("#exampleModal3").modal("hide"),document.getElementsByTagName("body")[0].classList.remove("modale-popup-open")}changeCheckBoxValue(a,i,t){try{t[i]=a.value,this.dataJsonObj.actionsData.push(t),!this.facilityId&&t.field===l.A0.BOOKMARKS&&(t.is_enabled=!1),this.dataJsonObj.actionsData=this.dataJsonObj.actionsData.filter(s=>!0===s.is_enabled);for(let s of this.dataJsonObj.actionsData)switch(s.field){case l.A0.BOOKMARKS:s.display_name=this.translateService.instant("MAP.BOOKMARK"),s.iconClassName="mgr-5 fas fa-bookmark";break;case l.A0.VISIT:s.display_name=this.translateService.instant("NEW_VARIABLES.VISIT"),s.iconClassName="mgr-5 icon-visit"}}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBoxValue",s)}}toTitleCase(a){if(a){const i=a.split(" ");for(let t=0;t<i.length;t++)i[t]=i[t].charAt(0).toUpperCase()+i[t].slice(1).toLowerCase();return i.join(" ")}}getFontData(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.uP.FONT_NAMES],"").then(a=>{this.dataJsonObj.fontData=a})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getFontData",a)}}changeFontStyle(a,i){this.dataJsonObj[i]=this.dataJsonObj.fontData.find(t=>t.ID===parseInt(a.value,10))}proximityUiSettingsChangeColor(a,i,t){t[a]=i.value}changeSliderFontSize(a,i){this.dataJsonObj[i]=parseFloat(a.value)}getDefaultUiSettingData(){const a=JSON.parse(localStorage.getItem(l.BU.DEFAULT_UI_SETTINGS_DATA));this.dataJsonObj.messageTitleBgColor=a?.theme_settings?.header_bg_color,this.dataJsonObj.messageTitleTextcolor=a?.theme_settings?.header_text_color,this.dataJsonObj.messageTitleFontFamilyObj=a?.theme_settings?.header_and_footer?.header_text_font,this.dataJsonObj.messageTitleFontSizeObj=localStorage.getItem(l.BU.DEFAULT_FONT_SIZE),this.dataJsonObj.messageDescriptionBgColor=a?.theme_settings?.body_bg_color,this.dataJsonObj.messageDescriptionTextColor=a?.theme_settings?.body_text_color,this.dataJsonObj.messageDescriptionFontFamilyObj=a?.theme_settings?.body?.text_font,this.dataJsonObj.messageDescriptionFontSizeObj=localStorage.getItem(l.BU.DEFAULT_FONT_SIZE),this.dataJsonObj.messageFooterBorderColor=a?.theme_settings?.footer_text_color,this.dataJsonObj.messageFooterBgColor=a?.theme_settings?.footer_bg_color,this.dataJsonObj.messageFooterButtonBgColor=a?.theme_settings?.button_primary_bg_color,this.dataJsonObj.messageFooterButtonTextColor=a?.theme_settings?.button_primary_text_color,this.dataJsonObj.messageFooterButtonFontFamilyObj=a?.theme_settings?.button?.button_text_font,this.dataJsonObj.messageFooterButtonsFontSizeObj=localStorage.getItem(l.BU.DEFAULT_FONT_SIZE),this.dataJsonObj.defaultRangeFontSize=localStorage.getItem(l.BU.DEFAULT_FONT_SIZE)}static \u0275fac=function(i){return new(i||o)(e.Y36(j.v),e.Y36(W.e),e.Y36(E.yF),e.Y36(Z.s),e.Y36(L.g),e.Y36(h.F0),e.Y36(h.gz),e.Y36(C),e.Y36(f.sK),e.Y36(N.m),e.Y36(F.f))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-proximitymessages-create"]],viewQuery:function(i,t){if(1&i&&(e.Gf(de,5),e.Gf(ge,5),e.Gf(ce,5),e.Gf(me,5),e.Gf(pe,5),e.Gf(ue,5),e.Gf(_e,5),e.Gf(he,5),e.Gf(be,5),e.Gf(Oe,5),e.Gf(fe,5),e.Gf(Te,5)),2&i){let s;e.iGM(s=e.CRH())&&(t.buttonsWrapper=s.first),e.iGM(s=e.CRH())&&(t.validFacilityType=s.first),e.iGM(s=e.CRH())&&(t.validFacility=s.first),e.iGM(s=e.CRH())&&(t.validMessageType=s.first),e.iGM(s=e.CRH())&&(t.validBeaconName=s.first),e.iGM(s=e.CRH())&&(t.validTitle=s.first),e.iGM(s=e.CRH())&&(t.validLatitude=s.first),e.iGM(s=e.CRH())&&(t.validLongitude=s.first),e.iGM(s=e.CRH())&&(t.displayNameAdd=s.first),e.iGM(s=e.CRH())&&(t.languageAdd=s.first),e.iGM(s=e.CRH())&&(t.displayNameEdit=s.first),e.iGM(s=e.CRH())&&(t.validRadius=s.first)}},features:[e._Bn([C,L.g]),e.qOj],decls:259,vars:275,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-lg-12","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-4"],["disabled","false","mandatory","false","id","proximitymessages-create-beacontype",3,"label","options","selectedOption","searchValueChange"],["validFacilityType",""],["disabled","false","mandatory","false","id","proximitymessages-create-beacontype",3,"label","options","searchValueChange","selectedOption"],["validFacility",""],["autoCaseFlag","false","mandatory","true","disabled","false","id","proximitymessages-create-messagetitle",3,"label","maxlength","valueChange"],["validTitle",""],["mandatory","true","id","proximitymessages-create-messagetype",3,"label","options","defaultValue","valueChange"],["validMessageType",""],[1,"col-lg-8","col-md-6","datetimepicker","order-md-1","order-2"],[1,"col-lg-6","col-md-6","datetimepicker","order-md-1","order-2"],[1,"col-8","col-md-8","pe-0"],["mandatory","true","disabled","false","id","proximitymessages-create-start-date",3,"placeholder","dateformat","defaultDate","editvalueChange"],[1,"col-4","col-md-4","ps-2"],["disabled","false","mandatory","true","id","proximitymessages-create-timezone",3,"label","options","defaultValue","selectedOption","searchValueChange"],["mandatory","true","disabled","false","id","proximitymessages-create-end-date",3,"placeholder","defaultDate","dateformat","editvalueChange"],[1,"col-md-4","order-md-1","order-2"],["autoCaseFlag","true","id","proximitymessages-edit-latitude",3,"label","maxlength","mandatory","value","disabled","valueChange"],["validLatitude",""],["autoCaseFlag","true","id","proximitymessages-edit-longitude",3,"label","value","maxlength","mandatory","disabled","valueChange"],["validLongitude",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","proximitymessages-create-radius",3,"label","value","maxlength","valueChange"],["validRadius",""],[1,"col-md-12","order-md-1","order-2"],[1,"fs-12"],["id","proximitymessages-create-description",3,"ngModel","config","maxlength","ngModelChange","keypress","valueChange"],[1,"col-md-12","text-end","mt-2","mb-2","btns-group","order-md-1","order-2"],["className","btn btn-primary btn-sm","id","proximitymessages-create-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","proximitymessages-create-cancel",3,"label","buttonOnClick"],[1,"text-danger","text-center"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","actionsAccordion",1,"text-capitalize",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],[1,"form-bs"],[1,"row","pdt-5","pdb-5"],["class","col-md-2 d-flex align-items-center",4,"ngFor","ngForOf"],["id","actionsAccordion",1,"",3,"selected"],[1,"col-md-3"],["type","color","disabled","false",3,"label","value","valueChange"],["id","default-ui-settings-theme-settings-list-text-font",3,"label","options","defaultValue","valueChange"],[1,"w-100",3,"value","steps","valueChange"],["fontSizeInput",""],[1,"d-flex","justify-content-center","w-100"],[1,"w-50","notifications","position-relative"],[1,"d-flex","justify-content-center","notification-content"],[1,"notification"],[1,"notification-body"],[1,"message"],["fxLayout","row","fxLayoutAlign","space-between center",1,"title",3,"ngStyle"],[1,"d-flex","align-items-center","justify-content-between"],[1,"proximity-title-wrapper"],[1,"fs-14","fw-500","mg-0","pdt-5","pdb-5","pdl-10","pdr-10","text-ellipsis",3,"ngStyle"],[1,"proximity-buttons-wrapper","d-flex",3,"ngStyle"],["buttonsWrapper",""],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","icon-mute",2,"font-size","18px"],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","fas","fa-times",2,"font-size","18px"],[1,"popup-inner-content","pdl-10","pdr-10",3,"ngStyle"],[1,"fs-13","fw-400",3,"innerHtml"],[1,"p-1","footer-toast",3,"ngStyle"],[1,"d-flex","justify-content-end","align-items-center"],["class","d-flex fs-13 fw-500 proximity-btn mgr-5",3,"ngStyle",4,"ngFor","ngForOf"],[1,"d-flex","fs-13","fw-500","proximity-btn",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center","mgr-5","icon-notification-bell"],[1,"list-accordion-tab",3,"selected"],["disabled","false","label","","className","btn btn-danger btn-sm btn-round btn-rounded","btnIcon","fas fa-plus","id","beaconMessages-create-translationsadd",3,"isEmitMouseEvent","buttonOnClick"],["selectionMode","single","dataKey","LineNum",1,"ptable","d-none","d-lg-block","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"d-lg-none"],["lines","full","class","pdl-0 pdr-0",4,"ngFor","ngForOf"],["class","text-center text-danger mb-0 no-data-txt",4,"ngIf"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body","ios-content"],["mandatory","true","id","beaconMessages-create-languagename-addpopup",3,"label","options","selectedOption","searchValueChange"],["languageAdd",""],["disabled","false","mandatory","true","autoCaseFlag","false","id","beaconMessages-create-displayname-addpopup",3,"label","value","maxlength","valueChange"],["displayNameAdd",""],[1,"col-md-4","d-flex","align-items-center"],["label","","mandatory","true","id","beaconMessages-create-checkboxoptions-addpopup",3,"options","checked","valueChange"],[1,"col-lg-12","col-md-12"],["mandatory","false","id","beaconMessages-create-description-addpopup",3,"label","defaultvalue","maxlength","valueChange"],[1,"error-msg","col-md-10","text-danger","text-center","mb-0"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","beaconMessages-translations-add-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","beaconMessages-translations-add-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","true","disabled","true","id","beaconMessages-create-displayname-editpopup",3,"label","value"],["disabled","false","mandatory","true","autoCaseFlag","false","id","beaconMessages-create-displayname-editpopup",3,"label","value","maxlength","valueChange"],["displayNameEdit",""],["label","","mandatory","true","id","beaconMessages-create-checkboxoptions-editpopup",3,"options","checked","valueChange"],["mandatory","false","id","beaconMessages-create-description-editpopup",3,"label","defaultvalue","maxlength","valueChange"],["className","btn btn-primary btn-sm","id","beaconMessages-translations-update-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","beaconMessages-translations-update-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal3","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","false","disabled","true","id","beaconMessages-create-displayname-deletepopup",3,"label","value"],["disabled","false","id","beaconMessages-create-displayname-deletepopup","mandatory","true",3,"label","value"],["label","","mandatory","false","id","beaconMessages-create-description-deletepopup","disabled","true",3,"options","checked"],["disabled","true","mandatory","false","id","beaconMessages-create-description-deletepopup",3,"label","defaultvalue","maxlength"],["className","btn btn-primary btn-sm","id","beaconMessages-translations-delete-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","beaconMessages-translations-delete-cancel-btn",3,"label","buttonOnClick"],[1,"col-md-2","d-flex","align-items-center"],["label","",3,"options","checked","valueChange"],[1,"d-flex","fs-13","fw-500","proximity-btn","mgr-5",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center",3,"ngClass"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","class","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","click"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["lines","full",1,"pdl-0","pdr-0"],[1,"mg-0",3,"click"],[1,"mg-0","fs-13"],["color","primary",1,"h3"],[1,"mg-0","fs-11"],[1,"h3"],[1,"text-center","text-danger","mb-0","no-data-txt"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"app-dropdown-search",12,13),e.NdJ("selectedOption",function(n){return t.changeFacilityType(n)})("searchValueChange",function(n){return t.getFacilityTypes(n)}),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",11)(16,"app-dropdown-search",14,15),e.NdJ("searchValueChange",function(n){return t.getFacilityForSearch(n)})("selectedOption",function(n){return t.changeFacility(n)}),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"div",11)(20,"app-input",16,17),e.NdJ("valueChange",function(n){return t.changeTitle(n)}),e.ALo(22,"translate"),e.qZA()()()(),e.TgZ(23,"div",9)(24,"div",10)(25,"div",11)(26,"app-dropdown-singleselect",18,19),e.NdJ("valueChange",function(n){return t.changeMessageType(n)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",20)(30,"div",10)(31,"div",21)(32,"div",10)(33,"div",22)(34,"app-datetimepicker",23),e.NdJ("editvalueChange",function(n){return t.changeStartDate(n)}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",24)(37,"app-dropdown-search",25),e.NdJ("selectedOption",function(n){return t.changeTimeZone(n)})("searchValueChange",function(n){return t.getTimeZone(n)}),e.ALo(38,"translate"),e.qZA()()()(),e.TgZ(39,"div",21)(40,"div",10)(41,"div",22)(42,"app-datetimepicker",26),e.NdJ("editvalueChange",function(n){return t.changeEndDate(n)}),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",24)(45,"app-dropdown-search",25),e.NdJ("selectedOption",function(n){return t.changeTimeZone(n)})("searchValueChange",function(n){return t.getTimeZone(n)}),e.ALo(46,"translate"),e.qZA()()()()()()()(),e.TgZ(47,"div",27)(48,"app-input",28,29),e.NdJ("valueChange",function(n){return t.changeLatitude(n)}),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"div",27)(52,"app-input",30,31),e.NdJ("valueChange",function(n){return t.changeLongitude(n)}),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"div",27)(56,"app-inputnumber",32,33),e.NdJ("valueChange",function(n){return t.changeRadius(n)}),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"div",34)(60,"ion-label",35),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"angular-editor",36),e.NdJ("ngModelChange",function(n){return t.description=n})("keypress",function(){return t.clearMessage()})("valueChange",function(n){return t.changeDescription(n)}),e.qZA()(),e.TgZ(64,"div",37)(65,"app-button",38),e.NdJ("buttonOnClick",function(){return t.createRecord()}),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"app-button",39),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(68,"translate"),e.qZA()()(),e.TgZ(69,"div",10)(70,"div",40),e._uU(71),e.ALo(72,"translate"),e.qZA()(),e.TgZ(73,"div",10)(74,"div",3)(75,"div",41)(76,"div",42)(77,"p-accordion",43)(78,"p-accordionTab",44)(79,"p-header",45)(80,"span"),e._uU(81),e.ALo(82,"translate"),e.qZA()(),e.TgZ(83,"div",46)(84,"div",47),e.YNc(85,ve,2,4,"div",48),e.qZA()()(),e.TgZ(86,"p-accordionTab",49)(87,"p-header",45)(88,"span"),e._uU(89),e.ALo(90,"translate"),e.ALo(91,"translate"),e.qZA()(),e.TgZ(92,"div",46)(93,"div",47)(94,"div",50)(95,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageTitleBgColor",n,t.dataJsonObj)}),e.ALo(96,"translate"),e.qZA()(),e.TgZ(97,"div",50)(98,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageTitleTextcolor",n,t.dataJsonObj)}),e.ALo(99,"translate"),e.qZA()(),e.TgZ(100,"div",50)(101,"app-dropdown-singleselect",52),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageTitleFontFamilyObj")}),e.ALo(102,"translate"),e.qZA()(),e.TgZ(103,"div",50)(104,"app-numberincrementdecrementvalue",53,54),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageTitleFontSizeObj")}),e.qZA()(),e.TgZ(106,"div",50)(107,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageDescriptionBgColor",n,t.dataJsonObj)}),e.ALo(108,"translate"),e.qZA()(),e.TgZ(109,"div",50)(110,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageDescriptionTextColor",n,t.dataJsonObj)}),e.ALo(111,"translate"),e.qZA()(),e.TgZ(112,"div",50)(113,"app-dropdown-singleselect",52),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageDescriptionFontFamilyObj")}),e.ALo(114,"translate"),e.qZA()(),e.TgZ(115,"div",50)(116,"app-numberincrementdecrementvalue",53,54),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageDescriptionFontSizeObj")}),e.qZA()(),e.TgZ(118,"div",50)(119,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterBorderColor",n,t.dataJsonObj)}),e.ALo(120,"translate"),e.qZA()(),e.TgZ(121,"div",50)(122,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterBgColor",n,t.dataJsonObj)}),e.ALo(123,"translate"),e.qZA()(),e.TgZ(124,"div",50)(125,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterButtonBgColor",n,t.dataJsonObj)}),e.ALo(126,"translate"),e.qZA()(),e.TgZ(127,"div",50)(128,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterButtonTextColor",n,t.dataJsonObj)}),e.ALo(129,"translate"),e.qZA()(),e.TgZ(130,"div",50)(131,"app-numberincrementdecrementvalue",53,54),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageFooterButtonsFontSizeObj")}),e.qZA()(),e.TgZ(133,"div",50)(134,"app-dropdown-singleselect",52),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageFooterButtonFontFamilyObj")}),e.ALo(135,"translate"),e.qZA()()()(),e.TgZ(136,"div",55)(137,"div",56)(138,"div",57)(139,"div",58)(140,"div",59)(141,"div",60)(142,"div",61)(143,"div",62)(144,"div",63)(145,"h2",64),e._uU(146),e.qZA()(),e.TgZ(147,"div",65,66),e._UZ(149,"i",67)(150,"i",68),e.qZA()()(),e.TgZ(151,"div",69),e._UZ(152,"span",70),e.qZA()()(),e.TgZ(153,"div",71)(154,"div",72),e.YNc(155,ye,3,8,"div",73),e.TgZ(156,"div",74),e._UZ(157,"i",75),e._uU(158),e.ALo(159,"translate"),e.qZA()()()()()()()(),e.TgZ(160,"p-accordionTab",76)(161,"p-header",45)(162,"span"),e._uU(163),e.ALo(164,"translate"),e.qZA(),e.TgZ(165,"app-button",77),e.NdJ("buttonOnClick",function(n){return t.languagesAdd(n)}),e.qZA()(),e.TgZ(166,"p-table",78),e.YNc(167,Ee,1,1,"ng-template",79),e.YNc(168,De,2,1,"ng-template",80),e.YNc(169,je,2,1,"ng-template",81),e.YNc(170,Le,4,2,"ng-template",82),e.qZA(),e.TgZ(171,"div",83)(172,"ion-list"),e.YNc(173,Je,21,15,"ion-item",84),e.qZA(),e.YNc(174,Ze,3,3,"p",85),e.qZA()()()()()()()()()()()()(),e.TgZ(175,"div",86)(176,"div",87)(177,"div",88)(178,"div",89)(179,"div",90),e._uU(180),e.ALo(181,"translate"),e.ALo(182,"translate"),e.qZA()(),e.TgZ(183,"div",91)(184,"div",8)(185,"div",11)(186,"app-dropdown-search",92,93),e.NdJ("selectedOption",function(n){return t.changeLanguage(n)})("searchValueChange",function(n){return t.getLanguagesList(n)}),e.ALo(188,"translate"),e.qZA()(),e.TgZ(189,"div",11)(190,"app-input",94,95),e.NdJ("valueChange",function(n){return t.changelangTransMessageTitleName(n)}),e.ALo(192,"translate"),e.qZA()(),e.TgZ(193,"div",96)(194,"app-checkbox",97),e.NdJ("valueChange",function(n){return t.changeLangTransCheckBox(n)}),e.qZA()(),e.TgZ(195,"div",98)(196,"app-textarea",99),e.NdJ("valueChange",function(n){return t.changeLangTransDescription(n)}),e.ALo(197,"translate"),e.qZA()(),e.TgZ(198,"div",100),e._uU(199),e.ALo(200,"translate"),e.qZA(),e.TgZ(201,"div",101)(202,"app-button",102),e.NdJ("buttonOnClick",function(){return t.languagesAddSubmit()}),e.ALo(203,"translate"),e.qZA(),e.TgZ(204,"app-button",103),e.NdJ("buttonOnClick",function(){return t.cancelPopup()}),e.ALo(205,"translate"),e.qZA()()()()()()(),e.TgZ(206,"div",104)(207,"div",87)(208,"div",88)(209,"div",89)(210,"div",90),e._uU(211),e.ALo(212,"translate"),e.ALo(213,"translate"),e.qZA()(),e.TgZ(214,"div",91)(215,"div",8)(216,"div",11),e._UZ(217,"app-input",105),e.ALo(218,"translate"),e.qZA(),e.TgZ(219,"div",11)(220,"app-input",106,107),e.NdJ("valueChange",function(n){return t.changelangTransMessageTitleName(n)}),e.ALo(222,"translate"),e.qZA()(),e.TgZ(223,"div",96)(224,"app-checkbox",108),e.NdJ("valueChange",function(n){return t.changeLangTransCheckBox(n)}),e.qZA()(),e.TgZ(225,"div",98)(226,"app-textarea",109),e.NdJ("valueChange",function(n){return t.changeLangTransDescription(n)}),e.ALo(227,"translate"),e.qZA()(),e.TgZ(228,"div",101)(229,"app-button",110),e.NdJ("buttonOnClick",function(){return t.languagesEditSubmit()}),e.ALo(230,"translate"),e.qZA(),e.TgZ(231,"app-button",111),e.NdJ("buttonOnClick",function(){return t.cancelPopup()}),e.ALo(232,"translate"),e.qZA()()()()()()(),e.TgZ(233,"div",112)(234,"div",87)(235,"div",88)(236,"div",89)(237,"div",90),e._uU(238),e.ALo(239,"translate"),e.ALo(240,"translate"),e.qZA()(),e.TgZ(241,"div",91)(242,"div",8)(243,"div",11),e._UZ(244,"app-input",113),e.ALo(245,"translate"),e.qZA(),e.TgZ(246,"div",11),e._UZ(247,"app-input",114),e.ALo(248,"translate"),e.qZA(),e.TgZ(249,"div",96),e._UZ(250,"app-checkbox",115),e.qZA(),e.TgZ(251,"div",98),e._UZ(252,"app-textarea",116),e.ALo(253,"translate"),e.qZA(),e.TgZ(254,"div",101)(255,"app-button",117),e.NdJ("buttonOnClick",function(){return t.languagesDeleteSubmit()}),e.ALo(256,"translate"),e.qZA(),e.TgZ(257,"app-button",118),e.NdJ("buttonOnClick",function(){return t.cancelPopup()}),e.ALo(258,"translate"),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(6),e.s9C("label",e.lcZ(14,147,"FACILITIES.FACILITY_TYPE")),e.Q6J("options",t.facilityTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(18,149,"NEW_VARIABLES.FACILITY")),e.Q6J("options",t.facilityOptions),e.xp6(4),e.s9C("label",e.lcZ(22,151,"NEW_VARIABLES.TITLE")),e.Q6J("maxlength",30),e.xp6(6),e.s9C("label",e.lcZ(28,153,"NEW_VARIABLES.MESSAGE_TYPE")),e.s9C("defaultValue",t.messageTypeId),e.Q6J("options",t.messageTypeOptions),e.xp6(8),e.s9C("placeholder",e.lcZ(35,155,"COMMON_FIELDS.START_DATE")),e.Q6J("dateformat",t.loginUserDateFormat)("defaultDate",t.startDate),e.xp6(3),e.s9C("label",e.lcZ(38,157,"PREFERENCES.TIMEZONE")),e.s9C("defaultValue",t.userTimeZoneObj.timeZoneCode),e.Q6J("options",t.timeZoneOptions),e.xp6(5),e.s9C("placeholder",e.lcZ(43,159,"COMMON_FIELDS.END_DATE")),e.Q6J("defaultDate",t.endDate)("dateformat",t.loginUserDateFormat),e.xp6(3),e.s9C("label",e.lcZ(46,161,"PREFERENCES.TIMEZONE")),e.s9C("defaultValue",t.userTimeZoneObj.timeZoneCode),e.Q6J("options",t.timeZoneOptions),e.xp6(3),e.s9C("label",e.lcZ(50,163,"NEW_VARIABLES.LATITUDE")),e.s9C("mandatory",!(t.facilityId&&t.facilityTypeId&&t.latitude)),e.s9C("value",t.latitude),e.s9C("disabled",t.dataJsonObj.latLongFieldDisabled),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(54,165,"NEW_VARIABLES.LONGITUDE")),e.s9C("value",t.longitude),e.s9C("mandatory",!(t.facilityId&&t.facilityTypeId&&t.longitude)),e.s9C("disabled",t.dataJsonObj.latLongFieldDisabled),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(58,167,"NEW_VARIABLES.RADIUS")),e.s9C("value",t.dataJsonObj.radius),e.Q6J("maxlength",3),e.xp6(5),e.hij(" ",e.lcZ(62,169,"COMMON_PAGE_TITLES.MESSAGE")," "),e.xp6(2),e.Q6J("ngModel",t.description)("config",t.editorConfig)("maxlength",2e3),e.xp6(2),e.s9C("label",e.lcZ(66,171,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",t.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(68,173,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(72,175,t.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(82,177,"COMMON_FIELDS.ACTIONS")),e.xp6(4),e.Q6J("ngForOf",t.dataJsonObj.actionsListData),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(90,179,"COMMON_PAGE_TITLES.MESSAGE")," ",e.lcZ(91,181,"GOLF_GAMES.UI_SETTINGS"),""),e.xp6(6),e.s9C("label",e.lcZ(96,183,"NEW_VARIABLES.MESSAGE_TITLE_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageTitleBgColor),e.xp6(3),e.s9C("label",e.lcZ(99,185,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageTitleTextcolor),e.xp6(3),e.s9C("label",e.lcZ(102,187,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageTitleFontFamilyObj?null:t.dataJsonObj.messageTitleFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(3),e.s9C("value",t.dataJsonObj.messageTitleFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(108,189,"NEW_VARIABLES.MESSAGE_DESCRIPTION_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageDescriptionBgColor),e.xp6(3),e.s9C("label",e.lcZ(111,191,"NEW_VARIABLES.MESSAGE_DESCRIPTION_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageDescriptionTextColor),e.xp6(3),e.s9C("label",e.lcZ(114,193,"NEW_VARIABLES.MESSAGE_DESCRIPTION_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageDescriptionFontFamilyObj?null:t.dataJsonObj.messageDescriptionFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(3),e.s9C("value",t.dataJsonObj.messageDescriptionFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(120,195,"NEW_VARIABLES.MESSAGE_FOOTER_BORDER_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterBorderColor),e.xp6(3),e.s9C("label",e.lcZ(123,197,"NEW_VARIABLES.MESSAGE_FOOTER_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterBgColor),e.xp6(3),e.s9C("label",e.lcZ(126,199,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterButtonBgColor),e.xp6(3),e.s9C("label",e.lcZ(129,201,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterButtonTextColor),e.xp6(3),e.s9C("value",t.dataJsonObj.messageFooterButtonsFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(135,203,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageFooterButtonFontFamilyObj?null:t.dataJsonObj.messageFooterButtonFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(8),e.Q6J("ngStyle",e.VKq(253,Fe,t.dataJsonObj.messageTitleBgColor)),e.xp6(3),e.Q6J("ngStyle",e.kEZ(255,Ie,t.dataJsonObj.messageTitleTextcolor,null==t.dataJsonObj.messageTitleFontFamilyObj?null:t.dataJsonObj.messageTitleFontFamilyObj.NAME,1.3*t.dataJsonObj.messageTitleFontSizeObj+"rem")),e.xp6(1),e.hij(" ",t.title,""),e.xp6(1),e.Q6J("ngStyle",e.VKq(259,xe,t.dataJsonObj.messageTitleTextcolor)),e.xp6(4),e.Q6J("ngStyle",e.l5B(261,V,t.dataJsonObj.messageDescriptionBgColor,t.dataJsonObj.messageDescriptionTextColor,null==t.dataJsonObj.messageDescriptionFontFamilyObj?null:t.dataJsonObj.messageDescriptionFontFamilyObj.NAME,t.dataJsonObj.messageDescriptionFontSizeObj+"rem")),e.xp6(1),e.Q6J("innerHtml",t.description,e.oJD),e.xp6(1),e.Q6J("ngStyle",e.kEZ(266,we,t.dataJsonObj.messageFooterBgColor,t.dataJsonObj.messageDescriptionTextColor,t.dataJsonObj.messageFooterBorderColor)),e.xp6(2),e.Q6J("ngForOf",null==t.dataJsonObj?null:t.dataJsonObj.actionsData),e.xp6(1),e.Q6J("ngStyle",e.l5B(270,V,t.dataJsonObj.messageFooterButtonBgColor,t.dataJsonObj.messageFooterButtonTextColor,null==t.dataJsonObj.messageFooterButtonFontFamilyObj?null:t.dataJsonObj.messageFooterButtonFontFamilyObj.NAME,t.dataJsonObj.messageFooterButtonsFontSizeObj+"rem")),e.xp6(2),e.hij("",e.lcZ(159,205,"NEW_VARIABLES.REMIND_ME_LATER")," "),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(164,207,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")),e.xp6(2),e.Q6J("isEmitMouseEvent",!0),e.xp6(1),e.Q6J("columns",t.headers)("value",t.languagesData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(7),e.Q6J("ngForOf",t.languagesData),e.xp6(1),e.Q6J("ngIf",t.languagesData&&0===t.languagesData.length),e.xp6(6),e.AsE("",e.lcZ(181,209,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(182,211,"COMMON_BUTTONS.BUTTON_ADD"),""),e.xp6(6),e.s9C("label",e.lcZ(188,213,"PREFERENCES.LANGUAGE")),e.Q6J("options",t.translateLanguageOptions),e.xp6(4),e.s9C("label",e.lcZ(192,215,"COMMON_FIELDS.BEACON_TITLE_NAME")),e.s9C("value",t.langTransMessageTitleName),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",t.checkboxOptions)("checked",t.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(197,217,"COMMON_PAGE_TITLES.MESSAGE")),e.s9C("defaultvalue",t.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.hij(" ",e.lcZ(200,219,t.addPopupError)," "),e.xp6(3),e.s9C("label",e.lcZ(203,221,"COMMON_BUTTONS.BUTTON_ADD")),e.xp6(2),e.s9C("label",e.lcZ(205,223,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(212,225,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(213,227,"COMMON_BUTTONS.BUTTON_UPDATE"),""),e.xp6(6),e.s9C("label",e.lcZ(218,229,"PREFERENCES.LANGUAGE")),e.s9C("value",t.languageName),e.xp6(3),e.s9C("label",e.lcZ(222,231,"COMMON_FIELDS.BEACON_TITLE_NAME")),e.s9C("value",t.langTransMessageTitleName),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",t.checkboxOptions)("checked",t.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(227,233,"COMMON_PAGE_TITLES.MESSAGE")),e.s9C("defaultvalue",t.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(230,235,"COMMON_BUTTONS.BUTTON_UPDATE")),e.xp6(2),e.s9C("label",e.lcZ(232,237,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(239,239,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(240,241,"COMMON_BUTTONS.BUTTON_DELETE"),""),e.xp6(6),e.s9C("label",e.lcZ(245,243,"PREFERENCES.LANGUAGE")),e.s9C("value",t.languageName),e.xp6(3),e.s9C("label",e.lcZ(248,245,"COMMON_FIELDS.BEACON_TITLE_NAME")),e.s9C("value",t.langTransMessageTitleName),e.xp6(3),e.Q6J("options",t.checkboxOptions)("checked",t.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(253,247,"COMMON_PAGE_TITLES.MESSAGE")),e.s9C("defaultvalue",t.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(256,249,"COMMON_BUTTONS.BUTTON_DELETE")),e.xp6(2),e.s9C("label",e.lcZ(258,251,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[p.mk,p.sg,p.O5,p.PC,A.h4,A.jx,T.JJ,T.nD,T.On,y.iA,y.Ei,B.r,I.a,U.K,R.k,k.b,H.R,K.K,X.L,ee.C,x.q,v.UQ,v.US,P.s6,f.X$],styles:[".notifications[_ngcontent-%COMP%]{position:fixed}.notifications.topright[_ngcontent-%COMP%]{top:0;right:0}.notifications.topleft[_ngcontent-%COMP%]{top:0;left:0}.notifications.bottomright[_ngcontent-%COMP%]{bottom:0;right:0}.notifications.bottomleft[_ngcontent-%COMP%]{bottom:0;left:0}.notifications.center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{z-index:1000;position:relative}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{background:#ffffff;position:relative;min-width:300px;max-width:300px;margin:10px;padding:0;border-radius:5px;color:#000;overflow:hidden;box-shadow:0 0 6px #000000bf;-webkit-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);-moz-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);font-family:var(--popup-font-family)!important}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]{padding:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{position:fixed}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:var(--header-bg-color)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--header-text-color);font-size:var(--modal-title-font-size)}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]{color:var(--header-text-color);border-top:1px solid}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]   .proximity-btn[_ngcontent-%COMP%]{background:var(--header-bg-color);padding:2px 4px;border-radius:6px}.proximity-buttons-wrapper[_ngcontent-%COMP%]{flex-shrink:0;display:flex;justify-content:flex-end}.proximity-title-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return o})();var te=g(11735);const Be=["buttonsWrapper"],Ue=["validFacilityType"],Re=["validFacility"],ke=["validMessageType"],Ve=["validBeaconName"],Ge=["validTitle"],qe=["validLatitude"],ze=["validLongitude"],Qe=["descriptionInput"],We=["languageAdd"],Ye=["displayNameAdd"],He=["displayNameEdit"],$e=["validRadius"];function Ke(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"div",11)(1,"app-input",120,121),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeTitle(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"NEW_VARIABLES.TITLE")),e.s9C("value",null==a.viewData?null:a.viewData.message_title),e.Q6J("maxlength",30)}}function Xe(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"div",11)(1,"app-input",120,121),e.NdJ("valueChange",function(t){e.CHM(a);const s=e.oxw();return e.KtG(s.changeTitle(t))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"NEW_VARIABLES.TITLE")),e.s9C("value",null==a.viewData?null:a.viewData.message_title),e.Q6J("maxlength",30)}}const et=function(o){return[o]};function tt(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"div",122)(1,"app-checkbox",123),e.NdJ("valueChange",function(t){const n=e.CHM(a).$implicit,d=e.oxw();return e.KtG(d.changeCheckBoxValue(t,"is_enabled",n))}),e.qZA()()}if(2&o){const a=r.$implicit;e.xp6(1),e.Q6J("options",e.VKq(2,et,a))("checked",null==a?null:a.is_enabled)}}const G=function(o,r,a,i){return{background:o,color:r,"font-family":a,"font-size":i}};function at(o,r){if(1&o&&(e.TgZ(0,"div",124),e._UZ(1,"i",125),e._uU(2),e.qZA()),2&o){const a=r.$implicit,i=e.oxw();e.Q6J("ngStyle",e.l5B(3,G,i.dataJsonObj.messageFooterButtonBgColor,i.dataJsonObj.messageFooterButtonTextColor,null==i.dataJsonObj.messageFooterButtonFontFamilyObj?null:i.dataJsonObj.messageFooterButtonFontFamilyObj.lookup_name,i.dataJsonObj.messageFooterButtonsFontSizeObj+"rem")),e.xp6(1),e.Q6J("ngClass",null!=a&&a.iconClassName?null==a?null:a.iconClassName:""),e.xp6(1),e.hij("",null==a?null:a.display_name," ")}}function it(o,r){if(1&o&&(e.TgZ(0,"tr",127)(1,"td",128),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",a[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function st(o,r){if(1&o&&e.YNc(0,it,4,4,"tr",126),2&o){const a=e.oxw();e.Q6J("ngIf",a.languagesData&&0===a.languagesData.length)}}function nt(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const a=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,a.header)," ")}}function ot(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,nt,3,3,"th",129),e.qZA()),2&o){const a=r.$implicit;e.xp6(1),e.Q6J("ngForOf",a[0])}}function lt(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"td",131),e.NdJ("click",function(){e.CHM(a);const t=e.oxw(),s=t.rowIndex,n=t.$implicit,d=e.oxw();return e.KtG(d.editLanguages(s,n))}),e._uU(1),e.qZA()}if(2&o){const a=r.$implicit,i=e.oxw().$implicit;e.Gre("",a.class," "),e.Q6J("pSelectableRow",i),e.xp6(1),e.hij(" ",i[a.field]," ")}}function rt(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,lt,2,5,"td",130),e.qZA()),2&o){const a=r.columns;e.xp6(1),e.Q6J("ngForOf",a[0])}}function dt(o,r){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",133)(6,"br"),e.qZA()),2&o){const a=r.$implicit,i=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,a.header)),e.xp6(3),e.Q6J("innerHTML",i[a.field],e.oJD)}}function gt(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,dt,7,4,"div",132),e.qZA()()()),2&o){const a=r.columns;e.xp6(1),e.uIk("colspan",a[0].length+2),e.xp6(2),e.Q6J("ngForOf",a[1])}}function ct(o,r){if(1&o){const a=e.EpF();e.TgZ(0,"ion-item",134)(1,"ion-label",135),e.NdJ("click",function(){const t=e.CHM(a),s=t.index,n=t.$implicit,d=e.oxw();return e.KtG(d.editLanguages(s,n))}),e.TgZ(2,"div",136)(3,"span",137),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.qZA()(),e.TgZ(8,"div",138)(9,"span",139),e._uU(10),e.ALo(11,"translate"),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"div",138)(16,"span",139),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"span"),e._uU(20),e.qZA()()()()}if(2&o){const a=r.$implicit;e.xp6(4),e.hij("",e.lcZ(5,7,"PREFERENCES.LANGUAGE"),":"),e.xp6(3),e.Oqu(null==a?null:a.language_name_value),e.xp6(3),e.AsE("",e.lcZ(11,9,"COMMON_FIELDS.BEACON_TITLE_NAME")," (",e.lcZ(12,11,"NEW_VARIABLES.TRANSLATED"),"):"),e.xp6(4),e.Oqu(null==a?null:a.beacon_title_display_name),e.xp6(3),e.hij("",e.lcZ(18,13,"COMMON_FIELDS.ENABLED"),":"),e.xp6(3),e.Oqu(null==a?null:a.is_enabled_value)}}function mt(o,r){1&o&&(e.TgZ(0,"p",140),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),""))}const pt=function(o){return{background:o}},ut=function(o,r,a){return{color:o,"font-family":r,"font-size":a}},_t=function(o){return{color:o}},ht=function(o,r,a){return{background:o,color:r,"border-color":a}};let bt=(()=>{class o extends J.O{commonService;toastController;uiUtils;facilitiesService;router;apiEndPointUrl;route;proximityMessageService;translateService;loggerService;navigationService;buttonsWrapper;validFacilityType;validFacility;validMessageType;validBeaconName;validTitle;validLatitude;validLongitude;descriptionInput;languageAdd;displayNameAdd;displayNameEdit;validRadius;previousWidth="";apiEndPoint;audioFile;audioUpload=!1;beaconDisplayName;beaconId;beaconImage;proximityMessageEditObj;beaconPromotionsEnable=!1;beconName;beconNameObj;beconOptions;checkboxOptions;editorConfig={editable:!0,spellcheck:!0,height:"15rem",minHeight:"5rem",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!0,showToolbar:!0,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",toolbarHiddenButtons:[["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["customClasses","insertImage","insertVideo","removeFormat","backgroundColor"]]};viewSignature={editable:!1,spellcheck:!0,height:"15rem",minHeight:"5rem",maxHeight:"auto",width:"auto",minWidth:"0",translate:"yes",enableToolbar:!1,showToolbar:!1,placeholder:"Enter text here...",defaultParagraphSeparator:"",defaultFontName:"",defaultFontSize:"",fonts:[{class:"arial",name:"Arial"},{class:"times-new-roman",name:"Times New Roman"},{class:"calibri",name:"Calibri"},{class:"comic-sans-ms",name:"Comic Sans MS"}],customClasses:[{name:"quote",class:"quote"},{name:"redText",class:"redText"},{name:"titleText",class:"titleText",tag:"h1"}],uploadUrl:"v1/image",uploadWithCredentials:!1,sanitize:!0,toolbarPosition:"top",toolbarHiddenButtons:[["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["customClasses","link","unlink","insertImage","insertVideo","removeFormat","backgroundColor"]]};defaultTimeZone;description;disableSubmitBtn=!1;endDate;enterpriseId;enterpriseObj;error;facilityId;facilityName;facilityObj;facilityOptions;facilityTypeName;facilityTypeId;facilityTypeObj;facilityTypeOptions;imageError;imageUpload=!1;imgFile;imgFilepath;latitude;longitude;messageTypeDisplayName;messageTypeId;messageTypeObj;messageTypeOptions;navigationPath;objectId;recordId;screenTypeId;screenTypeOptions;screenTypeName;defaultScreenType;screenTypeObj;navigationId;startDate;textEnable=!1;timeZoneOptions;title;url;utcTimeZoneString;utctimezone;videoFile;videoUpload;viewData;screenTypeobj;headerAction;userTimeZoneObj={};loginUserDateFormat;dataJsonObj={};audioExtensions=[];videoExtensions=[];enableImageDeleteValue=!0;languagesData=[];headers;languageCode;languageName;addPopupError;langTransMessageTitleName;langTransDescription;isLangTransEnabled;languageId;language;editRowIndex;deleteRowIndex;deleted_translation_ids=[];translateLanguageOptions;constructor(a,i,t,s,n,d,c,m,u,b,O){super(c,a),this.commonService=a,this.toastController=i,this.uiUtils=t,this.facilitiesService=s,this.router=n,this.apiEndPointUrl=d,this.route=c,this.proximityMessageService=m,this.translateService=u,this.loggerService=b,this.navigationService=O}ngOnInit(){this.headerAction={BACK:!0},this.initializeComponent(),this.route.params.subscribe(a=>{this.recordId=a.id,this.getBeconName()}),this.apiEndPoint=localStorage.getItem(l.BU.S3_URL)?localStorage.getItem(l.BU.S3_URL):this.apiEndPointUrl}initializeComponent(){this.dataJsonObj.pageName=l.hf.PROXIMITY_MESSAGES,this.dataJsonObj.defaultUiSettingsData=JSON.parse(localStorage.getItem(l.BU.DEFAULT_UI_SETTINGS_DATA)),this.dataJsonObj.defaultFontSize=localStorage.getItem(l.BU.DEFAULT_FONT_SIZE),this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE);const a=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=a.dateFormat,this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(a.timeZoneDescription),this.userTimeZoneObj.timeZoneCode=a.timeZoneCode,this.getDynamicJson([{folderName:l.sb.FACILITY_TYPES,jsonType:"list",storingFieldName:"facilityTypesListJson"},{folderName:l.sb.FACILITIES,jsonType:"list",storingFieldName:"facilitiesListJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"}]),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(t=>{this.dataJsonObj.lookupCodesListJSON=t,this.getTimeZone(this.userTimeZoneObj.timeZoneCode),this.getMessageTypes(),this.getScreenTypeOptions(),this.getFontData()}),this.checkboxOptions=[{value:"",displayname:this.translateService.instant("COMMON_FIELDS.ENABLED"),key:"checkbox1"}],this.getLanguagesList(""),this.dataJsonObj.languagesFromJson={},this.headers=[[{headersort:"disableth",field:"language_name_value",header:"PREFERENCES.LANGUAGE",class:"w-100"},{headersort:"disableth",field:"beacon_title_display_name",header:"COMMON_FIELDS.BEACON_TITLE_NAME",class:""},{headersort:"disableth",field:"description",header:"COMMON_PAGE_TITLES.MESSAGE",class:""},{headersort:"disableth",field:"is_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"}]],this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.PROXIMITY_MESSAGES,l.AM.ACTIONS,l.In.RECORD_HISTORY)}ngAfterViewChecked(){this.calculateButtonsWidth()}calculateButtonsWidth(){const a=this.buttonsWrapper.nativeElement.children;let i=0;for(let s=0;s<a.length;s++){const n=a[s];i+=n.offsetWidth+parseInt(getComputedStyle(n).marginLeft)+parseInt(getComputedStyle(n).marginRight)}const t=`${i}px`;this.previousWidth!==t&&(this.buttonsWrapper.nativeElement.style.width=t,this.previousWidth=t)}getDynamicJson(a){var i=this;return(0,_.Z)(function*(){for(let n of a)i.dataJsonObj[n.storingFieldName]=yield i.commonService.getDynamicJson(i.enterpriseId,n.folderName,n.jsonType);const s=(yield i.commonService.getAllPagesFromModuleManagerJSON(i.dataJsonObj.moduleManagerListJson)).find(n=>n.module.page_name===l.hf.BEACON_MESSAGES);s?.actions&&(i.dataJsonObj.actionsListData=Object.keys(s.actions).map(n=>({field:i.toTitleCase(n.split("_").join(" ")),displayname:n.split("_").join(" "),display_name:i.toTitleCase(n.split("_").join(" ")),is_enabled:!1})),i.dataJsonObj.actionsListData1=i.dataJsonObj.actionsListData),i.dataJsonObj.actionsData=[],i.getLanguagesfromJson(),i.getFacilityTypes(""),i.getFacility()})()}getRecordById(){this.proximityMessageService.get(this.recordId).subscribe(a=>{if(this.viewData=a,this.enterpriseId=this.viewData.enterprise.enterprise_id,this.enterpriseObj=this.viewData.enterprise,this.facilityTypeObj=this.viewData.beacon.facility_type?this.viewData.beacon.facility_type:"",this.facilityTypeId=this.viewData.beacon.facility_type?this.viewData.beacon.facility_type.facility_type_id:"",this.facilityTypeName=this.viewData.beacon.facility_type?this.viewData.beacon.facility_type.facility_type_name:"",this.facilityObj=this.viewData?.beacon?.facility?this.viewData.beacon.facility:"",this.facilityId=this.viewData.beacon.facility?this.viewData.beacon.facility.facility_id:"",this.facilityId||(this.dataJsonObj.actionsListData=this.dataJsonObj.actionsListData.filter(s=>"bookmarks"!==s.field.toLowerCase())),this.dataJsonObj.latLongFieldDisabled=!!this.viewData.beacon?.facility?.facility_id,this.getFacility(),this.facilityName=this.viewData.beacon.facility?this.viewData.beacon.facility.facility_name:"",this.viewData.language_translations)for(let s=0;s<this.viewData.language_translations.length;s++)this.viewData.language_translations[s].language_name_value=this.dataJsonObj.languagesFromJson[this.viewData.language_translations[s]?.language.language_name]?.language_display_name,this.viewData.language_translations[s].is_enabled_value=!0===this.viewData.language_translations[s].is_enabled?"Yes":"No",this.viewData.language_translations[s].updatedAt=this.viewData.language_translations[s].updatedAt?S(this.viewData.language_translations[s].updatedAt).format(this.loginUserDateFormat):"",this.viewData.language_translations[s].updated_by_value=this.viewData.language_translations[s].updated_by.l_name+", "+this.viewData.language_translations[s].updated_by.f_name,this.languagesData.find(d=>d._id===this.viewData.language_translations[s]._id)||this.languagesData.push(this.viewData.language_translations[s]);this.beconNameObj=this.viewData.beacon,this.beaconId=this.viewData.beacon.beacon_id,this.messageTypeObj=this.viewData.message_type,this.title=this.viewData.message_title,this.dataJsonObj.messageTitle=this.viewData.message_title,this.screenTypeObj=this.viewData.link_to_screen.screen_type?this.viewData.link_to_screen.screen_type:"",this.objectId=this.viewData.link_to_screen.object_id,this.navigationId=this.viewData.link_to_screen.navigation_id,this.navigationPath=this.viewData.link_to_screen.navigation_path,this.latitude=this.viewData.geo_coordinates[0],this.longitude=this.viewData.geo_coordinates[1],this.dataJsonObj.radius=this.viewData?.radius,this.description=this.viewData.message_description;const i=this.displayDateFormatter(this.viewData.start_datetime,!1,!0);this.startDate=i.startDate;const t=this.displayDateFormatter(this.viewData.end_datetime,!1,!0);this.endDate=t.startDate,this.viewData.createdAt=this.viewData.createdAt,this.viewData.updatedAt=this.viewData.updatedAt,this.dataJsonObj.pageTitle=[{key:"PROXIMITY_MESSAGES.PROXIMITY_MESSAGE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.imgFilepath=this.viewData.message_file_path&&this.viewData.message_file_name?this.apiEndPoint+this.viewData.message_file_path+"/"+this.viewData.message_file_name:"",this.viewData.message_type.lookup_name===l.V8.TEXT?(this.videoUpload=!1,this.audioUpload=!1,this.imageUpload=!1,this.textEnable=!0,this.audioFile="",this.imgFile="",this.imgFilepath="",this.videoFile=""):this.viewData.message_type.lookup_name===l.V8.IMAGE?(this.imageUpload=!0,this.audioUpload=!1,this.videoUpload=!1,this.textEnable=!1,this.audioFile="",this.videoFile="",this.title=""):this.viewData.message_type.lookup_name===l.V8.AUDIO?(this.audioUpload=!0,this.imageUpload=!1,this.videoUpload=!1,this.textEnable=!1,this.videoFile="",this.imgFile="",this.imgFilepath="",this.title="",setTimeout(()=>{this.displayFileName(this.viewData.message_file_name)},500)):this.viewData.message_type.lookup_name===l.V8.VIDEO&&(this.videoUpload=!0,this.audioUpload=!1,this.imageUpload=!1,this.textEnable=!1,this.audioFile="",this.imgFile="",this.imgFilepath="",this.title="",setTimeout(()=>{this.displayFileName1(this.viewData.message_file_name)},500)),this.imgFilepath=this.viewData.message_file_path&&this.viewData.message_file_name?this.apiEndPoint+this.viewData.message_file_path+"/"+this.viewData.message_file_name:"";for(let s=0;s<this.viewData.actions.length;s++){let n=this.viewData.actions[s];for(let d=0;d<this.dataJsonObj?.actionsListData?.length;d++)if(this.dataJsonObj.actionsListData[d].field===n.field){this.dataJsonObj.actionsListData[d].is_enabled=n.is_enabled;break}}this.dataJsonObj.actionsData=this.viewData.actions;for(let s of this.dataJsonObj.actionsData)switch(s.field){case l.A0.BOOKMARKS:s.display_name=this.translateService.instant("MAP.BOOKMARK"),s.iconClassName="mgr-5 fas fa-bookmark";break;case l.A0.VISIT:s.display_name=this.translateService.instant("NEW_VARIABLES.VISIT"),s.iconClassName="mgr-5 icon-visit"}this.dataJsonObj.messageTitleBgColor=this.viewData?.message_ui_setting?.message_title_bg_color?this.viewData.message_ui_setting.message_title_bg_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.header_bg_color,this.dataJsonObj.messageTitleTextcolor=this.viewData?.message_ui_setting?.message_title_text_color?this.viewData.message_ui_setting.message_title_text_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.header_text_color,this.dataJsonObj.messageTitleFontFamilyObj=this.viewData?.message_ui_setting?.message_title_font_family?this.viewData.message_ui_setting.message_title_font_family:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.header_and_footer?.header_text_font,this.dataJsonObj.messageTitleFontSizeObj=this.viewData?.message_ui_setting?.message_title_font_size?this.viewData.message_ui_setting.message_title_font_size:this.dataJsonObj.defaultFontSize,this.dataJsonObj.messageDescriptionBgColor=this.viewData?.message_ui_setting?.message_description_bg_color?this.viewData.message_ui_setting.message_description_bg_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.body_bg_color,this.dataJsonObj.messageDescriptionTextColor=this.viewData?.message_ui_setting?.message_description_text_color?this.viewData.message_ui_setting.message_description_text_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.body_text_color,this.dataJsonObj.messageDescriptionFontFamilyObj=this.viewData?.message_ui_setting?.message_description_font_family?this.viewData.message_ui_setting.message_description_font_family:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.body?.text_font,this.dataJsonObj.messageDescriptionFontSizeObj=this.viewData?.message_ui_setting?.message_description_font_size?this.viewData.message_ui_setting.message_description_font_size:this.dataJsonObj.defaultFontSize,this.dataJsonObj.messageFooterBorderColor=this.viewData?.message_ui_setting?.message_footer_border_color?this.viewData.message_ui_setting.message_footer_border_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.footer_text_color,this.dataJsonObj.messageFooterBgColor=this.viewData?.message_ui_setting?.message_footer_bg_color?this.viewData.message_ui_setting.message_footer_bg_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.footer_bg_color,this.dataJsonObj.messageFooterButtonBgColor=this.viewData?.message_ui_setting?.message_footer_button_bg_color?this.viewData.message_ui_setting.message_footer_button_bg_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.button_primary_bg_color,this.dataJsonObj.messageFooterButtonTextColor=this.viewData?.message_ui_setting?.message_footer_button_text_color?this.viewData.message_ui_setting.message_footer_button_text_color:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.button_primary_text_color,this.dataJsonObj.messageFooterButtonFontFamilyObj=this.viewData?.message_ui_setting?.message_footer_button_font_family?this.viewData.message_ui_setting.message_footer_button_font_family:this.dataJsonObj.defaultUiSettingsData?.theme_settings?.button?.button_text_font,this.dataJsonObj.messageFooterButtonsFontSizeObj=this.viewData?.message_ui_setting?.message_footer_button_font_size?this.viewData.message_ui_setting.message_footer_button_font_size:this.dataJsonObj.defaultFontSize})}changeTitle(a){this.title=a.value,this.dataJsonObj.messageTitle=a.value}getBeconName(){try{this.proximityMessageService.getbeconName(this.enterpriseId).then(a=>{this.beconOptions=a,this.beconNameObj=a[0]},a=>{this.loggerService.setLoggerError(this.constructor.name,"getBeconName",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getBeconName",a)}}changeBeaconName(a){this.beaconId=a.value,this.beconNameObj=this.beconOptions.find(i=>i.ID===parseInt(this.beaconId,10))}getFacilityTypes(a){try{this.facilityTypeOptions=[],this.commonService.getFilteredDynamicJSONData(this.dataJsonObj.facilityTypesListJson,"facility_type_display_name",a).then(i=>{this.facilityTypeOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getFilteredDynamicJSONData",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getFacilityTypes",i)}}changeFacilityType(a){this.facilityTypeId=a.ID,this.facilityTypeObj=this.facilityTypeOptions.find(i=>i.ID===parseInt(this.facilityTypeId,10)),this.facilityTypeName=this.facilityTypeObj.facility_type_name,this.facilityId="",this.facilityName="",this.latitude="",this.longitude="",this.dataJsonObj.latLongFieldDisabled=!1,this.facilityOptions=[],this.validFacility.clearSelectInput(),this.getFacility()}getScreenTypeOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.SCREEN_TYPES],"").then(a=>{this.screenTypeOptions=a},a=>{this.loggerService.setLoggerError(this.constructor.name,"getScreenTypeOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getScreenTypeOptions",a)}}clearErrorMessage(){this.error=""}clearMessage(){this.error=""}changeScreenType(a){try{a.value&&(this.defaultScreenType=a.value,this.screenTypeObj=this.screenTypeOptions.find(i=>i.ID===parseInt(this.defaultScreenType,10)),this.screenTypeName=this.screenTypeObj.NAME)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changePositionType",i)}}changeNavigationId(a){this.navigationId=a.value}changeObjectId(a){this.objectId=a.value}changeNavigationPath(a){this.navigationPath=a.value}changeDescription(a){this.description=a.value}changeLatitude(a){this.latitude=a.value}changeLongitude(a){this.longitude=a.value}changeRadius(a){this.error="",this.dataJsonObj.radius=a.value}getMessageTypes(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.MESSAGE_TYPES],"").then(a=>{this.messageTypeOptions=a,this.messageTypeDisplayName=this.lookupLanguageTranslations(a[0].lookup_id)},a=>{this.loggerService.setLoggerError(this.constructor.name,"getMessageTypes",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getMessageTypes",a)}}changeMessageType(a){this.messageTypeId=a.value,this.messageTypeObj=this.messageTypeOptions.find(i=>i.ID===parseInt(this.messageTypeId,10)),this.messageTypeDisplayName=this.lookupLanguageTranslations(this.messageTypeObj.lookup_id),this.messageTypeObj.lookup_name===l.V8.AUDIO?(this.audioUpload=!0,this.imageUpload=!1,this.videoUpload=!1,this.textEnable=!1,this.videoFile="",this.imgFile="",this.title=""):this.messageTypeObj.lookup_name===l.V8.IMAGE?(this.imageUpload=!0,this.audioUpload=!1,this.videoUpload=!1,this.textEnable=!1,this.audioFile="",this.videoFile="",this.imgFilepath="",this.title=""):this.messageTypeObj.lookup_name===l.V8.VIDEO?(this.videoUpload=!0,this.audioUpload=!1,this.imageUpload=!1,this.textEnable=!1,this.audioFile="",this.imgFile="",this.title=""):this.messageTypeObj.lookup_name===l.V8.TEXT&&(this.videoUpload=!1,this.audioUpload=!1,this.imageUpload=!1,this.textEnable=!0,this.audioFile="",this.imgFile="",this.videoFile="")}getFacility(){try{this.facilityOptions=[],this.facilityOptions=this.facilityTypeId?this.dataJsonObj.facilitiesListJson.filter(a=>a.facility_type.facility_type_id===parseInt(this.facilityTypeId,10)):this.dataJsonObj.facilitiesListJson}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getFacility",a)}}getFacilityForSearch(a){try{this.dataJsonObj.filteredFacilityOptions=this.facilityTypeId?this.dataJsonObj.facilitiesListJson.filter(i=>i.facility_type.facility_type_id===parseInt(this.facilityTypeId,10)):this.dataJsonObj.facilitiesListJson,this.commonService.getFilteredDynamicJSONData(this.dataJsonObj.filteredFacilityOptions,"facility_display_name",a).then(i=>{this.facilityOptions=i}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getFilteredDynamicJSONData",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getFacilityForSearch",i)}}changeFacility(a){try{if(this.validLatitude.clearmessage(),this.validLongitude.clearmessage(),a&&a.ID)this.facilityId=a.ID,this.facilityId&&(this.dataJsonObj.actionsListData=this.dataJsonObj.actionsListData1),this.facilityObj=this.facilityOptions.find(i=>i.ID===parseInt(this.facilityId,10)),this.facilityName=this.facilityObj?.facility_name,this.latitude=this.facilityObj?.address?this.facilityObj.address.geo_coordinates[0]:"",this.longitude=this.facilityObj?.address?this.facilityObj.address.geo_coordinates[1]:"",this.dataJsonObj.latLongFieldDisabled=!(!this.latitude||!this.longitude);else{this.facilityId="",this.facilityName="",this.latitude="",this.longitude="",this.dataJsonObj.latLongFieldDisabled=!1,this.dataJsonObj.actionsListData=this.dataJsonObj.actionsListData.filter(t=>t.field.toLowerCase()!==l.In.BOOKMARKS);const i=this.dataJsonObj.actionsData.find(t=>t.field===l.A0.BOOKMARKS);i&&(i.is_enabled=!1)}}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeFacility",i)}}getTimeZone(a){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.ox.TIME_ZONES],a).then(i=>{if(this.timeZoneOptions=i,this.timeZoneOptions.length>0){for(let t=0;t<this.timeZoneOptions.length;t++)this.timeZoneOptions[t].NAME=this.timeZoneOptions[t].lookup_display_name+" - "+this.timeZoneOptions[t].description;this.timeZoneOptions=this.timeZoneOptions}},i=>{this.loggerService.setLoggerError(this.constructor.name,"getTimeZone",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getTimeZone",i)}}changeTimeZone(a){if(a)try{this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(a.description),this.userTimeZoneObj.timeZoneCode=a.lookup_name;const i=this.displayDateFormatter((new Date).toISOString(),!0,!0);this.startDate=i.startDate,this.endDate=i.endDate}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeTimeZone",i)}}changeStartDate(a){try{const i=this.displayDateFormatter(a.value,!0,!1);this.startDate=i.startDate,this.error=""}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeStartDate",i)}}changeEndDate(a){try{const i=this.displayDateFormatter(a.value,!1,!1);this.endDate=i.startDate,this.error=this.commonService.getUTCDateObj(this.startDate)<this.commonService.getUTCDateObj(this.endDate)?"":"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START"}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeEndDate",i)}}getExcelFile(a){if(a){this.error="";const i=a.target.files,s=(document.getElementById("importFile"),a.target.files[0].type),n=s.substring(s.lastIndexOf("/"));this.audioExtensions=this.commonService.getExtension(l.wE),-1==this.audioExtensions.indexOf(n)?(this.error="COMMON_VALIDATION_MESSAGES.VALID_FILETYPE",this.audioFile=""):(this.audioFile=i[0],this.displayFileName(i[0].name))}}displayFileName(a){const i=document.getElementById("importFile");let t=a;null!=t&&""!==t&&t.split(".")[0].length>25&&(t=t.split(".")[0].substring(0,25)+".."+t.split(".")[1]),i.innerHTML=t}getExcelFile1(a){if(a){this.error="";const i=a.target.files,s=(document.getElementById("importFile"),a.target.files[0].type),n=s.substring(s.lastIndexOf("/"));this.videoExtensions=this.commonService.getExtension(l.sc),-1==this.videoExtensions.indexOf(n)?(this.error="COMMON_VALIDATION_MESSAGES.VALID_FILETYPE",this.videoFile=""):(this.videoFile=i[0],this.displayFileName1(i[0].name))}}displayFileName1(a){const i=document.getElementById("importFile");let t=a;null!=t&&""!==t&&t.split(".")[0].length>25&&(t=t.split(".")[0].substring(0,25)+".."+t.split(".")[1]),i.innerHTML=t}changeImage(a){""===a.error?(this.imgFile=a.value,this.imgFile=this.commonService.dataURItoImgBlob(this.imgFile,"image/jpeg")):this.imageError=a.error}backgroundImageRemove(){this.beaconImage="",this.imageError=""}updateRecord(){const a=this.latitude?this.latitude.replace("+","").replace("%2B",""):"",i=this.longitude?this.longitude.replace("+","").replace("%2B",""):"";if(this.validMessageType.isValid()&&this.validTitle.isValid()&&this.validLatitude.isValid()&&this.validLongitude.isValid()&&this.validRadius.isValid())if(this.commonService.getUTCDateObj(this.endDate)>this.commonService.getUTCDateObj(this.startDate)){const t={enterprise:this.enterpriseObj,message_description:this.description,message_type:this.messageTypeObj,beacon:{beacon_id:this.beaconId,beacon_name:this.beconNameObj?this.beconNameObj.beacon_name:"",facility_type:{facility_type_id:this.facilityTypeId,facility_type_name:this.facilityTypeName},facility:{facility_id:this.facilityId,facility_name:this.facilityName}},geo_coordinates:[a,i],start_datetime:this.commonService.convertUserTimeZoneDateToUTC(this.startDate,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign),end_datetime:this.commonService.convertUserTimeZoneDateToUTC(this.endDate,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign),original_message_file_name:this.viewData.message_file_name,original_message_thumbnail_path:this.viewData.message_thumbnail_path,message_file_name:this.viewData.message_file_name,message_file_path:this.viewData.message_file_path,message_title:this.title,link_to_screen:{screen_type:{lookup_id:this.defaultScreenType,lookup_name:this.screenTypeName},object_id:this.objectId,navigation_id:this.navigationId,navigation_path:this.navigationPath,params:[]},language_translations:this.languagesData,radius:this.dataJsonObj.radius,actions:this.dataJsonObj.actionsData,message_ui_setting:{message_title_bg_color:this.dataJsonObj.messageTitleBgColor,message_title_text_color:this.dataJsonObj.messageTitleTextcolor,message_title_font_family:this.dataJsonObj.messageTitleFontFamilyObj,message_title_font_size:this.dataJsonObj.messageTitleFontSizeObj,message_description_bg_color:this.dataJsonObj.messageDescriptionBgColor,message_description_text_color:this.dataJsonObj.messageDescriptionTextColor,message_description_font_family:this.dataJsonObj.messageDescriptionFontFamilyObj,message_description_font_size:this.dataJsonObj.messageDescriptionFontSizeObj,message_footer_border_color:this.dataJsonObj.messageFooterBorderColor,message_footer_bg_color:this.dataJsonObj.messageFooterBgColor,message_footer_button_bg_color:this.dataJsonObj.messageFooterButtonBgColor,message_footer_button_text_color:this.dataJsonObj.messageFooterButtonTextColor,message_footer_button_font_family:this.dataJsonObj.messageFooterButtonFontFamilyObj,message_footer_button_font_size:this.dataJsonObj.messageFooterButtonsFontSizeObj}};this.proximityMessageService.update(t,this.recordId,this.imgFile,this.audioFile,this.videoFile).then(s=>{this.disableSubmitBtn=!1,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},s=>{this.commonErrorCodes(JSON.parse(s))})}else this.error="COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START"}displayDateFormatter(a,i,t){try{const s=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,n={startDate:"",endDate:""};if(n.startDate=this.commonService.convertDateToUserFormat(s,l.eZ.HOURS_MINS,!0,"",!1),i){const d=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,c=S.utc(d).add(1,"days");n.endDate=this.commonService.convertDateToUserFormat(c,l.eZ.HOURS_MINS,!0,"",!1)}return n}catch(s){this.loggerService.setLoggerError(this.constructor.name,"displayDateFormatter",s)}}commonErrorCodes(a){409===JSON.parse(a[l.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancelBtn(){this.commonService.redirectToPreviousUrl()}pageheadeActionClick(a){"BACK"==a.value&&this.cancelBtn()}deleteImgClick(a){a.value==l.A0.DELETE&&(this.viewData.message_file_path="")}languagesAdd(a){try{a.stopPropagation(),this.displayNameAdd.clearmessage(),this.languageAdd.clearmessage(),this.languageAdd.clearSelectInput(),this.languageCode="",this.languageName="",this.addPopupError="",this.langTransMessageTitleName="",this.langTransDescription="",this.isLangTransEnabled=!0,this.getLanguagesList(""),$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"languagesAdd",i)}}changeLanguage(a){a&&(this.languageId=a.ID,this.languageName=a.NAME,this.language=a.language_name,this.languageCode=a.language_code)}changelangTransMessageTitleName(a){a&&(this.langTransMessageTitleName=a.value)}changeLangTransCheckBox(a){a&&(this.isLangTransEnabled=a.value)}changeLangTransDescription(a){a&&(this.langTransDescription=a.value)}languagesAddSubmit(){try{this.languageAdd.isValid()&&this.displayNameAdd.isValid()&&(this.languagesData.find(i=>i.language.language_id===this.languageId)?this.addPopupError="COMMON_VALIDATION_MESSAGES.VALID_RECORD_ALREADY_EXISTS":(this.languagesData.push({language:{language_id:this.languageId,language_name:this.language,language_code:this.languageCode},language_name_value:this.languageName,beacon_title_display_name:this.langTransMessageTitleName,description:this.langTransDescription,is_enabled:this.isLangTransEnabled,is_enabled_value:this.isLangTransEnabled?"Yes":"No"}),$("#exampleModal1").modal("hide")))}catch(a){this.loggerService.setLoggerError(this.constructor.name,"languagesAddSubmit",a)}}cancelPopup(){$("#exampleModal1").modal("hide"),$("#exampleModal2").modal("hide"),$("#exampleModal3").modal("hide"),document.getElementsByTagName("body")[0].classList.remove("modale-popup-open")}editLanguages(a,i){try{this.editRowIndex=a,this.languageId=i.language.language_id,this.language=i.language.language_name,this.languageCode=i.language.language_code,this.languageName=i.language_name_value,this.langTransMessageTitleName=i.beacon_title_display_name,this.langTransDescription=i.description,this.isLangTransEnabled=i.is_enabled,this.displayNameEdit.clearmessage(),$("#exampleModal2").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal2")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"editLanguages",t)}}languagesEditSubmit(){try{for(let a=0;a<this.languagesData.length;a++)a===this.editRowIndex&&(this.languagesData[a].language={language_id:this.languageId,language_name:this.language,language_code:this.languageCode},this.languagesData[a].language_name_value=this.languageName,this.languagesData[a].beacon_title_display_name=this.langTransMessageTitleName,this.languagesData[a].description=this.langTransDescription,this.languagesData[a].is_enabled=this.isLangTransEnabled,this.languagesData[a].is_enabled_value=!0===this.isLangTransEnabled?"Yes":"No");$("#exampleModal2").modal("hide")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"languagesEditSubmit",a)}}removeLanguages(a,i){try{this.deleteRowIndex=a,this.languageCode=i.language.language_code,this.languageName=i.language_name_value,this.langTransMessageTitleName=i.beacon_title_display_name,this.langTransDescription=i.description,this.isLangTransEnabled=i.is_enabled,$("#exampleModal3").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal3")}catch(t){this.loggerService.setLoggerError(this.constructor.name,"removeLanguages",t)}}languagesDeleteSubmit(){try{for(let a=0;a<this.languagesData.length;a++)this.deleteRowIndex===a&&this.languagesData[a]._id&&this.deleted_translation_ids.push(this.languagesData[a]._id);this.languagesData.splice(this.deleteRowIndex,1),$("#exampleModal3").modal("hide")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"languagesDeleteSubmit",a)}}getLanguagesfromJson(){var a=this;return(0,_.Z)(function*(){a.dataJsonObj.languagesFromJson=yield a.commonService.getLanguagesListJson(a.enterpriseId),a.getRecordById()})()}getLanguagesList(a){var i=this;return(0,_.Z)(function*(){try{yield i.proximityMessageService.getTranslateLanguages(i.enterpriseId).then(t=>{if(i.translateLanguageOptions=t[0].configoption_json.languages,i.translateLanguageOptions&&i.translateLanguageOptions.length>0){for(let s=0;s<i.translateLanguageOptions.length;s++)i.translateLanguageOptions[s].ID=i.translateLanguageOptions[s].language_id,i.translateLanguageOptions[s].NAME=i.dataJsonObj?.languagesFromJson[i.translateLanguageOptions[s]?.language_name]?.language_display_name,i.translateLanguageOptions[s].language_code=i.translateLanguageOptions[s].language_code,i.translateLanguageOptions[s].language_id=i.translateLanguageOptions[s].language_id,i.translateLanguageOptions[s].language_name=i.translateLanguageOptions[s].language_name;if(i.translateLanguageOptions&&a){const s=i.translateLanguageOptions.filter(function(n){return n.NAME.toLowerCase().includes(a.toLowerCase())});i.translateLanguageOptions=s}}},t=>{i.loggerService.setLoggerError(i.constructor.name,"getLanguagesList",t)})}catch(t){i.loggerService.setLoggerError(i.constructor.name,"getLanguagesList",t)}})()}changeCheckBoxValue(a,i,t){try{t[i]=a.value,this.dataJsonObj.actionsData.push(t),!this.facilityId&&t.field===l.A0.BOOKMARKS&&(t.is_enabled=!1),this.dataJsonObj.actionsData=this.dataJsonObj.actionsData.filter(n=>!0===n.is_enabled);const s=this.dataJsonObj.actionsData.findIndex(n=>n.field===t.field);a.value?-1===s?this.dataJsonObj.actionsData.push(t):this.dataJsonObj.actionsData[s]=t:s>-1&&this.dataJsonObj.actionsData.splice(s,1);for(let n of this.dataJsonObj.actionsData)switch(n.field){case l.A0.BOOKMARKS:n.display_name=this.translateService.instant("MAP.BOOKMARK"),n.iconClassName="mgr-5 fas fa-bookmark";break;case l.A0.VISIT:n.display_name=this.translateService.instant("NEW_VARIABLES.VISIT"),n.iconClassName="mgr-5 icon-visit"}}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeCheckBoxValue",s)}}toTitleCase(a){if(a){const i=a.split(" ");for(let t=0;t<i.length;t++)i[t]=i[t].charAt(0).toUpperCase()+i[t].slice(1).toLowerCase();return i.join(" ")}}getFontData(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[l.uP.FONT_NAMES],"").then(a=>{this.dataJsonObj.fontData=a})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getFontData",a)}}changeFontStyle(a,i){this.dataJsonObj[i]=this.dataJsonObj.fontData.find(t=>t.ID===parseInt(a.value,10))}proximityUiSettingsChangeColor(a,i,t){t[a]=i.value}changeSliderFontSize(a,i){this.dataJsonObj[i]=parseFloat(a.value)}static \u0275fac=function(i){return new(i||o)(e.Y36(j.v),e.Y36(E.yF),e.Y36(Z.s),e.Y36(L.g),e.Y36(h.F0),e.Y36("apiEndPoint"),e.Y36(h.gz),e.Y36(C),e.Y36(f.sK),e.Y36(N.m),e.Y36(F.f))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-proximitymessages-edit"]],viewQuery:function(i,t){if(1&i&&(e.Gf(Be,5),e.Gf(Ue,5),e.Gf(Re,5),e.Gf(ke,5),e.Gf(Ve,5),e.Gf(Ge,5),e.Gf(qe,5),e.Gf(ze,5),e.Gf(Qe,5),e.Gf(We,5),e.Gf(Ye,5),e.Gf(He,5),e.Gf($e,5)),2&i){let s;e.iGM(s=e.CRH())&&(t.buttonsWrapper=s.first),e.iGM(s=e.CRH())&&(t.validFacilityType=s.first),e.iGM(s=e.CRH())&&(t.validFacility=s.first),e.iGM(s=e.CRH())&&(t.validMessageType=s.first),e.iGM(s=e.CRH())&&(t.validBeaconName=s.first),e.iGM(s=e.CRH())&&(t.validTitle=s.first),e.iGM(s=e.CRH())&&(t.validLatitude=s.first),e.iGM(s=e.CRH())&&(t.validLongitude=s.first),e.iGM(s=e.CRH())&&(t.descriptionInput=s.first),e.iGM(s=e.CRH())&&(t.languageAdd=s.first),e.iGM(s=e.CRH())&&(t.displayNameAdd=s.first),e.iGM(s=e.CRH())&&(t.displayNameEdit=s.first),e.iGM(s=e.CRH())&&(t.validRadius=s.first)}},features:[e._Bn([C,L.g,F.f]),e.qOj],decls:259,vars:280,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-lg-12","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-4"],["disabled","false","mandatory","false","id","proximitymessages-create-beacontype",3,"label","options","defaultValue","selectedOption","searchValueChange"],["validFacilityType",""],["disabled","false","mandatory","false","id","proximitymessages-create-beacontype",3,"label","defaultValue","options","searchValueChange","selectedOption"],["validFacility",""],["class","col-md-4",4,"ngIf"],["mandatory","true","id","proximitymessages-edit-messagetype",3,"label","options","defaultValue","valueChange"],["validMessageType",""],[1,"col-lg-8","col-md-8","datetimepicker","order-md-1","order-2"],[1,"col-lg-6","col-md-6","datetimepicker"],[1,"col-8","col-md-8","pe-0"],["mandatory","true","disabled","false","id","proximitymessages-edit-start-date",3,"placeholder","dateformat","defaultDate","editvalueChange"],[1,"col-4","col-md-4","ps-2"],["disabled","false","mandatory","true","id","proximitymessages-edit-timezone",3,"label","options","defaultValue","selectedOption","searchValueChange"],[1,"col-lg-6","col-md-6","datetimepicker","order-md-1","order-2"],["mandatory","true","disabled","false","id","proximitymessages-edit-end-date",3,"placeholder","defaultDate","dateformat","editvalueChange"],[1,"col-md-4","order-md-1","order-2"],["autoCaseFlag","true","id","proximitymessages-edit-latitude",3,"label","maxlength","mandatory","disabled","value","valueChange"],["validLatitude",""],["autoCaseFlag","true","id","proximitymessages-edit-longitude",3,"label","maxlength","mandatory","disabled","value","valueChange"],["validLongitude",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","proximitymessages-edit-radius",3,"label","value","maxlength","valueChange"],["validRadius",""],[1,"col-md-12","order-md-1","order-2"],[1,"fs-12"],["id","proximitymessages-edit-description",3,"ngModel","config","maxlength","ngModelChange","keypress","valueChange"],[1,"col-md-12","text-end","mt-2","mb-2","btns-group","order-md-1","order-2"],["className","btn btn-primary btn-sm","id","proximitymessages-edit-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","proximitymessages-edit-cancel",3,"label","buttonOnClick"],[1,"text-danger","text-center"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","actionsAccordion",1,"text-capitalize",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],[1,"form-bs"],[1,"row","pdt-5","pdb-5"],["class","col-md-2 d-flex align-items-center",4,"ngFor","ngForOf"],["id","actionsAccordion",1,"",3,"selected"],[1,"col-md-3"],["type","color","disabled","false",3,"label","value","valueChange"],["id","default-ui-settings-theme-settings-list-text-font",3,"label","options","defaultValue","valueChange"],[1,"w-100",3,"value","steps","valueChange"],["fontSizeInput",""],[1,"d-flex","justify-content-center","w-100"],[1,"w-50","notifications","position-relative"],[1,"d-flex","justify-content-center","notification-content"],[1,"notification"],[1,"notification-body"],[1,"message"],["fxLayout","row","fxLayoutAlign","space-between center",1,"title",3,"ngStyle"],[1,"d-flex","align-items-center","justify-content-between"],[1,"proximity-title-wrapper"],[1,"fs-14","fw-500","mg-0","pdt-5","pdb-5","pdl-10","pdr-10","text-ellipsis",3,"ngStyle"],[1,"proximity-buttons-wrapper","d-flex",3,"ngStyle"],["buttonsWrapper",""],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","icon-mute",2,"font-size","18px"],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","fas","fa-times",2,"font-size","18px"],[1,"popup-inner-content","pdl-10","pdr-10",3,"ngStyle"],[1,"fs-13","fw-400",3,"innerHtml"],[1,"p-1","footer-toast",3,"ngStyle"],[1,"d-flex","justify-content-end","align-items-center"],["class","d-flex fs-13 fw-500 proximity-btn mgr-5",3,"ngStyle",4,"ngFor","ngForOf"],[1,"d-flex","fs-13","fw-500","proximity-btn",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center","mgr-5","icon-notification-bell"],[1,"list-accordion-tab",3,"selected"],["disabled","false","label","","className","btn btn-danger btn-sm btn-round btn-rounded","btnIcon","fas fa-plus","id","beaconMeassages-edit-translationsadd",3,"isEmitMouseEvent","buttonOnClick"],["selectionMode","single","dataKey","LineNum",1,"ptable","d-none","d-lg-block","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"d-lg-none"],["lines","full","class","pdl-5 pdr-0 ion-no-padding",4,"ngFor","ngForOf"],["class","text-center text-danger mb-0 no-data-txt",4,"ngIf"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body","ios-content"],["mandatory","true","id","beaconMeassages-edit-languagename-addpopup",3,"label","options","selectedOption","searchValueChange"],["languageAdd",""],["autoCaseFlag","false","disabled","false","mandatory","true","id","beaconMeassages-edit-displayname-addpopup",3,"label","value","maxlength","valueChange"],["displayNameAdd",""],[1,"col-md-4","d-flex","align-items-center"],["label","","mandatory","true","id","beaconMeassages-edit-checkboxoptions-addpopup",3,"options","checked","valueChange"],[1,"col-lg-12","col-md-12"],["mandatory","false","id","beaconMeassages-edit-description-addpopup",3,"label","defaultvalue","maxlength","valueChange"],[1,"error-msg","col-md-10","text-danger","text-center","mb-0"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","beaconMeassages-translations-edit-add-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","beaconMeassages-translations-edit-add-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal2","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","true","disabled","true","id","beaconMeassages-edit-displayname-editpopup",3,"label","value"],["disabled","false","mandatory","true","autoCaseFlag","false","id","beaconMeassages-edit-displayname-editpopup",3,"label","value","maxlength","valueChange"],["displayNameEdit",""],["label","","mandatory","true","id","beaconMeassages-edit-checkboxoptions-editpopup",3,"options","checked","valueChange"],["mandatory","false","id","beaconMeassages-edit-description-editpopup",3,"label","defaultvalue","maxlength","valueChange"],["className","btn btn-primary btn-sm","id","beaconMeassages-translations-edit-update-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","beaconMeassages-translations-edit-update-cancel-btn",3,"label","buttonOnClick"],["id","exampleModal3","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","false","disabled","true","id","beaconMeassages-edit-displayname-deletepopup",3,"label","value"],["disabled","false","id","beaconMeassages-edit-displayname-deletepopup","mandatory","true",3,"label","value"],["label","","mandatory","false","id","beaconMeassages-edit-description-deletepopup","disabled","true",3,"options","checked"],["disabled","true","mandatory","false","id","beaconMeassages-edit-description-deletepopup",3,"label","defaultvalue","maxlength"],["className","btn btn-primary btn-sm","id","beaconMeassages-edit-translations-delete-btn",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","beaconMeassages-edit-translations-delete-cancel-btn",3,"label","buttonOnClick"],["autoCaseFlag","false","mandatory","true","disabled","false","id","proximitymessages-edit-messagetitle",3,"label","maxlength","value","valueChange"],["validTitle",""],[1,"col-md-2","d-flex","align-items-center"],["label","",3,"options","checked","valueChange"],[1,"d-flex","fs-13","fw-500","proximity-btn","mgr-5",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center",3,"ngClass"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","class","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","click"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["lines","full",1,"pdl-5","pdr-0","ion-no-padding"],[1,"mg-0",3,"click"],[1,"mg-0","fs-13"],["color","primary",1,"h3"],[1,"mg-0","fs-11"],[1,"h3"],[1,"text-center","text-danger","mb-0","no-data-txt"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"app-dropdown-search",12,13),e.NdJ("selectedOption",function(n){return t.changeFacilityType(n)})("searchValueChange",function(n){return t.getFacilityTypes(n)}),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",11)(16,"app-dropdown-search",14,15),e.NdJ("searchValueChange",function(n){return t.getFacilityForSearch(n)})("selectedOption",function(n){return t.changeFacility(n)}),e.ALo(18,"translate"),e.qZA()(),e.YNc(19,Ke,4,5,"div",16),e.YNc(20,Xe,4,5,"div",16),e.qZA()(),e.TgZ(21,"div",9)(22,"div",10)(23,"div",11)(24,"app-dropdown-singleselect",17,18),e.NdJ("valueChange",function(n){return t.changeMessageType(n)}),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"div",19)(28,"div",10)(29,"div",20)(30,"div",10)(31,"div",21)(32,"app-datetimepicker",22),e.NdJ("editvalueChange",function(n){return t.changeStartDate(n)}),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"div",23)(35,"app-dropdown-search",24),e.NdJ("selectedOption",function(n){return t.changeTimeZone(n)})("searchValueChange",function(n){return t.getTimeZone(n)}),e.ALo(36,"translate"),e.qZA()()()(),e.TgZ(37,"div",25)(38,"div",10)(39,"div",21)(40,"app-datetimepicker",26),e.NdJ("editvalueChange",function(n){return t.changeEndDate(n)}),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"div",23)(43,"app-dropdown-search",24),e.NdJ("selectedOption",function(n){return t.changeTimeZone(n)})("searchValueChange",function(n){return t.getTimeZone(n)}),e.ALo(44,"translate"),e.qZA()()()()()()()(),e.TgZ(45,"div",27)(46,"app-input",28,29),e.NdJ("valueChange",function(n){return t.changeLatitude(n)}),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"div",27)(50,"app-input",30,31),e.NdJ("valueChange",function(n){return t.changeLongitude(n)}),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",27)(54,"app-inputnumber",32,33),e.NdJ("valueChange",function(n){return t.changeRadius(n)}),e.ALo(56,"translate"),e.qZA()(),e.TgZ(57,"div",34)(58,"ion-label",35),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"angular-editor",36),e.NdJ("ngModelChange",function(n){return t.description=n})("keypress",function(){return t.clearMessage()})("valueChange",function(n){return t.changeDescription(n)}),e.qZA()(),e.TgZ(62,"div",37)(63,"app-button",38),e.NdJ("buttonOnClick",function(){return t.updateRecord()}),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"app-button",39),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(66,"translate"),e.qZA()()(),e.TgZ(67,"div",10)(68,"div",40),e._uU(69),e.ALo(70,"translate"),e.qZA()(),e.TgZ(71,"div",10)(72,"div",3)(73,"div",41)(74,"div",42)(75,"p-accordion",43)(76,"p-accordionTab",44)(77,"p-header",45)(78,"span"),e._uU(79),e.ALo(80,"translate"),e.qZA()(),e.TgZ(81,"div",46)(82,"div",47),e.YNc(83,tt,2,4,"div",48),e.qZA()()(),e.TgZ(84,"p-accordionTab",49)(85,"p-header",45)(86,"span"),e._uU(87),e.ALo(88,"translate"),e.ALo(89,"translate"),e.qZA()(),e.TgZ(90,"div",46)(91,"div",47)(92,"div",50)(93,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageTitleBgColor",n,t.dataJsonObj)}),e.ALo(94,"translate"),e.qZA()(),e.TgZ(95,"div",50)(96,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageTitleTextcolor",n,t.dataJsonObj)}),e.ALo(97,"translate"),e.qZA()(),e.TgZ(98,"div",50)(99,"app-dropdown-singleselect",52),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageTitleFontFamilyObj")}),e.ALo(100,"translate"),e.qZA()(),e.TgZ(101,"div",50)(102,"app-numberincrementdecrementvalue",53,54),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageTitleFontSizeObj")}),e.qZA()(),e.TgZ(104,"div",50)(105,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageDescriptionBgColor",n,t.dataJsonObj)}),e.ALo(106,"translate"),e.qZA()(),e.TgZ(107,"div",50)(108,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageDescriptionTextColor",n,t.dataJsonObj)}),e.ALo(109,"translate"),e.qZA()(),e.TgZ(110,"div",50)(111,"app-dropdown-singleselect",52),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageDescriptionFontFamilyObj")}),e.ALo(112,"translate"),e.qZA()(),e.TgZ(113,"div",50)(114,"app-numberincrementdecrementvalue",53,54),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageDescriptionFontSizeObj")}),e.qZA()(),e.TgZ(116,"div",50)(117,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterBorderColor",n,t.dataJsonObj)}),e.ALo(118,"translate"),e.qZA()(),e.TgZ(119,"div",50)(120,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterBgColor",n,t.dataJsonObj)}),e.ALo(121,"translate"),e.qZA()(),e.TgZ(122,"div",50)(123,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterButtonBgColor",n,t.dataJsonObj)}),e.ALo(124,"translate"),e.qZA()(),e.TgZ(125,"div",50)(126,"app-input",51),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterButtonTextColor",n,t.dataJsonObj)}),e.ALo(127,"translate"),e.qZA()(),e.TgZ(128,"div",50)(129,"app-numberincrementdecrementvalue",53,54),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageFooterButtonsFontSizeObj")}),e.qZA()(),e.TgZ(131,"div",50)(132,"app-dropdown-singleselect",52),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageFooterButtonFontFamilyObj")}),e.ALo(133,"translate"),e.qZA()()()(),e.TgZ(134,"div",55)(135,"div",56)(136,"div",57)(137,"div",58)(138,"div",59)(139,"div",60)(140,"div",61)(141,"div",62)(142,"div",63)(143,"h2",64),e._uU(144),e.qZA()(),e.TgZ(145,"div",65,66),e._UZ(147,"i",67)(148,"i",68),e.qZA()()(),e.TgZ(149,"div",69),e._UZ(150,"span",70),e.qZA()()(),e.TgZ(151,"div",71)(152,"div",72),e.YNc(153,at,3,8,"div",73),e.TgZ(154,"div",74),e._UZ(155,"i",75),e._uU(156),e.ALo(157,"translate"),e.qZA()()()()()()()(),e.TgZ(158,"p-accordionTab",76)(159,"p-header",45)(160,"span"),e._uU(161),e.ALo(162,"translate"),e.qZA(),e.TgZ(163,"app-button",77),e.NdJ("buttonOnClick",function(n){return t.languagesAdd(n)}),e.qZA()(),e.TgZ(164,"p-table",78),e.YNc(165,st,1,1,"ng-template",79),e.YNc(166,ot,2,1,"ng-template",80),e.YNc(167,rt,2,1,"ng-template",81),e.YNc(168,gt,4,2,"ng-template",82),e.qZA(),e.TgZ(169,"div",83)(170,"ion-list"),e.YNc(171,ct,21,15,"ion-item",84),e.qZA(),e.YNc(172,mt,3,3,"p",85),e.qZA()(),e.TgZ(173,"p-accordion"),e._UZ(174,"app-recordhistory",86),e.qZA()()()()()()()()()()()(),e.TgZ(175,"div",87)(176,"div",88)(177,"div",89)(178,"div",90)(179,"div",91),e._uU(180),e.ALo(181,"translate"),e.ALo(182,"translate"),e.qZA()(),e.TgZ(183,"div",92)(184,"div",8)(185,"div",11)(186,"app-dropdown-search",93,94),e.NdJ("selectedOption",function(n){return t.changeLanguage(n)})("searchValueChange",function(n){return t.getLanguagesList(n)}),e.ALo(188,"translate"),e.qZA()(),e.TgZ(189,"div",11)(190,"app-input",95,96),e.NdJ("valueChange",function(n){return t.changelangTransMessageTitleName(n)}),e.ALo(192,"translate"),e.qZA()(),e.TgZ(193,"div",97)(194,"app-checkbox",98),e.NdJ("valueChange",function(n){return t.changeLangTransCheckBox(n)}),e.qZA()(),e.TgZ(195,"div",99)(196,"app-textarea",100),e.NdJ("valueChange",function(n){return t.changeLangTransDescription(n)}),e.ALo(197,"translate"),e.qZA()(),e.TgZ(198,"div",101),e._uU(199),e.ALo(200,"translate"),e.qZA(),e.TgZ(201,"div",102)(202,"app-button",103),e.NdJ("buttonOnClick",function(){return t.languagesAddSubmit()}),e.ALo(203,"translate"),e.qZA(),e.TgZ(204,"app-button",104),e.NdJ("buttonOnClick",function(){return t.cancelPopup()}),e.ALo(205,"translate"),e.qZA()()()()()()(),e.TgZ(206,"div",105)(207,"div",88)(208,"div",89)(209,"div",90)(210,"div",91),e._uU(211),e.ALo(212,"translate"),e.ALo(213,"translate"),e.qZA()(),e.TgZ(214,"div",92)(215,"div",8)(216,"div",11),e._UZ(217,"app-input",106),e.ALo(218,"translate"),e.qZA(),e.TgZ(219,"div",11)(220,"app-input",107,108),e.NdJ("valueChange",function(n){return t.changelangTransMessageTitleName(n)}),e.ALo(222,"translate"),e.qZA()(),e.TgZ(223,"div",97)(224,"app-checkbox",109),e.NdJ("valueChange",function(n){return t.changeLangTransCheckBox(n)}),e.qZA()(),e.TgZ(225,"div",99)(226,"app-textarea",110),e.NdJ("valueChange",function(n){return t.changeLangTransDescription(n)}),e.ALo(227,"translate"),e.qZA()(),e.TgZ(228,"div",102)(229,"app-button",111),e.NdJ("buttonOnClick",function(){return t.languagesEditSubmit()}),e.ALo(230,"translate"),e.qZA(),e.TgZ(231,"app-button",112),e.NdJ("buttonOnClick",function(){return t.cancelPopup()}),e.ALo(232,"translate"),e.qZA()()()()()()(),e.TgZ(233,"div",113)(234,"div",88)(235,"div",89)(236,"div",90)(237,"div",91),e._uU(238),e.ALo(239,"translate"),e.ALo(240,"translate"),e.qZA()(),e.TgZ(241,"div",92)(242,"div",8)(243,"div",11),e._UZ(244,"app-input",114),e.ALo(245,"translate"),e.qZA(),e.TgZ(246,"div",11),e._UZ(247,"app-input",115),e.ALo(248,"translate"),e.qZA(),e.TgZ(249,"div",97),e._UZ(250,"app-checkbox",116),e.qZA(),e.TgZ(251,"div",99),e._UZ(252,"app-textarea",117),e.ALo(253,"translate"),e.qZA(),e.TgZ(254,"div",102)(255,"app-button",118),e.NdJ("buttonOnClick",function(){return t.languagesDeleteSubmit()}),e.ALo(256,"translate"),e.qZA(),e.TgZ(257,"app-button",119),e.NdJ("buttonOnClick",function(){return t.cancelPopup()}),e.ALo(258,"translate"),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(6),e.s9C("label",e.lcZ(14,154,"FACILITIES.FACILITY_TYPE")),e.s9C("defaultValue",t.facilityTypeName),e.Q6J("options",t.facilityTypeOptions),e.xp6(4),e.s9C("label",e.lcZ(18,156,"NEW_VARIABLES.FACILITY")),e.s9C("defaultValue",t.facilityName),e.Q6J("options",t.facilityOptions),e.xp6(3),e.Q6J("ngIf",!1===t.textEnable),e.xp6(1),e.Q6J("ngIf",!0===t.textEnable),e.xp6(4),e.s9C("label",e.lcZ(26,158,"NEW_VARIABLES.MESSAGE_TYPE")),e.s9C("defaultValue",null==t.viewData||null==t.viewData.message_type?null:t.viewData.message_type.lookup_id),e.Q6J("options",t.messageTypeOptions),e.xp6(8),e.s9C("placeholder",e.lcZ(33,160,"COMMON_FIELDS.START_DATE")),e.Q6J("dateformat",t.loginUserDateFormat)("defaultDate",t.startDate),e.xp6(3),e.s9C("label",e.lcZ(36,162,"PREFERENCES.TIMEZONE")),e.s9C("defaultValue",t.userTimeZoneObj.timeZoneCode),e.Q6J("options",t.timeZoneOptions),e.xp6(5),e.s9C("placeholder",e.lcZ(41,164,"COMMON_FIELDS.END_DATE")),e.Q6J("defaultDate",t.endDate)("dateformat",t.loginUserDateFormat),e.xp6(3),e.s9C("label",e.lcZ(44,166,"PREFERENCES.TIMEZONE")),e.s9C("defaultValue",t.userTimeZoneObj.timeZoneCode),e.Q6J("options",t.timeZoneOptions),e.xp6(3),e.s9C("label",e.lcZ(48,168,"NEW_VARIABLES.LATITUDE")),e.s9C("mandatory",!(t.facilityId&&t.facilityTypeId&&t.latitude)),e.s9C("disabled",null==t.dataJsonObj?null:t.dataJsonObj.latLongFieldDisabled),e.s9C("value",t.latitude),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(52,170,"NEW_VARIABLES.LONGITUDE")),e.s9C("mandatory",!(t.facilityId&&t.facilityTypeId&&t.longitude)),e.s9C("disabled",null==t.dataJsonObj?null:t.dataJsonObj.latLongFieldDisabled),e.s9C("value",t.longitude),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(56,172,"NEW_VARIABLES.RADIUS")),e.s9C("value",t.dataJsonObj.radius),e.Q6J("maxlength",3),e.xp6(5),e.hij(" ",e.lcZ(60,174,"COMMON_PAGE_TITLES.MESSAGE")," "),e.xp6(2),e.Q6J("ngModel",t.description)("config",t.editorConfig)("maxlength",2e3),e.xp6(2),e.s9C("label",e.lcZ(64,176,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",t.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(66,178,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(4),e.hij(" ",e.lcZ(70,180,t.error)," "),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(80,182,"COMMON_FIELDS.ACTIONS")),e.xp6(4),e.Q6J("ngForOf",t.dataJsonObj.actionsListData),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(88,184,"COMMON_PAGE_TITLES.MESSAGE")," ",e.lcZ(89,186,"GOLF_GAMES.UI_SETTINGS"),""),e.xp6(6),e.s9C("label",e.lcZ(94,188,"NEW_VARIABLES.MESSAGE_TITLE_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageTitleBgColor),e.xp6(3),e.s9C("label",e.lcZ(97,190,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageTitleTextcolor),e.xp6(3),e.s9C("label",e.lcZ(100,192,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageTitleFontFamilyObj?null:t.dataJsonObj.messageTitleFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(3),e.s9C("value",t.dataJsonObj.messageTitleFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(106,194,"NEW_VARIABLES.MESSAGE_DESCRIPTION_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageDescriptionBgColor),e.xp6(3),e.s9C("label",e.lcZ(109,196,"NEW_VARIABLES.MESSAGE_DESCRIPTION_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageDescriptionTextColor),e.xp6(3),e.s9C("label",e.lcZ(112,198,"NEW_VARIABLES.MESSAGE_DESCRIPTION_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageDescriptionFontFamilyObj?null:t.dataJsonObj.messageDescriptionFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(3),e.s9C("value",t.dataJsonObj.messageDescriptionFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(118,200,"NEW_VARIABLES.MESSAGE_FOOTER_BORDER_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterBorderColor),e.xp6(3),e.s9C("label",e.lcZ(121,202,"NEW_VARIABLES.MESSAGE_FOOTER_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterBgColor),e.xp6(3),e.s9C("label",e.lcZ(124,204,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterButtonBgColor),e.xp6(3),e.s9C("label",e.lcZ(127,206,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterButtonTextColor),e.xp6(3),e.s9C("value",t.dataJsonObj.messageFooterButtonsFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(133,208,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageFooterButtonFontFamilyObj?null:t.dataJsonObj.messageFooterButtonFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(8),e.Q6J("ngStyle",e.VKq(258,pt,t.dataJsonObj.messageTitleBgColor)),e.xp6(3),e.Q6J("ngStyle",e.kEZ(260,ut,t.dataJsonObj.messageTitleTextcolor,null==t.dataJsonObj.messageTitleFontFamilyObj?null:t.dataJsonObj.messageTitleFontFamilyObj.lookup_name,1.3*t.dataJsonObj.messageTitleFontSizeObj+"rem")),e.xp6(1),e.hij(" ",null==t.dataJsonObj?null:t.dataJsonObj.messageTitle,""),e.xp6(1),e.Q6J("ngStyle",e.VKq(264,_t,t.dataJsonObj.messageTitleTextcolor)),e.xp6(4),e.Q6J("ngStyle",e.l5B(266,G,t.dataJsonObj.messageDescriptionBgColor,t.dataJsonObj.messageDescriptionTextColor,null==t.dataJsonObj.messageDescriptionFontFamilyObj?null:t.dataJsonObj.messageDescriptionFontFamilyObj.lookup_name,t.dataJsonObj.messageDescriptionFontSizeObj+"rem")),e.xp6(1),e.Q6J("innerHtml",t.description,e.oJD),e.xp6(1),e.Q6J("ngStyle",e.kEZ(271,ht,t.dataJsonObj.messageFooterBgColor,t.dataJsonObj.messageDescriptionTextColor,t.dataJsonObj.messageFooterBorderColor)),e.xp6(2),e.Q6J("ngForOf",null==t.dataJsonObj?null:t.dataJsonObj.actionsData),e.xp6(1),e.Q6J("ngStyle",e.l5B(275,G,t.dataJsonObj.messageFooterButtonBgColor,t.dataJsonObj.messageFooterButtonTextColor,null==t.dataJsonObj.messageFooterButtonFontFamilyObj?null:t.dataJsonObj.messageFooterButtonFontFamilyObj.lookup_name,t.dataJsonObj.messageFooterButtonsFontSizeObj+"rem")),e.xp6(2),e.hij("",e.lcZ(157,210,"NEW_VARIABLES.REMIND_ME_LATER")," "),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(162,212,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")),e.xp6(2),e.Q6J("isEmitMouseEvent",!0),e.xp6(1),e.Q6J("columns",t.headers)("value",t.languagesData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(7),e.Q6J("ngForOf",t.languagesData),e.xp6(1),e.Q6J("ngIf",t.languagesData&&0===t.languagesData.length),e.xp6(2),e.Q6J("createdBy",null==t.viewData?null:t.viewData.created_by)("lastUpdatedBy",null==t.viewData?null:t.viewData.updated_by)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.viewData?null:t.viewData.createdAt)("lastUpdatedDate",null==t.viewData?null:t.viewData.updatedAt),e.xp6(6),e.AsE("",e.lcZ(181,214,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(182,216,"COMMON_BUTTONS.BUTTON_ADD"),""),e.xp6(6),e.s9C("label",e.lcZ(188,218,"PREFERENCES.LANGUAGE")),e.Q6J("options",t.translateLanguageOptions),e.xp6(4),e.s9C("label",e.lcZ(192,220,"COMMON_FIELDS.BEACON_TITLE_NAME")),e.s9C("value",t.langTransMessageTitleName),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",t.checkboxOptions)("checked",t.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(197,222,"COMMON_PAGE_TITLES.MESSAGE")),e.s9C("defaultvalue",t.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.hij(" ",e.lcZ(200,224,t.addPopupError)," "),e.xp6(3),e.s9C("label",e.lcZ(203,226,"COMMON_BUTTONS.BUTTON_ADD")),e.xp6(2),e.s9C("label",e.lcZ(205,228,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(212,230,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(213,232,"COMMON_BUTTONS.BUTTON_UPDATE"),""),e.xp6(6),e.s9C("label",e.lcZ(218,234,"PREFERENCES.LANGUAGE")),e.s9C("value",t.languageName),e.xp6(3),e.s9C("label",e.lcZ(222,236,"COMMON_FIELDS.BEACON_TITLE_NAME")),e.s9C("value",t.langTransMessageTitleName),e.Q6J("maxlength",80),e.xp6(4),e.Q6J("options",t.checkboxOptions)("checked",t.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(227,238,"COMMON_PAGE_TITLES.MESSAGE")),e.s9C("defaultvalue",t.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(230,240,"COMMON_BUTTONS.BUTTON_UPDATE")),e.xp6(2),e.s9C("label",e.lcZ(232,242,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.AsE("",e.lcZ(239,244,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")," - ",e.lcZ(240,246,"COMMON_BUTTONS.BUTTON_DELETE"),""),e.xp6(6),e.s9C("label",e.lcZ(245,248,"PREFERENCES.LANGUAGE")),e.s9C("value",t.languageName),e.xp6(3),e.s9C("label",e.lcZ(248,250,"COMMON_FIELDS.BEACON_TITLE_NAME")),e.s9C("value",t.langTransMessageTitleName),e.xp6(3),e.Q6J("options",t.checkboxOptions)("checked",t.isLangTransEnabled),e.xp6(2),e.s9C("label",e.lcZ(253,252,"COMMON_PAGE_TITLES.MESSAGE")),e.s9C("defaultvalue",t.langTransDescription),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(256,254,"COMMON_BUTTONS.BUTTON_DELETE")),e.xp6(2),e.s9C("label",e.lcZ(258,256,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[p.mk,p.sg,p.O5,p.PC,A.h4,A.jx,T.JJ,T.nD,T.On,y.iA,y.Ei,B.r,I.a,U.K,R.k,k.b,H.R,K.K,X.L,ee.C,te.W,x.q,v.UQ,v.US,P.s6,f.X$],styles:[".notifications[_ngcontent-%COMP%]{position:fixed}.notifications.topright[_ngcontent-%COMP%]{top:0;right:0}.notifications.topleft[_ngcontent-%COMP%]{top:0;left:0}.notifications.bottomright[_ngcontent-%COMP%]{bottom:0;right:0}.notifications.bottomleft[_ngcontent-%COMP%]{bottom:0;left:0}.notifications.center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{z-index:1000;position:relative}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{background:#ffffff;position:relative;min-width:300px;max-width:300px;margin:10px;padding:0;border-radius:5px;color:#000;overflow:hidden;box-shadow:0 0 6px #000000bf;-webkit-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);-moz-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);font-family:var(--popup-font-family)!important}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]{padding:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{position:fixed}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:var(--header-bg-color)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--header-text-color);font-size:var(--modal-title-font-size)}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]{color:var(--header-text-color);border-top:1px solid}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]   .proximity-btn[_ngcontent-%COMP%]{background:var(--header-bg-color);padding:2px 4px;border-radius:6px}.proximity-buttons-wrapper[_ngcontent-%COMP%]{flex-shrink:0;display:flex;justify-content:flex-end}.proximity-title-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return o})();var ae=g(42863),ie=g(30578),Ot=g(28168),ft=g(35226),se=g.n(ft),Tt=g(88425);const Ct=["buttonsWrapper"],vt=["datatableComponent"],yt=["fontSizeInput"],q=function(o,r,a,i){return{background:o,color:r,"font-family":a,"font-size":i}};function St(o,r){if(1&o&&(e.TgZ(0,"div",48),e._UZ(1,"i",49),e._uU(2),e.qZA()),2&o){const a=r.$implicit,i=e.oxw();e.Q6J("ngStyle",e.l5B(3,q,i.dataJsonObj.messageFooterButtonBgColor,i.dataJsonObj.messageFooterButtonTextColor,null==i.dataJsonObj.messageFooterButtonFontFamilyObj?null:i.dataJsonObj.messageFooterButtonFontFamilyObj.lookup_name,i.dataJsonObj.messageFooterButtonsFontSizeObj+"rem")),e.xp6(1),e.Q6J("ngClass",null!=a&&a.iconClassName?null==a?null:a.iconClassName:""),e.xp6(1),e.hij("",null==a?null:a.display_name," ")}}const Et=function(o){return{background:o}},At=function(o,r,a){return{color:o,"font-family":r,"font-size":a}},Dt=function(o){return{color:o}},Mt=function(o,r){return{background:o,"border-color":r}},Nt=["buttonsWrapper"];function Lt(o,r){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"app-input",74),e.ALo(2,"translate"),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"NEW_VARIABLES.TITLE")),e.s9C("value",null==a.viewData?null:a.viewData.message_title)}}function Jt(o,r){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"app-input",74),e.ALo(2,"translate"),e.qZA()),2&o){const a=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"NEW_VARIABLES.TITLE")),e.s9C("value",null==a.viewData?null:a.viewData.message_title)}}const Zt=function(o){return[o]};function Ft(o,r){if(1&o&&(e.TgZ(0,"div",75),e._UZ(1,"app-checkbox",76),e.qZA()),2&o){const a=r.$implicit;e.xp6(1),e.Q6J("options",e.VKq(2,Zt,a))("checked",null==a?null:a.is_enabled)}}const z=function(o,r,a,i){return{background:o,color:r,"font-family":a,"font-size":i}};function It(o,r){if(1&o&&(e.TgZ(0,"div",77),e._UZ(1,"i",78),e._uU(2),e.qZA()),2&o){const a=r.$implicit,i=e.oxw();e.Q6J("ngStyle",e.l5B(3,z,null==i.viewData||null==i.viewData.message_ui_setting?null:i.viewData.message_ui_setting.message_footer_button_bg_color,null==i.viewData||null==i.viewData.message_ui_setting?null:i.viewData.message_ui_setting.message_footer_button_text_color,null==i.viewData||null==i.viewData.message_ui_setting||null==i.viewData.message_ui_setting.message_footer_button_font_family?null:i.viewData.message_ui_setting.message_footer_button_font_family.lookup_name,(null==i.viewData||null==i.viewData.message_ui_setting?null:i.viewData.message_ui_setting.message_footer_button_font_size)+"rem")),e.xp6(1),e.Q6J("ngClass",null!=a&&a.iconClassName?null==a?null:a.iconClassName:""),e.xp6(1),e.hij("",null==a?null:a.display_name," ")}}function xt(o,r){if(1&o&&(e.TgZ(0,"tr",80)(1,"td",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const a=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",a[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function wt(o,r){if(1&o&&e.YNc(0,xt,4,4,"tr",79),2&o){const a=e.oxw();e.Q6J("ngIf",a.languagesData&&0===a.languagesData.length)}}function Pt(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const a=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,a.header)," ")}}function Bt(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Pt,3,3,"th",82),e.qZA()),2&o){const a=r.$implicit;e.xp6(1),e.Q6J("ngForOf",a[0])}}function Ut(o,r){if(1&o&&(e.TgZ(0,"td",84),e._uU(1),e.qZA()),2&o){const a=r.$implicit,i=e.oxw().$implicit;e.Gre("",a.class," "),e.Q6J("pSelectableRow",i),e.xp6(1),e.hij(" ",i[a.field]," ")}}function Rt(o,r){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Ut,2,5,"td",83),e.qZA()),2&o){const a=r.columns;e.xp6(1),e.Q6J("ngForOf",a[0])}}function kt(o,r){if(1&o&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",86)(6,"br"),e.qZA()),2&o){const a=r.$implicit,i=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,a.header)),e.xp6(3),e.Q6J("innerHTML",i[a.field],e.oJD)}}function Vt(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,kt,7,4,"div",85),e.qZA()()()),2&o){const a=r.columns;e.xp6(1),e.uIk("colspan",a[0].length+2),e.xp6(2),e.Q6J("ngForOf",a[1])}}function Gt(o,r){if(1&o&&(e.TgZ(0,"ion-item",87),e._UZ(1,"td",88),e.TgZ(2,"ion-label",89)(3,"div",90)(4,"span",91),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"div",92)(10,"span",93),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"div",92)(16,"span",93),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"span"),e._uU(20),e.qZA()()()()),2&o){const a=r.$implicit;e.xp6(5),e.hij("",e.lcZ(6,6,"PREFERENCES.LANGUAGE"),":"),e.xp6(3),e.Oqu(null==a?null:a.language_name_value),e.xp6(3),e.hij("",e.lcZ(12,8,"COMMON_FIELDS.BEACON_TITLE_NAME"),":"),e.xp6(3),e.Oqu(null==a?null:a.beacon_title_display_name),e.xp6(3),e.hij("",e.lcZ(18,10,"COMMON_FIELDS.ENABLED"),":"),e.xp6(3),e.Oqu(null==a?null:a.is_enabled_value)}}function qt(o,r){1&o&&(e.TgZ(0,"p",94),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),""))}const zt=function(o){return{background:o}},Qt=function(o,r,a){return{color:o,"font-family":r,"font-size":a}},Wt=function(o){return{color:o}},Yt=function(o,r,a){return{background:o,color:r,"border-color":a}},$t=[{path:"",data:{title:"Proximity Messages"},children:[{path:"beaconmessages/list",canActivate:[M.P],component:(()=>{class o extends J.O{proximityMessageService;commonService;actionSheetController;columnheaders;listingVariables;route;router;translateService;toastController;loggerService;enterprisesService;uiUtils;buttonsWrapper;datatableComponent;fontSizeInput;previousWidth="";actions;enterpriseId;fabMobileactions;forceRefresh;headers;positions=[];proximityMessageMobileListData;proximityMessagesListData;mobileroutesArray;noDuplicates=void 0;defaultTimeZone;show=!0;searchString;utcTimeZoneString;isFilterClicked=!1;statsShow=!0;statusObj;loginUserDateFormat;userTimeZoneObj={};startDate;endDate;dataJsonObj={};objData;set defaultValue(a){this.objData=a}constructor(a,i,t,s,n,d,c,m,u,b,O,w){super(d,i),this.proximityMessageService=a,this.commonService=i,this.actionSheetController=t,this.columnheaders=s,this.listingVariables=n,this.route=d,this.router=c,this.translateService=m,this.toastController=u,this.loggerService=b,this.enterprisesService=O,this.uiUtils=w,this.route.queryParams.subscribe(D=>{this.dataJsonObj.queryParamsObj={defaultView:D.default_view,selectedMenuId:D.selectedMenuId,selectedSubMenuId:D.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.enterpriseId=localStorage.getItem(l.BU.SELECTED_ENTERPRISE),this.showSpinner(),this.dataJsonObj.pageName=l.hf.BEACON_MESSAGES,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.BEACON_MESSAGES",value:"",showSubMenuDisplayName:!0}];const a=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=a.dateFormat,this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(a.timeZoneDescription),this.userTimeZoneObj.timeZoneCode=a.timeZoneCode,this.headers=this.columnheaders.getProximityMessagesHeaders(),this.searchString="",this.dataJsonObj.advancedSearchObj={},this.actions={EDIT:this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.EDIT),DELETE:this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.DELETE),VIEW:this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.VIEW),UI_SETTINGS:this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.UI_SETTINGS)},this.forceRefresh=!1,this.commonService.currentEvent.subscribe(t=>{"beaconmessages"===t&&(this.forceRefresh=!0)}),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:l.gL.URL,redirectURL:"proximitymessages/beaconmessages/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.FILTERS),this.getDynamicJson([{folderName:"lookup_codes",jsonType:"list",storingFieldName:"lookupCodesListJson"}]),this.dataJsonObj.defaultRangeFontSize=this.objData&&this.objData.default_font_size?this.objData.default_font_size:"0.875"}ngAfterViewChecked(){this.calculateButtonsWidth()}calculateButtonsWidth(){const a=this.buttonsWrapper.nativeElement.children;let i=0;for(let s=0;s<a.length;s++){const n=a[s];i+=n.offsetWidth+parseInt(getComputedStyle(n).marginLeft)+parseInt(getComputedStyle(n).marginRight)}const t=`${i}px`;this.previousWidth!==t&&(this.buttonsWrapper.nativeElement.style.width=t,this.previousWidth=t)}ionViewWillEnter(){this.actions={EDIT:this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.EDIT),DELETE:this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.DELETE),VIEW:this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.VIEW)}}getSearchResult(a){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.getAllRecords(),this.datatableComponent.reset()}getAllRecords(){try{const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView),i=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.proximityMessageService.getAll(this.searchString,this.enterpriseId,this.listingVariables.sortOrderColumn,this.listingVariables.rowsPerPage,this.listingVariables.pageNumbers,this.statusObj,this.forceRefresh,a,i,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(t=>{if(this.hideSpinner(),t.rows.length>0){this.proximityMessageMobileListData&&this.proximityMessageMobileListData.length>0||(this.proximityMessageMobileListData=[]);for(let s=0;s<t.rows.length;s++){const n=this.displayDateFormatter(t.rows[s].start_datetime,!1,!0);this.startDate=n.startDate,t.rows[s].display_grid_title=t.rows[s].message_title,t.rows[s].imageName=t.rows[s].message_title,t.rows[s].imageDisplay=t.rows[s].message_file_path&&t.rows[s].message_file_name?t.rows[s].message_file_path+"/"+t.rows[s].message_file_name:null;const d=this.displayDateFormatter(t.rows[s].end_datetime,!1,!0);this.endDate=d.startDate,t.rows[s].start_datetime=this.startDate+" "+this.userTimeZoneObj.timeZoneCode,t.rows[s].end_datetime=this.endDate+" "+this.userTimeZoneObj.timeZoneCode;const c={url:`proximitymessages/beaconmessages/${t.rows[s]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},m=c.queryParams&&Object.keys(c.queryParams).length>0?`${c.url}?${JSON.stringify(c.queryParams)}`:c.url;t.rows[s].message_type.lookup_name=`<a class="enable" id="message_type.lookup_name${t.rows[s]._id}" href=${m}>${t.rows[s].message_type.lookup_name}`,this.proximityMessageMobileListData=this.proximityMessageMobileListData.filter(u=>u._id!==t.rows[s]._id),this.proximityMessageMobileListData.push(t.rows[s])}t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.proximityMessagesListData=this.proximityMessagesListData.concat(t.rows)):this.proximityMessagesListData=t.rows}else this.proximityMessagesListData=[],this.proximityMessageMobileListData=[]},t=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)})}catch(a){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.proximityMessageMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}toggle(){this.show=!this.show}createProximityMessages(){try{this.router.navigate(["proximitymessages/beaconmessages/create"])}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createProximityMessages",a)}}onItemClicked(a){this.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}mobileEventAction(a){try{this.mobileroutesArray=[],!0===this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.DELETE)&&this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.DELETE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_DELETE"),handler:()=>{this.delete(a._id),this.router.routeReuseStrategy.clearModuleRouteCache("beaconmessages")}}),!0===this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.EDIT)&&this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["proximitymessages/beaconmessages/"+a._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("beaconmessages")}}),this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.VIEW)&&this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.VIEW)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.presentActionSheet(a)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",i)}}presentActionSheet(a){var i=this;return(0,_.Z)(function*(){yield(yield i.actionSheetController.create({cssClass:"actionsheet",buttons:i.mobileroutesArray})).present()})()}onActionClicked(a){a.action===l.A0.EDIT?(this.router.navigate(["proximitymessages/beaconmessages/"+a.data._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("beacon-messages")):a.action===l.A0.VIEW?this.commonService.redirectToUrl(["..",a.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):a.action===l.A0.DELETE?this.delete(a.data._id):a.action===l.A0.UI_SETTINGS&&(this.dataJsonObj.selectedRecordObj=a.data,this.showPreviewModal())}delete(a){try{se().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_RECORD_DELETE"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(i=>{i.value&&this.proximityMessageService.delete(a).then(t=>{this.proximityMessageMobileListData=this.noDuplicates,this.getAllRecords(),this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_DELETE"),this.router.routeReuseStrategy.clearModuleRouteCache("beaconmessages")},t=>{}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"delete",t)})})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"delete",i)}}statusData(a){try{this.isFilterClicked=!0,this.statusObj=a.value,this.getAllRecords()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"statusData",i)}}statsToggle(){try{this.statsShow=!this.statsShow}catch(a){this.loggerService.setLoggerError(this.constructor.name,"toggle",a)}}displayDateFormatter(a,i,t){try{const s=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,n={startDate:"",endDate:""};if(n.startDate=this.commonService.convertDateToUserFormat(s,l.eZ.HOURS_MINS,!0,"",!1),i){const d=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,c=S.utc(d).add(2,"hours");n.endDate=this.commonService.convertDateToUserFormat(c,l.eZ.HOURS_MINS,!0,"",!1)}return n}catch(s){this.loggerService.setLoggerError(this.constructor.name,"displayDateFormatter",s)}}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a?this.dataJsonObj.selectedFilter=a:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}onPageLevelActionClicked(a){"PROXIMITY_POPUP"===a.actionName&&this.showPreviewModal()}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}getDynamicJson(a){var i=this;return(0,_.Z)(function*(){for(let t of a)try{i.dataJsonObj[t.storingFieldName]=yield i.commonService.getDynamicJson(i.enterpriseId,t.folderName,t.jsonType),i.dataJsonObj.deviceTypesList=i.dataJsonObj.lookupCodesListJson?i.dataJsonObj.lookupCodesListJson[l.ox.WIDGET_TYPES]?.filter(s=>s?.lookup_name!==l.WO.BIG_SCREEN):[]}catch{i.dataJsonObj[t.storingFieldName]={}}})()}getFontData(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJson[l.uP.FONT_NAMES],"").then(a=>{this.dataJsonObj.fontData=a})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getFontData",a)}}showPreviewModal(){this.getDefaultUiSettingData(),this.getFontData(),$("#PreviewPopup").modal("show"),$(".modal-backdrop").insertAfter("#PreviewPopup")}getDefaultUiSettingData(){const a=JSON.parse(localStorage.getItem(l.BU.DEFAULT_UI_SETTINGS_DATA));this.dataJsonObj.messageTitle=this.dataJsonObj.selectedRecordObj?.message_title,this.dataJsonObj.messageDescription=this.dataJsonObj.selectedRecordObj?.message_description,this.dataJsonObj.messageActionsList=this.dataJsonObj.selectedRecordObj?.actions,this.dataJsonObj.messageTitleBgColor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_title_bg_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_title_bg_color:a?.theme_settings?.header_bg_color,this.dataJsonObj.messageTitleTextcolor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_title_text_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_title_text_color:a?.theme_settings?.header_text_color,this.dataJsonObj.messageTitleFontFamilyObj=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_title_font_family?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_title_font_family:a?.theme_settings?.header_and_footer?.header_text_font,this.dataJsonObj.messageTitleFontSizeObj=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_title_font_size?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_title_font_size:this.dataJsonObj.defaultRangeFontSize,this.dataJsonObj.messageDescriptionBgColor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_description_bg_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_description_bg_color:a?.theme_settings?.body_bg_color,this.dataJsonObj.messageDescriptionTextColor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_description_text_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_description_text_color:a?.theme_settings?.body_text_color,this.dataJsonObj.messageDescriptionFontFamilyObj=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_description_font_family?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_description_font_family:a?.theme_settings?.body?.text_font,this.dataJsonObj.messageDescriptionFontSizeObj=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_description_font_size?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_description_font_size:this.dataJsonObj.defaultRangeFontSize,this.dataJsonObj.messageFooterBorderColor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_footer_border_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_footer_border_color:a?.theme_settings?.footer_text_color,this.dataJsonObj.messageFooterBgColor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_footer_bg_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_footer_bg_color:a?.theme_settings?.footer_bg_color,this.dataJsonObj.messageFooterButtonBgColor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_footer_button_bg_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_footer_button_bg_color:a?.theme_settings?.button_primary_bg_color,this.dataJsonObj.messageFooterButtonTextColor=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_footer_button_text_color?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_footer_button_text_color:a?.theme_settings?.button_primary_text_color,this.dataJsonObj.messageFooterButtonFontFamilyObj=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_footer_button_font_family?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_footer_button_font_family:a?.theme_settings?.button?.button_text_font,this.dataJsonObj.messageFooterButtonsFontSizeObj=this.dataJsonObj.selectedRecordObj?.message_ui_setting?.message_footer_button_font_size?this.dataJsonObj.selectedRecordObj.message_ui_setting.message_footer_button_font_size:this.dataJsonObj.defaultRangeFontSize;for(let i of this.dataJsonObj.messageActionsList)switch(i.field){case l.A0.BOOKMARKS:i.display_name=this.translateService.instant("MAP.BOOKMARK"),i.iconClassName="mgr-5 fas fa-bookmark";break;case l.A0.VISIT:i.display_name=this.translateService.instant("NEW_VARIABLES.VISIT"),i.iconClassName="mgr-5 icon-visit"}}changeFontStyle(a,i){this.dataJsonObj[i]=this.dataJsonObj.fontData.find(t=>t.ID===parseInt(a.value,10))}proximityUiSettingsChangeColor(a,i,t){t[a]=i.value}changeSliderFontSize(a,i){this.dataJsonObj[i]=parseFloat(a.value)}submitPopupUISettingData(){this.proximityMessageService.update({enterprise:this.dataJsonObj.selectedRecordObj.enterprise,beacon:this.dataJsonObj.selectedRecordObj.beacon,geo_coordinates:this.dataJsonObj.selectedRecordObj.geo_coordinates,radius:this.dataJsonObj.selectedRecordObj.radius,beacon_promotion:this.dataJsonObj.selectedRecordObj.beacon_promotion,message_description:this.dataJsonObj.selectedRecordObj.message_description,message_type:this.dataJsonObj.selectedRecordObj.message_type,message_file_name:this.dataJsonObj.selectedRecordObj.message_file_name,message_file_path:this.dataJsonObj.selectedRecordObj.message_file_path,message_thumbnail_path:this.dataJsonObj.selectedRecordObj.message_thumbnail_path,message_title:this.dataJsonObj.selectedRecordObj.message_title,link_to_screen:this.dataJsonObj.selectedRecordObj.link_to_screen,start_datetime:this.dataJsonObj.selectedRecordObj.start_datetime,end_datetime:this.dataJsonObj.selectedRecordObj.end_datetime,actions:this.dataJsonObj.selectedRecordObj.actions,language_translations:[],message_ui_setting:{message_title_bg_color:this.dataJsonObj.messageTitleBgColor,message_title_text_color:this.dataJsonObj.messageTitleTextcolor,message_title_font_family:this.dataJsonObj.messageTitleFontFamilyObj,message_title_font_size:this.dataJsonObj.messageTitleFontSizeObj,message_description_bg_color:this.dataJsonObj.messageDescriptionBgColor,message_description_text_color:this.dataJsonObj.messageDescriptionTextColor,message_description_font_family:this.dataJsonObj.messageDescriptionFontFamilyObj,message_description_font_size:this.dataJsonObj.messageDescriptionFontSizeObj,message_footer_border_color:this.dataJsonObj.messageFooterBorderColor,message_footer_bg_color:this.dataJsonObj.messageFooterBgColor,message_footer_button_bg_color:this.dataJsonObj.messageFooterButtonBgColor,message_footer_button_text_color:this.dataJsonObj.messageFooterButtonTextColor,message_footer_button_font_family:this.dataJsonObj.messageFooterButtonFontFamilyObj,message_footer_button_font_size:this.dataJsonObj.messageFooterButtonsFontSizeObj}},this.dataJsonObj.selectedRecordObj._id).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),$("#PreviewPopup").modal("hide"),this.getAllRecords()},i=>{this.commonErrorCodes(JSON.parse(i))})}commonErrorCodes(a){409===JSON.parse(a[l.BU.STATUS])&&(this.dataJsonObj.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}static \u0275fac=function(i){return new(i||o)(e.Y36(C),e.Y36(j.v),e.Y36(E.BX),e.Y36(ae.Y),e.Y36(ie.v),e.Y36(h.gz),e.Y36(h.F0),e.Y36(f.sK),e.Y36(E.yF),e.Y36(N.m),e.Y36(W.e),e.Y36(Z.s))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-proximitymessages-list"]],viewQuery:function(i,t){if(1&i&&(e.Gf(Ct,5),e.Gf(vt,5),e.Gf(yt,5)),2&i){let s;e.iGM(s=e.CRH())&&(t.buttonsWrapper=s.first),e.iGM(s=e.CRH())&&(t.datatableComponent=s.first),e.iGM(s=e.CRH())&&(t.fontSizeInput=s.first)}},inputs:{defaultValue:"defaultValue"},features:[e._Bn([C,ie.v,ae.Y]),e.qOj],decls:96,vars:128,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],[3,"header","actions","data","totalRecords","paginator","totalPages","mobileListData","expand","statsShow","showRights","statsSearch","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","changeStats","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"],["id","PreviewPopup","tabindex","-1","role","dialog","aria-labelledby","previewModalLabel","aria-hidden","true",1,"modal","fade","overflow-hidden","p-5"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","previewModalLabel",1,"modal-title","d-flex","align-items-center","justify-content-between","w-100","previewModalLabel"],[1,"btn","btn-link","btn-sm","m-0","pd-0","pdl-10","pdr-10"],["data-bs-dismiss","modal","aria-label","Close",1,"fas","fa-times"],[1,"position-relative","overflow-y-scroll","h-70"],[1,"form-bs"],[1,"row","pdt-5","pdb-5"],[1,"col-md-3"],["type","color","disabled","false",3,"label","value","valueChange"],["id","default-ui-settings-theme-settings-list-text-font",3,"label","options","defaultValue","valueChange"],[1,"w-100",3,"value","steps","valueChange"],["fontSizeInput",""],[1,"d-flex","justify-content-center","w-100"],[1,"notifications","position-relative"],[1,"d-flex","justify-content-center","notification-content"],[1,"notification"],[1,"notification-body"],[1,"message"],["fxLayout","row","fxLayoutAlign","space-between center",1,"title",3,"ngStyle"],[1,"d-flex","align-items-center","justify-content-between"],[1,"proximity-title-wrapper"],[1,"fs-14","fw-500","mg-0","pdt-5","pdb-5","pdl-10","pdr-10","text-ellipsis",3,"ngStyle"],[1,"proximity-buttons-wrapper","d-flex",3,"ngStyle"],["buttonsWrapper",""],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","icon-mute",2,"font-size","18px"],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","fas","fa-times",2,"font-size","18px"],[1,"popup-inner-content","pdl-10","pdr-10",3,"ngStyle"],[1,"fs-13","fw-400","message-description",3,"innerHtml"],[1,"p-1","footer-toast",3,"ngStyle"],[1,"d-flex","justify-content-end","align-items-center"],["class","d-flex fs-13 fw-500 proximity-btn mgr-5",3,"ngStyle",4,"ngFor","ngForOf"],[1,"d-flex","fs-13","fw-500","proximity-btn",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center","mgr-5","icon-notification-bell"],[1,"m-2","d-flex","justify-content-end"],[1,"btn","btn-primary","mgr-5",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-primary","mgr-5"],[1,"d-flex","fs-13","fw-500","proximity-btn","mgr-5",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center",3,"ngClass"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(n){return t.onHeaderItemClick(n)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(n){return t.onActionClicked(n)})("itemClickEvent",function(n){return t.onItemClicked(n)})("redirectionEvent",function(n){return t.mobileEventAction(n)})("changeStats",function(n){return t.statusData(n)})("loadPageData",function(n){return t.loadPageData(n)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(n){return t.onPageLevelActionClicked(n)}),e.qZA()()()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13)(14,"span"),e._uU(15),e.ALo(16,"translate"),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"a",14),e._UZ(19,"i",15),e.qZA()()(),e.TgZ(20,"div",16)(21,"div",17)(22,"div",18)(23,"div",19)(24,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageTitleBgColor",n,t.dataJsonObj)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",19)(27,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageTitleTextcolor",n,t.dataJsonObj)}),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"div",19)(30,"app-dropdown-singleselect",21),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageTitleFontFamilyObj")}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",19)(33,"app-numberincrementdecrementvalue",22,23),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageTitleFontSizeObj")}),e.qZA()(),e.TgZ(35,"div",19)(36,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageDescriptionBgColor",n,t.dataJsonObj)}),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",19)(39,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageDescriptionTextColor",n,t.dataJsonObj)}),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"div",19)(42,"app-dropdown-singleselect",21),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageDescriptionFontFamilyObj")}),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"div",19)(45,"app-numberincrementdecrementvalue",22,23),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageDescriptionFontSizeObj")}),e.qZA()(),e.TgZ(47,"div",19)(48,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterBorderColor",n,t.dataJsonObj)}),e.ALo(49,"translate"),e.qZA()(),e.TgZ(50,"div",19)(51,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterBgColor",n,t.dataJsonObj)}),e.ALo(52,"translate"),e.qZA()(),e.TgZ(53,"div",19)(54,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterButtonBgColor",n,t.dataJsonObj)}),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"div",19)(57,"app-input",20),e.NdJ("valueChange",function(n){return t.proximityUiSettingsChangeColor("messageFooterButtonTextColor",n,t.dataJsonObj)}),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"div",19)(60,"app-numberincrementdecrementvalue",22,23),e.NdJ("valueChange",function(n){return t.changeSliderFontSize(n,"messageFooterButtonsFontSizeObj")}),e.qZA()(),e.TgZ(62,"div",19)(63,"app-dropdown-singleselect",21),e.NdJ("valueChange",function(n){return t.changeFontStyle(n,"messageFooterButtonFontFamilyObj")}),e.ALo(64,"translate"),e.qZA()()()(),e.TgZ(65,"div",24)(66,"div",25)(67,"div",26)(68,"div",27)(69,"div",28)(70,"div",29)(71,"div",30)(72,"div",31)(73,"div",32)(74,"h2",33),e._uU(75),e.qZA()(),e.TgZ(76,"div",34,35),e._UZ(78,"i",36)(79,"i",37),e.qZA()()(),e.TgZ(80,"div",38),e._UZ(81,"span",39),e.qZA()()(),e.TgZ(82,"div",40)(83,"div",41),e.YNc(84,St,3,8,"div",42),e.TgZ(85,"div",43),e._UZ(86,"i",44),e._uU(87),e.ALo(88,"translate"),e.qZA()()()()()()(),e.TgZ(89,"div",45)(90,"button",46),e.NdJ("click",function(){return t.submitPopupUISettingData()}),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"button",47),e._uU(94),e.ALo(95,"translate"),e.qZA()()()()()()()),2&i&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",t.headers)("actions",t.actions)("data",t.proximityMessagesListData)("totalRecords",t.listingVariables.totalRecords)("paginator",!0)("totalPages",t.listingVariables.totalpages)("mobileListData",t.proximityMessageMobileListData)("expand",!1)("statsShow",t.statsShow)("showRights",!1)("statsSearch",t.searchString)("listingVariables",t.listingVariables)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",t.dataJsonObj.showSpinner)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList),e.xp6(7),e.AsE("",e.lcZ(16,75,"COMMON_PAGE_TITLES.MESSAGE")," ",e.lcZ(17,77,"GOLF_GAMES.UI_SETTINGS"),""),e.xp6(9),e.s9C("label",e.lcZ(25,79,"NEW_VARIABLES.MESSAGE_TITLE_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageTitleBgColor),e.xp6(3),e.s9C("label",e.lcZ(28,81,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageTitleTextcolor),e.xp6(3),e.s9C("label",e.lcZ(31,83,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageTitleFontFamilyObj?null:t.dataJsonObj.messageTitleFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(3),e.s9C("value",t.dataJsonObj.messageTitleFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(37,85,"NEW_VARIABLES.MESSAGE_DESCRIPTION_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageDescriptionBgColor),e.xp6(3),e.s9C("label",e.lcZ(40,87,"NEW_VARIABLES.MESSAGE_DESCRIPTION_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageDescriptionTextColor),e.xp6(3),e.s9C("label",e.lcZ(43,89,"NEW_VARIABLES.MESSAGE_DESCRIPTION_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageDescriptionFontFamilyObj?null:t.dataJsonObj.messageDescriptionFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(3),e.s9C("value",t.dataJsonObj.messageDescriptionFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(49,91,"NEW_VARIABLES.MESSAGE_FOOTER_BORDER_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterBorderColor),e.xp6(3),e.s9C("label",e.lcZ(52,93,"NEW_VARIABLES.MESSAGE_FOOTER_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterBgColor),e.xp6(3),e.s9C("label",e.lcZ(55,95,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_BG_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterButtonBgColor),e.xp6(3),e.s9C("label",e.lcZ(58,97,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_COLOR")),e.s9C("value",t.dataJsonObj.messageFooterButtonTextColor),e.xp6(3),e.s9C("value",t.dataJsonObj.messageFooterButtonsFontSizeObj),e.Q6J("steps",.1),e.xp6(3),e.s9C("label",e.lcZ(64,99,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_FONT")),e.s9C("defaultValue",null==t.dataJsonObj||null==t.dataJsonObj.messageFooterButtonFontFamilyObj?null:t.dataJsonObj.messageFooterButtonFontFamilyObj.lookup_id),e.Q6J("options",null==t.dataJsonObj?null:t.dataJsonObj.fontData),e.xp6(8),e.Q6J("ngStyle",e.VKq(107,Et,t.dataJsonObj.messageTitleBgColor)),e.xp6(3),e.Q6J("ngStyle",e.kEZ(109,At,t.dataJsonObj.messageTitleTextcolor,null==t.dataJsonObj.messageTitleFontFamilyObj?null:t.dataJsonObj.messageTitleFontFamilyObj.lookup_name,1.3*t.dataJsonObj.messageTitleFontSizeObj+"rem")),e.xp6(1),e.hij(" ",null==t.dataJsonObj?null:t.dataJsonObj.messageTitle,""),e.xp6(1),e.Q6J("ngStyle",e.VKq(113,Dt,t.dataJsonObj.messageTitleTextcolor)),e.xp6(4),e.Q6J("ngStyle",e.l5B(115,q,t.dataJsonObj.messageDescriptionBgColor,t.dataJsonObj.messageDescriptionTextColor,null==t.dataJsonObj.messageDescriptionFontFamilyObj?null:t.dataJsonObj.messageDescriptionFontFamilyObj.lookup_name,t.dataJsonObj.messageDescriptionFontSizeObj+"rem")),e.xp6(1),e.Q6J("innerHtml",null==t.dataJsonObj?null:t.dataJsonObj.messageDescription,e.oJD),e.xp6(1),e.Q6J("ngStyle",e.WLB(120,Mt,t.dataJsonObj.messageFooterBgColor,t.dataJsonObj.messageFooterBorderColor)),e.xp6(2),e.Q6J("ngForOf",t.dataJsonObj.messageActionsList),e.xp6(1),e.Q6J("ngStyle",e.l5B(123,q,t.dataJsonObj.messageFooterButtonBgColor,t.dataJsonObj.messageFooterButtonTextColor,null==t.dataJsonObj.messageFooterButtonFontFamilyObj?null:t.dataJsonObj.messageFooterButtonFontFamilyObj.lookup_name,t.dataJsonObj.messageFooterButtonsFontSizeObj+"rem")),e.xp6(2),e.hij("",e.lcZ(88,101,"NEW_VARIABLES.REMIND_ME_LATER")," "),e.xp6(4),e.Oqu(e.lcZ(92,103,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(3),e.Oqu(e.lcZ(95,105,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[p.mk,p.sg,p.PC,I.a,U.K,R.k,Ot.n,x.q,Tt.y,f.X$],styles:[".notifications[_ngcontent-%COMP%]{position:fixed}.notifications.topright[_ngcontent-%COMP%]{top:0;right:0}.notifications.topleft[_ngcontent-%COMP%]{top:0;left:0}.notifications.bottomright[_ngcontent-%COMP%]{bottom:0;right:0}.notifications.bottomleft[_ngcontent-%COMP%]{bottom:0;left:0}.notifications.center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{z-index:1000;position:relative}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{background:#ffffff;position:relative;min-width:300px;max-width:300px;margin:10px;padding:0;border-radius:5px;color:#000;overflow:hidden;box-shadow:0 0 6px #000000bf;-webkit-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);-moz-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);font-family:var(--popup-font-family)!important}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]{padding:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{position:fixed}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:var(--header-bg-color)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--header-text-color);font-size:var(--modal-title-font-size);margin:0}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]{color:var(--header-text-color);border-top:1px solid}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]   .proximity-btn[_ngcontent-%COMP%]{background:var(--header-bg-color);padding:2px 4px;border-radius:6px}@media (max-width: 576px){.notifications[_ngcontent-%COMP%]{position:fixed;width:100%;padding:10px}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{z-index:1000;position:relative}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{background:#ffffff;position:relative;min-width:100%;max-width:100%;margin:10px;padding:0;border-radius:5px;color:#000;overflow:hidden;box-shadow:0 0 6px #000000bf;-webkit-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);-moz-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);font-family:var(--popup-font-family)!important}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]{padding:0}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]{color:var(--header-text-color);border-top:1px solid}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]   .proximity-btn[_ngcontent-%COMP%]{background:var(--header-bg-color);padding:2px 4px;border-radius:6px}}.proximity-buttons-wrapper[_ngcontent-%COMP%]{flex-shrink:0;display:flex;justify-content:flex-end}.proximity-title-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return o})(),data:{object_type:l.hf.BEACON_MESSAGES,title:"Beacon Messages list",responsibilityParam:l.bP.MENUS+"."+l.w1.PROXIMITY_MESSAGES+"."+l.bP.SUBMENUS+"."+l.w1.BEACON_MESSAGES+"."+l.In.ENABLED,pageName:l.hf.BEACON_MESSAGES}},{path:"beaconmessages/create",canActivate:[M.P],component:Pe,data:{responsibilityParam:l.bP.MENUS+"."+l.w1.PROXIMITY_MESSAGES+"."+l.bP.SUBMENUS+"."+l.w1.BEACON_MESSAGES+"."+l.In.CREATE,pageName:l.hf.BEACON_MESSAGES,pageSetting:l.AM.ACTIONS,settingField:l.In.CREATE}},{path:"beaconmessages/:id/edit",canActivate:[M.P],component:bt,data:{responsibilityParam:l.bP.MENUS+"."+l.w1.PROXIMITY_MESSAGES+"."+l.bP.SUBMENUS+"."+l.w1.BEACON_MESSAGES+"."+l.In.EDIT,pageName:l.hf.BEACON_MESSAGES,pageSetting:l.AM.ACTIONS,settingField:l.In.EDIT}},{path:"beaconmessages/:id/view",canActivate:[M.P],component:(()=>{class o extends J.O{commonService;toastController;uiUtils;router;apiEndPointUrl;route;proximityMessageService;actionSheetController;translateService;loggerService;navigationService;buttonsWrapper;previousWidth="";apiEndPoint;beaconPromotionsEnable=!1;checkboxOptions;imgFilepath;recordId;showAudio=!1;showImage=!1;showMessage=!1;url;viewData;defaultTimeZone;utcTimeZoneString;navigationPath;objectId;latitude;longitude;navigationId;description;mobileroutesArray;loginUserDateFormat;userTimeZoneObj={};startDate;endDate;dataJsonObj={};headers;languagesData=[];constructor(a,i,t,s,n,d,c,m,u,b,O){super(d,a),this.commonService=a,this.toastController=i,this.uiUtils=t,this.router=s,this.apiEndPointUrl=n,this.route=d,this.proximityMessageService=c,this.actionSheetController=m,this.translateService=u,this.loggerService=b,this.navigationService=O}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=l.hf.PROXIMITY_MESSAGES;const a=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=a.dateFormat,this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(a.timeZoneDescription),this.userTimeZoneObj.timeZoneCode=a.timeZoneCode,this.url=this.router.url.split("/")[4],this.route.params.subscribe(t=>{this.recordId=t.id}),this.dataJsonObj.languagesFromJson={},this.getLanguagesfromJson(),this.headers=[[{headersort:"disableth",field:"language_name_value",header:"PREFERENCES.LANGUAGE",class:"w-100"},{headersort:"disableth",field:"beacon_title_display_name",header:"COMMON_FIELDS.BEACON_TITLE_NAME",class:""},{headersort:"disableth",field:"description",header:"COMMON_PAGE_TITLES.MESSAGE",class:""},{headersort:"disableth",field:"is_enabled_value",header:"COMMON_FIELDS.ENABLED",class:"w-60"}]],this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(l.hf.PROXIMITY_MESSAGES,l.AM.ACTIONS,l.In.RECORD_HISTORY),this.route.queryParams.subscribe(t=>{this.dataJsonObj.queryParamsObj={defaultView:t.defaultView,selectedMenuId:t.selectedMenuId,selectedSubMenuId:t.selectedSubMenuId}}),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(l.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=l.hf.BEACON_MESSAGES,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"},{folderName:"module_manager",jsonType:"list",storingFieldName:"moduleManagerListJson"}]),this.apiEndPoint=localStorage.getItem(l.BU.S3_URL)?localStorage.getItem(l.BU.S3_URL):this.apiEndPointUrl}ngAfterViewChecked(){this.calculateButtonsWidth()}calculateButtonsWidth(){const a=this.buttonsWrapper.nativeElement.children;let i=0;for(let s=0;s<a.length;s++){const n=a[s];i+=n.offsetWidth+parseInt(getComputedStyle(n).marginLeft)+parseInt(getComputedStyle(n).marginRight)}const t=`${i}px`;this.previousWidth!==t&&(this.buttonsWrapper.nativeElement.style.width=t,this.previousWidth=t)}getDynamicJson(a){var i=this;return(0,_.Z)(function*(){for(let n of a)i.dataJsonObj[n.storingFieldName]=yield i.commonService.getDynamicJson(i.dataJsonObj.enterpriseId,n.folderName,n.jsonType);i.dataJsonObj.selectedObj={},i.dataJsonObj.selectedObj.recordId=i.recordId,i.dataJsonObj.selectedObj.pageObj=i.dataJsonObj.menuDataJson.filter(n=>n.menu_page.page_name===i.dataJsonObj.selectedPage),i.dataJsonObj.selectedObjEnabled=!0;const s=(yield i.commonService.getAllPagesFromModuleManagerJSON(i.dataJsonObj.moduleManagerListJson)).find(n=>n.module.page_name===l.hf.BEACON_MESSAGES);s?.actions&&(i.dataJsonObj.actionsListData=Object.keys(s.actions).map(n=>({field:i.toTitleCase(n.split("_").join(" ")),displayname:n.split("_").join(" "),display_name:i.toTitleCase(n.split("_").join(" ")),is_enabled:!1}))),i.getRecordById()})()}getRecordById(){try{let a="";this.commonService.isMobileWindow()&&(a="&mobileview=true"),this.proximityMessageService.get(this.recordId,a).subscribe(i=>{this.viewData=i;const t=this.displayDateFormatter(this.viewData.start_datetime,!1,!0);this.startDate=t.startDate;const s=this.displayDateFormatter(this.viewData.end_datetime,!1,!0);this.endDate=s.startDate,this.viewData.start_datetime=this.startDate+" "+this.userTimeZoneObj.timeZoneCode,this.viewData.end_datetime=this.endDate+" "+this.userTimeZoneObj.timeZoneCode,this.dataJsonObj.pageTitle=[{key:"PROXIMITY_MESSAGES.PROXIMITY_MESSAGE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}];for(let n=0;n<this.viewData.actions.length;n++){let d=this.viewData.actions[n];for(let c=0;c<this.dataJsonObj?.actionsListData?.length;c++)if(this.dataJsonObj.actionsListData[c].field===d.field){this.dataJsonObj.actionsListData[c].is_enabled=d.is_enabled;break}}this.dataJsonObj.actionsData=this.viewData.actions;for(let n of this.dataJsonObj.actionsData)switch(n.field){case l.A0.BOOKMARKS:n.display_name=this.translateService.instant("MAP.BOOKMARK"),n.iconClassName="mgr-5 fas fa-bookmark";break;case l.A0.VISIT:n.display_name=this.translateService.instant("NEW_VARIABLES.VISIT"),n.iconClassName="mgr-5 icon-visit"}if(this.viewData.language_translations)for(let n=0;n<this.viewData.language_translations.length;n++)this.viewData.language_translations[n].language_name_value=this.dataJsonObj.languagesFromJson[this.viewData.language_translations[n].language.language_name].language_display_name,this.viewData.language_translations[n].is_enabled_value=!0===this.viewData.language_translations[n].is_enabled?"Yes":"No",this.viewData.language_translations[n].updatedAt=this.viewData.language_translations[n].updatedAt?S(this.viewData.language_translations[n].updatedAt).format(this.loginUserDateFormat):"",this.viewData.language_translations[n].updated_by_value=this.viewData.language_translations[n].updated_by.l_name+", "+this.viewData.language_translations[n].updated_by.f_name,this.languagesData.find(c=>c._id===this.viewData.language_translations[n]._id)||this.languagesData.push(this.viewData.language_translations[n]);this.viewData.message_type.lookup_name===l.V8.TEXT?(this.showMessage=!0,this.showImage=!1,this.showAudio=!1):this.viewData.message_type.lookup_name===l.V8.IMAGE?(this.showImage=!0,this.showMessage=!1,this.showAudio=!1):(this.viewData.message_type.lookup_name===l.V8.AUDIO||this.viewData.message_type.lookup_name===l.V8.VIDEO)&&(this.showAudio=!0,this.showMessage=!1,this.showImage=!1),this.imgFilepath=this.viewData.message_file_path&&this.viewData.message_file_name?this.apiEndPoint+this.viewData.message_file_path+"/"+this.viewData.message_file_name:"",setTimeout(()=>{this.displayFileNameAudio(this.viewData.message_file_name?this.viewData.message_file_name:"")},500)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",a)}}getLanguagesfromJson(){var a=this;return(0,_.Z)(function*(){a.dataJsonObj.languagesFromJson=yield a.commonService.getLanguagesListJson(localStorage.getItem(l.BU.SELECTED_ENTERPRISE))})()}displayFileNameAudio(a){try{const i=document.getElementById("importFile");let t=a;null!=t&&""!==t&&t.split(".")[0].length>25&&(t=t.split(".")[0].substring(0,25)+".."+t.split(".")[1]),i.innerHTML=t}catch(i){this.loggerService.setLoggerError(this.constructor.name,"displayFileNameAudio",i)}}mobileEventAction(a){try{this.mobileroutesArray=[],!0===this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.DELETE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_DELETE"),handler:()=>{this.delete(a._id),this.router.routeReuseStrategy.clearModuleRouteCache("beaconmessages")}}),!0===this.roleRightsValidationByPage(l.hf.BEACON_MESSAGES,l.AM.ACTIONS,l.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["proximitymessages/beaconmessages/"+a._id+"/edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("beaconmessages")}}),this.presentActionSheet(a)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",i)}}presentActionSheet(a){var i=this;return(0,_.Z)(function*(){i.mobileroutesArray.length>0?yield(yield i.actionSheetController.create({cssClass:"actionsheet",buttons:i.mobileroutesArray})).present():i.uiUtils.displayWarningMessage("COMMON_VALIDATION_MESSAGES.VALID_PERFORM_ACTIONS")})()}delete(a){try{se().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_RECORD_DELETE"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(i=>{i.value&&this.proximityMessageService.delete(a).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_DELETE"),this.router.routeReuseStrategy.clearModuleRouteCache("beaconmessages")},t=>{}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"delete",t)})})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"delete",i)}}cancelBtn(){this.commonService.redirectToPreviousUrl()}displayDateFormatter(a,i,t){try{const s=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,n={startDate:"",endDate:""};if(n.startDate=this.commonService.convertDateToUserFormat(s,l.eZ.HOURS_MINS,!0,"",!1),i){const d=t?this.commonService.convertDateToUserTimeZone(a,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):a,c=S.utc(d).add(2,"hours");n.endDate=this.commonService.convertDateToUserFormat(c,l.eZ.HOURS_MINS,!0,"",!1)}return n}catch(s){this.loggerService.setLoggerError(this.constructor.name,"displayDateFormatter",s)}}toTitleCase(a){if(a){const i=a.split(" ");for(let t=0;t<i.length;t++)i[t]=i[t].charAt(0).toUpperCase()+i[t].slice(1).toLowerCase();return i.join(" ")}}static \u0275fac=function(i){return new(i||o)(e.Y36(j.v),e.Y36(E.yF),e.Y36(Z.s),e.Y36(h.F0),e.Y36("apiEndPoint"),e.Y36(h.gz),e.Y36(C),e.Y36(E.BX),e.Y36(f.sK),e.Y36(N.m),e.Y36(F.f))};static \u0275cmp=e.Xpm({type:o,selectors:[["app-proximitymessages-view"]],viewQuery:function(i,t){if(1&i&&e.Gf(Nt,5),2&i){let s;e.iGM(s=e.CRH())&&(t.buttonsWrapper=s.first)}},features:[e._Bn([C]),e.qOj],decls:152,vars:167,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-lg-12","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-4"],["disabled","true","id","proximitymessages-view-assettype",3,"label","value"],["mandatory","false","disabled","true","id","proximitymessages-view-asset",3,"label","value"],["class","col-md-4",4,"ngIf"],["disabled","true","id","proximitymessages-view-messagetype",3,"label","value"],[1,"col-lg-8","col-md-6","datetimepicker","order-md-1","order-2"],[1,"col-md-6"],["mandatory","true","disabled","true","id","proximitymessages-view-start_date",3,"label","value"],[1,"col-md-6","order-md-1","order-2"],["mandatory","true","disabled","true","id","proximitymessages-view-end_date",3,"label","value"],[1,"col-md-4","order-md-1","order-2"],["disabled","true","id","proximitymessages-view-latitude",3,"label","value"],["disabled","true","id","proximitymessages-view-longitude",3,"label","value"],["disabled","true","id","proximitymessages-view-radius",3,"label","value"],[1,"col-md-12","order-md-1","order-2"],[1,"imagewith-label"],["id","proximitymessages-view-description",3,"innerHTML"],[1,"col-md-12","text-end","mt-2","mb-2","order-md-1","order-2"],["className","btn btn-danger btn-sm","id","proximitymessages-view-close",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","actionsAccordion",1,"text-capitalize",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],[1,"form-bs"],[1,"row","pdt-5","pdb-5"],["class","col-md-2 d-flex align-items-center",4,"ngFor","ngForOf"],["id","actionsAccordion",1,"",3,"selected"],[1,"col-md-3"],["type","color","disabled","true",3,"label","value"],["disabled","true",3,"label","value"],["disabled","true","id","font-size",3,"label","value"],[1,"d-flex","justify-content-center","w-100"],[1,"w-50","notifications","position-relative"],[1,"d-flex","justify-content-center","notification-content"],[1,"notification"],[1,"notification-body"],[1,"message"],["fxLayout","row","fxLayoutAlign","space-between center",1,"title",3,"ngStyle"],[1,"d-flex","align-items-center","justify-content-between"],[1,"proximity-title-wrapper"],[1,"fs-14","fw-500","mg-0","pdt-5","pdb-5","pdl-10","pdr-10","text-ellipsis",3,"ngStyle"],[1,"proximity-buttons-wrapper","d-flex",3,"ngStyle"],["buttonsWrapper",""],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","icon-mute",2,"font-size","18px"],[1,"position-relative","d-flex","align-items-center","pdr-10","pdl-10","fas","fa-times",2,"font-size","18px"],[1,"popup-inner-content","pdl-10","pdr-10",3,"ngStyle"],[1,"fs-13","fw-400",3,"innerHtml"],[1,"p-1","footer-toast",3,"ngStyle"],[1,"d-flex","justify-content-end","align-items-center"],["class","d-flex fs-13 fw-500 proximity-btn mgr-5",3,"ngStyle",4,"ngFor","ngForOf"],[1,"d-flex","fs-13","fw-500","proximity-btn",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center","mgr-5","icon-notification-bell"],[1,"list-accordion-tab",3,"selected"],["selectionMode","single","dataKey","LineNum",1,"ptable","d-none","d-lg-block","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"d-lg-none"],["lines","full","class","pdl-0 pdr-0",4,"ngFor","ngForOf"],["class","text-center text-danger mb-0 no-data-txt",4,"ngIf"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["mandatory","false","disabled","true","id","proximitymessages-view-messagetitle",3,"label","value"],[1,"col-md-2","d-flex","align-items-center"],["label","","disabled","true",3,"options","checked"],[1,"d-flex","fs-13","fw-500","proximity-btn","mgr-5",3,"ngStyle"],[1,"position-relative","d-flex","align-items-center",3,"ngClass"],["class","no-results-found",4,"ngIf"],[1,"no-results-found"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow","class",4,"ngFor","ngForOf"],["data-toggle","modal","data-bs-target","#exampleModal2",3,"pSelectableRow"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],["lines","full",1,"pdl-0","pdr-0"],[1,"text-center"],[1,"mg-0"],[1,"mg-0","fs-13"],["color","primary",1,"h3"],[1,"mg-0","fs-11"],[1,"h3"],[1,"text-center","text-danger","mb-0","no-data-txt"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11),e._UZ(15,"app-input",13),e.ALo(16,"translate"),e.qZA(),e.YNc(17,Lt,3,4,"div",14),e.YNc(18,Jt,3,4,"div",14),e.qZA()(),e.TgZ(19,"div",9)(20,"div",10)(21,"div",11),e._UZ(22,"app-input",15),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",16)(25,"div",10)(26,"div",17),e._UZ(27,"app-input",18),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"div",19),e._UZ(30,"app-input",20),e.ALo(31,"translate"),e.qZA()()()()(),e.TgZ(32,"div",21),e._UZ(33,"app-input",22),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"div",21),e._UZ(36,"app-input",23),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"div",21),e._UZ(39,"app-input",24),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"div",25)(42,"div",26)(43,"label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._UZ(46,"span",27),e.qZA()(),e.TgZ(47,"div",28)(48,"app-button",29),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(49,"translate"),e.qZA()()(),e.TgZ(50,"div",10)(51,"div",3)(52,"div",30)(53,"div",31)(54,"p-accordion",32)(55,"p-accordionTab",33)(56,"p-header",34)(57,"span"),e._uU(58),e.ALo(59,"translate"),e.qZA()(),e.TgZ(60,"div",35)(61,"div",36),e.YNc(62,Ft,2,4,"div",37),e.qZA()()(),e.TgZ(63,"p-accordionTab",38)(64,"p-header",34)(65,"span"),e._uU(66),e.ALo(67,"translate"),e.ALo(68,"translate"),e.qZA()(),e.TgZ(69,"div",35)(70,"div",36)(71,"div",39),e._UZ(72,"app-input",40),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"div",39),e._UZ(75,"app-input",40),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"div",39),e._UZ(78,"app-input",41),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"div",39),e._UZ(81,"app-input",42),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"div",39),e._UZ(84,"app-input",40),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"div",39),e._UZ(87,"app-input",40),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"div",39),e._UZ(90,"app-input",41),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"div",39),e._UZ(93,"app-input",42),e.ALo(94,"translate"),e.qZA(),e.TgZ(95,"div",39),e._UZ(96,"app-input",40),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"div",39),e._UZ(99,"app-input",40),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"div",39),e._UZ(102,"app-input",40),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"div",39),e._UZ(105,"app-input",40),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"div",39),e._UZ(108,"app-input",42),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"div",39),e._UZ(111,"app-input",41),e.ALo(112,"translate"),e.qZA()()(),e.TgZ(113,"div",43)(114,"div",44)(115,"div",45)(116,"div",46)(117,"div",47)(118,"div",48)(119,"div",49)(120,"div",50)(121,"div",51)(122,"h2",52),e._uU(123),e.qZA()(),e.TgZ(124,"div",53,54),e._UZ(126,"i",55)(127,"i",56),e.qZA()()(),e.TgZ(128,"div",57),e._UZ(129,"span",58),e.qZA()()(),e.TgZ(130,"div",59)(131,"div",60),e.YNc(132,It,3,8,"div",61),e.TgZ(133,"div",62),e._UZ(134,"i",63),e._uU(135),e.ALo(136,"translate"),e.qZA()()()()()()()(),e.TgZ(137,"p-accordionTab",64)(138,"p-header",34)(139,"span"),e._uU(140),e.ALo(141,"translate"),e.qZA()(),e.TgZ(142,"p-table",65),e.YNc(143,wt,1,1,"ng-template",66),e.YNc(144,Bt,2,1,"ng-template",67),e.YNc(145,Rt,2,1,"ng-template",68),e.YNc(146,Vt,4,2,"ng-template",69),e.qZA(),e.TgZ(147,"div",70)(148,"ion-list"),e.YNc(149,Gt,21,12,"ion-item",71),e.qZA(),e.YNc(150,qt,3,3,"p",72),e.qZA()(),e._UZ(151,"app-recordhistory",73),e.qZA()()()()()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(6),e.s9C("label",e.lcZ(13,87,"FACILITIES.FACILITY_TYPE")),e.s9C("value",null==t.viewData||null==t.viewData.beacon||null==t.viewData.beacon.facility_type?null:t.viewData.beacon.facility_type.facility_type_name),e.xp6(3),e.s9C("label",e.lcZ(16,89,"NEW_VARIABLES.FACILITY")),e.s9C("value",null==t.viewData||null==t.viewData.beacon||null==t.viewData.beacon.facility?null:t.viewData.beacon.facility.facility_name),e.xp6(2),e.Q6J("ngIf",!1===t.showMessage),e.xp6(1),e.Q6J("ngIf",!0===t.showMessage),e.xp6(4),e.s9C("label",e.lcZ(23,91,"NEW_VARIABLES.MESSAGE_TYPE")),e.s9C("value",t.lookupLanguageTranslations(null==t.viewData||null==t.viewData.message_type?null:t.viewData.message_type.lookup_id)),e.xp6(5),e.s9C("label",e.lcZ(28,93,"COMMON_FIELDS.START_DATE")),e.s9C("value",null==t.viewData?null:t.viewData.start_datetime),e.xp6(3),e.s9C("label",e.lcZ(31,95,"COMMON_FIELDS.END_DATE")),e.s9C("value",null==t.viewData?null:t.viewData.end_datetime),e.xp6(3),e.s9C("label",e.lcZ(34,97,"NEW_VARIABLES.LATITUDE")),e.s9C("value",null==t.viewData?null:t.viewData.geo_coordinates[0]),e.xp6(3),e.s9C("label",e.lcZ(37,99,"NEW_VARIABLES.LONGITUDE")),e.s9C("value",null==t.viewData?null:t.viewData.geo_coordinates[1]),e.xp6(3),e.s9C("label",e.lcZ(40,101,"NEW_VARIABLES.RADIUS")),e.s9C("value",null==t.viewData?null:t.viewData.radius),e.xp6(5),e.Oqu(e.lcZ(45,103,"COMMON_PAGE_TITLES.MESSAGE")),e.xp6(2),e.Q6J("innerHTML",null==t.viewData?null:t.viewData.message_description,e.oJD),e.xp6(2),e.s9C("label",e.lcZ(49,105,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(6),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(59,107,"COMMON_FIELDS.ACTIONS")),e.xp6(4),e.Q6J("ngForOf",t.dataJsonObj.actionsListData),e.xp6(1),e.Q6J("selected",!0),e.xp6(3),e.AsE("",e.lcZ(67,109,"COMMON_PAGE_TITLES.MESSAGE")," ",e.lcZ(68,111,"GOLF_GAMES.UI_SETTINGS"),""),e.xp6(6),e.s9C("label",e.lcZ(73,113,"NEW_VARIABLES.MESSAGE_TITLE_BG_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_title_bg_color),e.xp6(3),e.s9C("label",e.lcZ(76,115,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_title_text_color),e.xp6(3),e.s9C("label",e.lcZ(79,117,"NEW_VARIABLES.MESSAGE_TITLE_TEXT_FONT")),e.s9C("value",t.lookupLanguageTranslations(null==t.viewData||null==t.viewData.message_ui_setting||null==t.viewData.message_ui_setting.message_title_font_family?null:t.viewData.message_ui_setting.message_title_font_family.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(82,119,"NEW_VARIABLES.MESSAGE_TITLE_FONT_SIZE")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_title_font_size),e.xp6(3),e.s9C("label",e.lcZ(85,121,"NEW_VARIABLES.MESSAGE_DESCRIPTION_BG_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_description_bg_color),e.xp6(3),e.s9C("label",e.lcZ(88,123,"NEW_VARIABLES.MESSAGE_DESCRIPTION_TEXT_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_description_text_color),e.xp6(3),e.s9C("label",e.lcZ(91,125,"NEW_VARIABLES.MESSAGE_DESCRIPTION_FONT")),e.s9C("value",t.lookupLanguageTranslations(null==t.viewData||null==t.viewData.message_ui_setting||null==t.viewData.message_ui_setting.message_description_font_family?null:t.viewData.message_ui_setting.message_description_font_family.lookup_id)),e.xp6(3),e.s9C("label",e.lcZ(94,127,"NEW_VARIABLES.MESSAGE_DESCRIPTION_FONT_SIZE")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_description_font_size),e.xp6(3),e.s9C("label",e.lcZ(97,129,"NEW_VARIABLES.MESSAGE_FOOTER_BORDER_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_border_color),e.xp6(3),e.s9C("label",e.lcZ(100,131,"NEW_VARIABLES.MESSAGE_FOOTER_BG_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_bg_color),e.xp6(3),e.s9C("label",e.lcZ(103,133,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_BG_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_button_bg_color),e.xp6(3),e.s9C("label",e.lcZ(106,135,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_COLOR")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_button_text_color),e.xp6(3),e.s9C("label",e.lcZ(109,137,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_FONT_SIZE")),e.s9C("value",null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_button_font_size),e.xp6(3),e.s9C("label",e.lcZ(112,139,"NEW_VARIABLES.MESSAGE_FOOTER_BUTTON_TEXT_FONT")),e.s9C("value",t.lookupLanguageTranslations(null==t.viewData||null==t.viewData.message_ui_setting||null==t.viewData.message_ui_setting.message_footer_button_font_family?null:t.viewData.message_ui_setting.message_footer_button_font_family.lookup_id)),e.xp6(8),e.Q6J("ngStyle",e.VKq(145,zt,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_title_bg_color)),e.xp6(3),e.Q6J("ngStyle",e.kEZ(147,Qt,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_title_text_color,null==t.viewData||null==t.viewData.message_ui_setting||null==t.viewData.message_ui_setting.message_title_font_family?null:t.viewData.message_ui_setting.message_title_font_family.lookup_name,1.3*(null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_title_font_size)+"rem")),e.xp6(1),e.hij(" ",null==t.viewData?null:t.viewData.message_title,""),e.xp6(1),e.Q6J("ngStyle",e.VKq(151,Wt,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_title_text_color)),e.xp6(4),e.Q6J("ngStyle",e.l5B(153,z,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_description_bg_color,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_description_text_color,null==t.viewData||null==t.viewData.message_ui_setting||null==t.viewData.message_ui_setting.message_description_font_family?null:t.viewData.message_ui_setting.message_description_font_family.lookup_name,(null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_description_font_size)+"rem")),e.xp6(1),e.Q6J("innerHtml",null==t.viewData?null:t.viewData.message_description,e.oJD),e.xp6(1),e.Q6J("ngStyle",e.kEZ(158,Yt,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_bg_color,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_description_text_color,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_border_color)),e.xp6(2),e.Q6J("ngForOf",null==t.dataJsonObj?null:t.dataJsonObj.actionsData),e.xp6(1),e.Q6J("ngStyle",e.l5B(162,z,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_button_bg_color,null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_button_text_color,null==t.viewData||null==t.viewData.message_ui_setting||null==t.viewData.message_ui_setting.message_footer_button_font_family?null:t.viewData.message_ui_setting.message_footer_button_font_family.lookup_name,(null==t.viewData||null==t.viewData.message_ui_setting?null:t.viewData.message_ui_setting.message_footer_button_font_size)+"rem")),e.xp6(2),e.hij("",e.lcZ(136,141,"NEW_VARIABLES.REMIND_ME_LATER")," "),e.xp6(2),e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(141,143,"COMMON_PAGE_TITLES.LANGUAGE_TRANSLATIONS")),e.xp6(2),e.Q6J("columns",t.headers)("value",t.languagesData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(7),e.Q6J("ngForOf",t.languagesData),e.xp6(1),e.Q6J("ngIf",t.languagesData&&0==t.languagesData.length),e.xp6(1),e.Q6J("createdBy",null==t.viewData?null:t.viewData.created_by)("lastUpdatedBy",null==t.viewData?null:t.viewData.updated_by)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.viewData?null:t.viewData.createdAt)("lastUpdatedDate",null==t.viewData?null:t.viewData.updatedAt))},dependencies:[p.mk,p.sg,p.O5,p.PC,A.h4,A.jx,y.iA,y.Ei,B.r,I.a,k.b,te.W,x.q,v.UQ,v.US,f.X$],styles:[".notifications[_ngcontent-%COMP%]{position:fixed}.notifications.topright[_ngcontent-%COMP%]{top:0;right:0}.notifications.topleft[_ngcontent-%COMP%]{top:0;left:0}.notifications.bottomright[_ngcontent-%COMP%]{bottom:0;right:0}.notifications.bottomleft[_ngcontent-%COMP%]{bottom:0;left:0}.notifications.center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{z-index:1000;position:relative}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{background:#ffffff;position:relative;min-width:300px;max-width:300px;margin:10px;padding:0;border-radius:5px;color:#000;overflow:hidden;box-shadow:0 0 6px #000000bf;-webkit-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);-moz-box-shadow:0px 0px 6px 0px rgba(0,0,0,.75);font-family:var(--popup-font-family)!important}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]{padding:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{position:fixed}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{background-color:var(--header-bg-color)}.notifications[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .notification-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--header-text-color);font-size:var(--modal-title-font-size)}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]{color:var(--header-text-color);border-top:1px solid}.notifications[_ngcontent-%COMP%]   .footer-toast[_ngcontent-%COMP%]   .proximity-btn[_ngcontent-%COMP%]{background:var(--header-bg-color);padding:2px 4px;border-radius:6px}.proximity-buttons-wrapper[_ngcontent-%COMP%]{flex-shrink:0;display:flex;justify-content:flex-end}.proximity-title-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return o})(),data:{responsibilityParam:l.bP.MENUS+"."+l.w1.PROXIMITY_MESSAGES+"."+l.bP.SUBMENUS+"."+l.w1.BEACON_MESSAGES+"."+l.In.VIEW,pageName:l.hf.BEACON_MESSAGES,pageSetting:l.AM.ACTIONS,settingField:l.In.VIEW}}]}];let Kt=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[h.Bz.forChild($t),h.Bz]})}return o})(),Xt=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[p.ez,le.D,T.u5,T.UX,oe.v,y.U$,f.aw,ne.Q,v.fx,Kt,P.UM]})}return o})()}}]);