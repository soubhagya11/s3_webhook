"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5130],{75130:(le,x,p)=>{p.r(x),p.d(x,{EventsUiModule:()=>oe});var z=p(32174),D=p(36895),$=p(32137),B=p(24006),X=p(3848),tt=p(93144),C=p(54463),et=p(65673),j=p(11210),w=p(15861),N=p(71568),F=p(47561),A=p(34742),Y=p(73078),J=p(42786),n=p(32236),t=p(94650),it=p(35226),st=p.n(it),P=p(15965),at=p(4859),nt=p(10841);const R=function(){return{icon:"card-title",content:""}},M="btn btn-primary btn-sm mgr-5 mat-raised-button me-1",G=function(o){return{title:" ",text:"Do you want to delete this record?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",focusCancel:!0,confirmButtonClass:M,cancelButtonClass:"btn btn-danger btn-sm mat-raised-button",className:o}};function ot(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",4),t.NdJ("confirm",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.deleteRecord(s))})("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",5),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,G,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"COMMON_BUTTONS.BUTTON_DELETE")))}const k=function(o){return{title:" ",text:"Please select any record",type:"warning",confirmButtonText:"ok",confirmButtonClass:M,className:o}};function lt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",6),t.NdJ("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",5),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,k,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"COMMON_BUTTONS.BUTTON_DELETE")))}function rt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",6),t.NdJ("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",7),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,k,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"COMMON_BUTTONS.BUTTON_READ")))}function ct(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",8),t.NdJ("click",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.getReadButton(s))}),t._UZ(1,"i",7),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"COMMON_BUTTONS.BUTTON_READ")))}function mt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",6),t.NdJ("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",9),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,k,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"COMMON_PAGE_TITLES.UNREAD")))}function ht(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",8),t.NdJ("click",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.getUnReadButton(s))}),t._UZ(1,"i",9),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"COMMON_PAGE_TITLES.UNREAD")))}const dt=function(o){return{title:" ",text:"Do you want to activate this record?",type:"warning",showCancelButton:!0,confirmButtonText:"Activate",cancelButtonText:"Cancel",focusCancel:!0,confirmButtonClass:M,cancelButtonClass:"btn btn-danger btn-sm mat-raised-button",className:o}};function ut(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",4),t.NdJ("confirm",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.activateRecord(s))})("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",10),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,dt,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"COMMON_BUTTONS.BUTTON_ACTIVATE")))}const gt=function(o){return{title:" ",text:"Do you want to Inactivate this record?",type:"warning",showCancelButton:!0,confirmButtonText:"Inactivate",cancelButtonText:"Cancel",focusCancel:!0,confirmButtonClass:M,cancelButtonClass:"btn btn-danger btn-sm mat-raised-button",className:o}};function pt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",4),t.NdJ("confirm",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.inactivateRecord(s))})("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",11),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,gt,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"COMMON_BUTTONS.BUTTON_INACTIVATE")))}function ft(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",4),t.NdJ("confirm",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.unAssignRecord(s))})("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",9),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,G,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"USER_ROLES.UN_ASSIGN")))}function vt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"a",4),t.NdJ("confirm",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.unAssignRecord(s))})("cancel",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.handleRefusalToSetEmail(s))}),t._UZ(1,"i",9),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&o&&(t.Q6J("swal",t.VKq(5,k,t.DdM(4,R))),t.xp6(2),t.Oqu(t.lcZ(3,2,"USER_ROLES.UN_ASSIGN")))}let q=(()=>{class o{translateService;events;deleteRecordChange=new t.vpe;readRecordButton=new t.vpe;unReadRecordButton=new t.vpe;activateRecordChange=new t.vpe;inactivateRecordChange=new t.vpe;unAssignRoleRightsChanges=new t.vpe;sweetType;defaultSelectValue;person;constructor(i,e){this.translateService=i,this.events=e}deleteRecord(i){this.deleteRecordChange.emit(i)}activateRecord(i){this.activateRecordChange.emit(i)}inactivateRecord(i){this.inactivateRecordChange.emit(i)}getReadButton(i){this.readRecordButton.emit(i)}getUnReadButton(i){this.unReadRecordButton.emit(i)}unAssignRecord(i){this.unAssignRoleRightsChanges.emit(i)}swalAlert(i,e){if("Events"===e){this.defaultSelectValue="Date"===localStorage.getItem(n.BU.SELECT_DATE)?"Daily":"Week"===localStorage.getItem(n.BU.SELECT_DATE)?"Weekly":"Monthly";const s={Daily:this.translateService.instant("COMMON_CALENDAR_FIELDS.DAILY"),Weekly:this.translateService.instant("COMMON_CALENDAR_FIELDS.WEEKLY"),Monthly:this.translateService.instant("COMMON_CALENDAR_FIELDS.MONTHLY")};st().fire({title:this.translateService.instant("COMMON_TOAST_MESSAGES.SELECT_VALUE"),input:"radio",inputValue:this.defaultSelectValue,customClass:{input:"date-filter-radio",closeButton:"btn btn-close",confirmButton:"btn btn-confirm",cancelButton:"btn btn-cancel"},inputOptions:s,showCancelButton:!0,backdrop:!1}).then(a=>{a&&this.events.publish("swalEvents",{result:a})})}}static \u0275fac=function(e){return new(e||o)(t.Y36(C.sK),t.Y36(P.z))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-sweetalert"]],inputs:{sweetType:"sweetType"},outputs:{deleteRecordChange:"deleteRecordChange",readRecordButton:"readRecordButton",unReadRecordButton:"unReadRecordButton",activateRecordChange:"activateRecordChange",inactivateRecordChange:"inactivateRecordChange",unAssignRoleRightsChanges:"unAssignRoleRightsChanges"},decls:11,vars:11,consts:[[3,"ngSwitch"],["mat-raised-button","","class","btn btn-link btn-white btn-sm m-0","mat-raised-button","","class","btn btn-link btn-white btn-sm m-0",3,"swal","confirm","cancel",4,"ngSwitchCase"],["mat-raised-button","","class","btn btn-link btn-white btn-sm m-0","mat-raised-button","","class","btn btn-link btn-white btn-sm m-0",3,"swal","cancel",4,"ngSwitchCase"],["mat-raised-button","","class","btn btn-link btn-white btn-sm m-0",3,"click",4,"ngSwitchCase"],["mat-raised-button","","mat-raised-button","",1,"btn","btn-link","btn-white","btn-sm","m-0",3,"swal","confirm","cancel"],[1,"fas","fa-trash-alt","me-1","text-red-light"],["mat-raised-button","","mat-raised-button","",1,"btn","btn-link","btn-white","btn-sm","m-0",3,"swal","cancel"],[1,"fas","fa-eye","me-1"],["mat-raised-button","",1,"btn","btn-link","btn-white","btn-sm","m-0",3,"click"],[1,"fas","fa-eye-slash","me-1","text-info"],[1,"fas","fa-user-check","me-1","text-orange-light"],[1,"fas","fa-user-secret","me-1","text-blue-light"]],template:function(e,s){1&e&&(t.TgZ(0,"span",0),t.YNc(1,ot,4,7,"a",1),t.YNc(2,lt,4,7,"a",2),t.YNc(3,rt,4,7,"a",2),t.YNc(4,ct,4,3,"a",3),t.YNc(5,mt,4,7,"a",2),t.YNc(6,ht,4,3,"a",3),t.YNc(7,ut,4,7,"a",1),t.YNc(8,pt,4,7,"a",1),t.YNc(9,ft,4,7,"a",1),t.YNc(10,vt,4,7,"a",1),t.qZA()),2&e&&(t.Q6J("ngSwitch",s.sweetType),t.xp6(1),t.Q6J("ngSwitchCase","DeleteSuccess"),t.xp6(1),t.Q6J("ngSwitchCase","DeleteBasic"),t.xp6(1),t.Q6J("ngSwitchCase","ReadBasic"),t.xp6(1),t.Q6J("ngSwitchCase","ReadBasicEmpty"),t.xp6(1),t.Q6J("ngSwitchCase","UnReadBasic"),t.xp6(1),t.Q6J("ngSwitchCase","UnReadBasicEmpty"),t.xp6(1),t.Q6J("ngSwitchCase","ActivateSuccess"),t.xp6(1),t.Q6J("ngSwitchCase","InActivateSuccess"),t.xp6(1),t.Q6J("ngSwitchCase","UnAssignUserRoleRightsSuccess"),t.xp6(1),t.Q6J("ngSwitchCase","UnAssignUserRoleRightsBasic"))},dependencies:[D.RF,D.n9,at.zs,nt.iL,C.X$]})}return o})();var V=p(81145),Z=p(90313),c=p(15439),U=p(62510),H=p(11481),I=p(70057),O=p(30958),_t=p(2387),K=p(37415),Q=p(63556);function yt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-title",31),t.NdJ("swipe",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.swipeDate(s))}),t.TgZ(1,"i",32),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.dateBtn("previous"))}),t.qZA(),t._uU(2),t.TgZ(3,"i",33),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.dateBtn("next"))}),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.hij(" ",i.displayDate," ")}}function Tt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-title",34),t.NdJ("swipe",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.swipeWeek(s))}),t.TgZ(1,"i",35),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.weekBtn("previous"))}),t.qZA(),t._uU(2),t.TgZ(3,"i",36),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.weekBtn("next"))}),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.AsE(" ",i.weekStartDate," - ",i.weekEnddate," ")}}function St(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-title",37),t.NdJ("swipe",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.swipeMonth(s))}),t.TgZ(1,"i",32),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.monthBtn("previous"))}),t.qZA(),t._uU(2),t.TgZ(3,"i",38),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.monthBtn("next"))}),t.qZA()()}if(2&o){const i=t.oxw();t.xp6(2),t.hij(" ",i.displayMonth," ")}}function Et(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",47),t.NdJ("click",function(){t.CHM(i);const s=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.locateReserve(s))}),t._UZ(1,"ion-avatar"),t.TgZ(2,"ion-label",48)(3,"p",49)(4,"span",50),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA()(),t.TgZ(9,"p",51)(10,"span",52),t._uU(11),t.ALo(12,"translate"),t.TgZ(13,"a"),t._uU(14),t.qZA()()(),t.TgZ(15,"p",53)(16,"span",54),t._uU(17),t.qZA()()(),t._UZ(18,"ion-note",55),t.qZA()}if(2&o){const i=t.oxw(),e=i.index,s=i.$implicit,a=t.oxw(2);t.Q6J("ngClass",e%2==0?"odd":"even"),t.xp6(1),t.Gre("asset-avatar-img ",s.facilityIcon,""),t.xp6(4),t.AsE("",t.xi3(6,10,null==s?null:s.userStartTimeZone,a.defaultdateformat+" h:mm a")," ",a.displyUserTimeZone,";"),t.xp6(3),t.Oqu(null==s?null:s.duration),t.xp6(3),t.hij("",t.lcZ(12,13,"COMMON_FIELDS.AT")," "),t.xp6(3),t.hij(" ",null==s||null==s.facilityObj?null:s.facilityObj.facilityName,""),t.xp6(3),t.Oqu(null==s?null:s.event_name)}}function bt(o,h){if(1&o&&(t.TgZ(0,"ion-item",56),t._UZ(1,"ion-avatar",57),t.TgZ(2,"ion-label",48)(3,"p",58)(4,"span",50),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA(),t._UZ(9,"ion-note",59),t.qZA(),t.TgZ(10,"p",60)(11,"span",52),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"a"),t._uU(15),t.qZA()()()()()),2&o){const i=t.oxw().$implicit,e=t.oxw(2);t.xp6(1),t.Gre("asset-avatar-img ",i.facilityIcon,""),t.xp6(4),t.AsE("",t.xi3(6,8,null==i?null:i.userStartTimeZone,e.defaultdateformat+" h:mm a")," ",e.displyUserTimeZone,";"),t.xp6(3),t.Oqu(null==i?null:i.duration),t.xp6(4),t.hij("",t.lcZ(13,11,"COMMON_FIELDS.AT")," "),t.xp6(3),t.hij(" ",null==i||null==i.facilityName?null:i.facilityName.facilityName,"")}}function Dt(o,h){if(1&o&&(t.TgZ(0,"ion-item",56),t._UZ(1,"ion-avatar",57),t.TgZ(2,"ion-label",48)(3,"p",61)(4,"span",50),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"span"),t._uU(8),t.qZA(),t._UZ(9,"ion-note",59),t.qZA(),t.TgZ(10,"p",62)(11,"span",52),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"a"),t._uU(15),t.qZA()()(),t.TgZ(16,"p",63)(17,"span",54),t._uU(18),t.qZA()()()()),2&o){const i=t.oxw().$implicit,e=t.oxw(2);t.xp6(1),t.Gre("asset-avatar-img ",i.facilityIcon,""),t.xp6(4),t.AsE("",t.xi3(6,9,null==i?null:i.userStartTimeZone,e.defaultdateformat+" h:mm a")," ",e.displyUserTimeZone,";"),t.xp6(3),t.Oqu(null==i?null:i.duration),t.xp6(4),t.hij("",t.lcZ(13,12,"COMMON_FIELDS.AT")," "),t.xp6(3),t.hij(" ",null==i||null==i.facilityObj?null:i.facilityObj.facilityName,""),t.xp6(3),t.Oqu(null==i||null==i.eventObj?null:i.eventObj.event_name)}}function Lt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item-sliding"),t.YNc(1,Et,19,15,"ion-item",41),t.YNc(2,bt,16,13,"ion-item",42),t.YNc(3,Dt,19,14,"ion-item",42),t.TgZ(4,"ion-item-options")(5,"div",43),t.NdJ("click",function(){const a=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.eventsPopupDetails(a))}),t._UZ(6,"i",44),t.TgZ(7,"ion-label"),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"div",45),t.NdJ("click",function(){const a=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.eventDetails(a))}),t._UZ(11,"i",46),t.TgZ(12,"ion-label"),t._uU(13),t.ALo(14,"translate"),t.qZA()()()()}if(2&o){const i=h.$implicit;t.xp6(1),t.Q6J("ngIf",null==i?null:i.eventRegistrationCloseDate),t.xp6(1),t.Q6J("ngIf",null==i?null:i.facilityName),t.xp6(1),t.Q6J("ngIf",null==i?null:i.eventObj),t.xp6(5),t.Oqu(t.lcZ(9,5,"COMMON_BUTTONS.BUTTON_VIEW")),t.xp6(5),t.Oqu(t.lcZ(14,7,"COMMON_BUTTONS.BUTTON_LOCATE"))}}function Rt(o,h){if(1&o&&(t.TgZ(0,"ion-list",39),t.YNc(1,Lt,15,9,"ion-item-sliding",40),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.myReservationsListData)}}function Ct(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"div",70)(1,"div",71)(2,"img",72),t.NdJ("load",function(){t.CHM(i);const s=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.getMediaFiles(null==s?null:s.facilityObj))}),t.ALo(3,"imageTransform"),t.qZA()(),t.TgZ(4,"div",73)(5,"div",74),t._uU(6),t.qZA(),t.TgZ(7,"div",74),t._uU(8),t.qZA()()()}if(2&o){const i=t.oxw(),e=i.index,s=i.$implicit,a=t.oxw(2);t.Q6J("ngClass",e%2==0?"odd":"even"),t.xp6(2),t.Q6J("src",t.Dn7(3,4,null==s||null==s.facilityObj?null:s.facilityObj.facility_image_file_path,null==s||null==s.facilityObj?null:s.facilityObj.facility_image_file_name,a.publishEnabled),t.LSH),t.xp6(4),t.Oqu(null==s?null:s.event_name),t.xp6(2),t.Oqu(null==s?null:s.userStartTimeZone)}}function It(o,h){if(1&o&&(t.TgZ(0,"div",74),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const i=t.oxw(2).$implicit;t.xp6(1),t.AsE("",t.lcZ(2,2,"COMMON_FIELDS.AT")," ",null==i||null==i.facility?null:i.facility.facility_name,"")}}function Ot(o,h){if(1&o&&(t.TgZ(0,"div",75)(1,"div",71),t._UZ(2,"ion-icon"),t.qZA(),t.TgZ(3,"div",76)(4,"div",74),t._uU(5),t.qZA(),t.TgZ(6,"div",74),t._uU(7),t.qZA()(),t.TgZ(8,"div",77),t.YNc(9,It,3,4,"div",78),t.qZA()()),2&o){const i=t.oxw().$implicit;t.xp6(2),t.Gre("asset-icon-",null==i||null==i.facilityObj?null:i.facilityObj.facility_icon_file_name,""),t.xp6(3),t.hij("",null==i?null:i.userStartTimeZone,";"),t.xp6(2),t.Oqu(null==i?null:i.duration),t.xp6(2),t.Q6J("ngIf",null==i||null==i.facilityObj?null:i.facilityObj.facility_name)}}function Ut(o,h){if(1&o&&(t.TgZ(0,"div",82)(1,"div",74),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-note"),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&o){const i=t.oxw(2).$implicit;t.xp6(2),t.AsE("",t.lcZ(3,4,"COMMON_FIELDS.AT")," ",null==i||null==i.facilityObj?null:i.facilityObj.facility_name," "),t.xp6(3),t.AsE("",t.lcZ(6,6,"NEW_VARIABLES.REGD")," ",null==i?null:i.count_active_registrations,"")}}function wt(o,h){if(1&o&&(t.TgZ(0,"div",75)(1,"div",71),t._UZ(2,"ion-icon"),t.qZA(),t.TgZ(3,"div",79)(4,"div",74),t._uU(5),t.qZA(),t.TgZ(6,"div",74),t._uU(7),t.qZA()(),t.YNc(8,Ut,7,8,"div",80),t.TgZ(9,"div",81)(10,"div",74),t._uU(11),t.qZA()()()),2&o){const i=t.oxw().$implicit;t.xp6(2),t.Gre("asset-icon-",null==i||null==i.facilityObj?null:i.facilityObj.facility_icon_file_name,""),t.xp6(3),t.hij("",null==i?null:i.userStartTimeZone,";"),t.xp6(2),t.Oqu(null==i?null:i.duration),t.xp6(1),t.Q6J("ngIf",null==i||null==i.facilityObj?null:i.facilityObj.facility_name),t.xp6(3),t.Oqu(null==i?null:i.event_name)}}function Nt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-col",67),t.NdJ("click",function(){const a=t.CHM(i).$implicit,l=t.oxw(2);return t.KtG(l.eventDetails(a))}),t.YNc(1,Ct,9,8,"div",68),t.YNc(2,Ot,10,6,"div",69),t.YNc(3,wt,12,7,"div",69),t.qZA()}if(2&o){const i=h.$implicit;t.xp6(1),t.Q6J("ngIf",(null==i?null:i.registration_close_datetime)&&(null==i||null==i.facilityObj?null:i.facilityObj.facility_image_file_path)&&(null==i||null==i.facilityObj?null:i.facilityObj.facility_image_file_name)),t.xp6(1),t.Q6J("ngIf",(null==i||null==i.facilityObj?null:i.facilityObj.facility_name)&&(!(null!=i&&null!=i.facilityObj&&i.facilityObj.facility_image_file_path)||!(null!=i&&null!=i.facilityObj&&i.facilityObj.facility_image_file_name))),t.xp6(1),t.Q6J("ngIf",i&&(!(null!=i&&null!=i.facilityObj&&i.facilityObj.facility_image_file_path)||!(null!=i&&null!=i.facilityObj&&i.facilityObj.facility_image_file_name)))}}function At(o,h){if(1&o&&(t.TgZ(0,"ion-grid",64)(1,"ion-row",65),t.YNc(2,Nt,4,3,"ion-col",66),t.qZA()()),2&o){const i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.myReservationsListData)}}function Mt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-infinite-scroll",83),t.NdJ("ionInfinite",function(s){t.CHM(i);const a=t.oxw();return t.KtG(a.doInfinite(s))}),t._UZ(1,"ion-infinite-scroll-content",84),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.s9C("loadingText",t.lcZ(2,1,"LOADING_PLEASE_WAIT")))}function kt(o,h){1&o&&(t.TgZ(0,"ion-row",85)(1,"ion-col",86)(2,"ion-label",87),t._uU(3),t.ALo(4,"translate"),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND")))}function Zt(o,h){1&o&&(t.TgZ(0,"ion-row",65)(1,"ion-col",88),t._UZ(2,"ion-spinner",89),t.qZA()())}let xt=(()=>{class o extends F.O{apiEndPointUrl;events;facilitiesUiService;loggerService;router;sanitizer;sweetAlert;alertCtrl;commonServices;events1;loadingCtrl;modalCtrl;navCtrl;platform;route;syncService;toastCtrl;translateService;apiEndPoint;displayDate;filterend="";filterstart="";funfacStatus=!0;homesearchString;myReservationsList1;nodata;data;dateFormat="MMM D, YYYY";toGoDateFormat="YYYY-MM-D h:mm:ss";today=c();enterpriseImage=localStorage.getItem(n.BU.ENTERPRISE_IMAGE);itemdata="";itemsdata;notificationCount=localStorage.getItem(n.BU.NOTIFICATION_COUNT);timeAgo="";userImage=localStorage.getItem(n.BU.USER_IMAGE);searchDate=!1;showToolbar=!1;spinner;swipefilter="";toGoDate;tostermsg;userToken=localStorage.getItem(n.BU.TOKEN);date;displayMonth;displayWeek;end=c().endOf("week");month;dateFormat1="MMM D, YY";monthFormat="MMM, YYYY";selectDate;selectMonth;selectWeek;start=c().startOf("week");testCheckboxOpen;testCheckboxResult;week;weekEnddate;weekStartDate;outletKey;UserTimeZone;activearray;advData;advImages;advImagesList;advimage;apiCall=!1;backBtnData;buildingCode;cancel;clearTimer;closedatetime;defaultUserTimeZone;displyUserTimeZone;duration;enddate;enddatetime;enterpriseId;event_name;facilitiesJson;facilityCommonName;finalpubliceventsjson;fontColor;getBackBtn;hideloadmsg=!1;items;langcode;listType;locatelocaljson;loginUserDateFormat;loginUsertime;map;monthenddate;monthstartdate;myReservationsListData;ok;poppupStartDate;popupEndDate;defaultdateformat=JSON.parse(localStorage.getItem(n.BU.DATE_FORMATE_OBJ)).lookup_name;publicEventsData;publishEnabled=!1;rotationAngle;searchString;searchreasultjson;servicecall=!1;startdate;startdatetime;swipedate=!1;swipemonth=!0;swipeweek=!1;venue;dataJsonObj={};constructor(i,e,s,a,l,r,g,m,f,u,_,d,E,S,b,T,v,y){super(b,f),this.apiEndPointUrl=i,this.events=e,this.facilitiesUiService=s,this.loggerService=a,this.router=l,this.sanitizer=r,this.sweetAlert=g,this.alertCtrl=m,this.commonServices=f,this.events1=u,this.loadingCtrl=_,this.modalCtrl=d,this.navCtrl=E,this.platform=S,this.route=b,this.syncService=T,this.toastCtrl=v,this.translateService=y,this.route.queryParams.subscribe(L=>{this.dataJsonObj.queryParamsObj={defaultView:L.default_view,selectedMenuId:L.selectedMenuId,selectedSubMenuId:L.selectedSubMenuId}})}ngOnInit(){localStorage.getItem(n.BU.SELECTED_ENTERPRISE)?(this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.buildingCode=localStorage.getItem(n.BU.BUILDING_CODE),this.rotationAngle=localStorage.getItem(n.BU.ROTATION_ANGLE)):(this.enterpriseId=localStorage.getItem(n.BU.PARENT_ENTERPRISE_ID),this.buildingCode=localStorage.getItem(n.BU.PARENT_BUILDING_CODE),this.rotationAngle=localStorage.getItem(n.BU.PARENT_ROTATION_ANGLE)),this.dataJsonObj.pageName=n.hf.EVENTS_UI,this.commonServices.trackView(n.sn.OPPPORTUNITIES),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE-TITLE.CRM_OPPORTUNITIES",value:"",showSubMenuDisplayName:!0}],this.apiEndPoint=localStorage.getItem(n.BU.S3_URL)?localStorage.getItem(n.BU.S3_URL):this.apiEndPointUrl,this.initializeComponent(),this.getsyncSettings()}getsyncSettings(){var i=this;return(0,w.Z)(function*(){const e=yield i.commonServices.getCacheSettings(n.hf.FACILITIES);i.publishEnabled=e.publishEnabled})()}getFacilitiesList(i){this.facilitiesUiService.getFacilitiesListJson(i,this.buildingCode,this.rotationAngle).then(e=>{if(this.facilitiesJson=[],e.floorsData&&e.floorsData[0].features.length>0)for(let s=0;s<e.floorsData.length;s++)for(let a=0;a<e.floorsData[s].features.length;a++)e.floorsData[s].features[a].properties.facilityId&&this.facilitiesJson.push(e.floorsData[s].features[a])})}initializeComponent(){try{this.fontColor=localStorage.getItem(n.BU.FONT_COLOR);const i=JSON.parse(localStorage.getItem(n.BU.DATE_FORMATE_OBJ));if(this.loginUserDateFormat=this.lookupLanguageTranslations(i.lookup_id),this.events1.subscribe("swalEvents",s=>{s.result.value&&(this.today=c(),this.doCheckbox(s.result))}),this.loginUsertime=JSON.parse(localStorage.getItem(n.BU.TIMEZONE_OBJ)),localStorage.setItem(n.BU.SELECT_DATE,"Month"),this.map=this.translateService.instant("COMMON_PAGE_TITLES.MAP"),this.langcode=localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE),this.getEnterpriseData(this.enterpriseId),this.defaultUserTimeZone=this.loginUsertime.lookup_name+"-"+this.loginUsertime.description,this.facilityCommonName=localStorage.getItem(n.BU.FACILITY_COMMON_NAME),this.today=c().utc(),this.homesearchString="",this.notificationCount=localStorage.getItem(n.BU.NOTIFICATION_COUNT),this.spinner=!0,"Date"===localStorage.getItem(n.BU.SELECT_DATE)){const s=new Date(this.commonServices.convertToUserTZ((new Date).getUTCFullYear()+"-"+((new Date).getUTCMonth()+1)+"-"+(new Date).getUTCDate()+" "+(new Date).getUTCHours()+":"+(new Date).getUTCMinutes(),"",this.loginUsertime.lookup_name+"-"+this.loginUsertime.description).replace(/-/g,"/"));this.displayDate=c(s.toDateString()).format(this.dateFormat),this.toGoDate=this.today.format(this.toGoDateFormat),this.poppupStartDate=this.today,this.popupEndDate=this.today,this.swipefilter="Date",this.getpubliceventslocal(this.today,this.today),this.week=!1,this.month=!1,this.selectDate=!0,this.date=!0,this.selectMonth=!1,this.selectWeek=!1}else if("Week"===localStorage.getItem(n.BU.SELECT_DATE)){this.swipefilter="Week",this.swipedate=!1,this.swipemonth=!1,this.swipeweek=!0,this.week=!0,this.month=!1,this.selectDate=!1,this.date=!1,this.selectMonth=!1,this.selectWeek=!0;const s=c().startOf("week"),a=c().endOf("week");this.weekStartDate=s.format(this.dateFormat1),this.weekEnddate=a.format(this.dateFormat1),this.getpubliceventslocal(this.weekStartDate,this.weekEnddate)}else{this.swipefilter="Month",this.displayMonth=c().format(this.monthFormat),this.swipedate=!1,this.swipemonth=!0,this.swipeweek=!1,this.week=!1,this.month=!0,this.selectDate=!1,this.date=!1,this.selectMonth=!0,this.selectWeek=!1;const s=c(c().startOf("month")),a=c(c().endOf("month"));this.getpubliceventslocal(s,a)}parseInt(localStorage.getItem(n.BU.ADV_LENGTH),0)>0&&(this.advData=!0)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"intializeComponent",i)}}getTogoDateandTime(i,e){try{const s=c(this.commonServices.convertToUserTZ((new Date).getUTCFullYear()+"-"+((new Date).getUTCMonth()+1)+"-"+(new Date).getUTCDate()+" "+(new Date).getUTCHours()+":"+(new Date).getUTCMinutes(),"",this.loginUsertime.lookup_name+"-"+this.loginUsertime.description)),a=c(this.commonServices.convertToUserTZ(new Date(i).getUTCFullYear()+"-"+(new Date(i).getUTCMonth()+1)+"-"+new Date(i).getUTCDate()+" "+new Date(i).getUTCHours()+":"+new Date(i).getUTCMinutes(),"",this.loginUsertime.lookup_name+"-"+this.loginUsertime.description)),l=c(s),r=c(a),g=r.diff(l,"milliseconds"),m=r.diff(l,"minutes"),f=Math.floor(g/864e5),u=Math.floor(g%864e5/36e5),_=Math.floor(g%36e5/6e4);let d=" to go";return d=g<=0?e:f>=1?f+"+ days "+d:u>=2?u+"+ hrs "+d:u<2&&_>1?60*u+_+" min"+d:"1 min"+d,[d,m]}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getTogoDateandTime",s)}}swipeDate(i){try{this.swipemonth=!1,this.swipeweek=!1,2===i.direction?this.displayDate=this.today.add(1,"d").format(this.dateFormat):4===i.direction&&(this.displayDate=this.today.subtract(1,"d").format(this.dateFormat)),this.poppupStartDate=this.today,this.popupEndDate=this.today,this.unsubscribeObservable(),!0===this.apiCall||this.getpubliceventslocal(this.today,this.today)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"swipeDate",e)}}dateBtn(i){try{this.swipemonth=!1,this.swipeweek=!1,"next"===i?this.displayDate=this.today.add(1,"d").format(this.dateFormat):"previous"===i&&(this.displayDate=this.today.subtract(1,"d").format(this.dateFormat)),this.unsubscribeObservable(),this.poppupStartDate=this.today,this.popupEndDate=this.today,!0===this.apiCall||this.getpubliceventslocal(this.today,this.today)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"dateBtn",e)}}monthBtn(i){try{let e,s;this.swipedate=!1,this.swipemonth=!0,this.swipeweek=!1,"next"===i?this.displayMonth=this.today.add(1,"months").format(this.monthFormat):"previous"===i&&(this.displayMonth=this.today.subtract(1,"months").format(this.monthFormat)),e=c(this.today.startOf("month")),s=c(this.today.endOf("month")),s=s.subtract(1,"d"),this.poppupStartDate=e,this.popupEndDate=s,this.monthstartdate=e,this.monthenddate=e,this.unsubscribeObservable(),!0===this.apiCall||this.getpubliceventslocal(e,s)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"monthBtn",e)}}weekBtn(i){try{this.swipedate=!1,this.swipemonth=!1,this.swipeweek=!0,"next"===i?(this.weekStartDate=this.start.add(7,"days").format(this.dateFormat1),this.weekEnddate=this.end.add(7,"days").format(this.dateFormat1)):"previous"===i&&(this.weekStartDate=this.start.subtract(7,"days").format(this.dateFormat1),this.weekEnddate=this.end.subtract(7,"days").format(this.dateFormat1)),this.unsubscribeObservable(),this.poppupStartDate=this.weekStartDate,this.popupEndDate=this.weekEnddate,!0===this.apiCall||this.getpubliceventslocal(this.weekStartDate,this.weekEnddate)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"weekBtn",e)}}swipeMonth(i){try{let e,s;this.swipedate=!1,this.swipemonth=!0,this.swipeweek=!1,2===i.direction?this.displayMonth=this.today.add(1,"months").format(this.monthFormat):4===i.direction&&(this.displayMonth=this.today.subtract(1,"months").format(this.monthFormat)),e=c(this.today.startOf("month")),s=c(this.today.endOf("month")),s=s.subtract(1,"d"),this.poppupStartDate=e,this.popupEndDate=s,this.monthstartdate=e,this.monthenddate=e,this.unsubscribeObservable(),!0===this.apiCall||this.getpubliceventslocal(e,s)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"swipeMonth",e)}}swipeWeek(i){try{this.swipedate=!1,this.swipemonth=!1,this.swipeweek=!0,2===i.direction?(this.weekStartDate=this.start.add(7,"days").format(this.dateFormat1),this.weekEnddate=this.end.add(7,"days").format(this.dateFormat1)):4===i.direction&&(this.weekStartDate=this.start.subtract(7,"days").format(this.dateFormat1),this.weekEnddate=this.end.subtract(7,"days").format(this.dateFormat1)),this.unsubscribeObservable(),this.poppupStartDate=this.weekStartDate,this.popupEndDate=this.weekEnddate,!0===this.apiCall||this.getpubliceventslocal(this.weekStartDate,this.weekEnddate)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"swipeWeek",e)}}toggleToolbar(){try{this.showToolbar=!this.showToolbar}catch(i){this.loggerService.setLoggerError(this.constructor.name,"toggleToolbar",i)}}getDurationTime(i,e){try{const a="".substring(1).split(":"),r=(parseInt(a[0],10),parseInt(a[1],10),c(i)),m=c(e).diff(r,"milliseconds"),f=Math.floor(m/864e5),u=Math.floor(m%864e5/36e5),_=Math.floor(m%36e5/6e4);let d="";return _>0&&(d=_+" min"),u>0&&(d=1===u?u+" hr ":u+" hrs "),f>0&&(d=1===f?f+" day ":f+" days "),d}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getDurationTime",s)}}funfactResDetails(i){}getpubliceventslocal(i,e){this.finalpubliceventsjson=[],this.events.getEventData(this.enterpriseId).then(s=>{if(this.apiCall=!1,this.publicEventsData=s&&s.rows?s.rows:s,this.publicEventsData&&this.publicEventsData.length>0)for(let a=0;a<this.publicEventsData.length;a++){const l=c(this.publicEventsData[a].start_datetime),g=(c(this.publicEventsData[a].registration_close_datetime),new Date(this.publicEventsData[a].start_datetime)),m=JSON.parse(localStorage.getItem(n.BU.TIMEZONE_OBJ)),f=this.commonServices.convertToUserTZ(g.getUTCFullYear()+"-"+(g.getUTCMonth()+1)+"-"+g.getUTCDate()+" "+g.getUTCHours()+":"+g.getUTCMinutes(),"",m.lookup_name+"-"+m.description).replace(/-/g,"/");if(!0===this.swipedate)localStorage.setItem(n.BU.SELECT_DATE,"Date"),this.startdate=i.format("YYYY-MM-DD"),this.enddate=e.format("YYYY-MM-DD"),this.startdate===l.format("YYYY-MM-DD")&&this.finalpubliceventsjson.push(this.publicEventsData[a]);else if(!0===this.swipeweek){localStorage.setItem(n.BU.SELECT_DATE,"Week"),this.startdate=c(i).format(this.dateFormat1),this.enddate=c(e).format(this.dateFormat1);const u=c(f).format(this.dateFormat1);Date.parse(u)>=Date.parse(this.startdate)&&Date.parse(u)<=Date.parse(this.enddate)&&this.finalpubliceventsjson.push(this.publicEventsData[a])}else!0===this.swipemonth&&(localStorage.setItem(n.BU.SELECT_DATE,"Month"),this.startdate=i.format("YYYY-MM"),this.enddate=e.format("YYYY-MM"),this.startdate===l.format("YYYY-MM")&&this.finalpubliceventsjson.push(this.publicEventsData[a]))}this.onSwipeDate(this.finalpubliceventsjson)},s=>{switch("string"==typeof s?JSON.parse(s).status:JSON.parse(s.status)){case 404:case 403:this.nodata=!0,this.myReservationsListData=[],this.spinner=!1;break;case 0:this.apiCall=!0}})}doCheckbox(i){if("Daily"===i.value){localStorage.setItem(n.BU.SELECT_DATE,"Date"),this.swipedate=!0,this.swipemonth=!1,this.swipeweek=!1,this.swipefilter="Date",this.date=!0,this.week=!1,this.month=!1,this.selectDate=!0,this.selectWeek=!1,this.selectMonth=!1;const e=c().utc(),s=new Date(this.commonServices.convertToUserTZ((new Date).getUTCFullYear()+"-"+((new Date).getUTCMonth()+1)+"-"+(new Date).getUTCDate()+" "+(new Date).getUTCHours()+":"+(new Date).getUTCMinutes(),"",this.loginUsertime.lookup_name+"-"+this.loginUsertime.description).replace(/-/g,"/"));this.displayDate=c(s.getMonth()+1+" "+s.getDate()+","+s.getFullYear()).format(this.dateFormat),this.displayDate=c(s.toDateString()).format(this.dateFormat),this.poppupStartDate=e,this.popupEndDate=e,this.unsubscribeObservable(),!0===this.apiCall||this.getpubliceventslocal(e,e),this.filterstart=e.toString(),this.filterend=e.toString()}else if("Weekly"===i.value){localStorage.setItem(n.BU.SELECT_DATE,"Week"),this.swipedate=!1,this.swipemonth=!1,this.swipeweek=!0,this.swipefilter="Week";const e=c().startOf("week"),s=c().endOf("week");this.weekStartDate=e.format(this.dateFormat1),this.weekEnddate=s.format(this.dateFormat1),this.date=!1,this.week=!0,this.month=!1,this.selectDate=!1,this.selectWeek=!0,this.selectMonth=!1,this.poppupStartDate=this.weekStartDate,this.popupEndDate=this.weekEnddate,this.unsubscribeObservable(),!0===this.apiCall||this.getpubliceventslocal(this.weekStartDate,this.weekEnddate),this.filterstart=this.weekStartDate.toString(),this.filterend=this.weekEnddate.toString()}else{localStorage.setItem(n.BU.SELECT_DATE,"Month"),this.swipedate=!1,this.swipemonth=!0,this.swipeweek=!1,this.swipefilter="Month",this.displayMonth=c().format(this.monthFormat),this.date=!1,this.week=!1,this.month=!0,this.selectDate=!1,this.selectWeek=!1,this.selectMonth=!0;const e=c(c().startOf("month")),s=c(c().endOf("month"));this.poppupStartDate=e,this.popupEndDate=s,this.monthstartdate=e,this.monthenddate=e,this.unsubscribeObservable(),!0===this.apiCall||this.getpubliceventslocal(e,s)}}getEnterpriseData(i){if(localStorage.getItem(n.BU.DEFAULT_UI_SETTINGS_DATA)){let e=JSON.parse(localStorage.getItem(n.BU.DEFAULT_UI_SETTINGS_DATA));e.general_settings?(this.listType=Z.L.isEmpty(e.general_settings.facility_list_type)?n.ox.GRID_VIEW:e.general_settings.facility_list_type.lookup_name,localStorage.setItem(n.BU.SELECT_LIMIT,e.general_settings.group_locate_selection_limit)):this.listType=n.ox.GRID_VIEW,e.mapSettings&&e.mapSettings.radius_meters&&localStorage.setItem(n.BU.RADIUS_METERS,e.mapSettings.radius_meters),e.mapSettings&&e.mapSettings.show_facilities&&localStorage.setItem(n.BU.SHOW_FLEETS,e.mapSettings.show_facilities)}}onSwipeDate(i){let e=[];if(this.spinner=!1,this.myReservationsList1=i,this.myReservationsList1.length>0){for(let s=0;s<this.myReservationsList1.length;s++)if(this.myReservationsList1[s].facility&&this.myReservationsList1[s].facility.facility_id&&Z.L.isEmpty(this.myReservationsList1[s].facilityObj)&&this.facilitiesJson&&(this.myReservationsList1[s].facilityObj=this.facilitiesJson.find(a=>a.facilityId===this.myReservationsList1[s].facility.facility_id)),this.myReservationsList1[s].registration_close_datetime){this.myReservationsList1[s].facilityIcon=this.myReservationsList1[s].facilityObj?this.myReservationsList1[s].facilityObj.facility_icon_file_name:"";const a=new Date(this.myReservationsList1[s].start_datetime);if(JSON.parse(localStorage.getItem(n.BU.TIMEZONE_OBJ)),this.myReservationsList1[s].userStartTimeZone=c(a).format(this.loginUserDateFormat+"HH:mm"),"CREATED"===this.myReservationsList1[s]["status.lookup_name"]){const r=this.getTogoDateandTime(this.myReservationsList1[s].start_datetime,this.myReservationsList1[s]["status.lookup_display_name"]);if(this.myReservationsList1[s].togodate=r[0],this.myReservationsList1[s].mins=r[1],"Created"===this.myReservationsList1[s].togodate){const g=this.getTogoDateandTime(this.myReservationsList1[s].registration_close_datetime,"Closed");this.myReservationsList1[s].togodate=g[0],this.myReservationsList1[s].mins=g[1],"Closed"!==this.myReservationsList1[s].togodate?this.myReservationsList1[s].togodate=this.myReservationsList1[s]["status.lookup_display_name"]:this.myReservationsList1[s]["status.lookup_display_name"]="Closed"}}else this.myReservationsList1[s].togodate=this.myReservationsList1[s]["status.lookup_display_name"],this.myReservationsList1[s].mins="0";this.myReservationsList1[s].duration1=this.myReservationsList1[s].duration,this.myReservationsList1[s].duration=this.getDurationTime(this.myReservationsList1[s].start_datetime,this.myReservationsList1[s].registration_close_datetime),"CREATED"===this.myReservationsList1[s]["status.lookup_name"]?(this.myReservationsList1[s].cancel=!1,this.myReservationsList1[s].checkin=!1,this.myReservationsList1[s].checkout=!0,this.myReservationsList1[s].extend=!0,this.myReservationsList1[s].edit=!1,this.myReservationsList1[s].rebook=!0):"STARTED"===this.myReservationsList1[s]["status.lookup_name"]?(this.myReservationsList1[s].cancel=!0,this.myReservationsList1[s].checkin=!0,this.myReservationsList1[s].checkout=!1,this.myReservationsList1[s].extend=!1,this.myReservationsList1[s].edit=!0,this.myReservationsList1[s].rebook=!0):"CLOSED"===this.myReservationsList1[s]["status.lookup_name"]||"CANCELLED"===this.myReservationsList1[s]["status.lookup_name"]?(this.myReservationsList1[s].cancel=!0,this.myReservationsList1[s].checkin=!0,this.myReservationsList1[s].checkout=!0,this.myReservationsList1[s].extend=!0,this.myReservationsList1[s].edit=!0,this.myReservationsList1[s].rebook=!1):(this.myReservationsList1[s].cancel=!0,this.myReservationsList1[s].checkin=!0,this.myReservationsList1[s].checkout=!0,this.myReservationsList1[s].extend=!0,this.myReservationsList1[s].edit=!0,this.myReservationsList1[s].rebook=!0),"Closed"===this.myReservationsList1[s].togodate&&(this.myReservationsList1[s].cancel=!0,this.myReservationsList1[s].checkin=!0,this.myReservationsList1[s].checkout=!0,this.myReservationsList1[s].extend=!0,this.myReservationsList1[s].edit=!0,this.myReservationsList1[s].rebook=!1)}e=this.myReservationsList1,e.sort(function(s,a){return(s=new Date(s.userStartTimeZone))===(a=new Date(a.userStartTimeZone))?0:s>a?1:-1}),this.myReservationsList1=e}if(this.myReservationsList1.length>0){this.funfacStatus=!1,this.nodata=!1;const s=[];let a=this.myReservationsList1.length,l=20;this.listType===n.ox.GRID_VIEW&&(l=40),this.myReservationsList1.length>l?(a=l,this.hideloadmsg=!0):this.hideloadmsg=!1;for(let r=0;r<a;r++)"Created"===this.myReservationsList1[r].togodate||"Closed"===this.myReservationsList1[r].togodate||"Started"===this.myReservationsList1[r].togodate||"Canceled"===this.myReservationsList1[r].togodate?(this.myReservationsList1[r].togodate=" ",s.push(this.myReservationsList1[r])):s.push(this.myReservationsList1[r]);this.myReservationsListData=s}else this.myReservationsListData=[],!1===this.apiCall?this.nodata=!0:(this.hideloadmsg=!1,this.funfacStatus=!0,this.nodata=!0,this.myReservationsListData=[]);for(let s=0;s<this.myReservationsListData.length;s++)this.myReservationsListData[s].facility&&this.myReservationsListData[s].facilityObj&&(this.myReservationsListData[s].facility.facility_name=this.myReservationsListData[s].facility.name?Z.L.isEmpty(this.myReservationsListData[s].facility.name[this.langcode])?this.myReservationsListData[s].facilityObj.facility_name:this.myReservationsListData[s].facilityObj.name[this.langcode]:this.myReservationsListData[s].facilityObj.facility_name,this.myReservationsListData[s].event_name=this.myReservationsListData[s].name?Z.L.isEmpty(this.myReservationsListData[s].name[this.langcode])?this.myReservationsListData[s].event_name:this.myReservationsListData[s].name[this.langcode]:this.myReservationsListData[s].event_name)}doInfinite(i){const e=this.myReservationsListData.length;this.myReservationsList1.length>=e?(this.hideloadmsg=!0,setTimeout(()=>{for(let s=e;s<e+20;s++){if(!(s<this.myReservationsList1.length)){this.hideloadmsg=!1;break}if(this.myReservationsList1[s].facilityObj&&void 0!==this.myReservationsList1[s].facilityObj&&(this.myReservationsList1[s].facilityObj.facilityName=void 0!==this.myReservationsList1[s].facilityObj.name?null==this.myReservationsList1[s].facilityObj.name[this.langcode]||""===this.myReservationsList1[s].facilityObj.name[this.langcode]?this.myReservationsList1[s].facilityObj.facilityName:this.myReservationsList1[s].facilityObj.name[this.langcode]:this.myReservationsList1[s].facilityObj.facilityName,this.myReservationsList1[s].event_name=void 0!==this.myReservationsList1[s].name?null==this.myReservationsList1[s].name[this.langcode]||""===this.myReservationsList1[s].name[this.langcode]?this.myReservationsList1[s].event_name:this.myReservationsList1[s].name[this.langcode]:this.myReservationsList1[s].event_name),"Created"===this.myReservationsList1[s].togodate||"Closed"===this.myReservationsList1[s].togodate||"Started"===this.myReservationsList1[s].togodate||"Canceled"===this.myReservationsList1[s].togodate?(this.myReservationsList1[s].togodate=" ",this.myReservationsListData.push(this.myReservationsList1[s])):this.myReservationsListData.push(this.myReservationsList1[s]),this.myReservationsListData.length===this.myReservationsList1.length)break}i.complete()},500)):this.hideloadmsg=!1}searchResultData(i){this.spinner=!1,this.myReservationsList1=i.result;for(let e=0;e<this.myReservationsList1.length;e++)if(this.myReservationsList1[e].registration_close_datetime){try{this.myReservationsList1[e].facilityIcon=JSON.parse(this.myReservationsList1[e].facilityObj.facilityTypeObj).facilityTypeIcon}catch{this.myReservationsList1[e].facilityIcon=""}const s=new Date(this.myReservationsList1[e].start_datetime);if(this.myReservationsList1[e].userStartTimeZone=c(s).format(this.loginUserDateFormat+"HH:mm"),"CREATED"===this.myReservationsList1[e]["status.lookup_name"]){const a=this.getTogoDateandTime(this.myReservationsList1[e].start_datetime,this.myReservationsList1[e]["status.lookup_display_name"]);if(this.myReservationsList1[e].togodate=a[0],this.myReservationsList1[e].mins=a[1],"Created"===this.myReservationsList1[e].togodate){const l=this.getTogoDateandTime(this.myReservationsList1[e].endDatetime,"Closed");this.myReservationsList1[e].togodate=l[0],this.myReservationsList1[e].mins=l[1],"Closed"!==this.myReservationsList1[e].togodate?this.myReservationsList1[e].togodate=this.myReservationsList1[e]["status.lookup_display_name"]:this.myReservationsList1[e]["status.lookup_display_name"]="Closed"}}else this.myReservationsList1[e].togodate=this.myReservationsList1[e]["status.lookup_display_name"],this.myReservationsList1[e].mins="0";this.myReservationsList1[e].duration1=this.myReservationsList1[e].duration,this.myReservationsList1[e].duration=this.getDurationTime(this.myReservationsList1[e].start_datetime,this.myReservationsList1[e].endDatetime),"CREATED"===this.myReservationsList1[e]["status.lookup_name"]?(this.myReservationsList1[e].cancel=!1,this.myReservationsList1[e].checkin=!1,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0,this.myReservationsList1[e].edit=!1,this.myReservationsList1[e].rebook=!0):"STARTED"===this.myReservationsList1[e]["status.lookup_name"]?(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!1,this.myReservationsList1[e].extend=!1,this.myReservationsList1[e].edit=!0,this.myReservationsList1[e].rebook=!0):"CLOSED"===this.myReservationsList1[e]["status.lookup_name"]||"CANCELLED"===this.myReservationsList1[e]["status.lookup_name"]?(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0,this.myReservationsList1[e].edit=!0,this.myReservationsList1[e].rebook=!1):(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0,this.myReservationsList1[e].edit=!0,this.myReservationsList1[e].rebook=!0),"Closed"===this.myReservationsList1[e].togodate&&(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0,this.myReservationsList1[e].edit=!0,this.myReservationsList1[e].rebook=!1)}if(this.myReservationsList1>0){const e=[];let s=this.myReservationsList1.length;this.myReservationsList1.length>20?(s=20,this.hideloadmsg=!0):this.hideloadmsg=!1;for(let a=0;a<s;a++)"Created"===this.myReservationsList1[a].togodate||"Closed"===this.myReservationsList1[a].togodate||"Started"===this.myReservationsList1[a].togodate||"Canceled"===this.myReservationsList1[a].togodate?(this.myReservationsList1[a].togodate=" ",e.push(this.myReservationsList1[a])):e.push(this.myReservationsList1[a]);this.myReservationsListData=e}else this.myReservationsListData=[],this.hideloadmsg=!1}myReservationData(i){this.spinner=!1,this.myReservationsList1=i.result;for(let e=0;e<this.myReservationsList1.length;e++)if(this.myReservationsList1[e].facilityName){try{this.myReservationsList1[e].facilityIcon=JSON.parse(this.myReservationsList1[e].facilityName.facilityTypeObj).facilityTypeIcon}catch{this.myReservationsList1[e].facilityIcon=""}(void 0===this.myReservationsList1[e].facilityIcon||""===this.myReservationsList1[e].facilityIcon||null===this.myReservationsList1[e].facilityIcon)&&(this.myReservationsList1[e].facilityIcon="");const s=new Date(this.myReservationsList1[e].start_datetime);if(this.myReservationsList1[e].userStartTimeZone=c(s).format(this.loginUserDateFormat+"HH:mm"),this.myReservationsList1[e].duration1=this.myReservationsList1[e].duration,this.myReservationsList1[e].duration=this.getDurationTime(this.myReservationsList1[e].startDatetime,this.myReservationsList1[e].endDatetime),"Reserved"===this.myReservationsList1[e].reservationStatus){const a=this.getTogoDateandTime(this.myReservationsList1[e].start_datetime,this.myReservationsList1[e].reservationStatus);if(this.myReservationsList1[e].togodate=a[0],this.myReservationsList1[e].mins=a[1],"Created"===this.myReservationsList1[e].togodate){const l=this.getTogoDateandTime(this.myReservationsList1[e].endDatetime,"Closed");this.myReservationsList1[e].togodate=l[0],this.myReservationsList1[e].mins=l[1],"Closed"!==this.myReservationsList1[e].togodate?this.myReservationsList1[e].togodate=this.myReservationsList1[e]["status.lookup_display_name"]:this.myReservationsList1[e]["status.lookup_display_name"]="Closed"}}else this.myReservationsList1[e].togodate=this.myReservationsList1[e].reservationStatus,this.myReservationsList1[e].mins="0";"Reserved"===this.myReservationsList1[e].reservationStatus?(this.myReservationsList1[e].cancel=!1,this.myReservationsList1[e].checkin=!1,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0,this.myReservationsList1[e].rebook=!0):"Checked In"===this.myReservationsList1[e].reservationStatus?(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!1,this.myReservationsList1[e].extend=!1,this.myReservationsList1[e].rebook=!0):(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0,this.myReservationsList1[e].rebook=!1),"Closed"===this.myReservationsList1[e].togodate&&(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0,this.myReservationsList1[e].rebook=!1)}else if(this.myReservationsList1[e].eventObj){try{this.myReservationsList1[e].facilityIcon=JSON.parse(this.myReservationsList1[e].facilityObj[0].facilityTypeObj).facilityTypeIcon}catch{this.myReservationsList1[e].facilityIcon=""}(void 0===this.myReservationsList1[e].facilityIcon||""===this.myReservationsList1[e].facilityIcon||null===this.myReservationsList1[e].facilityIcon)&&(this.myReservationsList1[e].facilityIcon="");const s=new Date(this.myReservationsList1[e].eventObj.start_datetime);if(this.myReservationsList1[e].userStartTimeZone=c(s).format(this.loginUserDateFormat+"HH:mm"),"Registered"===this.myReservationsList1[e].status){const a=this.getTogoDateandTime(this.myReservationsList1[e].eventObj.start_datetime,this.myReservationsList1[e].status);if(this.myReservationsList1[e].togodate=a[0],this.myReservationsList1[e].mins=a[1],"Created"===this.myReservationsList1[e].togodate){const l=this.getTogoDateandTime(this.myReservationsList1[e].endDatetime,"Closed");this.myReservationsList1[e].togodate=l[0],this.myReservationsList1[e].mins=l[1],"Closed"!==this.myReservationsList1[e].togodate?this.myReservationsList1[e].togodate=this.myReservationsList1[e]["status.lookup_display_name"]:this.myReservationsList1[e]["status.lookup_display_name"]="Closed"}}else this.myReservationsList1[e].togodate=this.myReservationsList1[e].status,this.myReservationsList1[e].mins="0";this.myReservationsList1[e].duration1=this.myReservationsList1[e].duration,this.myReservationsList1[e].duration=this.getDurationTime(this.myReservationsList1[e].eventObj.start_datetime,this.myReservationsList1[e].eventObj.endDatetime),"Closed"===this.myReservationsList1[e].status||"Canceled"===this.myReservationsList1[e].status?(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0):"Registered"===this.myReservationsList1[e].status?(this.myReservationsList1[e].cancel=!1,this.myReservationsList1[e].checkin=!1,this.myReservationsList1[e].checkout=!0):"Checked In"===this.myReservationsList1[e].status?(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!1):"Checked Out"===this.myReservationsList1[e].status?(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0):"Wait Listed"===this.myReservationsList1[e].status?(this.myReservationsList1[e].cancel=!1,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0):(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0),"Closed"===this.myReservationsList1[e].togodate&&(this.myReservationsList1[e].cancel=!0,this.myReservationsList1[e].checkin=!0,this.myReservationsList1[e].checkout=!0,this.myReservationsList1[e].extend=!0)}this.myReservationsList1.length>0&&(this.funfacStatus=!1)}unsubscribeObservable(){void 0!==this.clearTimer&&this.clearTimer.unsubscribe()}eventDetails(i){localStorage.setItem(n.BU.EVENT_DETAILS,JSON.stringify(i)),this.router.navigate(["eventsui/"+i._id+"/view"])}eventsPopupDetails(i){this.venue=i.Venue,this.event_name=i.event_name,this.startdatetime=c(i.start_datetime).format(this.defaultdateformat+"h:mm A"),this.enddatetime=c(i.registration_close_datetime).format(this.defaultdateformat+" h:mm A"),this.duration=i.duration1,this.closedatetime=c(i.registration_close_datetime).format(this.defaultdateformat+" h:mm A")}eventDetailsList(i){localStorage.setItem(n.BU.EVENT_ID,i._id),localStorage.setItem(n.BU.EVENTS,"events")}eventRegPeople(i){localStorage.setItem(n.BU.MY_EVENT_DETAILS,JSON.stringify(i))}homeMyeventlistcalendar(i,e,s){localStorage.setItem(n.BU.FACILITY_REV_ID,JSON.stringify(e)),localStorage.setItem(n.BU.FACILITY_DATA,JSON.stringify(i)),localStorage.setItem(n.BU.LIST_PAGE,"homeMyEventlist")}clearSearch(i){this.homesearchString="",!0===this.swipedate?this.getpubliceventslocal(this.today,this.today):!0===this.swipeweek?this.getpubliceventslocal(this.weekStartDate,this.weekEnddate):this.getpubliceventslocal(this.monthstartdate,this.monthenddate)}getMediaFiles(i){if(i.mediaData=this.apiEndPoint+i.facility_image_file_path+"/"+i.facility_image_file_name,this.platform.is("android")||this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone")||this.platform.is("tablet"))try{this.syncService.getMobileAssetsData(i.facility_image_file_path,i.facility_image_file_name,"image").then(e=>{let s=this.sanitizer.bypassSecurityTrustUrl(e);i.mediaData=s}).catch(e=>{})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"getMediaFiles",e)}}onclickEvent(i){this.sweetAlert.swalAlert(i,"Events")}onBackButtonClick(){this.commonService.redirectToPreviousUrl(),this.commonService.getDynamicHeight()}static \u0275fac=function(e){return new(e||o)(t.Y36("apiEndPoint"),t.Y36(A.n),t.Y36(Y.e),t.Y36(J.m),t.Y36(U.F0),t.Y36(H.H7),t.Y36(q),t.Y36(I.Br),t.Y36(N.v),t.Y36(P.z),t.Y36(I.HT),t.Y36(I.IN),t.Y36(O.SH),t.Y36(O.t4),t.Y36(U.gz),t.Y36(V._),t.Y36(I.yF),t.Y36(C.sK))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-events-ui"]],inputs:{outletKey:"outletKey"},features:[t._Bn([A.n,Y.e,N.v,q]),t.qOj],decls:62,vars:23,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu","selectedMenuId","selectedSubMenuId"],[1,"ion-text-center","events-date-toolbar"],["class","events-date-title fs-14 fw-600","id","publicevents-displaydate","text-center","",3,"swipe",4,"ngIf"],["class","events-date-title fs-14 fw-600","id","publicevents-startdate-enddate","text-center","",3,"swipe",4,"ngIf"],["class","events-date-title fs-14 fw-600","id","publicevents-displaymonth","text-center","",3,"swipe",4,"ngIf"],["class","assets-grid-list ion-no-padding",4,"ngIf"],["class","assets-circle-grid-list pdt-0 pdb-0 mbg-50",4,"ngIf"],["class","ion-no-padding ion-text-center","id","publicevents-doinfiniteid",3,"ionInfinite",4,"ngIf"],["class","error-message",4,"ngIf"],["class","justify-content-center",4,"ngIf"],[1,"datamodal"],["id","exampleModal1","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],["col-5",""],["text-end","",1,"smalllabel"],["col-7","",1,"formfield"],["type","text","id","publicevents-venue","disabled","true",3,"value"],["type","text","id","publicevents-event_name","disabled","true",3,"value"],["type","text","id","publicevents-startdatetime","disabled","true",3,"value"],["type","text","id","publicevents-enddatetime","disabled","true",3,"value"],["type","text","id","publicevents-duration","disabled","true",3,"value"],["type","text","id","publicevents-closedatetime","disabled","true",3,"value"],[1,"modal-footer"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","publicevents-cancelbuttonid",3,"label"],["id","publicevents-displaydate","text-center","",1,"events-date-title","fs-14","fw-600",3,"swipe"],["id","publicevents-previousmonth",1,"fas","fa-chevron-left",3,"click"],["id","publicevents-nextmonth","aria-hidden","true",1,"fas","fa-chevron-right",3,"click"],["id","publicevents-startdate-enddate","text-center","",1,"events-date-title","fs-14","fw-600",3,"swipe"],["id","publicevents-previousdate",1,"fas","fa-chevron-left",3,"click"],["id","publicevents-nextdate",1,"fas","fa-chevron-right",3,"click"],["id","publicevents-displaymonth","text-center","",1,"events-date-title","fs-14","fw-600",3,"swipe"],["id","publicevents-nextmonth",1,"fas","fa-chevron-right",3,"click"],[1,"assets-grid-list","ion-no-padding"],[4,"ngFor","ngForOf"],["class","ion-no-padding assets-list-items","lines","none",3,"ngClass","click",4,"ngIf"],["class","ion-no-padding assets-list-items","lines","none",4,"ngIf"],["id","publicevents-viewbutton","data-toggle","modal","data-bs-target","#exampleModal1",1,"item-options-btn","view-bg",3,"click"],["aria-hidden","true",1,"far","fa-eye"],["id","publicevents-locatebuttonid",1,"item-options-btn","locate-bg",3,"click"],["aria-hidden","true",1,"fas","fa-location-arrow"],["lines","none",1,"ion-no-padding","assets-list-items",3,"ngClass","click"],[1,"ion-no-margin"],["id","publicevents-reservationdateid","color","dark",1,"listing-title"],[1,"event-title"],["id","publicevents-facilitynameid",1,"listing-title"],[1,"title-info"],["id","publicevents-eventnameid",1,"listing-title"],[1,"date-info"],["slot","end",1,"fas","fa-arrows-alt-h","slide-icon"],["lines","none",1,"ion-no-padding","assets-list-items"],["item-start",""],["id","publicevents-facilitydateid",1,"listing-title"],["item-end",""],["id","publicevents-facilitynamesid",1,"listing-title"],["id","publicevents-eventdateid",1,"listing-title"],["id","publicevents-facilitysnameid",1,"listing-title"],["id","publicevents-eventchkid",1,"listing-title"],[1,"assets-circle-grid-list","pdt-0","pdb-0","mbg-50"],[1,"justify-content-center"],["class","ion-text-center gridlist-item",3,"click",4,"ngFor","ngForOf"],[1,"ion-text-center","gridlist-item",3,"click"],["class","asset-img-circle",3,"ngClass",4,"ngIf"],["class","asset-img-circle",4,"ngIf"],[1,"asset-img-circle",3,"ngClass"],[1,"circle-icon"],["onerror","this.onerror=null;this.src='assets/img/image_placeholder.jpg';",1,"fleet-img",3,"src","load"],[1,""],[1,"fleet-title"],[1,"asset-img-circle"],["id","publicevents-facilitydateid",1,""],["id","publicevents-facilitynamesid",1,""],["class","fleet-title",4,"ngIf"],["id","publicevents-eventdateid",1,""],["id","publicevents-facilitysnameid",4,"ngIf"],["id","publicevents-eventchkid",1,""],["id","publicevents-facilitysnameid"],["id","publicevents-doinfiniteid",1,"ion-no-padding","ion-text-center",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"],[1,"error-message"],["size","12",1,"ion-no-padding","ion-text-center"],["color","danger",1,"fs-13","ion-text-center"],[1,"ion-no-padding","ion-text-center"],["name","circles",1,"spinner"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-pageheader",3),t.qZA()(),t.TgZ(4,"ion-toolbar",4),t.YNc(5,yt,4,1,"ion-title",5),t.YNc(6,Tt,4,2,"ion-title",6),t.YNc(7,St,4,1,"ion-title",7),t.qZA(),t.TgZ(8,"div"),t.YNc(9,Rt,2,1,"ion-list",8),t.YNc(10,At,3,1,"ion-grid",9),t.YNc(11,Mt,3,3,"ion-infinite-scroll",10),t.qZA(),t.YNc(12,kt,5,3,"ion-row",11),t.YNc(13,Zt,3,0,"ion-row",12),t.qZA(),t.TgZ(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18),t._uU(20," View Details"),t.qZA()(),t.TgZ(21,"div",19)(22,"ion-list")(23,"ion-row")(24,"ion-col",20)(25,"ion-label",21),t._uU(26,"Venue : "),t.qZA()(),t.TgZ(27,"ion-col",22),t._UZ(28,"ion-input",23),t.qZA()(),t.TgZ(29,"ion-row")(30,"ion-col",20)(31,"ion-label",21),t._uU(32,"Event Name : "),t.qZA()(),t.TgZ(33,"ion-col",22),t._UZ(34,"ion-input",24),t.qZA()(),t.TgZ(35,"ion-row")(36,"ion-col",20)(37,"ion-label",21),t._uU(38,"Start Date/Time : "),t.qZA()(),t.TgZ(39,"ion-col",22),t._UZ(40,"ion-input",25),t.qZA()(),t.TgZ(41,"ion-row")(42,"ion-col",20)(43,"ion-label",21),t._uU(44,"End Date/Time : "),t.qZA()(),t.TgZ(45,"ion-col",22),t._UZ(46,"ion-input",26),t.qZA()(),t.TgZ(47,"ion-row")(48,"ion-col",20)(49,"ion-label",21),t._uU(50,"Duration : "),t.qZA()(),t.TgZ(51,"ion-col",22),t._UZ(52,"ion-input",27),t.qZA()(),t.TgZ(53,"ion-row")(54,"ion-col",20)(55,"ion-label",21),t._uU(56,"Close Date/Time : "),t.qZA()(),t.TgZ(57,"ion-col",22),t._UZ(58,"ion-input",28),t.qZA()()()(),t.TgZ(59,"div",29),t._UZ(60,"app-button",30),t.ALo(61,"translate"),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("pageName",s.dataJsonObj.pageName)("pageTitle",s.dataJsonObj.pageTitle)("showPageHeaderItems",!0)("showDependencySubMenu",!1)("selectedMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedSubMenuId),t.xp6(2),t.Q6J("ngIf",!0===s.date),t.xp6(1),t.Q6J("ngIf",!0===s.week),t.xp6(1),t.Q6J("ngIf",!0===s.month),t.xp6(2),t.Q6J("ngIf","LIST_VIEW"===s.listType),t.xp6(1),t.Q6J("ngIf","GRID_VIEW"===s.listType),t.xp6(1),t.Q6J("ngIf",!0===s.hideloadmsg),t.xp6(1),t.Q6J("ngIf",1==s.nodata),t.xp6(1),t.Q6J("ngIf",!0===s.spinner),t.xp6(15),t.s9C("value",s.venue),t.xp6(6),t.s9C("value",s.event_name),t.xp6(6),t.s9C("value",s.startdatetime),t.xp6(6),t.s9C("value",s.enddatetime),t.xp6(6),t.s9C("value",s.duration),t.xp6(6),t.s9C("value",s.closedatetime),t.xp6(2),t.s9C("label",t.lcZ(61,21,"COMMON_BUTTONS.BUTTON_CLOSE")))},dependencies:[_t.r,K.q,D.mk,D.sg,D.O5,C.X$,Q.D,D.uU],styles:[".events-date-toolbar[_ngcontent-%COMP%]{--min-height: 40px}.subpagetitle-wrapper[_ngcontent-%COMP%]{width:100%}.subpagetitle-wrapper[_ngcontent-%COMP%]   .subpagetitle-content[_ngcontent-%COMP%]   .subpagetitle-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:0}.subpagetitle-wrapper[_ngcontent-%COMP%]   .subpagetitle-content[_ngcontent-%COMP%]   .subpagetitle-end[_ngcontent-%COMP%]{flex-shrink:0;white-space:nowrap}"]})}return o})();var W=p(75875),Bt=p(80529);let jt=(()=>{class o{authService;http;catName;displayName;pageIcon;pageTitle;orderStatus;constructor(i,e){this.authService=i,this.http=e}getEnterpriseConfigJSON(i){return new Promise((e,s)=>{this.authService.getApiCallWithOutToken("api/v1/enterpriseconfig?enterprise_id="+i).subscribe(a=>{e(a)},a=>{this.authService.staticfileJson(i+"/enterprise_config.json").subscribe(l=>{e(l)},l=>{s(l)})})})}getEnterprise(){return new Promise((i,e)=>{this.authService.staticfileJson("config/config.json").subscribe(s=>{i(s)},s=>{e(s)})})}getEnterprisesList(){return new Promise((i,e)=>{this.authService.getApiCall("api/v1/enterprises?isadmin=false&islimit=false&is_enabled=true").subscribe(s=>{i(s)},s=>{e(s)})})}getEnterpriseInfo(i){return new Promise((e,s)=>{this.authService.getApiCallWithOutToken("api/v1/enterprises/"+i).subscribe(a=>{e(a)},a=>{s(a)})})}checkEnterpriseProfile(i,e){return new Promise((s,a)=>{this.authService.getApiCall("api/v1/userprofiles/?type=drop&user_id="+i+"&enterprise.enterprise_id="+e).subscribe(l=>{s(l)},l=>{a(l)})})}updateEnterpriseInfo(i,e,s){return new Promise((a,l)=>{this.authService.patchChangeEnterpriseApiCall("api/v1/users/"+i+"?action=changeEnterprise&enterprise_id="+e,s).subscribe(r=>{a(r)},r=>{l(r)})})}getOrderStatus(){return this.orderStatus=localStorage.getItem(n.BU.ORDER_STATUS),this.orderStatus}getPageTitle(){return this.pageTitle=localStorage.getItem(n.BU.TITLE),this.pageTitle}getPageIcon(){return this.pageIcon=localStorage.getItem(n.BU.PAGE_ICON),this.pageIcon}setPageTitle(i){localStorage.setItem(n.BU.TITLE,i)}setPageIcon(i){localStorage.setItem(n.BU.PAGE_ICON,i)}setOrderStatus(i){localStorage.setItem(n.BU.ORDER_STATUS,i)}getCategoryName(){return this.catName=localStorage.getItem(n.BU.CATEGORY_NAME),this.catName}setCategoryName(i){localStorage.setItem(n.BU.CATEGORY_NAME,i)}dbTimezoneFormat(i){if(i){const e=c(i).format("DD-MMM-YYYY");return c(e,"DD-MMM-YYYY").format("DD-MMM-YYYY")}}dbTimezoneFormatWithHours(i){const e=c(i).format("DD-MMM-YYYY HH:mm");return c(e,"DD-MMM-YYYY HH:mm").format("DD-MMM-YYYY HH:mm")}dbTimezoneFormatWithTimeStamp(i){const e=c(i).format("DD-MMM-YYYY HH:mm:ss");return c(e,"DD-MMM-YYYY HH:mm:ss").format("DD MMM YYYY - HH:mm:ss A")}AttributesList(i,e,s){return new Promise((a,l)=>{this.authService.getApiCall("api/v1/attributedefinitions?type=list&enterpriseId="+i+"&pageName="+e+"&attribute_group.lookup_name="+s).subscribe(r=>{a(r)},r=>{l(r)})})}getDisplayName(i){const e=[];return i.popular_name?e.push(i.popular_name):(e.push(i.l_name?i.l_name+", ":""),e.push(i.f_name?i.f_name:"")),this.displayName=","===e.join("").trim().charAt(e.join("").trim().length-1)?e.join("").trim().slice(0,-1):e.join("").trim(),this.displayName}objToJson(i){return JSON.stringify(i)}getLookupTypes(i,e){return new Promise((s,a)=>{this.authService.getApiCall("api/v1/lookupcodes?lookuptype="+i+"&type=drop&enterprise.enterprise_id="+e).subscribe(l=>{s(l)},l=>{a(l)})})}static \u0275fac=function(e){return new(e||o)(t.LFG(W.e),t.LFG(Bt.eN))};static \u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Ft=p(62843);let Yt=(()=>{class o{authService;commonService;constructor(i,e){this.authService=i,this.commonService=e}getFleetReservationList(i){return new Promise((e,s)=>{this.authService.getStaticApiCall("assets/enterprises/"+i+"/funfacts.json").subscribe(a=>{e(a)},a=>{s(a)})})}getFunfactList(i){}searchFunfactList(i){return new Promise((e,s)=>{this.authService.getStaticApiCall("api/v1/funfacts/search/"+i).subscribe(a=>{e(a)},a=>{s(a)})})}getResultBydate(i,e,s){}homesearchList(i){return new Promise((e,s)=>{this.authService.getStaticApiCall("api/v1/publicevents/search/"+i).subscribe(a=>{e(a)},a=>{s(a)})})}getPublicEventsListLocal(i){}getAssetDisplaymapsettings(i){return new Promise((e,s)=>{this.authService.getStaticApiCall("assets/enterprises/"+i+"/d2msettings.json").subscribe(a=>{e(a)},a=>{s(a)})})}getEventsDisplaymapsettings(i,e){}getAssetsListLocal(i,e,s){const a=localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE)?localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE):"en";return new Promise((l,r)=>{let g;const m=localStorage.getItem(n.BU.KIOSK_MAP_ORIENTATION),f=localStorage.getItem(n.BU.CHECK_IS_KIOSK);g=s&&"true"===m&&"true"===f?"assets/enterprises/"+i+"/"+e+"_"+s+".json":"assets/enterprises/"+i+"/"+e+"/"+a+".json",this.authService.getStaticApiCall(g).subscribe(u=>{l(u)},u=>{r(u)})})}getResReg(i){return new Promise((e,s)=>{this.authService.getStaticApiCall("api/v1/publicevents/locate/"+i).subscribe(a=>{e(a)},a=>{s(a)})})}extractData(i){return i.json()||{}}handleError(i){return(0,Ft._)(i)}getAverageReviewlist(i,e){return new Promise((s,a)=>{this.authService.getStaticApiCall("api/v1/fleet/avgrating/events/"+i+"/"+e).subscribe(l=>{s(l)},l=>{a(l)})})}getReviewlist(i,e){return new Promise((s,a)=>{this.authService.getStaticApiCall("api/v1/fleet/rating/events/"+i+"/"+e).subscribe(l=>{s(l)},l=>{a(l)})})}getPromotions(i,e){return new Promise((s,a)=>{this.authService.getStaticApiCall("api/v1/fleet/promotions/"+i+"/"+e).subscribe(l=>{s(l)},l=>{a(l)})})}static \u0275fac=function(e){return new(e||o)(t.LFG(W.e),t.LFG(jt))};static \u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Jt=p(75023);function Pt(o,h){if(1&o&&t._UZ(0,"ion-avatar",28),2&o){const i=t.oxw();t.Gre("event-asset-icon ",null==i.eventData?null:i.eventData.iconname,"")}}function Gt(o,h){if(1&o&&(t.TgZ(0,"ion-avatar",29),t._UZ(1,"img",30),t.ALo(2,"imageTransform"),t.qZA()),2&o){const i=t.oxw();t.xp6(1),t.Q6J("src",t.Dn7(2,1,null==i.eventData?null:i.eventData.fleetImageFilePath,null==i.eventData?null:i.eventData.fleetImageFileName,i.publishEnabled),t.LSH)}}function qt(o,h){if(1&o&&(t.TgZ(0,"span",36),t._UZ(1,"ionic3-star-rating",37),t.TgZ(2,"span",38),t._uU(3),t.qZA()()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("rating",i.avgratingvalue),t.xp6(2),t.hij("(",i.count,")")}}function Vt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"div",41),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(3);return t.KtG(s.ratenow(s.eventData,"eventDetailPage"))}),t._UZ(1,"ion-icon",42),t.TgZ(2,"span",43),t._uU(3),t.ALo(4,"translate"),t.qZA()()}if(2&o){const i=t.oxw(3);t.xp6(1),t.Udp("background",i.buttonBackgroundColor),t.xp6(1),t.Udp("color",i.buttonBackgroundColor),t.xp6(1),t.Oqu(t.lcZ(4,7,"COMMON_FIELDS.RATE_NOW"))}}function Ht(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"div",41),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(3);return t.KtG(s.editratenow(s.eventData,"eventDetailPage"))}),t._UZ(1,"ion-icon",44),t.TgZ(2,"span",45),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"COMMON_FIELDS.RATED")))}function Kt(o,h){if(1&o&&(t.TgZ(0,"div",39),t.YNc(1,Vt,5,9,"div",40),t.YNc(2,Ht,5,3,"div",40),t.qZA()),2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf","true"==i.ratedlist),t.xp6(1),t.Q6J("ngIf","false"==i.ratedlist)}}function Qt(o,h){if(1&o&&(t.TgZ(0,"ion-col",12)(1,"ion-card-content",31)(2,"ion-list",32)(3,"ion-item",33),t.YNc(4,qt,4,2,"span",34),t.YNc(5,Kt,3,2,"div",35),t.qZA()()()()),2&o){const i=t.oxw();t.xp6(4),t.Q6J("ngIf",i.count),t.xp6(1),t.Q6J("ngIf","true"==i.rateNow)}}function Wt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-list",32)(1,"ion-item",53),t.NdJ("click",function(){const a=t.CHM(i).$implicit,l=t.oxw(3);return t.KtG(l.eventDetails(a))}),t.TgZ(2,"ion-label",54),t._uU(3),t.qZA()()()}if(2&o){const i=h.$implicit,e=h.index;t.xp6(1),t.MGl("id","fleetnameid",e,""),t.xp6(2),t.Oqu(null==i?null:i.event_name)}}function zt(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-card-content",47),t.YNc(1,Wt,4,2,"ion-list",48),t.TgZ(2,"ion-row",49)(3,"ion-col",50)(4,"ion-button",51),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.getEvents())}),t._UZ(5,"ion-icon",52),t._uU(6),t.ALo(7,"translate"),t.qZA()()()()}if(2&o){const i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.eventListData),t.xp6(3),t.Udp("color",i.buttonBackgroundColor),t.xp6(2),t.hij(" ",t.lcZ(7,5,"COMMON_FIELDS.VIEW_ALL_ASSETS")," ")}}function $t(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-card",23)(1,"ion-item",24),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.handleTab("similarAssets"))}),t._UZ(2,"ion-icon",25),t.TgZ(3,"ion-label",26),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.YNc(6,zt,8,7,"ion-card-content",46),t.qZA()}if(2&o){const i=t.oxw();t.xp6(2),t.Q6J("name",i.similarAssetsEnable?"chevron-up":"chevron-down"),t.xp6(2),t.Oqu(t.lcZ(5,3,"COMMON_FIELDS.SIMILAR_FLEETS")),t.xp6(2),t.Q6J("ngIf",i.similarAssetsEnable)}}function Xt(o,h){if(1&o&&(t.TgZ(0,"ion-item",59)(1,"ion-avatar"),t._UZ(2,"ion-icon",60),t.qZA(),t.TgZ(3,"ion-label",54)(4,"h3")(5,"strong"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"a",61),t._uU(9),t.qZA()()()),2&o){const i=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,6,"COMMON_FIELDS.EMAIL")),t.xp6(2),t.Udp("color",i.linkTextColor),t.MGl("href","mailto: ",null==i.eventData.facility.facilityObj||null==i.eventData.facility.facilityObj.contact_details?null:i.eventData.facility.facilityObj.contact_details.email," ",t.LSH),t.xp6(1),t.Oqu(null==i.eventData||null==i.eventData.facility||null==i.eventData.facility.facilityObj||null==i.eventData.facility.facilityObj.contact_details?null:i.eventData.facility.facilityObj.contact_details.email)}}function te(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",62),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.fromAssetsList())}),t.TgZ(1,"ion-avatar"),t._UZ(2,"ion-icon",63),t.qZA(),t.TgZ(3,"ion-label",64)(4,"h3")(5,"strong"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"p",65),t._uU(9),t.qZA()()()}if(2&o){const i=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,2,"COMMON_ADDRESS_BLOCK.ADDRESS")),t.xp6(3),t.Oqu(i.address)}}function ee(o,h){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",62),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.callResource(s.phonenumber))}),t.TgZ(1,"ion-avatar",28),t._UZ(2,"ion-icon",66),t.qZA(),t.TgZ(3,"ion-label",54)(4,"h3")(5,"strong"),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"p",67),t._uU(9),t.qZA()()()}if(2&o){const i=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,3,"COMMON_FIELDS.PHONE_NUMBER")),t.xp6(3),t.AsE(" ",i.countrycode,"-",null==i.eventData||null==i.eventData.facility||null==i.eventData.facility.facilityObj||null==i.eventData.facility.facilityObj.contact_details?null:i.eventData.facility.facilityObj.contact_details.phone,"")}}function ie(o,h){if(1&o&&(t.TgZ(0,"ion-card-content",55)(1,"ion-row")(2,"ion-col",12)(3,"ion-list",56),t.YNc(4,Xt,10,8,"ion-item",57),t.YNc(5,te,10,4,"ion-item",58),t.YNc(6,ee,10,5,"ion-item",58),t.qZA()()()()),2&o){const i=t.oxw();t.xp6(4),t.Q6J("ngIf",!0===i.emailAddreshDisplay),t.xp6(1),t.Q6J("ngIf",!0===i.addressDisplay),t.xp6(1),t.Q6J("ngIf",!0===i.phoneNumberDisplay)}}const ae=[{path:"",data:{title:"eventsui"},children:[{path:"eventsui/list",canActivate:[j.P],component:xt,data:{object_type:n.hf.EVENTS,title:"events Listing",responsibilityParam:n.bP.MENUS+"."+n.w1.EVENTS_UI+"."+n.Iu.ENABLED,pageName:n.hf.EVENTS_UI}},{path:"",redirectTo:"eventsui",pathMatch:"full"},{path:":id/view",canActivate:[j.P],component:(()=>{class o extends F.O{apiEndPointUrl;eventsService;facilitiesService;loggerService;navParams;publicEventService;router;sanitizer;alertCtrl;commonServices;modalCtrl;navCrl;navCtrl;platform;route;syncService;toastCtrl;translateService;UserTimeZone;address;addressDisplay=!1;advData;apiCall=!1;appcolor;assetName;assetsList;avgratingvalue;buildingCode;buttonBackgroundColor;buttonTextColor;confgItem;contactDetailsBlockDisplay=!1;contactEnable=!0;count;countrycode;deals=!1;dealsEnable=!1;defaultTimeZone;defaultUserTimeZone;descriptionEnable=!0;displyUserTimeZone;emailAddreshDisplay=!1;enddate;enterpriseId;enterpriseName;eventData;eventDetailsData;eventIconFileName;eventListData;facilityData;fileSrc="";finalpubliceventsjson;fleetCommonName;fleetData;fleetFollowStatus=!1;fleetIconFileName;fleetId;fleetImageFileName;fleetImageFilePath;fleetType;floorsenable;forceRefresh=!1;headerImage="";headerTitle;iconname;image;imagePath;isContactdetailsEnabled;isDescriptionEnabled;isFollowEnabled;isRatingEnabled;isSimilarAssetsEnabled=!1;isSimilarEnabled;langcode;linkTextColor;localendpoint=localStorage.getItem(n.BU.S3_URL)?localStorage.getItem(n.BU.S3_URL):this.apiEndPointUrl;locatelocaljson;loginUserDateFormat;map;myReservationsList1;nodata;notes;phoneNumberDisplay=!1;phonenumber;position;preAsset="";prefleetTypevalue="";dateFormat="MMM D, YYYY";dateFormat1="MMM D, YY";displayDate;filter=!0;toGoDateFormat="YYYY-MM-D h:mm:ss";today=c();promotionsListArray;defaultdateformat=JSON.parse(localStorage.getItem(n.BU.DATE_FORMATE_OBJ)).lookup_name;enterpriseImage=localStorage.getItem(n.BU.ENTERPRISE_IMAGE);notificationCount=localStorage.getItem(n.BU.NOTIFICATION_COUNT);publishEnabled=!1;rateNow;ratedlist;ratingvalue;recordData;recordId;removeattherate=!1;resObj;rotationAngle;selcetedassetspage=!1;selectall=!1;similarAssetsEnable=!0;spinner;startdate;stores;syncEnabled=!1;syncFreq;toGoDate;token;tostermsg;userToken;utcTimeZoneString;viewMorePromotions=!0;visualFilename="";visuals;visualsLength=0;workNumber;pageTitle;dataJsonObj={};constructor(i,e,s,a,l,r,g,m,f,u,_,d,E,S,b,T,v,y){super(b,u),this.apiEndPointUrl=i,this.eventsService=e,this.facilitiesService=s,this.loggerService=a,this.navParams=l,this.publicEventService=r,this.router=g,this.sanitizer=m,this.alertCtrl=f,this.commonServices=u,this.modalCtrl=_,this.navCrl=d,this.navCtrl=E,this.platform=S,this.route=b,this.syncService=T,this.toastCtrl=v,this.translateService=y,this.route.params.subscribe(L=>{this.recordId=L.id,this.recordData=this.recordId.split("$")}),this.route.queryParams.subscribe(L=>{this.dataJsonObj.queryParamsObj={defaultView:L.defaultView,selectedMenuId:L.selectedMenuId,selectedSubMenuId:L.selectedSubMenuId}}),this.confgItem=this.navParams.data,this.localendpoint=localStorage.getItem(n.BU.S3_URL)?localStorage.getItem(n.BU.S3_URL):this.apiEndPointUrl}ngOnInit(){try{localStorage.getItem(n.BU.SELECTED_ENTERPRISE)?(this.enterpriseId=localStorage.getItem(n.BU.SELECTED_ENTERPRISE),this.buildingCode=localStorage.getItem(n.BU.BUILDING_CODE),this.rotationAngle=localStorage.getItem(n.BU.ROTATION_ANGLE)):(this.enterpriseId=localStorage.getItem(n.BU.PARENT_ENTERPRISE_ID),this.buildingCode=localStorage.getItem(n.BU.PARENT_BUILDING_CODE),this.rotationAngle=localStorage.getItem(n.BU.PARENT_ROTATION_ANGLE));const i=JSON.parse(localStorage.getItem(n.BU.TIMEZONE_OBJ));this.defaultTimeZone=i.lookup_name;const a=i.description.split("(UTC")[1].split(")");this.utcTimeZoneString=a[0].toString(),this.initializeComponent(),this.getsyncSettings(),this.ionViewWillEnter()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"ngOnInit",i)}}getsyncSettings(){var i=this;return(0,w.Z)(function*(){try{const e=yield i.commonServices.getCacheSettings(n.hf.EVENTS);i.syncEnabled=e.cacheEnabled,i.syncFreq=e.syncFreq,i.forceRefresh=e.forceRefresh,i.publishEnabled=e.publishEnabled}catch(e){i.loggerService.setLoggerError(i.constructor.name,"getsyncSettings",e)}})()}initializeComponent(){this.dataJsonObj.pageName=n.hf.EVENTS_UI;try{this.eventsService.getEventData(this.enterpriseId).then(i=>{this.eventData=i.find(s=>s._id==this.recordId),this.commonServices.trackView(n.sn.OPPPORTUNITIES+this.eventData.event_name),this.facilityData=JSON.parse(localStorage.getItem(n.BU.EVENT_DETAILS)).facilityData,this.translateService.use(localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE)).subscribe(s=>{this.pageTitle=this.eventData.facility.facility_name}),this.dataJsonObj.selectedPage=n.hf.EVENTS_UI,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}]),this.eventData&&this.eventData.facility&&this.eventData.facility.facility_id&&(this.eventData.userStartTimeZone=this.commonServices.convertToUserTimeZone(this.eventData.start_datetime,this.utcTimeZoneString),this.eventData.facility.facilityObj=this.eventData.facilityObj,this.dataJsonObj.pageTitle=[{key:"FACILITY_SPOTLIGHT_CONFIGURATIONS.FACILITY_SPOTLIGHT_CONFIGURATION",value:this.eventData.facility.facility_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.eventData.facility.facilityObj&&(this.eventData.facility.facilityObj.contact_details.phone&&(this.phoneNumberDisplay=!0,this.contactDetailsBlockDisplay=!0),this.eventData.facility.facilityObj.contact_details.email&&(this.emailAddreshDisplay=!0,this.contactDetailsBlockDisplay=!0),this.eventData.facilityObj.visuals&&this.eventData.facilityObj.visuals.length&&this.eventData.facilityObj.visuals&&this.eventData.facilityObj.visuals[0].visual_file_path&&this.eventData.facilityObj.visuals[0].visual_file_name?(this.eventData.fleetImageFilePath=this.eventData.facilityObj.visuals[0].visual_file_path,this.eventData.fleetImageFileName=this.eventData.facilityObj.visuals[0].visual_file_name):(this.eventData.fleetImageFilePath=this.eventData.facilityObj.facility_image_file_path,this.eventData.fleetImageFileName=this.eventData.facilityObj.facility_image_file_name),this.eventData.headerImageFilePath=this.eventData.facilityObj.facility_image_file_path,this.eventData.headerImageFileName=this.eventData.facilityObj.facility_image_file_name,this.fleetImageFileName=this.eventData.facility.facilityObj.facility_image_file_name,this.fleetImageFilePath=this.eventData.facility.facilityObj.facility_image_file_path,this.eventData.headerImage=this.localendpoint+this.eventData.headerImageFilePath+"/"+this.eventData.headerImageFileName,this.eventData.image=this.localendpoint+this.eventData.fleetImageFilePath+"/"+this.eventData.fleetImageFileName,this.eventData.notes&&(this.isDescriptionEnabled=!0,this.notes=this.eventData.notes),this.eventData.description&&(this.isDescriptionEnabled=!0,this.notes=this.eventData.description),this.eventData.facility.facilityObj.contact_details&&this.eventData.facility.facilityObj.contact_details.phone_country_code&&(this.countrycode=this.eventData.facility.facilityObj.contact_details.phone_country_code.lookup_name.split("-")[0]),this.iconname=this.eventData.iconname,this.eventData.iconname=this.eventData.facilityObj.facility_icon_file_name,this.address=this.eventData.facility.facilityObj.address.address_line1,""!==this.eventData.facility.facilityObj.address.address_line2&&null!==this.eventData.facility.facilityObj.address.address_line2&&void 0!==this.eventData.address.address_line2&&(this.address=this.address+", "+this.eventData.facility.facilityObj.address.address_line2),this.address=this.address+", "+this.eventData.facility.facilityObj.address.city+", "+this.eventData.facility.facilityObj.address.state.state_name+", "+this.eventData.facility.facilityObj.address.ZIP+", "+this.lookupLanguageTranslations(this.eventData.facility.facilityObj.address.country.lookup_id),this.enterpriseImage=localStorage.getItem(n.BU.ENTERPRISE_IMAGE),this.address&&(this.addressDisplay=!0,this.contactDetailsBlockDisplay=!0)))})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"initializeComponent",i)}}getDynamicJson(i){var e=this;return(0,w.Z)(function*(){for(let s of i)e.dataJsonObj[s.storingFieldName]=yield e.commonService.getDynamicJson(e.enterpriseId,s.folderName,s.jsonType);e.dataJsonObj.selectedObj={},e.dataJsonObj.selectedObj.recordId=e.recordId,e.dataJsonObj.selectedObj.pageObj=e.dataJsonObj.menuDataJson.filter(s=>s.menu_page.page_name===e.dataJsonObj.selectedPage),e.dataJsonObj.selectedObjEnabled=!0})()}ionViewWillEnter(){try{localStorage.setItem(n.BU.PAGE_NAME,"eventsDeatailsPage"),JSON.parse(localStorage.getItem(n.BU.EVENT_DETAILS)),this.deals=!1,this.viewMorePromotions=!0,localStorage.setItem(n.BU.CONFIG_ITEM_DATA,JSON.stringify(this.confgItem)),this.fleetFollowStatus=!1,this.userToken=localStorage.getItem(n.BU.TOKEN),this.ratedlist="true",this.localendpoint=localStorage.getItem(n.BU.S3_URL)?localStorage.getItem(n.BU.S3_URL):this.apiEndPointUrl;const e=localStorage.getItem(n.BU.DEVICE_ID);this.rateNow=e?"true":"false",localStorage.setItem(n.BU.CONFIG_ITEM,JSON.stringify(this.confgItem)),this.map=this.translateService.instant("COMMON_FIELDS.DETAILS"),this.langcode=localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE),this.getEnterpriseData(localStorage.getItem(n.BU.SELECTED_ENTERPRISE)),this.getAppConfigData(),this.selectall=!1,this.assetName="",this.fleetType="",this.selcetedassetspage=!1;try{this.notificationCount=localStorage.getItem(n.BU.NOTIFICATION_COUNT),this.nodata=!1,this.spinner=!1,this.token=localStorage.getItem(n.BU.TOKEN),this.position=localStorage.getItem(n.BU.MENU_POSITION)}catch{}this.getPromotionsByFleetId(),this.getEventList(),this.getAverageReviewlist(e)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"ionViewWillEnter",i)}}getAverageReviewlist(i){try{let e="";e=this.enterpriseId===localStorage.getItem(n.BU.LOGIN_ENTERPRISE_ID)?localStorage.getItem(n.BU.USERID):"",this.fleetId=this.eventData._id,this.publicEventService.getAverageReviewlist(this.fleetId,e).then(s=>{this.fleetFollowStatus=s[0].fleetFollowStatus,this.getReviewlist(i),this.ratingvalue=s[0].avgRating,this.count=s[0].count,this.avgratingvalue=this.ratingvalue},s=>{this.getReviewlist(i)})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"getAverageReviewlist",e)}}getReviewlist(i){try{this.publicEventService.getReviewlist(this.fleetId,i).then(e=>{this.ratedlist="false"},e=>{const a=e._body?e._body.statusCode:"";switch(e.status){case 500:break;case 400:"9961"===a?this.commonServices.updateToken(this.token).subscribe(l=>{localStorage.setItem(n.BU.TOKEN,l.result),this.token=localStorage.getItem(n.BU.TOKEN)}):"9995"===a||"9997"===a&&(this.ratedlist="true")}})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"getReviewlist",e)}}getAvgRateEvent(){try{this.ratedlist="false";let i=localStorage.getItem(n.BU.USERID);(""===localStorage.getItem(n.BU.USERID)||void 0===localStorage.getItem(n.BU.USERID)||null===localStorage.getItem(n.BU.USERID)||"null"===localStorage.getItem(n.BU.USERID))&&(i=""),this.publicEventService.getAverageReviewlist(this.fleetId,i).then(e=>{this.ratingvalue=e[0].avgRating,this.count=e[0].count,this.avgratingvalue=this.ratingvalue},e=>{})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getAvgRateEvent",i)}}getEventList(){this.defaultUserTimeZone=localStorage.getItem(n.BU.USER_TIME_ZONE);try{this.UserTimeZone=this.defaultUserTimeZone.split("-"),this.displyUserTimeZone=this.UserTimeZone[0],this.today=c().utc(),this.spinner=!0;const i=new Date(this.commonServices.convertToUserTZ((new Date).getUTCFullYear()+"-"+((new Date).getUTCMonth()+1)+"-"+(new Date).getUTCDate()+" "+(new Date).getUTCHours()+":"+(new Date).getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE)).replace(/-/g,"/"));this.displayDate=c(i.toDateString()).format(this.dateFormat),this.toGoDate=this.today.format(this.toGoDateFormat),this.getpubliceventslocal(this.today,this.today),parseInt(localStorage.getItem(n.BU.ADV_LENGTH),0)>0&&(this.advData=!0)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getEventList",i)}}getpubliceventslocal(i,e){try{this.finalpubliceventsjson=[],this.publicEventService.getPublicEventsListLocal(localStorage.getItem(n.BU.SELECTED_ENTERPRISE)).then(a=>{if(this.apiCall=!1,a.length>0)for(let l=0;l<a.length;l++){const r=c(a[l].start_datetime),m=(c(a[l].registration_close_datetime),new Date(a[l].start_datetime)),f=this.commonServices.convertToUserTZ(m.getUTCFullYear()+"-"+(m.getUTCMonth()+1)+"-"+m.getUTCDate()+" "+m.getUTCHours()+":"+m.getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE)).replace(/-/g,"/");if("Date"===localStorage.getItem(n.BU.SELECT_DATE))this.startdate=i.format("YYYY-MM-DD"),this.enddate=e.format("YYYY-MM-DD"),this.startdate===r.format("YYYY-MM-DD")&&this.finalpubliceventsjson.push(a[l]);else if("Week"===localStorage.getItem(n.BU.SELECT_DATE)){this.startdate=c(i).format(this.dateFormat1),this.enddate=c(e).format(this.dateFormat1);const u=c(f).format(this.dateFormat1);Date.parse(u)>=Date.parse(this.startdate)&&Date.parse(u)<=Date.parse(this.enddate)&&this.finalpubliceventsjson.push(a[l])}else"Month"===localStorage.getItem(n.BU.SELECT_DATE)&&(this.startdate=i.format("YYYY-MM"),this.enddate=e.format("YYYY-MM"),this.startdate===r.format("YYYY-MM")&&this.finalpubliceventsjson.push(a[l]))}this.onSwipeDate(this.finalpubliceventsjson)},a=>{switch(this.loggerService.setLoggerError(this.constructor.name,"getpubliceventslocal",a),JSON.parse(a.status)){case 404:case 0:this.apiCall=!0}})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getpubliceventslocal",s)}}onSwipeDate(i){try{let e=[];if(this.spinner=!1,this.myReservationsList1=i,this.myReservationsList1.length>0){for(let a=0;a<this.myReservationsList1.length;a++)if(this.myReservationsList1[a].registration_close_datetime){try{this.myReservationsList1[a].fleetIcon=JSON.parse(this.myReservationsList1[a].fleetObj.fleetTypeObj).fleetTypeIcon}catch{this.myReservationsList1[a].fleetIcon=""}(void 0===this.myReservationsList1[a].fleetIcon||""===this.myReservationsList1[a].fleetIcon||null===this.myReservationsList1[a].fleetIcon)&&(this.myReservationsList1[a].fleetIcon="");const l=new Date(this.myReservationsList1[a].start_datetime);if(this.myReservationsList1[a].userStartTimeZone=this.commonServices.convertToUserTZ(l.getUTCFullYear()+"-"+(l.getUTCMonth()+1)+"-"+l.getUTCDate()+" "+l.getUTCHours()+":"+l.getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE)).replace(/-/g,"/"),"CREATED"===this.myReservationsList1[a]["status.lookup_name"]){const r=this.getTogoDateandTime(this.myReservationsList1[a].start_datetime,this.myReservationsList1[a]["status.lookup_display_name"]);if(this.myReservationsList1[a].togodate=r[0],this.myReservationsList1[a].mins=r[1],"Created"===this.myReservationsList1[a].togodate){const g=this.getTogoDateandTime(this.myReservationsList1[a].endDatetime,"Closed");this.myReservationsList1[a].togodate=g[0],this.myReservationsList1[a].mins=g[1],"Closed"!==this.myReservationsList1[a].togodate?this.myReservationsList1[a].togodate=this.myReservationsList1[a]["status.lookup_display_name"]:this.myReservationsList1[a]["status.lookup_display_name"]="Closed"}}else this.myReservationsList1[a].togodate=this.myReservationsList1[a]["status.lookup_display_name"],this.myReservationsList1[a].mins="0";this.myReservationsList1[a].duration1=this.myReservationsList1[a].duration,this.myReservationsList1[a].duration=this.getDurationTime(this.myReservationsList1[a].start_datetime,this.myReservationsList1[a].endDatetime)}e=this.myReservationsList1,e.sort(function(a,l){return(a=new Date(a.userStartTimeZone))===(l=new Date(l.userStartTimeZone))?0:a>l?1:-1}),this.myReservationsList1=e}const s=[];if(this.myReservationsList1.length>0)for(let a=0;a<4;a++)this.myReservationsList1[a].endDatetime!==this.eventData.endDatetime&&("Created"===this.myReservationsList1[a].togodate||"Closed"===this.myReservationsList1[a].togodate||"Started"===this.myReservationsList1[a].togodate||"Canceled"===this.myReservationsList1[a].togodate?(this.myReservationsList1[a].togodate=" ",s.push(this.myReservationsList1[a])):s.push(this.myReservationsList1[a]));if(this.eventListData=s,this.eventListData.length)for(let a=0;a<this.eventListData.length;a++)this.isSimilarAssetsEnabled=!0,this.eventListData[a].fleetObj&&void 0!==this.eventListData[a].fleetObj&&(this.eventListData[a].fleetObj.fleetName=void 0!==this.eventListData[a].fleetObj.name?null==this.eventListData[a].fleetObj.name[this.langcode]||""===this.eventListData[a].fleetObj.name[this.langcode]?this.eventListData[a].fleetObj.fleetName:this.eventListData[a].fleetObj.name[this.langcode]:this.eventListData[a].fleetObj.fleetName,this.eventListData[a].eventName=void 0!==this.eventListData[a].name?null==this.eventListData[a].name[this.langcode]||""===this.eventListData[a].name[this.langcode]?this.eventListData[a].eventName:this.eventListData[a].name[this.langcode]:this.eventListData[a].eventName)}catch(e){this.loggerService.setLoggerError(this.constructor.name,"onSwipeDate",e)}}getDurationTime(i,e){try{const a=localStorage.getItem(n.BU.USER_TIME_ZONE).split("(UTC")[1].split(")")[0].substring(1).split(":"),r=(parseInt(a[0],10),parseInt(a[1],10),c(i)),m=c(e).diff(r,"milliseconds"),f=Math.floor(m/864e5),u=Math.floor(m%864e5/36e5),_=Math.floor(m%36e5/6e4);let d="";return _>0&&(d=_+" min"),u>0&&(d=1===u?u+" hr ":u+" hrs "),f>0&&(d=1===f?f+" day ":f+" days "),d}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getDurationTime",s)}}getTogoDateandTime(i,e){try{const s=c(this.commonServices.convertToUserTZ((new Date).getUTCFullYear()+"-"+((new Date).getUTCMonth()+1)+"-"+(new Date).getUTCDate()+" "+(new Date).getUTCHours()+":"+(new Date).getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE))),a=c(this.commonServices.convertToUserTZ(new Date(i).getUTCFullYear()+"-"+(new Date(i).getUTCMonth()+1)+"-"+new Date(i).getUTCDate()+" "+new Date(i).getUTCHours()+":"+new Date(i).getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE))),l=c(s),r=c(a),g=r.diff(l,"milliseconds"),m=r.diff(l,"minutes"),f=Math.floor(g/864e5),u=Math.floor(g%864e5/36e5),_=Math.floor(g%36e5/6e4);let d=" to go";return d=g<=0?e:f>=1?f+"+ days "+d:u>=2?u+"+ hrs "+d:u<2&&_>1?60*u+_+" min"+d:"1 min"+d,[d,m]}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getTogoDateandTime",s)}}ionViewDidLoad(){}ionViewWillLeave(){localStorage.removeItem(n.BU.PAGE_NAME)}getEnterpriseData(i){try{if(localStorage.getItem(n.BU.DEFAULT_UI_SETTINGS_DATA)){let e=JSON.parse(localStorage.getItem(n.BU.DEFAULT_UI_SETTINGS_DATA));this.appcolor=e.application_color?e.application_color:"#0057b2",this.buttonBackgroundColor=e.application_color?e.application_color:"#0057b2",this.buttonTextColor=e.text_color?e.text_color:"#000000",this.isSimilarEnabled=e.is_similar_facilities_enabled,this.isContactdetailsEnabled=e.is_contact_details_enabled,this.removeattherate=e.general_settings.is_city_enabled,this.enterpriseName=e.enterprise.enterprise_name,this.linkTextColor=e.link_text_color}}catch(e){this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseData",e)}}handleFilter(){this.filter=!this.filter}goBackToPreviousPage(){this.fleetType=this.prefleetTypevalue,this.assetName=this.preAsset,this.selcetedassetspage=!1}handleKeyPress(i){}getAppConfigData(){try{this.commonServices.getEnterpriseConfigData(this.enterpriseId).then(i=>{this.buttonBackgroundColor=i.applicationColor,this.buttonTextColor=i.textColor,this.enterpriseName=i.enterprise.enterpriseName,this.removeattherate=i.generalSettings.isCityEnabled,void 0!==i.enterprisecontactDetails&&(this.workNumber=i.enterprisecontactDetails.workNumber,this.countrycode=i.enterprisecontactDetails.workNumberCountrycode.split(" - ")[0],this.phonenumber=this.countrycode+"-"+this.workNumber),0===this.visualsLength&&(this.headerImage=this.localendpoint+(this.eventData.facility.visuals.length>0&&this.eventData.facility.visuals[0].visual_file_path?this.eventData.facility.visuals[0].visual_file_path+"/"+this.eventData.facility.visuals[0].visual_file_name:""),this.platform.is("android")||this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone")||this.platform.is("tablet")),localStorage.setItem(n.BU.LOCATION_PATH,i.mapSettings.currentLocationSensors),localStorage.setItem(n.BU.CLUSTER_LEVEL_ZOOM,i.mapSettings.clusterLevelZoom)},i=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseConfigData",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getAppConfigData",i)}}handleTab(i){try{switch(i){case"description":this.descriptionEnable=!this.descriptionEnable;break;case"contact":this.contactEnable=!this.contactEnable;break;case"similarAssets":this.similarAssetsEnable=!this.similarAssetsEnable;break;case"deals":this.dealsEnable=!this.dealsEnable,!0===this.dealsEnable&&this.getPromotionsByFleetId()}}catch(e){this.loggerService.setLoggerError(this.constructor.name,"handleTab",e)}}editratenow(i,e){}fromAssetsList(){}locateReserve(i){try{let s;localStorage.setItem(n.BU.TO_ASSET,JSON.stringify(i)),this.langcode=localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE),localStorage.removeItem(n.BU.PUBLIC_EVENTS_INFO),localStorage.removeItem(n.BU.PUBLIC_EVENTS_FLEET_ID),this.locatelocaljson=[],localStorage.setItem(n.BU.LAT,i.fleetObj.address.geoCoordinates[0]),localStorage.setItem(n.BU.LON,i.fleetObj.address.geoCoordinates[1]),this.publicEventService.getAssetDisplaymapsettings(this.enterpriseId).then(a=>{s=a.result,localStorage.setItem(n.BU.D2M_SETTINGS_DATA,JSON.stringify(s))},a=>{this.loggerService.setLoggerError(this.constructor.name,"getAssetDisplaymapsettings",a)}),this.publicEventService.getAssetsListLocal(this.enterpriseId,this.buildingCode,this.rotationAngle).then(a=>{this.publicEventService.getPublicEventsListLocal(this.enterpriseId).then(l=>{if(l.length>0)for(let m=0;m<l.length;m++){l[m].eventName=void 0!==l[m].name?null==l[m].name[this.langcode]||""===l[m].name[this.langcode]?l[m].eventName:l[m].name[this.langcode]:l[m].eventName,l[m].fleetObj.fleetName=void 0!==l[m].fleetObj.name?null==l[m].fleetObj.name[this.langcode]||""===l[m].fleetObj.name[this.langcode]?l[m].fleetObj.fleetName:l[m].fleetObj.name[this.langcode]:l[m].fleetObj.fleetName;const f=new Date(l[m].startDatetime),u=new Date(l[m].endDatetime),_=this.commonServices.convertToUserTZ(f.getUTCFullYear()+"-"+(f.getUTCMonth()+1)+"-"+f.getUTCDate()+" "+f.getUTCHours()+":"+f.getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE)),d=this.commonServices.convertToUserTZ(u.getUTCFullYear()+"-"+(u.getUTCMonth()+1)+"-"+u.getUTCDate()+" "+u.getUTCHours()+":"+u.getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE)),E=new Date,S=this.commonServices.convertToUserTZ(E.getUTCFullYear()+"-"+(E.getUTCMonth()+1)+"-"+E.getUTCDate()+" "+E.getUTCHours()+":"+E.getUTCMinutes(),"",localStorage.getItem(n.BU.USER_TIME_ZONE));if(l[m].startDatetime&&l[m].endDatetime)if(Date.parse(_)<=Date.parse(S)&&Date.parse(S)<=Date.parse(d)){delete l[m].workNumber,l[m].eventOwner.userId.enterpriseResourceObj.address&&delete l[m].eventOwner.userId.enterpriseResourceObj.address,l[m].fleetObj.address&&delete l[m].fleetObj.address,delete l[m].enterprise.enterpriseId.billToDetails,i.fleetObj._id===l[m].fleetObj._id&&this.locatelocaljson.push(l[m]),localStorage.setItem(n.BU.PUBLIC_EVENTS_INFO,JSON.stringify(this.locatelocaljson)),localStorage.setItem(n.BU.PUBLIC_EVENTS_FLEET_ID,i.fleetObj._id);const T=[],v=[];if(s&&s.length>0)for(let y=0;y<s.length;y++)T.push(s[y].baseTableColumnName),v.push(void 0!==s[y].name?null==s[y].name[this.langcode]||""===s[y].name[this.langcode]?s[y].labelToShowInMap:s[y].name[this.langcode]:s[y].labelToShowInMap);localStorage.setItem(n.BU.PUBLIC_EVENTS_DISPLAY_COLUMNS,JSON.stringify(v)),localStorage.setItem(n.BU.PUBLIC_EVENTS_DISPLAY_PROPERTIES,JSON.stringify(T))}else{const b=[],T=[];if(s&&s.length>0)for(let v=0;v<s.length;v++)b.push(s[v].baseTableColumnName),T.push(void 0!==s[v].name?null==s[v].name[this.langcode]||""===s[v].name[this.langcode]?s[v].labelToShowInMap:s[v].name[this.langcode]:s[v].labelToShowInMap);localStorage.setItem(n.BU.DISPLAY_COLUMNS,JSON.stringify(T)),localStorage.setItem(n.BU.DISPLAY_PROPERTIES,JSON.stringify(b))}}localStorage.setItem(n.BU.LOCAL_ENDPOINT,"assets/enterprises/"),localStorage.setItem(n.BU.LC_SINGLE_FLEET,JSON.stringify(a)),localStorage.setItem(n.BU.F_CURRENT_FLOOR_NAME,a.floorsData[0].features[0].properties.level),localStorage.setItem(n.BU.MAP_URL,"?ut=locate&sr=lcsinglefleet&pn=publicevents&fp=true&cfn=fcurrentfloorname&cfid="+i.fleetObj._id+"&cufloorid="+i.fleetObj.floorPlanFleetObj+"&cfleetid="+i.fleetObj._id+"&cbn="+a.fleetName+"&api=local&eid="+this.enterpriseId),this.router.navigate(["map"])},l=>{try{switch(l.status?JSON.parse(l.status):""){case 500:case 400:break;case 404:case 0:this.locateResReg(i)}}catch(r){this.loggerService.setLoggerError(this.constructor.name,"locateReserve",r)}})},a=>{try{switch(a.status?JSON.parse(a.status):""){case 500:case 400:break;case 404:case 0:this.locateResReg(i)}}catch(l){this.loggerService.setLoggerError(this.constructor.name,"locateReserve",l)}})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"locateReserve",e)}}locateResReg(i){try{this.langcode=localStorage.getItem(n.BU.LOGIN_USER_LANGUAGE),this.publicEventService.getResReg(i._id).then(e=>{let s="";if(s=i.fleetObj.floorPlanFleetObj,localStorage.setItem(n.BU.LAT,i.fleetObj.address.geoCoordinates[0]),localStorage.setItem(n.BU.LON,i.fleetObj.address.geoCoordinates[1]),s)this.commonServices.getFloorInfo(s,"fleet").then(a=>{this.commonServices.getbuildingFloorMapInfo(a.result.buildingCode).then(l=>{localStorage.setItem(n.BU.LC_EVENT_INFO,JSON.stringify(l)),localStorage.setItem(n.BU.F_CURRENT_FLOOR_NAME,a.result.currentFloor),localStorage.setItem(n.BU.MAP_URL,"?ut=locate&sr=lceventinfo&pn=publicevents&fp=true&cfn=fcurrentfloorname&cfid="+i._id+"&cufloorid="+s+"&cfleetid="+i.fleetObj._id+"&cbn="+l.fleetName+"&api=serviceRequest&eid="+this.enterpriseId)})},a=>{const l=a.status?JSON.parse(a.status):"",r=a._body?JSON.parse(a._body).statusCode:"";switch(l){case 500:break;case 400:"9961"===r?this.commonServices.updateToken(this.userToken).subscribe(g=>{localStorage.setItem(n.BU.TOKEN,g.result),this.userToken=localStorage.getItem(n.BU.TOKEN),this.locateResReg(i)}):(this.tostermsg=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_YOU_DON_T_HAVE_ACCESS_TO_LOCATE"),this.showToastMessage(this.tostermsg))}});else{const a=e.result.fleetAddress;e.result.fleetAddress=a.addressLine1+", "+a.addressLine2+", "+a.city+", "+a.state+", "+a.ZIP+", "+a.country;let r=e.result.fleetObj;delete e.result.fleetObj,e.result.fleetObj=r,r=e.result.resEmail,delete e.result.resEmail,e.result.resEmail=r,r=e.result.reserveStartDatetime,delete e.result.reserveStartDatetime,e.result.reserveStartDatetime=r,r=e.result.reserveEndDatetime,delete e.result.reserveEndDatetime,e.result.reserveEndDatetime=r,r=e.result.eventObj,delete e.result.eventObj,e.result.eventObj=r,r=e.result.eventName,delete e.result.eventName,e.result.eventName=r,localStorage.setItem(n.BU.LC_EVENT_INFO,JSON.stringify(e.result)),localStorage.setItem(n.BU.MAP_URL,"?ut=locate&sr=lceventinfo&pn=publicevents&cfid="+e.result._id+"&fp="+e.result.floorPlanDetails.floorPlanAvailable+"&eid="+this.enterpriseId)}},e=>{const s=e.status?JSON.parse(e.status):"",a=e._body?JSON.parse(e._body).statusCode:"";switch(s){case 500:break;case 400:"9961"===a?this.commonServices.updateToken(this.userToken).subscribe(l=>{localStorage.setItem(n.BU.TOKEN,l.result),this.userToken=localStorage.getItem(n.BU.TOKEN),this.locateResReg(i)}):(this.tostermsg=this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_YOU_DON_T_HAVE_ACCESS_TO_LOCATE"),this.showToastMessage(this.tostermsg))}})}catch(e){this.loggerService.setLoggerError(this.constructor.name,"locateResReg",e)}}showToastMessage(i){}ratenow(i,e){}getEvents(){this.router.navigate(["/events"])}eventDetails(i){localStorage.setItem(n.BU.EVENT_DETAILS,JSON.stringify(i)),this.ionViewWillEnter()}getPromotionsByFleetId(){try{this.promotionsListArray=[],this.publicEventService.getPromotions(this.enterpriseId,this.eventData.fleetId).then(e=>{if(e.length>0)if(this.deals=!0,e.length>3){this.viewMorePromotions=!0;for(let s=0;s<3;s++)this.promotionsListArray.push(e[s])}else this.viewMorePromotions=!1,this.promotionsListArray=e;else this.viewMorePromotions=!1,this.deals=!1;this.visualsLength=this.eventData.visuals.length,this.fleetCommonName=this.eventData.properties.fleetTypeDisplayName,this.visuals=this.eventData.visuals,0!==this.visualsLength&&void 0!==this.eventData.visuals[0].thumbnailPath&&(this.commonServices.isOnPlatform(this.platform)||(this.headerImage=this.localendpoint+this.eventData.visuals[0].thumbnailPath))},e=>{0===(e.status?JSON.parse(e.status):"")&&this.commonServices.getEnterpriseConfigData(this.enterpriseId).then(a=>{this.commonServices.isOnPlatform(this.platform)||(this.headerImage=this.localendpoint+a.topImage)},a=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseConfigData",a)})})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getPromotionsByFleetId",i)}}callResource(i){var e=this;return(0,w.Z)(function*(){try{const s=localStorage.getItem(n.BU.USER_TIME_ZONE),l=(new Date(e.commonServices.convertToUserTZ((new Date).getUTCFullYear()+"-"+((new Date).getUTCMonth()+1)+"-"+(new Date).getUTCDate()+" "+(new Date).getUTCHours()+":"+(new Date).getUTCMinutes(),"",s)),localStorage.getItem(n.BU.USERID)),r=localStorage.getItem(n.BU.USER_ACCOUNT),g=localStorage.getItem(n.BU.DEVICE_ID),m=localStorage.getItem(n.BU.FIRSTNAME),f=localStorage.getItem(n.BU.LASTNAME),_=(localStorage.getItem(n.BU.MOBILE_NUMBER_COUNTRY_CODE),localStorage.getItem(n.BU.MOBILE_NUMBER)),E=(localStorage.getItem(n.BU.TOKEN),{enterprise:{enterpriseId:e.enterpriseId,enterpriseName:e.enterpriseName},callFrom:{userId:l,userAccount:r,userName:m+" "+f,mobileNumberCountrycode:e.countrycode.replace("%2B","+"),mobileNumber:_},deviceId:g});e.commonServices.createCalldata(E).then(S=>{},S=>{const b=JSON.parse(S.status),T=JSON.parse(S._body).statusCode;switch(b){case 500:break;case 400:"9961"===T&&e.commonServices.updateToken(e.userToken).subscribe(v=>{localStorage.setItem(n.BU.TOKEN,v.result),e.userToken=localStorage.getItem(n.BU.TOKEN)})}});try{window.open("tel:"+e.phonenumber,"_system")}catch(S){e.loggerService.setLoggerError(e.constructor.name,"getAverageReviewlist",S)}}catch(s){e.loggerService.setLoggerError(e.constructor.name,"callResource",s)}})()}send(i){}fleetLocate(i,e){localStorage.setItem(n.BU.SELECTED_FLEET,JSON.stringify(e)),this.router.navigate(["/maps/maps/list"])}getMediaFiles(i,e){try{let s,a;if("header"==e?(i.headerImage=this.localendpoint+i.headerImageFilePath+"/"+i.headerImageFileName,s=i.headerImageFilePath,a=i.headerImageFileName):(i.image=this.localendpoint+i.fleetImageFilePath+"/"+i.fleetImageFileName,a=i.fleetImageFileName,s=i.headerImageFilePath),this.platform.is("android")||this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone")||this.platform.is("tablet"))try{this.syncService.getMobileAssetsData(s,a,"image").then(l=>{let r=this.sanitizer.bypassSecurityTrustUrl(l);"header"==e?i.headerImage=r:i.image=r}).catch(l=>{})}catch(l){this.loggerService.setLoggerError(this.constructor.name,"getMobileAssetsData",l)}}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getMediaFiles",s)}}static \u0275fac=function(e){return new(e||o)(t.Y36("apiEndPoint"),t.Y36(A.n),t.Y36(Jt.g),t.Y36(J.m),t.Y36(O.X1),t.Y36(Yt),t.Y36(U.F0),t.Y36(H.H7),t.Y36(I.Br),t.Y36(N.v),t.Y36(I.IN),t.Y36(O.SH),t.Y36(O.SH),t.Y36(O.t4),t.Y36(U.gz),t.Y36(V._),t.Y36(I.yF),t.Y36(C.sK))};static \u0275cmp=t.Xpm({type:o,selectors:[["app-eventsui-view"]],features:[t._Bn([N.v,O.X1,A.n]),t.qOj],decls:34,vars:22,consts:[[1,"container-fluid"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"pdb-90","position-relative"],[1,"justify-content-center"],["size","12",1,"ion-no-padding","ion-text-center"],[1,"mgt-5","mgl-10","mgr-10"],["onerror","this.onerror=null;this.src='assets/img/image_placeholder.jpg';",1,"img-detail",3,"src"],[1,"asset-detail","mbg-50"],[1,"asset-detail-wrapper"],[1,"mgl-0","mgr-0"],["size","12",1,"ion-no-padding"],["lines","none",1,"ion-no-padding","ion-no-border","event-details-item","pdl-5"],["item-start","",3,"class",4,"ngIf"],["class","event-asset-icon","id","imgid",4,"ngIf"],[1,"ion-no-margin","ion-no-padding","mgr-5"],["id","fleetnameid",1,"fs-13","event-fleet-name","ion-no-margin"],[1,"fs-13","event-date-info","ion-no-margin","ion-no-padding"],["shape","round","slot","end",1,"navigate-btn",3,"click"],["item-end","","name","locate",1,"circle-icon",2,"font-size","24px"],["size","12","class","ion-no-padding",4,"ngIf"],["class","detail-accordion-block",4,"ngIf"],[1,"detail-accordion-block"],["lines","none",1,"ion-no-padding","header-title-item",3,"click"],["slot","end",3,"name"],[1,"fs-14","fw-500"],["class","ion-no-padding event-contact-details pdt-0",4,"ngIf"],["item-start",""],["id","imgid",1,"event-asset-icon"],["onerror","this.onerror=null;this.src='assets/img/image_placeholder.jpg';",3,"src"],[1,"asset-detail-content"],[1,"ion-no-padding"],["lines","none",1,"star-rating","ion-no-padding"],["class","inline-block",4,"ngIf"],["class","inline-block fleet-ratenow-btn",4,"ngIf"],[1,"inline-block"],["activeIcon","ios-star","defaultIcon","ios-star","activeColor","green","defaultColor","grey","readonly","true",1,"inline-block",3,"rating"],[2,"color","black"],[1,"inline-block","fleet-ratenow-btn"],["class","inline-block","text-center","","id","ratenowid",3,"click",4,"ngIf"],["text-center","","id","ratenowid",1,"inline-block",3,"click"],["item-end","","md","md-heart","ios","ios-heart",1,"circle-icon"],[1,"vertical-align-m"],["item-end","","md","md-checkmark-circle","ios","ios-checkmark-circle",1,"circle-icon",2,"background","green"],[1,"vertical-align-m",2,"color","green"],["class","similar-items-content-list",4,"ngIf"],[1,"similar-items-content-list"],["class","ion-no-padding",4,"ngFor","ngForOf"],[1,"ion-justify-content-end","bdt-1"],["size","12",1,"ion-no-padding","ion-text-end"],["fill","none","color","primary",1,"ion-no-margin","viewall-btn",3,"click"],["slot","start","name","add-circle"],["lines","none",1,"ion-no-padding","similar-items",3,"id","click"],[1,"ion-no-padding","ion-no-margin"],[1,"ion-no-padding","event-contact-details","pdt-0"],[1,"address-list","pdt-0"],["class","ion-no-padding address-list-item","lines","none",4,"ngIf"],["class","ion-no-padding address-list-item","lines","none",3,"click",4,"ngIf"],["lines","none",1,"ion-no-padding","address-list-item"],["name","mail",1,"address-list-icon"],[1,"fs-13",3,"href"],["lines","none",1,"ion-no-padding","address-list-item",3,"click"],["name","location",1,"address-list-icon"],[1,"ion-no-padding","ion-no-margin","ion-text-wrap"],["id","addressid",1,"fs-13"],["name","call",1,"address-list-icon"],["id","phonenumberid",1,"fs-13"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-pageheader",3),t.qZA()(),t.TgZ(4,"div",4)(5,"ion-row",5)(6,"ion-col",6)(7,"div",7),t._UZ(8,"img",8),t.ALo(9,"imageTransform"),t.qZA()()(),t.TgZ(10,"div",9)(11,"div",10)(12,"ion-card",11)(13,"ion-row")(14,"ion-col",12)(15,"ion-item",13),t.YNc(16,Pt,1,3,"ion-avatar",14),t.YNc(17,Gt,3,5,"ion-avatar",15),t.TgZ(18,"ion-label",16)(19,"p",17),t._uU(20),t.qZA(),t.TgZ(21,"p",18),t._uU(22),t.qZA()(),t.TgZ(23,"ion-button",19),t.NdJ("click",function(){return s.fleetLocate("locate",s.facilityData)}),t._UZ(24,"ion-icon",20),t.qZA()()(),t.YNc(25,Qt,6,2,"ion-col",21),t.qZA()(),t.YNc(26,$t,7,5,"ion-card",22),t.TgZ(27,"ion-card",23)(28,"ion-item",24),t.NdJ("click",function(){return s.handleTab("contact")}),t._UZ(29,"ion-icon",25),t.TgZ(30,"ion-label",26),t._uU(31),t.ALo(32,"translate"),t.qZA()(),t.YNc(33,ie,7,3,"ion-card-content",27),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("pageName",s.dataJsonObj.pageName)("pageTitle",s.dataJsonObj.pageTitle)("selectedMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==s.dataJsonObj.queryParamsObj?null:s.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),t.xp6(5),t.Q6J("src",t.Dn7(9,16,null==s.eventData?null:s.eventData.headerImageFilePath,null==s.eventData?null:s.eventData.headerImageFileName,s.publishEnabled),t.LSH),t.xp6(8),t.Q6J("ngIf",!(null!=s.eventData&&s.eventData.fleetImageFilePath&&null!=s.eventData&&s.eventData.fleetImageFileName)),t.xp6(1),t.Q6J("ngIf",(null==s.eventData?null:s.eventData.fleetImageFilePath)&&(null==s.eventData?null:s.eventData.fleetImageFileName)),t.xp6(3),t.hij("",null==s.eventData?null:s.eventData.facility.facility_name," "),t.xp6(2),t.hij(" ",null==s.eventData?null:s.eventData.userStartTimeZone,""),t.xp6(3),t.Q6J("ngIf",!0===s.isRatingEnabled),t.xp6(1),t.Q6J("ngIf",!0===s.isSimilarAssetsEnabled),t.xp6(3),t.Q6J("name",s.contactEnable?"chevron-up":"chevron-down"),t.xp6(2),t.Oqu(t.lcZ(32,20,"COMMON_FIELDS.CONTACT")),t.xp6(2),t.Q6J("ngIf",s.contactEnable))},dependencies:[K.q,D.sg,D.O5,C.X$,Q.D]})}return o})(),data:{object_type:n.hf.EVENTS,title:"events View",responsibilityParam:n.bP.MENUS+"."+n.w1.EVENTS_UI+"."+n.Iu.ENABLED,pageName:n.hf.EVENTS_UI,pageSetting:n.AM.ACTIONS,settingField:n.In.VIEW}}]}];let ne=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=t.oAB({type:o});static \u0275inj=t.cJS({imports:[U.Bz.forChild(ae),U.Bz]})}return o})(),oe=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=t.oAB({type:o});static \u0275inj=t.cJS({imports:[C.aw,B.u5,B.UX,tt.U$,z.fx,et.Q,$.D,D.ez,X.Nh,ne]})}return o})()}}]);