"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6702],{86702:(ee,_,o)=>{o.r(_),o.d(_,{LiveEventsModule:()=>X});var f=o(36895),A=o(54463),N=o(24006),L=o(93144),P=o(32174),M=o(65673),V=o(32137),w=o(83748),s=o(32236),b=o(62510),E=o(11210),g=o(15861),I=o(42863),R=o(71568),B=o(47561),J=o(28168),U=o(34742),F=o(75023),C=o(30578),Y=o(42786),H=o(15439),Z=o(17857),k=o.n(Z),j=o(49670),r=o(94650),D=o(70057),W=o(15965),q=o(27601),x=o(37415),G=o(88425);const K=["datatableComponent"];function $(c,te){if(1&c){const t=r.EpF();r.TgZ(0,"app-datatable",8,9),r.NdJ("redirectionEvent",function(e){r.CHM(t);const i=r.oxw();return r.KtG(i.mobileEventAction(e))})("itemClickEvent",function(e){r.CHM(t);const i=r.oxw();return r.KtG(i.getRedirectEvents(e))})("actionClicked",function(e){r.CHM(t);const i=r.oxw();return r.KtG(i.onActionClicked(e))})("loadPageData",function(e){r.CHM(t);const i=r.oxw();return r.KtG(i.loadPageData(e))}),r.qZA()}if(2&c){const t=r.oxw();r.Q6J("header",t.headers)("data",t.liveEventsListData)("totalRecords",t.listingVariables.totalRecords)("totalPages",t.listingVariables.totalpages)("actions",t.actions)("mobileListData",t.liveEventsMobileListData)("paginator",!0)("expand",!1)("listingVariables",t.listingVariables)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("showSpinner",t.dataJsonObj.showSpinner)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)}}let O=(()=>{class c extends B.O{actionSheetController;columnheaders;eventsService;facilitiesService;loggerService;router;translateService;commonService;events;listingVariables;route;toastController;uiUtils;datatableComponent;searchString;headers;forceRefresh=!1;componentName="liveevents.component.ts";enterpriseId;liveEventsMobileListData;liveEventsListData;noDuplicates=void 0;utcTimeZoneString;defaultTimeZone;actions;today;mobileroutesArray;objectType;eventType;statusMobile;pageName;actionSheet;codeobj;login_enterprise_id;addressUrl;isFutureEvent=!1;isenabledtimer=!1;deadline;days;hours;minutes;seconds;eventStatusType;dataJsonObj={};userTimeZoneObj={};loginUserDateFormat;startDate;endDate;constructor(t,a,e,i,n,l,d,m,y,v,p,T,u){super(p,m),this.actionSheetController=t,this.columnheaders=a,this.eventsService=e,this.facilitiesService=i,this.loggerService=n,this.router=l,this.translateService=d,this.commonService=m,this.events=y,this.listingVariables=v,this.route=p,this.toastController=T,this.uiUtils=u,this.route.params.subscribe(S=>{}),this.route.queryParams.subscribe(S=>{this.dataJsonObj.queryParamsObj={defaultView:S.default_view,selectedMenuId:S.selectedMenuId,selectedSubMenuId:S.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.headers=this.columnheaders.getLiveEventsColumnHeaders(),this.enterpriseId=localStorage.getItem(s.BU.SELECTED_ENTERPRISE),this.getDynamicJson([{folderName:"event_categories",jsonType:"list",storingFieldName:"eventCategoriesJson"}]),this.getSportsJSONData(),this.dataJsonObj.pageName=s.hf.LIVE_EVENTS,this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.selectedMenu=JSON.parse(localStorage.getItem(s.BU.SELECTED_MENU)),this.dataJsonObj.selectedSubMenu=JSON.parse(localStorage.getItem(s.BU.MENU_CLICK_ITEM)),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"NEW_VARIABLES.LIVE_EVENTS",value:"",showSubMenuDisplayName:!0}],this.objectType=this.route.snapshot.data.object_type,this.objectType?this.objectType==s.hf.LIVE_EVENTS?(this.statusMobile="",this.pageName=s.a3.LIVE_EVENTS,this.objectType=s.hf.LIVE_EVENTS):this.objectType==s.hf.BUY_LIVE_EVENTS?(this.pageName=s.a3.BUY_LIVE_EVENTS,this.statusMobile=s.t3.OTHERS,this.objectType=s.hf.BUY_LIVE_EVENTS):this.objectType==s.hf.WEB_DASHBOARD&&(this.statusMobile="",this.objectType=s.hf.WEB_DASHBOARD):this.statusMobile="",this.login_enterprise_id=localStorage.getItem(s.BU.LOG_IN_ENTERPRISE_ID),this.EnableActionsBasedOnEvents(),this.searchString="",this.forceRefresh=!1,this.commonService.currentEvent.subscribe(e=>{"liveevents"===e&&(this.forceRefresh=!0)});const a=this.commonService.getLoginUserTimeZoneDateFormat();this.loginUserDateFormat=a.dateFormat,this.userTimeZoneObj=this.commonService.getUTCMinuteAndSign(a.timeZoneDescription),this.userTimeZoneObj.timeZoneCode=a.timeZoneCode,this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(s.hf.LIVE_EVENTS,s.AM.ACTIONS,s.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:s.gL.URL,redirectURL:"",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(s.hf.TOURNAMENT_EVENTS,s.AM.ACTIONS,s.In.COPY_LINK)&&this.dataJsonObj.pageActionsList.push({actionName:"CHEER_LINK",displayName:"COMMON_BUTTONS.BUTTON_CHEER",actionType:"",redirectURL:"",queryParams:"",iconClass:"fas fa-copy"}),this.roleRightsValidationByPage(s.hf.LIVE_EVENTS,s.AM.ACTIONS,s.In.FILTERS)}ngOnDestroy(){this.commonService.showHeaderFooter(),this.commonService.getDynamicHeight()}getDynamicJson(t){var a=this;return(0,g.Z)(function*(){for(let e of t)try{a.dataJsonObj[e.storingFieldName]=yield a.commonService.getDynamicJson(localStorage.getItem(s.BU.SELECTED_ENTERPRISE),e.folderName,e.jsonType,!0)}catch{a.dataJsonObj[e.storingFieldName]=[]}a.getEventCategoriesJSON()})()}getSportsJSONData(){var t=this;return(0,g.Z)(function*(){const a=yield t.commonService.getDynamicJsonByPath(`assets/enterprises/${t.enterpriseId}/sports/`,"sports.json");t.dataJsonObj.sportsJson=t.commonService.getFormattedSportsJSONBySport(a)})()}EnableActionsBasedOnEvents(){this.actions=this.objectType==s.hf.LIVE_EVENTS?{VIEW:this.roleRightsValidationByPage(s.hf.LIVE_EVENTS,s.AM.ACTIONS,s.In.VIEW),IPLAYBOARD:this.roleRightsValidationByPage(s.hf.IPLAY),WEBDASHBOARD:this.roleRightsValidationByPage(s.hf.WEB_DASHBOARD,s.AM.ACTIONS,s.In.WEB_DASHBOARD),COPY_LINK:this.roleRightsValidationByPage(s.hf.LIVE_EVENTS,s.AM.ACTIONS,s.In.COPY_LINK),EVENT_STATS_CREATE:this.roleRightsValidationByPage(s.hf.TOURNAMENT_EVENT_STATS,s.AM.ACTIONS,s.In.CREATE)||this.roleRightsValidationByPage(s.hf.TOURNAMENT_EVENT_STATS,s.AM.ACTIONS,s.In.EDIT)}:{WEBDASHBOARD:this.roleRightsValidationByPage(s.hf.WEB_DASHBOARD,s.AM.ACTIONS,s.In.WEB_DASHBOARD)}}getAllRecords(){try{const t=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.eventStatusType="liveevents";const a=this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"";this.showSpinner(),this.dataJsonObj.eventCategories=[s.iv.GAME,s.iv.ENTERTAINMENT],this.eventsService.getLiveEvents(this.enterpriseId,this.searchString,this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.forceRefresh,t,this.statusMobile,this.eventStatusType,a,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj,this.dataJsonObj.eventCategories).subscribe(e=>{if(this.hideSpinner(),e.rows.length>0)if(1==e.rows.length&&void 0!==this.objectType)this.objectType==s.hf.LIVE_EVENTS&&(this.commonService.redirectToUrl(["iotplay","tournamentevents",e.rows[0]._id,"iplay","ioteventsiplay-list"],!0,!1,{tournamentId:e.rows[0].tournament.tournament_id,eventId:e.rows[0]._id},this.route),this.router.routeReuseStrategy.clearModuleRouteCache("liveevents")),this.objectType==s.hf.WEB_DASHBOARD&&(localStorage.setItem(s.BU.EVENT_INFO,JSON.stringify(e.rows[0])),this.commonService.redirectToUrl(["iotplay","tournamentevents",e.rows[0]._id,"webdashboard","ioteventswebdashboard-list"],!0,!1,"",this.route));else{this.liveEventsMobileListData&&this.liveEventsMobileListData.length>0||(this.liveEventsMobileListData=[]);for(let i=0;i<e.rows.length;i++){const n={url:`sports/sporttournamenteventview/view/${e.rows[i]._id}`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},l=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?${JSON.stringify(n.queryParams)}`:n.url;e.rows[i].event_name=`<a class="enable" id="iot_event_name${e.rows[i]._id}" href=${l}>${e.rows[i].iot_event_name}`,e.rows[i].iot_event_display_name=e.rows[i].iot_event_name,e.rows[i].title=e.rows[i].iot_event_name+(e.rows[i]?.facility?.facility_name?" (Location: "+e.rows[i].facility.facility_name+")":""),e.rows[i].start=e.rows[i].start_datetime,e.rows[i].end=e.rows[i].end_datetime,e.rows[i].textColor="#FFFFFF",e.rows[i].url=n.queryParams&&Object.keys(n.queryParams).length>0?`${n.url}?defaultView=${this.dataJsonObj.queryParamsObj.defaultView}&selectedMenuId=${this.dataJsonObj.queryParamsObj.selectedMenuId}&selectedSubMenuId=${this.dataJsonObj.queryParamsObj.selectedSubMenuId}`:n.url,e.rows[i].page_name=this.pageName,e.rows[i].id=e.rows[i]._id,e.rows[i].imageName=e.rows[i].iot_event_name,e.rows[i].display_grid_title=e.rows[i].title,e.rows[i].imageDisplay=e.rows[i].iot_event_image_path&&e.rows[i].iot_event_image_name?e.rows[i].iot_event_image_path+"/"+e.rows[i].iot_event_image_name:null,delete e.rows[i].status,e.rows[i].sendRequest=e.rows[i].iot_event_name,e.rows[i].enterprise.enterpriseshort_name=e.rows[i].enterprise.short_name,e.rows[i].enterprise.short_name='<a class="enable" id="enterprise.short_name'+e.rows[i]._id+'" href="enterprises/enterprises/'+e.rows[i].enterprise.enterprise_id+'/view" >'+e.rows[i].enterprise.short_name,e.rows[i].user_event_name=e.rows[i].iot_event_name,e.rows[i].tournament_name=e.rows[i].tournament.tournament_name,e.rows[i].sport_name=e.rows[i]?.sport_id?.display_name;const d=this.displayDateFormatter(e.rows[i].start_datetime,!1,!0);this.startDate=d.startDate;const m=this.displayDateFormatter(e.rows[i].end_datetime,!1,!0);this.endDate=m.startDate;const v=this.displayDateFormatter((new Date).toISOString(),!1,!0).startDate,p=this.commonService.getUTCDateObj(this.startDate),T=this.commonService.getUTCDateObj(this.endDate),u=this.commonService.getUTCDateObj(v);if(e.rows[i].start_datetime=this.startDate+" "+this.userTimeZoneObj.timeZoneCode,e.rows[i].default_start_datetime=e.rows[i].start_datetime,e.rows[i].default_end_datetime=this.endDate+" "+this.userTimeZoneObj.timeZoneCode,e.rows[i].registration_close_datetime=e.rows[i].registration_close_datetime+" "+this.defaultTimeZone,e.rows[i].status={},e.rows[i].is_canceled?e.rows[i].statusDisplay=s.hf.CANCELED:p<u&&u<T?e.rows[i].statusDisplay=s.hf.STARTED:u>=T?e.rows[i].statusDisplay=s.hf.CLOSED:p>u&&(e.rows[i].statusDisplay=s.hf.YET_TO_START),e.rows[i].isEnabledText=e.rows[i].status.is_closed?"Inactive":"Active",e.rows[i].event_category){if(this.dataJsonObj?.eventCategoriesData&&this.dataJsonObj.eventCategoriesData.length>0)for(let h of this.dataJsonObj.eventCategoriesData)h.category_name===e.rows[i].event_category.category_name&&(e.rows[i].event_category.category_name=h.NAME,e.rows[i].color=h.color)}else e.rows[i].color="#354A21";this.liveEventsMobileListData.find(h=>h._id===parseInt(e.rows[i]._id,10))||(this.liveEventsMobileListData=this.liveEventsMobileListData.filter(h=>h._id!==e.rows[i]._id),this.liveEventsMobileListData.push(e.rows[i]))}e.totalCount&&(this.listingVariables.totalRecords=e.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=e.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.liveEventsListData=this.liveEventsListData.concat(e.rows)):this.liveEventsListData=e.rows}else this.commonService.redirectToUrl(["iotplay","iplay","list"],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)},e=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",e)})}catch(t){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.liveEventsMobileListData=[],this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.liveEventsMobileListData=[],this.getAllRecords(),this.datatableComponent.reset()}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.liveEventsMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}toAddStatuses(t,a,e,i){return{is_yts:t,is_started:a,is_closed:e,is_canceled:i}}viewRecord(t){try{this.roleRightsValidationByPage(s.hf.TOURNAMENT_EVENTS,s.AM.ACTIONS,s.In.VIEW)&&this.commonService.redirectToUrl(["sports","sporttournamenteventview","view",t.data._id],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(a){this.loggerService.setLoggerError(this.constructor.name,"viewRecord",a)}}getRedirectEvents(t){try{this.roleRightsValidationByPage(s.hf.TOURNAMENT_EVENTS,s.AM.ACTIONS,s.In.VIEW)&&this.commonService.redirectToUrl(["sports","sporttournamenteventview","view",t._id],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getRedirectEvents",a)}}presentActionSheet(t){var a=this;return(0,g.Z)(function*(){a.mobileroutesArray&&a.mobileroutesArray.length>0?(a.actionSheet=yield a.actionSheetController.create({cssClass:"actionsheet",buttons:a.mobileroutesArray}),yield a.actionSheet.present()):a.uiUtils.displayWarningMessage(a.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_PERFORM_ACTIONS"))})()}mobileEventAction(t){this.mobileroutesArray=[],this.roleRightsValidationByPage(s.hf.TOURNAMENT_EVENTS,s.AM.ACTIONS,s.In.VIEW)&&this.objectType===s.hf.LIVE_EVENTS?(this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),handler:()=>{this.commonService.redirectToUrl(["sports","sporttournamenteventview","view",t._id],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.roleRightsValidationByPage(s.hf.WEB_DASHBOARD)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_PAGE_TITLES.WEB_DASHBOARD"),handler:()=>{this.commonService.validateAccess()?this.commonService.accessDeniedPopup():this.commonService.redirectToUrl(["iotplay","tournamentevents",t._id,"webdashboard","ioteventswebdashboard-list"],!0,!1,"",this.route)}}),this.roleRightsValidationByPage(s.hf.IPLAY,s.AM.ACTIONS,s.In.PLAY)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_PAGE_TITLES.IPLAY_BOARD"),handler:()=>{this.commonService.validateAccess()?this.commonService.accessDeniedPopup():this.commonService.redirectToUrl(["iotplay","tournamentevents",t._id,"iplay","ioteventsiplay-list"],!0,!1,{tournamentId:t.tournament.tournament_id,eventId:t._id},this.route)}})):(this.roleRightsValidationByPage(s.hf.EVENTS,s.AM.ACTIONS,s.In.REQUEST)&&this.objectType!==s.hf.LIVE_EVENTS&&!t.Requested&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_REGISTER")+"/"+this.translateService.instant("COMMON_BUTTONS.BUTTON_BUY"),handler:()=>{this.eventsService.changeEvent({status:s.t3.REQUESTED}),this.commonService.redirectToUrl(["events","events",t._id,"mobileview"],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}}),this.roleRightsValidationByPage(s.hf.LIVE_EVENTS,s.AM.ACTIONS,s.In.LOCATE)&&this.mobileroutesArray.push({text:this.translateService.instant("NOTIFICATIONS.LOCATE"),handler:()=>{this.singlelocate("locate",t)}}),this.roleRightsValidationByPage(s.hf.WEB_DASHBOARD)&&!this.commonService.isMobileWindow()&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_PAGE_TITLES.WEB_DASHBOARD"),handler:()=>{this.commonService.validateAccess()?this.commonService.accessDeniedPopup():this.commonService.redirectToUrl(["iotplay","tournamentevents",t._id,"webdashboard","ioteventswebdashboard-list"],!0,!1,"",this.route)}})),this.mobileroutesArray.sort((a,e)=>a.text>e.text?1:-1),this.actionSheet&&this.actionSheet.dismiss(),this.presentActionSheet(t)}onActionClicked(t){try{t.action===s.hf.WEB_DASHBOARD?this.commonService.validateAccess()?this.commonService.accessDeniedPopup():(localStorage.setItem(s.BU.EVENT_INFO,JSON.stringify(t.data)),this.commonService.redirectToUrl(["iotplay","tournamentevents",t.data._id,"webdashboard","ioteventswebdashboard-list"],!0,!1,"",this.route)):t.action===s.A0.VIEW?this.commonService.redirectToUrl(["sports","sporttournamenteventview","view",t.data._id],!0,!1,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):t.action===s.hf.IPLAY_BOARD?this.commonService.validateAccess()?this.commonService.accessDeniedPopup():this.commonService.redirectToUrl(["iotplay","tournamentevents",t.data._id,"iplay","ioteventsiplay-list"],!0,!1,{tournamentId:t.data.tournament.tournament_id,eventId:t.data._id},this.route):t.action===s.A0.COPY_LINK?this.copyLinkButton(t.data):t.action===s.A0.EVENT_STATS_CREATE&&this.redirectToStatsPage(t.data)}catch(a){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",a)}}redirectToStatsPage(t){switch(this.dataJsonObj.sportsJson[t.sport_id._id+""].NAME){case this.translateService.instant("SPORTS.AMERICAN_FOOTBALL"):this.router.navigate(["sports/americanfootballstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}});break;case this.translateService.instant("SPORTS.BASKETBALL"):this.router.navigate(["sports/basketballstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}});break;case this.translateService.instant("SPORTS.SOCCER"):this.router.navigate(["sports/soccerstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}});break;case this.translateService.instant("SPORTS.CRICKET"):this.router.navigate(["sports/cricketstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}});break;case this.translateService.instant("SPORTS.BASEBALL"):this.router.navigate(["sports/baseballstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}});break;case this.translateService.instant("SPORTS.SOFTBALL"):this.router.navigate(["sports/softballstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}});break;case this.translateService.instant("SPORTS.VOLLEYBALL"):this.router.navigate(["sports/volleyballstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}});break;default:this.router.navigate(["sports/tournamenteventstat"],{queryParams:{eventId:t._id,eventName:t.iot_event_display_name}})}this.router.routeReuseStrategy.clearModuleRouteCache("liveevents")}copyLinkButton(t){const a=`${j.R4}cheer/${t.enterprise.enterprise_id}/${t._id}`,e=document.createElement("input");document.body.appendChild(e),e.value=a,e.select(),document.execCommand("copy"),document.body.removeChild(e),this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_COPY_LINK")}cheerLink(t){const a=`${j.R4}cheer/${t}`,e=document.createElement("input");document.body.appendChild(e),e.value=a,e.select(),document.execCommand("copy"),document.body.removeChild(e),this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_COPY_LINK")}singlelocate(t,a){if("INTERNAL"===a.event_location_type.lookup_name)this.facilitiesService.get(a.facility.facility_id).subscribe(e=>{this.facilitiesService.getBuildingId(a.facility.facility_id,"facilities").then(i=>{this.codeobj=i,localStorage.setItem(s.BU.SELECTED_FLEET,JSON.stringify({facilityId:a.facility.facility_id,geometry:{type:"Point",coordinates:[e.address.geo_coordinates[1],e.address.geo_coordinates[0]]}})),this.facilitiesService.getStaticContentJson(this.enterpriseId,this.codeobj.buildingCode,"").then(l=>{localStorage.setItem(s.BU.LC_SINGLE_FLEET,JSON.stringify(l)),localStorage.setItem(s.BU.F_CURRENT_FLOOR_NAME,this.codeobj.currentFloor),this.facilitiesService.singlelocateFleet(t,l.floorsData[0]._id,!0,"fcurrentfloorname",a.facility.facility_id,e.floor_plan_facilityObj,a.facility.facility_id,l.facility_name,e.address.geo_coordinates[0],e.address.geo_coordinates[1],"","",this.enterpriseId)})})});else{let e;const i=a.address.state.state_name+" "+a.address.ZIP;e=a.address.address_line2?a.address.address_line1+","+a.address.address_line2+","+a.address.city+","+i:a.address.address_line1+","+a.address.city+","+i,a.address.geo_coordinates[0]&&a.address.geo_coordinates[1]?(this.addressUrl=this.commonService.getLocationMapUrl(a.address.geo_coordinates[1]+","+a.address.geo_coordinates[0]),window.open(this.addressUrl[0],this.addressUrl[1])):(this.addressUrl=this.commonService.getLocationMapUrl(e),window.open(this.addressUrl[0],this.addressUrl[1]))}}socialShare(t){document.createElement("p");var e=document.getElementById("sharetag");e.classList.remove("d-none"),k().toPng(e).then(function(n){e.classList.add("d-none")})}rolerightsCheck(t){let a;return a=this.roleRightsValidationByPage(this.objectType==s.hf.LIVE_EVENTS?s.hf.LIVE_EVENTS:s.hf.BUY_LIVE_EVENTS,s.AM.ACTIONS,s.In[t]),a}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}onPageLevelActionClicked(t){"CHEER_LINK"===t.actionName&&this.cheerLink(this.enterpriseId)}displayDateFormatter(t,a,e){try{const i=e?this.commonService.convertDateToUserTimeZone(t,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):t,n={startDate:"",endDate:""};if(n.startDate=this.commonService.convertDateToUserFormat(i,s.eZ.HOURS_MINS,!0,"",!1),a){const l=e?this.commonService.convertDateToUserTimeZone(t,this.userTimeZoneObj.utcMinutes,this.userTimeZoneObj.utcMinutesSign):t,d=H.utc(l).add(2,"hours");n.endDate=this.commonService.convertDateToUserFormat(d,s.eZ.HOURS_MINS,!0,"",!1)}return n}catch(i){this.loggerService.setLoggerError(this.constructor.name,"displayDateFormatter",i)}}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}getEventCategoriesJSON(){var t=this;return(0,g.Z)(function*(){const a=t.dataJsonObj.eventCategoriesJson;t.dataJsonObj.eventCategoriesData=a?JSON.parse(JSON.stringify(a)):[];const e=[s.iv.GAME,s.iv.PRACTICE],i=a?a.find(n=>e.includes(n.category_name)):"";if(t.dataJsonObj.isGamePracticeFlag=!!i,t.dataJsonObj.isGamePracticeFlag)t.headers=t.columnheaders.getLiveEventsGamePracticesColumnHeaders(),t.headers[0]=t.roleRightsValidationByPage(s.hf.TOURNAMENTS)?t.headers[0]:t.headers[0].filter(n=>"tournament_name"!==n.field);else if(a&&1===a.length){const n=t.headers[0].findIndex(l=>"event_category.category_name"===l.field);-1!==n&&t.headers[0].splice(n,1)}})()}static \u0275fac=function(a){return new(a||c)(r.Y36(D.BX),r.Y36(I.Y),r.Y36(U.n),r.Y36(F.g),r.Y36(Y.m),r.Y36(b.F0),r.Y36(A.sK),r.Y36(R.v),r.Y36(W.z),r.Y36(C.v),r.Y36(b.gz),r.Y36(D.yF),r.Y36(q.s))};static \u0275cmp=r.Xpm({type:c,selectors:[["app-live-events"]],viewQuery:function(a,e){if(1&a&&r.Gf(K,5),2&a){let i;r.iGM(i=r.CRH())&&(e.datatableComponent=i.first)}},features:[r._Bn([C.v,I.Y]),r.qOj],decls:8,vars:12,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],[1,"card-body","pdt-0"],[3,"header","data","totalRecords","totalPages","actions","mobileListData","paginator","expand","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","redirectionEvent","itemClickEvent","actionClicked","loadPageData",4,"ngIf"],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"],[3,"header","data","totalRecords","totalPages","actions","mobileListData","paginator","expand","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","showSpinner","selectedSubMenuId","redirectionEvent","itemClickEvent","actionClicked","loadPageData"],["datatableComponent",""]],template:function(a,e){1&a&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),r.NdJ("headerItemClick",function(n){return e.onHeaderItemClick(n)}),r.qZA()(),r.TgZ(4,"div",4),r.YNc(5,$,2,16,"app-datatable",5),r.TgZ(6,"div",6)(7,"app-page-actions",7),r.NdJ("selectedAction",function(n){return e.onPageLevelActionClicked(n)}),r.qZA()()()()()),2&a&&(r.xp6(3),r.Q6J("pageName",e.dataJsonObj.pageName)("defaultView",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",e.dataJsonObj.pageActionsList)("pageTitle",e.dataJsonObj.pageTitle)("selectedMenuId",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==e.dataJsonObj.queryParamsObj?null:e.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),r.xp6(2),r.Q6J("ngIf",!e.isFutureEvent),r.xp6(2),r.Q6J("isFabDisplay",!0)("actionsList",e.dataJsonObj.pageActionsList))},dependencies:[f.O5,J.n,x.q,G.y]})}return c})();const Q=[{path:"",data:{title:"live events"},children:[{path:"",redirectTo:"liveevents/list",pathMatch:"full"},{path:"webdashboard/list",canActivate:[E.P],component:O,data:{object_type:s.hf.WEB_DASHBOARD,title:"Web Dashboard",pageName:s.hf.WEB_DASHBOARD}},{path:"buyliveevents/list",canActivate:[E.P],component:O,data:{object_type:s.hf.BUY_LIVE_EVENTS,title:"Buy Live Events",responsibilityParam:s.bP.MENUS+"."+s.w1.LIVE_EVENTS+"."+s.bP.SUBMENUS+"."+s.w1.BUY_LIVE_EVENTS+"."+s.In.ENABLED,pageName:s.hf.LIVE_EVENTS}},{path:"liveevents/list",canActivate:[E.P],component:O,data:{object_type:s.hf.LIVE_EVENTS,title:"Live Events",responsibilityParam:s.bP.MENUS+"."+s.w1.LIVE_EVENTS+"."+s.bP.SUBMENUS+"."+s.w1.LIVE_EVENTS+"."+s.In.ENABLED,pageName:s.hf.LIVE_EVENTS}},{path:"liveevents/:name/list",canActivate:[E.P],component:O,data:{object_type:s.hf.LIVE_EVENTS,title:"Live Events",responsibilityParam:s.bP.MENUS+"."+s.w1.LIVE_EVENTS+"."+s.bP.SUBMENUS+"."+s.w1.LIVE_EVENTS+"."+s.In.ENABLED,pageName:s.hf.LIVE_EVENTS}}]}];let z=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275mod=r.oAB({type:c});static \u0275inj=r.cJS({imports:[b.Bz.forChild(Q),b.Bz]})}return c})(),X=(()=>{class c{static \u0275fac=function(a){return new(a||c)};static \u0275mod=r.oAB({type:c});static \u0275inj=r.cJS({imports:[f.ez,A.aw,N.u5,N.UX,L.U$,P.fx,M.Q,V.D,w.v,z]})}return c})()}}]);