"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5658],{65658:(Fe,I,r)=>{r.r(I),r.d(I,{FeedbackModule:()=>Ie});var h=r(36895),g=r(54463),D=r(93144),v=r(32174),U=r(65673),x=r(3848),V=r(27809),Y=r(83748),u=r(62510),i=r(32236),C=r(11210),E=r(15861),F=r(42863),L=r(30578),j=r(47561),q=r(28168),y=r(71568),A=r(42786),f=r(89298),m=r(15439),e=r(94650),O=r(70057),J=r(27601),S=r(37415),K=r(88425);const Q=["datatableComponent"];let G=(()=>{class n extends j.O{feedbackService;commonService;actionSheetController;columnheaders;listingVariables;route;router;translateService;toastController;loggerService;uiUtils;datatableComponent;headers;searchString;forceRefresh;actions;enterpriseId;mobileroutesArray;fabMobileactions;feedbackMobileListData=[];feedbackListData;noDuplicates=void 0;navbarTitle;actedByObject;dataJsonObj={};constructor(a,s,t,o,d,c,b,p,_,k,T){super(c,s),this.feedbackService=a,this.commonService=s,this.actionSheetController=t,this.columnheaders=o,this.listingVariables=d,this.route=c,this.router=b,this.translateService=p,this.toastController=_,this.loggerService=k,this.uiUtils=T,this.route.queryParams.subscribe(N=>{this.dataJsonObj.queryParamsObj={defaultView:N.default_view,selectedMenuId:N.selectedMenuId,selectedSubMenuId:N.selectedSubMenuId,pageName:N.pageName}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.showSpinner(),this.dataJsonObj.pageName=i.hf.FEEDBACK,document.getElementsByTagName("body"),this.headers=this.columnheaders.getFeedbackHeaders(),this.searchString="",this.dataJsonObj.advancedSearchObj={},this.actions={EDIT:this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.EDIT)},this.enterpriseId=localStorage.getItem(i.BU.SELECTED_ENTERPRISE),this.dataJsonObj.objectTypeId="",this.getDynamicJson([{folderName:i.sb.MODULE_MANAGER,jsonType:"list",storingFieldName:"moduleDataListJson"},{folderName:i.sb.LOOKUP_CODES,jsonType:"view",storingFieldName:"lookupCodesViewJson"}]),this.forceRefresh=!1,this.commonService.currentEvent.subscribe(t=>{"feedback"===t&&(this.forceRefresh=!0)}),this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.FEEDBACK",value:"",showSubMenuDisplayName:!0}],this.actedByObject=JSON.parse(localStorage.getItem(i.BU.USER)),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:i.gL.URL,redirectURL:"feedback/feedback/feedback-create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.FILTERS)}ionViewWillEnter(){this.actions={EDIT:this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.EDIT)}}getDynamicJson(a){var s=this;return(0,E.Z)(function*(){for(let d of a)try{s.dataJsonObj[d.storingFieldName]=yield s.commonService.getDynamicJson(s.enterpriseId,d.folderName,d.jsonType)}catch{s.dataJsonObj[d.storingFieldName]={}}const o=(yield s.commonService.getAllPagesFromModuleManagerJSON(s.dataJsonObj.moduleDataListJson)).find(d=>d.module.page_name===s.dataJsonObj.queryParamsObj.pageName);s.dataJsonObj.objectTypeId=o?.module?.page_id?o.module.page_id:"",s.hideSpinner(),s.getAllRecords()})()}getSearchResults(a){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.getAllRecords(),this.datatableComponent.reset()}getAllRecords(){try{if(!this.dataJsonObj.showSpinner){const a=this.commonService.getMobileViewCondition(this.dataJsonObj.selectedDisplayView);this.feedbackService.getAll(this.searchString,this.enterpriseId,this.listingVariables.sortOrderColumn,this.listingVariables.rowsPerPage,this.listingVariables.pageNumbers,this.forceRefresh,a,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj,this.dataJsonObj.objectTypeId).subscribe(t=>{if(this.hideSpinner(),t.rows.length>0){this.feedbackMobileListData&&this.feedbackMobileListData.length>0||(this.feedbackMobileListData=[]);for(let o=0;o<t.rows.length;o++){t.rows[o].page_name="Feedback",this.navbarTitle=this.translateService.instant("COMMON_PAGE_TITLES.FACILITY_RESERVATION")+" - "+this.translateService.instant("COMMON_BUTTONS.BUTTON_VIEW"),t.rows[o].object.object_name='<a class="enable" id="feedback_type.lookup_id'+t.rows[o]._id+'" href="feedback/feedback/'+t.rows[o]._id+'/feedback-view">'+this.lookupLanguageTranslations(t.rows[o].feedback_type.lookup_id),t.rows[o].feedback_type.lookup_id='<a class="enable" id="feedback_type.lookup_id'+t.rows[o]._id+'" href="feedback/feedback/'+t.rows[o]._id+'/feedback-view">'+this.lookupLanguageTranslations(t.rows[o].feedback_type.lookup_id),t.rows[o].enterprise.short_name='<a class="enable" id="enterprise.short_name'+t.rows[o]._id+'" href="enterprises/enterprises/'+t.rows[o].enterprise.enterprise_id+'/view" >'+t.rows[o].enterprise.short_name,t.rows[o].feedbackDate=m(t.rows[o].feedback_date).format("DD-MMM-YYYY");const d=t.rows[o].feedback_reasons;let c="";for(let b of d)c=c+(c?", ":"")+(this.dataJsonObj.lookupCodesViewJson[b.lookup_id]?this.dataJsonObj.lookupCodesViewJson[b.lookup_id].lookup_display_name:"");t.rows[o].feedbackReasonsStr=c,this.feedbackMobileListData=this.feedbackMobileListData.filter(b=>b._id!==t.rows[o]._id),this.feedbackMobileListData.push(t.rows[o])}t.totalCount&&(this.listingVariables.totalRecords=t.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=t.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.feedbackListData=this.feedbackListData.concat(t.rows)):this.feedbackListData=t.rows}else this.feedbackListData=[],this.feedbackMobileListData=[]},t=>{this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)})}}catch(a){this.hideSpinner(),this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.feedbackMobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}createFeedback(){try{this.router.navigate(["feedback/feedback/feedback-create"])}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createFeedback",a)}}onItemClicked(a){this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.VIEW)&&(this.router.navigate(["feedback/feedback/"+a._id+"/feedback-view"]),this.router.routeReuseStrategy.clearModuleRouteCache("feedback"))}mobileEventAction(a){try{"Closed"!==a.feedback_status.lookup_display_name&&(this.actedByObject.user_id===a.created_by&&"Open"===this.lookupLanguageTranslations(a.feedback_status.lookup_id)||this.actedByObject?.selectedUserTypeObj?.user_type_name!==i.ox.ENTERPRISE_END_USER)?(this.mobileroutesArray=[],this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["feedback/feedback/"+a._id+"/feedback-edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("feedback")}}),this.presentActionSheet(a)):this.uiUtils.displayWarningMessage(this.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_PERFORM_ACTIONS"))}catch(s){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",s)}}presentActionSheet(a){var s=this;return(0,E.Z)(function*(){s.mobileroutesArray.length>0?yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileroutesArray})).present():s.uiUtils.displayWarningMessage(s.translateService.instant("COMMON_VALIDATION_MESSAGES.VALID_PERFORM_ACTIONS"))})()}onActionClicked(a){a.action===i.A0.EDIT&&this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.EDIT)&&"Closed"!==this.lookupLanguageTranslations(a.data.feedback_status.lookup_id)&&(this.actedByObject.user_id===a.data.created_by&&"Open"===this.lookupLanguageTranslations(a.data.feedback_status.lookup_id)||this.actedByObject?.selectedUserTypeObj?.user_type_name!==i.ox.ENTERPRISE_END_USER)&&(this.router.navigate(["feedback/feedback/"+a.data._id+"/feedback-edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("feedback"))}showSpinner(){this.dataJsonObj.showSpinner=!0}hideSpinner(){this.dataJsonObj.showSpinner=!1}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a?this.dataJsonObj.selectedFilter=a:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResults(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(s){return new(s||n)(e.Y36(f.T),e.Y36(y.v),e.Y36(O.BX),e.Y36(F.Y),e.Y36(L.v),e.Y36(u.gz),e.Y36(u.F0),e.Y36(g.sK),e.Y36(O.yF),e.Y36(A.m),e.Y36(J.s))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-feedback-list"]],viewQuery:function(s,t){if(1&s&&e.Gf(Q,5),2&s){let o;e.iGM(o=e.CRH())&&(t.datatableComponent=o.first)}},features:[e._Bn([f.T,L.v,F.Y]),e.qOj],decls:9,vars:28,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],[3,"header","actions","data","totalRecords","paginator","totalPages","mobileListData","expand","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","showSpinner","pageName","selectedMenuId","selectedSubMenuId","isImageDisplayEnabled","actionClicked","itemClickEvent","redirectionEvent","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(d){return t.onHeaderItemClick(d)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("actionClicked",function(d){return t.onActionClicked(d)})("itemClickEvent",function(d){return t.onItemClicked(d)})("redirectionEvent",function(d){return t.mobileEventAction(d)})("loadPageData",function(d){return t.loadPageData(d)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(d){return t.onPageLevelActionClicked(d)}),e.qZA()()()()()),2&s&&(e.xp6(3),e.Q6J("pageName",t.dataJsonObj.pageName)("defaultView",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",t.dataJsonObj.pageActionsList)("pageTitle",t.dataJsonObj.pageTitle)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",t.headers)("actions",t.actions)("data",t.feedbackListData)("totalRecords",t.listingVariables.totalRecords)("paginator",!0)("totalPages",t.listingVariables.totalpages)("mobileListData",t.feedbackMobileListData)("expand",!1)("listingVariables",t.listingVariables)("selectedDisplayViewType",t.dataJsonObj.selectedDisplayView)("selectedFilterType",t.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",t.dataJsonObj.selectedAdvancedSearchObj)("showSpinner",t.dataJsonObj.showSpinner)("pageName",t.dataJsonObj.pageName)("selectedMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.selectedSubMenuId)("isImageDisplayEnabled",!1),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",t.dataJsonObj.pageActionsList))},dependencies:[q.n,S.q,K.y]})}return n})();var M=r(2387),R=r(56368),H=r(98621),w=r(24929),B=r(11735),W=r(1029);function z(n,l){if(1&n&&(e.TgZ(0,"div",30),e._UZ(1,"app-pageheader",31),e.qZA()),2&n){const a=e.oxw();e.xp6(1),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0)("isEditActionEnable",a.dataJsonObj.isEditAction)}}function X(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0on"),e.qZA())}function ee(n,l){if(1&n&&(e.TgZ(0,"label",32),e._uU(1),e.qZA()),2&n){const a=e.oxw();e.xp6(1),e.hij('"',null==a.dataJsonObj||null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.objectName,'"')}}function ae(n,l){1&n&&(e.TgZ(0,"span",33),e._uU(1,"\u2605"),e.qZA()),2&n&&e.ekj("filled",l.$implicit)}function te(n,l){if(1&n&&e._UZ(0,"app-gallery",34),2&n){const a=e.oxw();e.Q6J("pageName",a.dataJsonObj.pageName)("digitalAssetType",a.dataJsonObj.digitalAssetType)("relatedTypeName",a.dataJsonObj.relatedTypeName)("relatedTypeRecordObj",a.dataJsonObj.relatedTypeRecordObj)}}let se=(()=>{class n extends j.O{apiEndPointUrl;loggerService;translateService;commonService;feedbackService;route;toastController;apiEndPoint;data=[];feedbackDate;headers;imgFilepath;recordId;viewData;dataJsonObj={};constructor(a,s,t,o,d,c,b){super(c,o),this.apiEndPointUrl=a,this.loggerService=s,this.translateService=t,this.commonService=o,this.feedbackService=d,this.route=c,this.toastController=b,this.route.params.subscribe(p=>{this.recordId=p.id}),this.route.queryParams.subscribe(p=>{this.dataJsonObj.queryParamsObj={defaultView:p.defaultView,selectedMenuId:p.selectedMenuId,selectedSubMenuId:p.selectedSubMenuId,objectId:p.eventId,objectName:p.eventName,pageName:p.pageName}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.mediaAction=this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.MEDIA_GALLERY),this.dataJsonObj.pageName=i.hf.FEEDBACK,this.dataJsonObj.rating=0,this.dataJsonObj.starCount=5,this.dataJsonObj.stars=[],this.updateStars(),this.dataJsonObj.selectedFeedbackReasonOptions=[],this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FEEDBACK",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.apiEndPoint=localStorage.getItem(i.BU.S3_URL)?localStorage.getItem(i.BU.S3_URL):this.apiEndPointUrl,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.RECORD_HISTORY),this.headers=[[{field:"action_taken_date",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-120 text-end"},{field:"action_taken",header:this.translateService.instant("NEW_VARIABLES.ACTION_TAKEN"),class:""},{field:"action_taken_by",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-200"}],[]],this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(i.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=i.hf.FEEDBACK,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}]),this.commonService.getLookupCodesListJson(this.dataJsonObj.enterpriseId,"list").then(s=>{this.dataJsonObj.lookupCodesListJSON=s,this.getRecordById()})}getDynamicJson(a){var s=this;return(0,E.Z)(function*(){for(let t of a)s.dataJsonObj[t.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.enterpriseId,t.folderName,t.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(t=>t.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(){try{this.feedbackService.get(this.recordId).subscribe(a=>{if(this.viewData=a,this.getMediaData(),this.dataJsonObj.rating=this.viewData.feedback_rating,this.updateStars(),this.dataJsonObj.feedbackReasons=[],this.viewData.feedback_reasons?.length>0)for(let s=0;s<this.viewData.feedback_reasons.length;s++)-1==this.dataJsonObj.feedbackReasons.indexOf(this.viewData.feedback_reasons[s].lookup_id)&&this.dataJsonObj.feedbackReasons.push(this.viewData.feedback_reasons[s].lookup_id);if(this.dataJsonObj.feedbackReasonsOptions=[],this.getFeedbackReasonslist(this.viewData?.feedback_type?.lookup_name),this.dataJsonObj.isEditAction=this.getIsEditAction(this.viewData),this.feedbackDate=m(this.viewData.feedback_date).format("DD-MMM-YYYY"),this.imgFilepath=this.viewData.feedback_message_file_path&&this.viewData.feedback_message_file_name?this.apiEndPoint+this.viewData.feedback_message_file_path+"/"+this.viewData.feedback_message_file_name:"",this.viewData.actions.length>0){this.data=[];for(let s=0;s<this.viewData.actions.length;s++)this.viewData.actions[s].action_taken_by=this.viewData.actions[s].action_taken_by.l_name+", "+this.viewData.actions[s].action_taken_by.f_name,this.viewData.actions[s].action_taken_date=m(this.viewData.actions[s].action_taken_date).format("DD-MMM-YYYY hh:mm"),this.data.push(this.viewData.actions[s])}else this.data=[];setTimeout(()=>{},500)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",a)}}getIsEditAction(a){this.dataJsonObj.actedByObject=JSON.parse(localStorage.getItem(i.BU.USER));const s=localStorage.getItem(i.BU.SELECTED_USER_TYPE_OBJ)?JSON.parse(localStorage.getItem(i.BU.SELECTED_USER_TYPE_OBJ)):{};return"CLOSED"!==a.feedback_status.lookup_name&&(this.dataJsonObj.actedByObject.user_id===a.created_by&&"OPEN"===a.feedback_status.lookup_name||s?.user_type_name!==i.ox.ENTERPRISE_END_USER)}cancelBtn(){this.commonService.redirectToPreviousUrl()}getMediaData(){this.dataJsonObj.relatedTypeName=this.MainMenuItems.FEEDBACK,this.dataJsonObj.relatedTypeRecordObj={id:this.viewData._id},this.dataJsonObj.pageName=i.hf.FEEDBACK}getFeedbackReasonslist(a){switch(a){case"GENERAL":this.dataJsonObj.lookupType=i.ox.FEEDBACK_GENERAL_REASONS;break;case"PRAISE":this.dataJsonObj.lookupType=i.ox.FEEDBACK_PRAISE_REASONS;break;case"COMPLAINT":this.dataJsonObj.lookupType=i.ox.FEEDBACK_COMPLAINT_REASONS}this.dataJsonObj.feedbackReasonsOptions=this.dataJsonObj.lookupCodesListJSON[this.dataJsonObj.lookupType],this.dataJsonObj.selectedFeedbackReasonOptions=[];for(let s=0;s<this.dataJsonObj?.feedbackReasonsOptions?.length;s++)-1!==this.dataJsonObj.feedbackReasons.indexOf(this.dataJsonObj.feedbackReasonsOptions[s].ID)&&this.dataJsonObj.selectedFeedbackReasonOptions.push(this.dataJsonObj.feedbackReasonsOptions[s])}updateStars(){this.dataJsonObj.stars=Array(this.dataJsonObj.starCount).fill(!1).map((a,s)=>s<this.dataJsonObj.rating)}static \u0275fac=function(s){return new(s||n)(e.Y36("apiEndPoint"),e.Y36(A.m),e.Y36(g.sK),e.Y36(y.v),e.Y36(f.T),e.Y36(u.gz),e.Y36(O.yF))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-feedback-view"]],features:[e.qOj],decls:42,vars:31,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["class","card-header card-header-primary","id","stickyHeaderID",4,"ngIf"],[1,"card-body"],[1,"feedback-wrapper"],[1,"feedback-fields-wrapper","w-100","pdl-10","pdr-10","pdt-10","pdb-10"],[1,"feedback-container","pd-0"],[1,"card","bd-0","mgt-0","pdl-10","pdr-10","pdt-10","pdb-10"],[1,"row","form-bs"],[1,"d-flex","align-items-center","flex-column","justify-content-center"],[1,"feedback-title","text-center"],[4,"ngIf"],["class","feedback-title-info fw-600 text-center",4,"ngIf"],[1,"star-rating","d-flex","align-items-center","justify-content-center"],["class","default-star",3,"filled",4,"ngFor","ngForOf"],[1,"col-md-6"],["disabled","true",3,"label","options","defaultValue"],["autoCaseFlag","true","disabled","true","id","feedback-view-feedbackDate",3,"label","value"],["mandatory","false","disabled","false","disabled","true","id","feedback-view-feedbackMessage","className","feedback-textarea",3,"label","defaultvalue","maxlength"],[1,"col-md-12","text-end","mt-2","mb-2"],["className","btn btn-danger btn-sm","id","lookupcode-view-close",3,"label","buttonOnClick"],[1,"row"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"pageName","digitalAssetType","relatedTypeName","relatedTypeRecordObj",4,"ngIf"],[3,"multiple"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","isEditActionEnable"],[1,"feedback-title-info","fw-600","text-center"],[1,"default-star"],[3,"pageName","digitalAssetType","relatedTypeName","relatedTypeRecordObj"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.YNc(5,z,2,7,"div",5),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",3)(13,"span",12)(14,"label",13),e._uU(15),e.ALo(16,"translate"),e.YNc(17,X,2,0,"span",14),e.qZA(),e.YNc(18,ee,2,1,"label",15),e.qZA(),e.TgZ(19,"div",16),e.YNc(20,ae,2,2,"span",17),e.qZA()(),e.TgZ(21,"div",18),e._UZ(22,"app-dropdown-multiselect",19),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",18),e._UZ(25,"app-input",20),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",3),e._UZ(28,"app-textarea",21),e.ALo(29,"translate"),e.qZA()()()()()()(),e.TgZ(30,"div",6)(31,"div",11)(32,"div",22)(33,"app-button",23),e.NdJ("buttonOnClick",function(){return t.cancelBtn()}),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"div",24)(36,"div",3)(37,"div",25)(38,"div",26),e.YNc(39,te,1,4,"app-gallery",27),e.TgZ(40,"p-accordion",28),e._UZ(41,"app-recordhistory",29),e.qZA()()()()()()()()()()()),2&s&&(e.xp6(5),e.Q6J("ngIf",t.viewData),e.xp6(10),e.Oqu(e.lcZ(16,21,"NEW_VARIABLES.THANK_YOU_FOR_PROVIDING_YOUR_FEEDBACK")),e.xp6(2),e.Q6J("ngIf",null==t.dataJsonObj||null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.objectName),e.xp6(1),e.Q6J("ngIf",null==t.dataJsonObj||null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.objectName),e.xp6(2),e.Q6J("ngForOf",t.dataJsonObj.stars),e.xp6(2),e.s9C("label",e.lcZ(23,23,"NEW_VARIABLES.FEEDBACK_TYPE_REASONS")),e.Q6J("options",t.dataJsonObj.selectedFeedbackReasonOptions)("defaultValue",t.dataJsonObj.feedbackReasons),e.xp6(3),e.s9C("label",e.lcZ(26,25,"NEW_VARIABLES.FEEDBACK_DATE")),e.s9C("value",t.feedbackDate),e.xp6(3),e.s9C("label",e.lcZ(29,27,"NEW_VARIABLES.FEEDBACK_MESSAGE")),e.s9C("defaultvalue",null==t.viewData?null:t.viewData.feedback_message),e.Q6J("maxlength",2e3),e.xp6(5),e.s9C("label",e.lcZ(34,29,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(6),e.Q6J("ngIf",(null==t.dataJsonObj?null:t.dataJsonObj.mediaAction)&&(null==t.dataJsonObj?null:t.dataJsonObj.relatedTypeRecordObj)),e.xp6(1),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("createdBy",null==t.viewData?null:t.viewData.created_by)("lastUpdatedBy",null==t.viewData?null:t.viewData.updated_by)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.viewData?null:t.viewData.createdAt)("lastUpdatedDate",null==t.viewData?null:t.viewData.updatedAt))},dependencies:[h.sg,h.O5,v.UQ,M.r,R.a,H.c,w.R,B.W,S.q,W.v,g.X$],styles:[".feedback-wrapper[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:100%;display:flex;justify-content:center}.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 auto;height:100%;overflow-y:auto;display:flex;align-items:center;justify-content:center;z-index:1}.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{height:100%;width:40%;position:relative;z-index:1;display:grid;place-items:center}.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;padding:0;display:flex;flex-direction:column;align-items:center;animation-name:card;animation-duration:.6s;animation-fill-mode:forwards;border:0px;box-shadow:0 2px 15px -3px #00000012,0 10px 20px -2px #0000000a;border-radius:30px}.star-rating[_ngcontent-%COMP%]{display:inline-flex;cursor:pointer}.star-rating[_ngcontent-%COMP%]   .default-star[_ngcontent-%COMP%]{color:#ccc;cursor:pointer;transition:color .3s;padding:0;margin:0 2px;line-height:1}.star-rating[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{background:radial-gradient(circle,#FFD700 60%,#FFA500 80%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}@media (max-width: 430px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:96%}}@media only screen and (min-width: 431px) and (max-width: 767px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:70%}}@media (min-width: 768px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:60%}}@media (min-width: 1200px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:40%}}"]})}return n})();var ie=r(57936),P=r(46448),ne=r(47178);const oe=["objectTypeDropdown"],de=["objectNameDropdown"],re=["feedbackMessageTitleValid"],le=["feedbackMessageValid"];function ce(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0on"),e.qZA())}function pe(n,l){if(1&n&&(e.TgZ(0,"label",35),e._uU(1),e.qZA()),2&n){const a=e.oxw();e.xp6(1),e.hij('"',null==a.dataJsonObj||null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.objectName,'"')}}function be(n,l){if(1&n){const a=e.EpF();e.TgZ(0,"span",36),e.NdJ("click",function(){const o=e.CHM(a).index,d=e.oxw();return e.KtG(d.setRating(o+1))})("mouseover",function(){const o=e.CHM(a).index,d=e.oxw();return e.KtG(d.highlightStars(o+1))})("mouseleave",function(){e.CHM(a);const t=e.oxw();return e.KtG(t.resetHighlight())}),e._uU(1,"\u2605"),e.qZA()}if(2&n){const a=l.index,s=e.oxw();e.ekj("filled",a<s.dataJsonObj.hoveredIndex||a<s.dataJsonObj.rating)}}function ue(n,l){1&n&&(e.TgZ(0,"span",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"NEW_VARIABLES.DO_YOU_WANT_TO_SEE_YOUR_FEEDBACK")))}function he(n,l){1&n&&(e.TgZ(0,"span",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"NEW_VARIABLES.DO_YOU_WANT_TO_SEE_YOUR_FEEDBACK_AND_ATTACHMENTS")))}let ge=(()=>{class n extends j.O{commonService;feedbackService;enterprisesService;toastController;uiUtils;router;route;translateService;loggerService;navigationService;objectTypeDropdown;objectNameDropdown;feedbackMessageTitleValid;feedbackMessageValid;enterpriseId;feedbackDate;enterpriseName;enterpriseViewId;enterpriseShortName;objectTypeOptions;error;defaultObjectType;objectTypeObj;defaultObjectTypeName;objectNameOptions;defaultObjectName;objectNameObj;feedbackTypeOptions;defaultfeedbackType;feedbackTypeObj;feedbackMessage;status="Open";feedbackMessageTitle;ObjectName;imgFilepath;imageError;imgFile;defaultObjectTypeDropdown;dataJsonObj={};applicationPagesJson;menuDataJson;headerAction;constructor(a,s,t,o,d,c,b,p,_,k){super(b,a),this.commonService=a,this.feedbackService=s,this.enterprisesService=t,this.toastController=o,this.uiUtils=d,this.router=c,this.route=b,this.translateService=p,this.loggerService=_,this.navigationService=k,this.route.queryParams.subscribe(T=>{this.dataJsonObj.queryParamsObj={objectId:T.eventId,objectName:T.eventName,pageName:T.pageName}})}ngOnInit(){this.headerAction={BACK:!0},this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=i.hf.FEEDBACK,this.dataJsonObj.rating=0,this.dataJsonObj.starCount=5,this.dataJsonObj.stars=[],this.updateStars(),this.dataJsonObj.selectedOptions=[],this.dataJsonObj.isEnableObjectNameSearch=!0,this.dataJsonObj.disableSubmitBtn=!0,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FEEDBACK",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=localStorage.getItem(i.BU.SELECTED_ENTERPRISE),this.feedbackDate=m(new Date).format("DD-MMM-YYYY"),this.getEnterprisesViewData(),this.dataJsonObj.recordActions={FEEDBACK:this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.MEDIA_GALLERY)},this.getDynamicJson([{folderName:"lookup_codes",jsonType:"list",storingFieldName:"lookupCodesListJson"},{folderName:i.sb.MODULE_MANAGER,jsonType:"list",storingFieldName:"moduleDataListJson"}]),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(s=>{this.dataJsonObj.lookupCodesListJSON=s})}getDynamicJson(a){var s=this;return(0,E.Z)(function*(){for(let t of a)try{s.dataJsonObj[t.storingFieldName]=yield s.commonService.getDynamicJson(s.enterpriseId,t.folderName,t.jsonType)}catch{s.dataJsonObj[t.storingFieldName]={}}s.dataJsonObj.moduleDataList=yield s.commonService.getAllPagesFromModuleManagerJSON(s.dataJsonObj.moduleDataListJson),s.dataJsonObj.moduleObj=s.dataJsonObj.moduleDataList.find(t=>t.module.page_name===s.dataJsonObj.queryParamsObj.pageName)})()}getEnterprisesViewData(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(a=>{this.enterpriseName=a.enterprise_name,this.enterpriseViewId=a._id,this.enterpriseShortName=a.short_name},a=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",a)}}getObjectType(a){this.commonService.getFilteredDynamicJSONData(this.applicationPagesJson,"NAME",a).then(s=>{this.objectTypeOptions=s}).catch(s=>{this.loggerService.setLoggerError(this.constructor.name,"getObjectType",s)})}changeObjectType(a){try{a?(this.defaultObjectType=a.NAME,this.objectTypeObj=a,this.defaultObjectTypeDropdown="Messages"===this.defaultObjectType?"conversationmessages":this.defaultObjectType.toLowerCase().replace(/\s/g,""),this.dataJsonObj.isEnableObjectNameSearch=!1,this.getObjectNames("")):(this.dataJsonObj.isEnableObjectNameSearch=!0,this.defaultObjectName="",this.objectNameObj="")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeObjectType",s)}}getObjectNames(a){this.defaultObjectTypeDropdown&&this.feedbackService.getObjectNames(this.defaultObjectTypeDropdown,this.enterpriseId,a).then(s=>{this.objectNameOptions=s}).catch(s=>{this.loggerService.setLoggerError(this.constructor.name,"getObjectNames",s)})}changeObjectName(a){try{this.defaultObjectName=a.NAME,this.objectNameObj=a}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeObjectName",s)}}getFeedbackType(a){this.dataJsonObj.feedbackTypeOptions=this.dataJsonObj.lookupCodesListJSON[i.ox.FEEDBACK_TYPES],this.dataJsonObj.feedbackTypeObj=this.dataJsonObj.feedbackTypeOptions.find(s=>s.lookup_name===a)}changeFeedbackType(a){try{this.defaultfeedbackType=a.value,this.feedbackTypeObj=this.feedbackTypeOptions.find(s=>s.ID===parseInt(this.defaultfeedbackType,10)),this.defaultObjectTypeName=this.feedbackTypeObj.NAME}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeFeedbackType",s)}}getFeedbackTypeReasons(a,s){this.dataJsonObj.feedbackTypeReasonOptions=this.dataJsonObj.lookupCodesListJSON[a]}changeFeedbackTypeReason(a){try{this.dataJsonObj.defaultfeedbackTypeReason=a.value.map(function(s){return s}),this.dataJsonObj.feedbackTypeReasonObj=a.value}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeGroupName",s)}}changeFeedbackMessage(a){this.feedbackMessage=a.value}changeFeedbackMessageTitle(a){this.feedbackMessageTitle=a.value}getProfileImage(a){try{""===a.error?(this.imageError="",this.imgFile=a.value):this.imageError=a.error}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getProfileImage",s)}}imageRemove(){try{this.imgFile="",this.imageError=""}catch(a){this.loggerService.setLoggerError(this.constructor.name,"imageRemove",a)}}createRecord(){this.dataJsonObj.disableSubmitBtn=!0;const a={enterprise:{enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},feedback_date:this.feedbackDate,object:{object_type:{page_id:this.dataJsonObj.moduleObj?.module.page_id,page_name:this.dataJsonObj.moduleObj?.module.page_name,page_display_name:this.dataJsonObj.moduleObj?.page_display_name},object_id:this.dataJsonObj.queryParamsObj?.objectId,object_name:this.dataJsonObj.queryParamsObj?.objectName},feedback_type:this.dataJsonObj.feedbackTypeObj,feedback_reasons:this.dataJsonObj.feedbackTypeReasonObj,feedback_rating:this.dataJsonObj.rating,feedback_message_title:this.feedbackMessageTitle,feedback_message:this.feedbackMessage};this.imgFile=this.imgFile?this.commonService.dataURItoImgBlob(this.imgFile,"image/jpeg"):"",this.feedbackService.create(a,this.imgFile).then(s=>{this.dataJsonObj.disableSubmitBtn=!1,this.dataJsonObj.feedbackId=s._id,this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_FEEDBACK"),this.router.routeReuseStrategy.clearModuleRouteCache("feedback"),this.redirectionPage()},s=>{this.dataJsonObj.disableSubmitBtn=!1,this.commonErrorCodes(JSON.parse(s))})}commonErrorCodes(a){const s=JSON.parse(a[i.BU.STATUS]);409===s&&(this.error="COMMON_STATUS_CODES."+s)}redirectToView(){this.commonService.removeCurrentRouteFromSessionStorage(),this.commonService.redirectToUrl(["feedback","feedback",this.dataJsonObj.feedbackId,"feedback-view"],!0,!1,{eventId:this.dataJsonObj.queryParamsObj.objectId,eventName:this.dataJsonObj.queryParamsObj.objectName,pageName:this.dataJsonObj.pageName},this.route),$("#exampleModal1").modal("hide")}cancel(){this.commonService.redirectToPreviousUrl(),$("#exampleModal1").modal("hide")}pageheadeActionClick(a){"BACK"==a.value&&this.cancel()}updateStars(){this.dataJsonObj.rating===this.dataJsonObj.stars.filter(a=>!0===a).length&&(this.dataJsonObj.rating=0,this.dataJsonObj.disableSubmitBtn=!0),this.dataJsonObj.selectedOptions=[],this.dataJsonObj.feedbackTypeReasonObj=[],this.dataJsonObj.feedbackTypeReasonOptions=[],this.dataJsonObj.selectedLookupType="",this.dataJsonObj.stars=Array(this.dataJsonObj.starCount).fill(!1).map((a,s)=>s<this.dataJsonObj.rating)}setRating(a){this.dataJsonObj.disableSubmitBtn=!1,this.dataJsonObj.rating=a,this.updateStars(),this.updateFeedbackTypesAndReasons(this.dataJsonObj.rating)}highlightStars(a){this.dataJsonObj.hoveredIndex=a}resetHighlight(){this.dataJsonObj.hoveredIndex=-1}updateFeedbackTypesAndReasons(a){switch(a){case 1:case 2:this.dataJsonObj.selectedLookupType=i.ox.FEEDBACK_COMPLAINT_REASONS,this.getFeedbackTypeReasons(i.ox.FEEDBACK_COMPLAINT_REASONS,""),this.getFeedbackType("COMPLAINT");break;case 3:this.dataJsonObj.selectedLookupType=i.ox.FEEDBACK_GENERAL_REASONS,this.getFeedbackTypeReasons(i.ox.FEEDBACK_GENERAL_REASONS,""),this.getFeedbackType("GENERAL");break;case 4:case 5:this.dataJsonObj.selectedLookupType=i.ox.FEEDBACK_PRAISE_REASONS,this.getFeedbackTypeReasons(i.ox.FEEDBACK_PRAISE_REASONS,""),this.getFeedbackType("PRAISE")}}redirectionPage(){try{this.confirmationPopup()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"redirectionPage",a)}}confirmationPopup(){try{$("#exampleModal1").modal("show"),$(".modal-backdrop").insertAfter("#exampleModal1")}catch(a){this.loggerService.setLoggerError(this.constructor.name,"confirmationPopup",a)}}static \u0275fac=function(s){return new(s||n)(e.Y36(y.v),e.Y36(f.T),e.Y36(ie.e),e.Y36(O.yF),e.Y36(J.s),e.Y36(u.F0),e.Y36(u.gz),e.Y36(g.sK),e.Y36(A.m),e.Y36(P.f))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-feedback-create"]],viewQuery:function(s,t){if(1&s&&(e.Gf(oe,5),e.Gf(de,5),e.Gf(re,5),e.Gf(le,5)),2&s){let o;e.iGM(o=e.CRH())&&(t.objectTypeDropdown=o.first),e.iGM(o=e.CRH())&&(t.objectNameDropdown=o.first),e.iGM(o=e.CRH())&&(t.feedbackMessageTitleValid=o.first),e.iGM(o=e.CRH())&&(t.feedbackMessageValid=o.first)}},features:[e._Bn([f.T]),e.qOj],decls:52,vars:38,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"feedback-wrapper"],[1,"feedback-fields-wrapper","w-100","pdl-10","pdr-10","pdt-10","pdb-30"],[1,"feedback-container","pd-0"],[1,"card","bd-0","mgt-0","pdl-10","pdr-10","pdt-10","pdb-10"],[1,"row","form-bs"],[1,"d-flex","align-items-center","flex-column","justify-content-center"],[1,"feedback-title","text-center"],[4,"ngIf"],["class","feedback-title-info fw-600 text-center",4,"ngIf"],[1,"star-rating","d-flex","align-items-center","justify-content-center"],["class","default-star",3,"filled","click","mouseover","mouseleave",4,"ngFor","ngForOf"],["disabled","false","mandatory","false","id","feedback-create-feedbacktypereason",3,"label","options","selectedOptions","valueChange","searchValueChange"],["mandatory","false","disabled","false","id","feedback-create-feedbackMessage","className","feedback-textarea",3,"label","defaultvalue","maxlength","valueChange"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","feedback-create-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","feedback-create-cancel",3,"label","buttonOnClick"],[1,"text-danger","text-center"],["id","exampleModal1","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-md","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","ios-content"],[1,"col-md-12","d-flex","justify-content-center","align-items-center"],[1,"w-100","d-flex","justify-content-center","align-items-center"],["class","fs-13",4,"ngIf"],[1,"col-md-12","text-center"],[1,"fw-600","fs-12","btn","btn-link","pdr-0","pdl-0","cursor-pointer","mgr-10",3,"click"],[1,"fw-600","fs-12","btn","btn-link","pdr-0","pdl-0","cursor-pointer",3,"click"],[1,"feedback-title-info","fw-600","text-center"],[1,"default-star",3,"click","mouseover","mouseleave"],[1,"fs-13"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",3)(14,"span",13)(15,"label",14),e._uU(16),e.ALo(17,"translate"),e.YNc(18,ce,2,0,"span",15),e.qZA(),e.YNc(19,pe,2,1,"label",16),e.qZA(),e.TgZ(20,"div",17),e.YNc(21,be,2,2,"span",18),e.qZA()(),e.TgZ(22,"div",3)(23,"app-dropdown-multiselect-v2",19),e.NdJ("valueChange",function(d){return t.changeFeedbackTypeReason(d)})("searchValueChange",function(d){return t.getFeedbackTypeReasons(t.dataJsonObj.selectedLookupType,d)}),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"div",3)(26,"app-textarea",20),e.NdJ("valueChange",function(d){return t.changeFeedbackMessage(d)}),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",21)(29,"app-button",22),e.NdJ("buttonOnClick",function(){return t.createRecord()}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"app-button",23),e.NdJ("buttonOnClick",function(){return t.cancel()}),e.ALo(32,"translate"),e.qZA()()()()()()()(),e.TgZ(33,"div",24),e._uU(34),e.ALo(35,"translate"),e.qZA()()()()()(),e.TgZ(36,"div",25)(37,"div",26)(38,"div",27)(39,"div",28)(40,"div",12)(41,"div",29)(42,"div",30),e.YNc(43,ue,3,3,"span",31),e.YNc(44,he,3,3,"span",31),e.qZA()(),e.TgZ(45,"div",32)(46,"span",33),e.NdJ("click",function(){return t.redirectToView()}),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"span",34),e.NdJ("click",function(){return t.cancel()}),e._uU(50),e.ALo(51,"translate"),e.qZA()()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(10),e.Oqu(e.lcZ(17,22,"NEW_VARIABLES.FEEDBACK_DISPLAY_MESSAGE")),e.xp6(2),e.Q6J("ngIf",null==t.dataJsonObj||null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.objectName),e.xp6(1),e.Q6J("ngIf",null==t.dataJsonObj||null==t.dataJsonObj.queryParamsObj?null:t.dataJsonObj.queryParamsObj.objectName),e.xp6(2),e.Q6J("ngForOf",t.dataJsonObj.stars),e.xp6(2),e.s9C("label",e.lcZ(24,24,"NEW_VARIABLES.FEEDBACK_TYPE_REASONS")),e.Q6J("options",t.dataJsonObj.feedbackTypeReasonOptions)("selectedOptions",t.dataJsonObj.selectedOptions),e.xp6(3),e.s9C("label",e.lcZ(27,26,"POSTS.POST_COMMENTS")),e.s9C("defaultvalue",t.feedbackMessage),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(30,28,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",null==t.dataJsonObj?null:t.dataJsonObj.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(32,30,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(35,32,t.error)," "),e.xp6(9),e.Q6J("ngIf",!(null!=t.dataJsonObj&&null!=t.dataJsonObj.recordActions&&t.dataJsonObj.recordActions.FEEDBACK)),e.xp6(1),e.Q6J("ngIf",null==t.dataJsonObj||null==t.dataJsonObj.recordActions?null:t.dataJsonObj.recordActions.FEEDBACK),e.xp6(3),e.Oqu(e.lcZ(48,34,"COMMON_BUTTONS.BUTTON_YES")),e.xp6(3),e.Oqu(e.lcZ(51,36,"COMMON_BUTTONS.BUTTON_NO")))},dependencies:[h.sg,h.O5,M.r,ne.E,w.R,S.q,g.X$],styles:[".feedback-wrapper[_ngcontent-%COMP%]{margin:0 auto;width:100%;height:100%;display:flex;justify-content:center}.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]{position:relative;margin:0 auto;height:100%;overflow-y:auto;display:flex;align-items:center;justify-content:center;z-index:1}.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{height:100%;width:40%;position:relative;z-index:1;display:grid;place-items:center}.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;padding:0;display:flex;flex-direction:column;align-items:center;animation-name:card;animation-duration:.6s;animation-fill-mode:forwards;border:0px;box-shadow:0 2px 15px -3px #00000012,0 10px 20px -2px #0000000a;border-radius:30px}.star-rating[_ngcontent-%COMP%]{display:inline-flex;cursor:pointer}.star-rating[_ngcontent-%COMP%]   .default-star[_ngcontent-%COMP%]{color:#ccc;cursor:pointer;transition:color .3s;padding:0;margin:0 2px;line-height:1}.star-rating[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]{background:radial-gradient(circle,#FFD700 60%,#FFA500 80%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-fill-color:transparent}@media (max-width: 430px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:96%}}@media only screen and (min-width: 431px) and (max-width: 767px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:70%}}@media (min-width: 768px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:60%}}@media (min-width: 1200px){.feedback-wrapper[_ngcontent-%COMP%]   .feedback-fields-wrapper[_ngcontent-%COMP%]   .feedback-container[_ngcontent-%COMP%]{width:40%}}"]})}return n})();var Z=r(10805),me=r(9851),fe=r(68653);const Oe=["feedbackMessageValid"];function _e(n,l){if(1&n){const a=e.EpF();e.TgZ(0,"app-dropdown-singleselect",59),e.NdJ("valueChange",function(t){e.CHM(a);const o=e.oxw();return e.KtG(o.changeStatus(t))}),e.ALo(1,"translate"),e.qZA()}if(2&n){const a=e.oxw();e.s9C("label",e.lcZ(1,3,"COMMON_FIELDS.STATUS")),e.s9C("defaultValue",a.statusId),e.Q6J("options",a.statusOptions)}}function ke(n,l){if(1&n&&(e._UZ(0,"app-input",60),e.ALo(1,"translate")),2&n){const a=e.oxw();e.s9C("label",e.lcZ(1,2,"COMMON_FIELDS.STATUS")),e.s9C("value",a.lookupLanguageTranslations(null==a.viewData||null==a.viewData.feedback_status?null:a.viewData.feedback_status.lookup_id))}}function Te(n,l){if(1&n){const a=e.EpF();e.TgZ(0,"app-textarea",61,62),e.NdJ("valueChange",function(t){e.CHM(a);const o=e.oxw();return e.KtG(o.changeFeedbackMessage(t))}),e.ALo(2,"translate"),e.qZA()}if(2&n){const a=e.oxw();e.s9C("label",e.lcZ(2,3,"NEW_VARIABLES.FEEDBACK_MESSAGE")),e.s9C("defaultvalue",a.feedbackMessage),e.Q6J("maxlength",2e3)}}function ve(n,l){if(1&n&&(e._UZ(0,"app-textarea",63),e.ALo(1,"translate")),2&n){const a=e.oxw();e.s9C("label",e.lcZ(1,3,"NEW_VARIABLES.FEEDBACK_MESSAGE")),e.s9C("defaultvalue",null==a.viewData?null:a.viewData.feedback_message),e.Q6J("maxlength",2e3)}}function Ce(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td",65),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const a=e.oxw().$implicit;e.xp6(1),e.uIk("colspan",a[0].length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Ee(n,l){if(1&n&&e.YNc(0,Ce,4,4,"tr",64),2&n){const a=e.oxw();e.Q6J("ngIf",a.data&&0===a.data.length)}}function je(n,l){if(1&n&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const a=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,a.header)," ")}}function ye(n,l){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,je,3,3,"th",66),e.qZA()),2&n){const a=l.$implicit;e.xp6(1),e.Q6J("ngForOf",a[0])}}function Ae(n,l){if(1&n&&(e.TgZ(0,"td",68),e._uU(1),e.qZA()),2&n){const a=l.$implicit,s=e.oxw().$implicit;e.Gre("",a.class," cursor-pointer"),e.Q6J("pSelectableRow",s),e.xp6(1),e.hij(" ",s[a.field]," ")}}function Se(n,l){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,Ae,2,5,"td",67),e.qZA()),2&n){const a=l.columns;e.xp6(1),e.Q6J("ngForOf",a[0])}}function Ne(n,l){if(1&n&&(e.TgZ(0,"div",3)(1,"strong"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4," : "),e._UZ(5,"span",70)(6,"br"),e.qZA()),2&n){const a=l.$implicit,s=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,a.header)),e.xp6(3),e.Q6J("innerHTML",s[a.field],e.oJD)}}function De(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td")(2,"div",2),e.YNc(3,Ne,7,4,"div",69),e.qZA()()()),2&n){const a=l.columns;e.xp6(1),e.uIk("colspan",a[0].length+2),e.xp6(2),e.Q6J("ngForOf",a[1])}}const Me=[{path:"",data:{title:"Feedback"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:G,canActivate:[C.P],data:{title:"Feedback List",responsibilityParam:i.bP.MENUS+"."+i.w1.PROFILE_MENU+"."+i.bP.SUBMENUS+"."+i.w1.FEEDBACK+"."+i.In.ENABLED,pageName:i.hf.FEEDBACK}},{path:"feedback/:id/feedback-view",component:se,canActivate:[C.P],data:{title:"feedback view",responsibilityParam:i.bP.MENUS+"."+i.w1.PROFILE_MENU+"."+i.bP.SUBMENUS+"."+i.w1.FEEDBACK+"."+i.In.VIEW,pageName:i.hf.FEEDBACK,pageSetting:i.AM.ACTIONS,settingField:i.In.VIEW}},{path:"feedback/feedback-create",component:ge,canActivate:[C.P],data:{title:"feedback create",responsibilityParam:i.bP.MENUS+"."+i.w1.PROFILE_MENU+"."+i.bP.SUBMENUS+"."+i.w1.FEEDBACK+"."+i.In.CREATE,pageName:i.hf.FEEDBACK,pageSetting:i.AM.ACTIONS,settingField:i.In.CREATE}},{path:"feedback/:id/feedback-edit",component:(()=>{class n extends j.O{commonService;toastController;uiUtils;router;apiEndPointUrl;route;translateService;loggerService;navigationService;feedbackService;feedbackMessageValid;recordId;viewData;feedbackDate;imgFilepath;apiEndPoint;headers;date;actedBy;actionTaken;statusId;statusOptions;statusName;statusObj;enterpriseId;data=[];actedByObject;rowIndex;error;feedbackMessage;editFlag=!1;dataJsonObj={};constructor(a,s,t,o,d,c,b,p,_,k){super(c,a),this.commonService=a,this.toastController=s,this.uiUtils=t,this.router=o,this.apiEndPointUrl=d,this.route=c,this.translateService=b,this.loggerService=p,this.navigationService=_,this.feedbackService=k}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=i.hf.FEEDBACK,this.dataJsonObj.enumValuesJson={lookupTypes:i.ox},this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.FEEDBACK",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.apiEndPoint=localStorage.getItem(i.BU.S3_URL)?localStorage.getItem(i.BU.S3_URL):this.apiEndPointUrl,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(i.hf.FEEDBACK,i.AM.ACTIONS,i.In.RECORD_HISTORY),this.headers=[[{field:"action_taken_date_display",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-120 text-end"},{field:"action_taken",header:this.translateService.instant("NEW_VARIABLES.ACTION_TAKEN"),class:""},{field:"action_taken_by_display",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-200"}],[]],this.date=m(new Date).format("DD-MMM-YYYY"),this.actedByObject=JSON.parse(localStorage.getItem(i.BU.USER)),this.actedBy=this.actedByObject.l_name+", "+this.actedByObject.f_name,this.enterpriseId=localStorage.getItem(i.BU.SELECTED_ENTERPRISE),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(a=>{this.dataJsonObj.lookupCodesListJSON=a,this.getStatus()}),this.route.params.subscribe(a=>{this.recordId=a.id,this.getRecordById()})}onClick(a){a.stopPropagation()}getRecordById(){try{this.feedbackService.get(this.recordId).subscribe(a=>{if(this.viewData=a,this.feedbackDate=m(this.viewData.feedback_date).format("DD-MMM-YYYY"),this.imgFilepath=this.viewData.feedback_message_file_path&&this.viewData.feedback_message_file_name?this.apiEndPoint+this.viewData.feedback_message_file_path+"/"+this.viewData.feedback_message_file_name:"",this.statusObj=this.viewData.feedback_status,this.statusId=this.viewData.feedback_status.lookup_id,this.feedbackMessage=this.viewData.feedback_message,this.actedByObject.user_id===this.viewData.created_by.user_id&&"OPEN"===this.viewData.feedback_status.lookup_name&&(this.editFlag=!0),this.viewData.actions.length>0){this.data=[];for(let s=0;s<this.viewData.actions.length;s++)this.date="",this.date=m(this.viewData.actions[s].action_taken_date).format("DD-MMM-YYYY hh:mm"),this.viewData.actions[s].action_taken_date_display=this.date,this.viewData.actions[s].action_taken_by_display=this.viewData.actions[s].action_taken_by.l_name+", "+this.viewData.actions[s].action_taken_by.f_name,this.viewData.actions[s].action_taken_by=this.viewData.actions[s].action_taken_by.user_id,this.data.push(this.viewData.actions[s])}else this.data=[]})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",a)}}changeAction(a){this.actionTaken=a.value}changeFeedbackMessage(a){this.feedbackMessage=a.value}getStatus(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[i.ox.FEEDBACK_STATUSES],"").then(a=>{this.statusOptions=a},a=>{this.loggerService.setLoggerError(this.constructor.name,"getObjectType",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getObjectType",a)}}changeStatus(a){this.statusId=a.value,this.statusObj=this.statusOptions.find(s=>s.ID===parseInt(this.statusId,10)),this.statusName=this.statusObj.NAME}updateRecord(){if(!this.editFlag||this.feedbackMessageValid.isValid()){const a={enterprise:{enterprise_id:this.viewData.enterprise.enterprise_id,enterprise_name:this.viewData.enterprise.enterprise_name,short_name:this.viewData.enterprise.short_name},feedback_date:this.viewData.feedback_date,object:{object_type:this.viewData.object.object_type,object_id:this.viewData.object.object_id,object_name:this.viewData.object.object_name},action_taken:this.actionTaken,feedback_type:this.viewData.feedback_type,feedback_message_title:this.viewData.feedback_message_title,feedback_message:this.feedbackMessage,feedback_status:this.statusObj,actions:this.data,original_feedback_message_file_name:this.viewData.feedback_message_file_name};this.imgFilepath=this.imgFilepath,this.feedbackService.update(a,this.recordId,this.imgFilepath).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},s=>{this.commonErrorCodes(JSON.parse(s))})}}cancel(){this.commonService.redirectToPreviousUrl()}commonErrorCodes(a){const s=JSON.parse(a[i.BU.STATUS]);409===s&&(this.error="COMMON_STATUS_CODES."+s)}static \u0275fac=function(s){return new(s||n)(e.Y36(y.v),e.Y36(O.yF),e.Y36(J.s),e.Y36(u.F0),e.Y36("apiEndPoint"),e.Y36(u.gz),e.Y36(g.sK),e.Y36(A.m),e.Y36(P.f),e.Y36(f.T))};static \u0275cmp=e.Xpm({type:n,selectors:[["app-feedback-edit"]],viewQuery:function(s,t){if(1&s&&e.Gf(Oe,5),2&s){let o;e.iGM(o=e.CRH())&&(t.feedbackMessageValid=o.first)}},features:[e.qOj],decls:109,vars:102,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-lg-11","col-md-10","order-md-1","order-2"],[1,"row"],[1,"col-md-4"],["disabled","true","id","feedback-edit-enterprise",3,"label","value"],["autoCaseFlag","true","disabled","true","id","feedback-edit-feedbackDate",3,"label","value"],["disabled","true","id","feedback-edit-objecttype",3,"label","value"],["disabled","true","id","feedback-edit-objectname",3,"label","value"],["disabled","true","id","feedback-edit-feedbacktype",3,"label","value"],["disabled","false","mandatory","true","id","feedback-edit-status",3,"label","defaultValue","options","valueChange",4,"ngIf"],["disabled","true","disabled","true","id","feedback-view-status",3,"label","value",4,"ngIf"],[1,"col-lg-1","col-md-2","pdl-0","order-md-1"],[3,"defaultImage","imageName"],[1,"col-md-4","order-md-1","order-2"],["disabled","true","id","feedback-edit-feedbackmessagetitle",3,"label","value"],["mandatory","false","id","feedback-edit-add-actionTaken","disabled","false",3,"label","value","valueChange"],[1,"col-md-9","order-md-1","order-2"],["mandatory","true","disabled","false","id","feedback-create-feedbackMessage",3,"label","defaultvalue","maxlength","valueChange",4,"ngIf"],["mandatory","true","disabled","true","id","feedback-edit-feedbackMessage",3,"label","defaultvalue","maxlength",4,"ngIf"],[1,"col-md-3","text-end","mt-2","order-md-1","order-2"],["className","btn btn-primary btn-sm","id","feedback-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","feedback-edit-cancel",3,"label","buttonOnClick"],[1,"text-danger","text-center"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","addFeedbackAction","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header",2,"border-top-left-radius","2px","border-top-right-radius","2px"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body","ios-content"],["mandatory","false","id","feedback-edit-actionDate","disabled","true",3,"label","value"],["mandatory","true","id","feedback-edit-add-actionTaken","disabled","false",3,"label","value","valueChange"],["actionTakenValid",""],["mandatory","false","id","feedback-edit-add-actedBy","disabled","true",3,"label","value"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","feedback-edit-add",1,"mgr-5",3,"label"],["className","btn btn-danger btn-sm","data-bs-dismiss","modal","aria-label","Close","id","feedback-edit-close",3,"label"],["id","deleteFeedbackAction","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["mandatory","true","id","feedback-edit-delete-actionTaken","disabled","true",3,"label","value","valueChange"],["mandatory","false","id","feedback-edit-delete-actedBy","disabled","true",3,"label","value"],["className","btn btn-primary btn-sm","id","feedback-edit-delete",1,"mgr-5",3,"label"],["disabled","false","mandatory","true","id","feedback-edit-status",3,"label","defaultValue","options","valueChange"],["disabled","true","disabled","true","id","feedback-view-status",3,"label","value"],["mandatory","true","disabled","false","id","feedback-create-feedbackMessage",3,"label","defaultvalue","maxlength","valueChange"],["feedbackMessageValid",""],["mandatory","true","disabled","true","id","feedback-edit-feedbackMessage",3,"label","defaultvalue","maxlength"],[4,"ngIf"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow","class",4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"app-input",12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11),e._UZ(15,"app-input",13),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-input",14),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",11),e._UZ(21,"app-input",15),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",11),e._UZ(24,"app-input",16),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",11),e.YNc(27,_e,2,5,"app-dropdown-singleselect",17),e.YNc(28,ke,2,4,"app-input",18),e.qZA()()(),e.TgZ(29,"div",19),e._UZ(30,"app-imageupload",20),e.qZA(),e.TgZ(31,"div",21),e._UZ(32,"app-input",22),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div",21)(35,"app-input",23),e.NdJ("valueChange",function(d){return t.changeAction(d)}),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div",24),e.YNc(38,Te,3,5,"app-textarea",25),e.YNc(39,ve,2,5,"app-textarea",26),e.qZA(),e.TgZ(40,"div",27)(41,"app-button",28),e.NdJ("buttonOnClick",function(){return t.updateRecord()}),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"app-button",29),e.NdJ("buttonOnClick",function(){return t.cancel()}),e.ALo(44,"translate"),e.qZA()()(),e.TgZ(45,"div",30),e._uU(46),e.ALo(47,"translate"),e.qZA()()()(),e.TgZ(48,"div",3)(49,"div",31)(50,"div",32)(51,"p-accordion",33)(52,"p-accordionTab",34)(53,"p-header",35)(54,"span"),e._uU(55,"Actions"),e.qZA()(),e.TgZ(56,"p-table",36),e.YNc(57,Ee,1,1,"ng-template",37),e.YNc(58,ye,2,1,"ng-template",38),e.YNc(59,Se,2,1,"ng-template",39),e.YNc(60,De,4,2,"ng-template",40),e.qZA()(),e._UZ(61,"app-recordhistory",41),e.qZA()()()()()()(),e.TgZ(62,"div",42)(63,"div",43)(64,"div",44)(65,"div",45)(66,"div",46),e._uU(67),e.ALo(68,"translate"),e.qZA()(),e.TgZ(69,"div",47)(70,"div",8)(71,"div",11),e._UZ(72,"app-input",48),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"div",11)(75,"app-input",49,50),e.NdJ("valueChange",function(d){return t.changeAction(d)}),e.ALo(77,"translate"),e.qZA()(),e.TgZ(78,"div",11),e._UZ(79,"app-input",51),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"div",52),e._UZ(82,"app-button",53),e.ALo(83,"translate"),e._UZ(84,"app-button",54),e.ALo(85,"translate"),e.qZA()()()()()(),e.TgZ(86,"div",55)(87,"div",43)(88,"div",44)(89,"div",45)(90,"div",46),e._uU(91),e.ALo(92,"translate"),e.qZA()(),e.TgZ(93,"div",47)(94,"div",8)(95,"div",11),e._UZ(96,"app-input",48),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"div",11)(99,"app-input",56),e.NdJ("valueChange",function(d){return t.changeAction(d)}),e.ALo(100,"translate"),e.qZA()(),e.TgZ(101,"div",11),e._UZ(102,"app-input",57),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"div",52),e._UZ(105,"app-button",58),e.ALo(106,"translate"),e._UZ(107,"app-button",54),e.ALo(108,"translate"),e.qZA()()()()()()),2&s&&(e.xp6(6),e.Q6J("pageName",t.dataJsonObj.pageName)("pageTitle",t.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(6),e.s9C("label",e.lcZ(13,58,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==t.viewData||null==t.viewData.enterprise?null:t.viewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(16,60,"NEW_VARIABLES.FEEDBACK_DATE")),e.s9C("value",t.feedbackDate),e.xp6(3),e.s9C("label",e.lcZ(19,62,"COMMON_FIELDS.OBJECT_TYPE")),e.s9C("value",null==t.viewData||null==t.viewData.object||null==t.viewData.object.object_type?null:t.viewData.object.object_type.page_display_name),e.xp6(3),e.s9C("label",e.lcZ(22,64,"COMMON_FIELDS.OBJECT_NAME")),e.s9C("value",null==t.viewData||null==t.viewData.object?null:t.viewData.object.object_name),e.xp6(3),e.s9C("label",e.lcZ(25,66,"NEW_VARIABLES.FEEDBACK_TYPE")),e.s9C("value",t.lookupLanguageTranslations(null==t.viewData||null==t.viewData.feedback_type?null:t.viewData.feedback_type.lookup_id)),e.xp6(3),e.Q6J("ngIf",(null==t.actedByObject||null==t.actedByObject.selectedUserTypeObj?null:t.actedByObject.selectedUserTypeObj.user_type_name)!==(null==t.dataJsonObj.enumValuesJson||null==t.dataJsonObj.enumValuesJson.lookupTypes?null:t.dataJsonObj.enumValuesJson.lookupTypes.ENTERPRISE_END_USER)),e.xp6(1),e.Q6J("ngIf",(null==t.actedByObject||null==t.actedByObject.selectedUserTypeObj?null:t.actedByObject.selectedUserTypeObj.user_type_name)===(null==t.dataJsonObj.enumValuesJson||null==t.dataJsonObj.enumValuesJson.lookupTypes?null:t.dataJsonObj.enumValuesJson.lookupTypes.ENTERPRISE_END_USER)),e.xp6(2),e.s9C("defaultImage",t.imgFilepath),e.s9C("imageName",null==t.viewData||null==t.viewData.object?null:t.viewData.object.object_name),e.xp6(2),e.s9C("label",e.lcZ(33,68,"NEW_VARIABLES.FEEDBACK_MESSAGE_TITLE")),e.s9C("value",null==t.viewData?null:t.viewData.feedback_message_title),e.xp6(3),e.s9C("label",e.lcZ(36,70,"NEW_VARIABLES.ACTION_TAKEN")),e.s9C("value",t.actionTaken),e.xp6(3),e.Q6J("ngIf",t.editFlag),e.xp6(1),e.Q6J("ngIf",!t.editFlag),e.xp6(2),e.s9C("label",e.lcZ(42,72,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(44,74,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(47,76,t.error)," "),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("selected",!0),e.xp6(4),e.Q6J("columns",t.headers)("value",t.data)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),e.xp6(5),e.Q6J("createdBy",null==t.viewData?null:t.viewData.created_by)("lastUpdatedBy",null==t.viewData?null:t.viewData.updated_by)("showrecordhistory",t.dataJsonObj.showrecordhistory)("creationDate",null==t.viewData?null:t.viewData.createdAt)("lastUpdatedDate",null==t.viewData?null:t.viewData.updatedAt),e.xp6(6),e.hij("Actions - ",e.lcZ(68,78,"COMMON_BUTTONS.BUTTON_ADD"),""),e.xp6(5),e.s9C("label",e.lcZ(73,80,"COMMON_FIELDS.DATE")),e.s9C("value",t.date),e.xp6(3),e.s9C("label",e.lcZ(77,82,"NEW_VARIABLES.ACTION_TAKEN")),e.s9C("value",t.actionTaken),e.xp6(4),e.s9C("label",e.lcZ(80,84,"ACTION_HISTORY.ACTED_BY")),e.s9C("value",t.actedBy),e.xp6(3),e.s9C("label",e.lcZ(83,86,"COMMON_BUTTONS.BUTTON_ADD")),e.xp6(2),e.s9C("label",e.lcZ(85,88,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(7),e.hij("Actions - ",e.lcZ(92,90,"COMMON_BUTTONS.BUTTON_DELETE"),""),e.xp6(5),e.s9C("label",e.lcZ(97,92,"COMMON_FIELDS.DATE")),e.s9C("value",t.date),e.xp6(3),e.s9C("label",e.lcZ(100,94,"NEW_VARIABLES.ACTION_TAKEN")),e.s9C("value",t.actionTaken),e.xp6(3),e.s9C("label",e.lcZ(103,96,"ACTION_HISTORY.ACTED_BY")),e.s9C("value",t.actedBy),e.xp6(3),e.s9C("label",e.lcZ(106,98,"COMMON_BUTTONS.BUTTON_DELETE")),e.xp6(2),e.s9C("label",e.lcZ(108,100,"COMMON_BUTTONS.BUTTON_CANCEL")))},dependencies:[h.sg,h.O5,D.iA,Z.h4,Z.jx,D.Ei,v.UQ,v.US,M.r,R.a,me.k,w.R,fe.f,B.W,S.q,g.X$]})}return n})(),canActivate:[C.P],data:{title:"feedback edit",responsibilityParam:i.bP.MENUS+"."+i.w1.PROFILE_MENU+"."+i.bP.SUBMENUS+"."+i.w1.FEEDBACK+"."+i.In.EDIT,pageName:i.hf.FEEDBACK,pageSetting:i.AM.ACTIONS,settingField:i.In.EDIT}}]}];let we=(()=>{class n{static \u0275fac=function(s){return new(s||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[u.Bz.forChild(Me),u.Bz]})}return n})(),Ie=(()=>{class n{static \u0275fac=function(s){return new(s||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[we,h.ez,g.aw,D.U$,v.fx,U.Q,h.ez,x.Nh,V.N,Y.v]})}return n})()}}]);