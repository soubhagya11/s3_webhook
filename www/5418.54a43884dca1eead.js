"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5418],{45418:(Ve,J,l)=>{l.r(J),l.d(J,{KioskManagementModule:()=>we});var _=l(36895),N=l(70057),q=l(65673),v=l(54463),O=l(32174),K=l(24006),H=l(93144),p=l(62510),s=l(32236),T=l(11210),M=l(15861),x=l(35226),W=l.n(x),C=l(42863),f=l(71568),w=l(47561),R=l(28168),S=l(90313),z=l(75875),e=l(94650);let y=(()=>{class r{authService;constructor(t){this.authService=t}getAll(t,i,a,n,o,d,h){const m=d||"",g=S.L.isEmpty(h)?"":"&advSearchString="+JSON.stringify(h);return this.authService.getApiCall("api/v1/facilities?skip="+t+"&limit="+i+"&type=list&sort="+a+"&search="+n+"&enterprise.enterprise_id="+o+"&facility_type.facility_type_name=L13-Kiosk&kiosk=true"+m+g)}get(t){return this.authService.getApiCall("api/v1/facilities/"+t)}create(t){return new Promise((i,a)=>{this.authService.postApiCall("api/v1/facilities/",t).subscribe(n=>{i(n)},n=>{a(n)})})}update(t,i){return new Promise((a,n)=>{this.authService.putApiCall("api/v1/facilities/"+i,t).subscribe(o=>{a(o)},o=>{n(o)})})}delete(t,i){return new Promise((a,n)=>{this.authService.deleteApiCall("api/v1/facilities/"+t+"?entepriseId="+i).subscribe(o=>{a(o)},o=>{n(o)})})}statusUpdate(t,i,a){return new Promise((n,o)=>{this.authService.patchApiCall("api/v1/facilities/"+i+"?entepriseId="+a,t).subscribe(d=>{n(d)},d=>{o(d)})})}getFloors(t,i){return new Promise((a,n)=>{this.authService.getApiCall("api/v1/facilities?type=drop&enterprise.enterprise_id="+t).subscribe(o=>{a(o)},o=>{n(o)})})}getFacilityViewData(t){return this.authService.getApiCall("api/v1/facilities/"+t)}static \u0275fac=function(i){return new(i||r)(e.LFG(z.e))};static \u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var F=l(30578),A=l(42786),k=l(27601),I=l(37415),X=l(88425);const $=["datatableComponent"];let B=(()=>{class r extends w.O{actionSheetController;columnHeader;commonService;kioskManagementService;loggerService;router;translateService;uiUtils;listingVariables;route;datatablecomponent;actions;datatableComponent;enabledFlag=!1;enterpriseId;facilityTypeViewObj=[];header;isFilterClicked=!1;kioskAddress;kioskManagementListData;kioskManagementMobileListData;noDuplicates=void 0;show=!0;searchString;status;userId;value;mobileroutesArray;addressUrl;dataJsonObj={};set data(t){this.value=t,this.value&&(this.userId=this.value.userId,this.enabledFlag=!0,this.getAllRecords())}constructor(t,i,a,n,o,d,h,m,g,b){super(b,a),this.actionSheetController=t,this.columnHeader=i,this.commonService=a,this.kioskManagementService=n,this.loggerService=o,this.router=d,this.translateService=h,this.uiUtils=m,this.listingVariables=g,this.route=b,this.route.params.subscribe(c=>{this.enterpriseId=S.L.isEmpty(c.parentId)?localStorage.getItem(s.BU.SELECTED_ENTERPRISE):c.parentId}),this.route.queryParams.subscribe(c=>{this.dataJsonObj.queryParamsObj={defaultView:c.default_view,selectedMenuId:c.selectedMenuId,selectedSubMenuId:c.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=s.hf.KIOSK,this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"NEW_VARIABLES.KIOSK_MANAGEMENTS",value:"",showSubMenuDisplayName:!0}],this.commonService.trackView(s.sn.KIOSK_LIST),document.getElementsByTagName("body"),this.header=this.columnHeader.getKioskManagementColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString="",this.dataJsonObj.advancedSearchObj={},this.actions={EDIT:this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.EDIT),DELETE:this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.DELETE),ACTIVATE:this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.ACTIVATE),INACTIVATE:this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.INACTIVATE),LOCATE:this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.LOCATE)},this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.CREATE)&&(this.route.params.subscribe(i=>{this.enterpriseId=i.parentId}),this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:s.gL.URL,redirectURL:"/enterprises/"+this.enterpriseId+"/kiosks/kioskmanagement-create",queryParams:"",iconClass:"fas fa-plus"})),this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.FILTERS)}getSearchResult(t){this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=t,this.getAllRecords(),this.datatableComponent.reset()}searchClose(){this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}getAllRecords(){try{this.kioskManagementService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(i=>{if(i.rows.length>0){this.kioskManagementMobileListData&&this.kioskManagementMobileListData.length>0||(this.kioskManagementMobileListData=[]);for(let a=0;a<i.rows.length;a++){if(i.rows[a].facility_name='<a class="disabled" id="facility_name'+i.rows[a]._id+'" href="enterprises/'+i.rows[a]._id+'/kioskmanagements/kioskmanagement-view" >'+i.rows[a].facility_name,i.rows[a].enterprise.short_name=i.rows[a].enterprise.short_name,i.rows[a].facilityTypeAttributes){this.facilityTypeViewObj=[];for(let n=0;n<i.rows[a].facilityTypeAttributes.length;n++)"KIOSK_ID"===i.rows[a].facilityTypeAttributes[n].attribute_name&&(i.rows[a].kiosk_id=[],i.rows[a].kiosk_id=i.rows[a].facilityTypeAttributes[n].attribute_values[0])}this.kioskManagementMobileListData=this.kioskManagementMobileListData.filter(n=>n._id!==i.rows[a]._id),this.kioskManagementMobileListData.push(i.rows[a])}i.totalCount&&(this.listingVariables.totalRecords=i.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=i.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.kioskManagementListData=this.kioskManagementMobileListData.concat(i.rows)):this.kioskManagementListData=i.rows}else this.kioskManagementListData=[],this.kioskManagementMobileListData=[]}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getAll",i)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",t)}}loadPageData(t){this.listingVariables.pageNumbers=t.listingVariables.pageNumbers,t.clearMobileData&&(this.kioskManagementMobileListData=this.noDuplicates),t.isPaginationChange&&(this.dataJsonObj.selectedFilter=t.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=t.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=t.selectedAdvancedSearchObj),this.getAllRecords()}onActionClicked(t){if(t.action===s.A0.EDIT)this.router.navigate(["/enterprises/kioskmanagements/"+t.data._id+"/kioskmanagement-edit"]);else if(t.action===s.A0.DELETE)this.delete(t.data._id,t.data.enterprise.enterprise_id);else if(t.action===s.A0.ACTIVATE||t.action===s.A0.INACTIVATE)this.router.navigate(["/enterprises/"+t.data._id+"/kioskmanagements/kioskmanagement-status"]),this.router.routeReuseStrategy.clearModuleRouteCache("kioskmanagements");else if(t.action===s.A0.LOCATE&&(t.data.address.geo_coordinates[0]&&t.data.address.geo_coordinates[1]?(this.addressUrl=this.commonService.getLocationMapUrl(t.data.address.geo_coordinates[1]+","+t.data.address.geo_coordinates[0]),window.open(this.addressUrl[0],this.addressUrl[1])):(this.addressUrl=this.commonService.getLocationMapUrl(this.kioskAddress),window.open(this.addressUrl[0],this.addressUrl[1])),t.data.address.state&&t.data.state.state_name&&t.data.address.ZIP)){const i=t.data.address.state.state_name+" "+t.data.address.ZIP;this.kioskAddress=t.data.address.address_line2?t.data.address.address_line1+","+t.data.address.address_line2+","+t.data.address.city+","+i:t.data.address.address_line1+","+t.data.address.city+","+i}}delete(t,i){try{W().fire({title:"",text:this.translateService.instant("COMMON_CONFIRM_MESSAGES.CONFIRM_RECORD_DELETE"),showCancelButton:!0,cancelButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_NO"),confirmButtonText:this.translateService.instant("COMMON_BUTTONS.BUTTON_YES"),customClass:{confirmButton:"btn btn-primary btn-sm mgr-5 mat-raised-button mr-1",cancelButton:"btn btn-danger btn-sm mat-raised-button"}}).then(a=>{a.value?this.kioskManagementService.delete(t,i).then(n=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_DELETE"),this.router.routeReuseStrategy.clearModuleRouteCache("kioskmanagements"),this.kioskManagementListData=[],this.kioskManagementMobileListData=this.noDuplicates,this.getAllRecords()}).catch(n=>{this.loggerService.setLoggerError(this.constructor.name,"delete",n)}):this.getAllRecords()})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"delete",a)}}mobileEventAction(t){try{this.mobileroutesArray=[],this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.ACTIVATE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_ACTIVATE"),handler:()=>{this.router.navigate(["/enterprises/"+t._id+"/kioskmanagements/kioskmanagement-status"]),this.router.routeReuseStrategy.clearModuleRouteCache("kioskmanagements")}}),this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.DELETE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_DELETE"),handler:()=>{this.delete(t._id,t.enterprise.enterprise_id),this.router.routeReuseStrategy.clearModuleRouteCache("kioskmanagements")}}),this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["/enterprises/kioskmanagements/"+t._id+"/kioskmanagement-edit"]),this.router.routeReuseStrategy.clearModuleRouteCache("kioskmanagements")}}),this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.INACTIVATE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_INACTIVATE"),handler:()=>{this.router.navigate(["/enterprises/"+t._id+"/kioskmanagements/kioskmanagement-status"]),this.router.routeReuseStrategy.clearModuleRouteCache("kioskmanagements")}}),this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.LOCATE)&&this.mobileroutesArray.push({text:"Locate",handler:()=>{this.locateFacility(t)}}),this.presentActionSheet(t)}catch(i){this.loggerService.setLoggerError(this.constructor.name,"mobileEventAction",i)}}presentActionSheet(t){var i=this;return(0,M.Z)(function*(){i.mobileroutesArray.length>0&&(yield(yield i.actionSheetController.create({cssClass:"actionsheet",buttons:i.mobileroutesArray})).present())})()}Create(){this.route.params.subscribe(t=>{this.enterpriseId=t.parentId}),this.router.navigate(["/enterprises/"+this.enterpriseId+"/kiosks/kioskmanagement-create"])}onItemClicked(t){if(this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.VIEW))try{this.router.navigate(["enterprises/"+t._id+"/kiosks/kioskmanagement-view"]),this.router.routeReuseStrategy.clearModuleRouteCache("kiosks")}catch(i){this.loggerService.setLoggerError(this.constructor.name,"onItemClicked",i)}}locateFacility(t){try{this.addressUrl=this.commonService.getLocationMapUrl(t.address.address_line1+", "+t.address.address_line2+", "+t.address.city+", "+t.address.state.state_name+" "+t.address.ZIP),window.open(this.addressUrl[0],this.addressUrl[1])}catch(i){this.loggerService.setLoggerError(this.constructor.name,"locateFacility",i)}}selectedViewType(t){this.dataJsonObj.selectedDisplayView=t}selectedFilterType(t){t?this.dataJsonObj.selectedFilter=t:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(t){}advancedSearchFilterClicked(t){this.dataJsonObj.selectedAdvancedSearchObj=t}onHeaderItemClick(t){switch(t.type){case"search":this.getSearchResult(t.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(t.event);break;case"filters":this.selectedFilterType(t.event);break;case"advanced_search":this.advancedSearchFilterClicked(t.event);break;case"page_actions":this.onPageLevelActionClicked(t.event)}}static \u0275fac=function(i){return new(i||r)(e.Y36(N.BX),e.Y36(C.Y),e.Y36(f.v),e.Y36(y),e.Y36(A.m),e.Y36(p.F0),e.Y36(v.sK),e.Y36(k.s),e.Y36(F.v),e.Y36(p.gz))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-kiosk-managemment-list"]],viewQuery:function(i,a){if(1&i&&e.Gf($,5),2&i){let n;e.iGM(n=e.CRH())&&(a.datatablecomponent=n.first)}},inputs:{data:"data"},features:[e._Bn([F.v,C.Y,y,k.s,R.n]),e.qOj],decls:9,vars:26,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],[1,"card-body","pdt-0"],["id","tagid",1,"",3,"header","totalRecords","actions","data","expand","totalPages","paginator","mobileListData","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","redirectionEvent","actionClicked","itemClickEvent","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),e.NdJ("headerItemClick",function(o){return a.onHeaderItemClick(o)}),e.qZA()(),e.TgZ(4,"div",4)(5,"app-datatable",5,6),e.NdJ("redirectionEvent",function(o){return a.mobileEventAction(o)})("actionClicked",function(o){return a.onActionClicked(o)})("itemClickEvent",function(o){return a.onItemClicked(o)})("loadPageData",function(o){return a.loadPageData(o)}),e.qZA(),e.TgZ(7,"div",7)(8,"app-page-actions",8),e.NdJ("selectedAction",function(o){return a.onPageLevelActionClicked(o)}),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("pageName",a.dataJsonObj.pageName)("defaultView",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",a.dataJsonObj.pageActionsList)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),e.xp6(2),e.Q6J("header",a.header)("totalRecords",a.listingVariables.totalRecords)("actions",a.actions)("data",a.kioskManagementListData)("expand",!1)("totalPages",a.listingVariables.totalpages)("paginator",!0)("mobileListData",a.kioskManagementMobileListData)("listingVariables",a.listingVariables)("selectedDisplayViewType",a.dataJsonObj.selectedDisplayView)("selectedFilterType",a.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",a.dataJsonObj.selectedAdvancedSearchObj)("pageName",a.dataJsonObj.pageName)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId),e.xp6(3),e.Q6J("isFabDisplay",!0)("actionsList",a.dataJsonObj.pageActionsList))},dependencies:[R.n,I.q,X.y]})}return r})();var E=l(46335),D=l(46448),L=l(2387),V=l(56368),P=l(9851),j=l(24929),Y=l(11735),Z=l(8236),U=l(10805);const ee=["activedropdown"];function te(r,u){if(1&r&&(e.TgZ(0,"div",26),e._UZ(1,"app-input",27),e.ALo(2,"translate"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("value",t.lookupLanguageTranslations(null==t.kioskViewData||null==t.kioskViewData.reason_activate?null:t.kioskViewData.reason_activate.lookup_id))}}function ae(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",26)(1,"app-dropdown-singleselect",28,29),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeReasonActive(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("defaultValue",t.reasonActiveDrop),e.Q6J("options",t.reasonActiveOptions)}}function ie(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",26)(1,"app-dropdown-singleselect",30,29),e.NdJ("valueChange",function(a){e.CHM(t);const n=e.oxw();return e.KtG(n.changeReasonInactive(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(3,3,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("defaultValue",t.reasonInactiveDrop),e.Q6J("options",t.reasonInactiveOptions)}}function se(r,u){if(1&r&&(e.TgZ(0,"div",26),e._UZ(1,"app-input",31),e.ALo(2,"translate"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("value",t.lookupLanguageTranslations(null==t.kioskViewData||null==t.kioskViewData.reason_inactivate?null:t.kioskViewData.reason_inactivate.lookup_id))}}function ne(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"app-button",35),e.NdJ("buttonOnClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateRecord())}),e.ALo(1,"translate"),e.qZA()}2&r&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_ACTIVATE"))}function re(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"app-button",35),e.NdJ("buttonOnClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updateRecord())}),e.ALo(1,"translate"),e.qZA()}2&r&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_INACTIVATE"))}function oe(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"app-button",36),e.NdJ("buttonOnClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.Close())}),e.ALo(1,"translate"),e.qZA()}2&r&&e.s9C("label",e.lcZ(1,1,"COMMON_BUTTONS.BUTTON_CANCEL"))}function le(r,u){if(1&r&&(e.TgZ(0,"div",32),e.YNc(1,ne,2,3,"app-button",33),e.YNc(2,re,2,3,"app-button",33),e.YNc(3,oe,2,3,"app-button",34),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!1===t.reasonActiveDisable&&!1===t.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===t.reasonInactiveDisable&&!0===t.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===t.reasonActiveDisable||!1===t.reasonInactiveDisable)}}function de(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"app-button",36),e.NdJ("buttonOnClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.Close())}),e.ALo(2,"translate"),e.qZA()()}2&r&&(e.xp6(1),e.s9C("label",e.lcZ(2,1,"COMMON_BUTTONS.BUTTON_CLOSE")))}function ce(r,u){if(1&r&&(e.TgZ(0,"p-accordionTab",37)(1,"p-header",38)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"app-attribute-values",39,40),e.qZA()),2&r){const t=e.oxw();e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(4,4,"COMMON_PAGE_TITLES.ATTRIBUTES")),e.xp6(2),e.Q6J("viewAttributes",t.viewAttributes)("attributes",t.attributes)}}let Q=(()=>{class r extends w.O{kioskManagementService;route;router;navigationService;translateService;commonService;ColumnHeader;loggerService;uiUtils;userService;activedropdown;attributes=[];createdUser;creationDate;defaultStatus;kioskEditObj=new ue;enterpriseId;enterpriseStatusName;kioskViewData;error;header;lastUpdateDate;lastUpdatedUser;object_type;phoneSplit;show;reasonActiveDisable=!0;reasonActiveDrop;reasonActiveObj;reasonActiveOptions;reasonInactiveDisable=!0;reasonInactiveDrop;reasonInactiveObj;reasonInactiveOptions;reasonViewenable;recordId;status;statusObj;statusOptions;statusPagetitle=!1;statusDisplayname;url;viewAttributes;latitude;facilityTypeViewObj=[];dataJsonObj={};constructor(t,i,a,n,o,d,h,m,g,b){super(i,d),this.kioskManagementService=t,this.route=i,this.router=a,this.navigationService=n,this.translateService=o,this.commonService=d,this.ColumnHeader=h,this.loggerService=m,this.uiUtils=g,this.userService=b,this.route.params.subscribe(c=>{this.recordId=c.parentId}),this.route.queryParams.subscribe(c=>{this.dataJsonObj.queryParamsObj={defaultView:c.defaultView,selectedMenuId:c.selectedMenuId,selectedSubMenuId:c.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=s.hf.KIOSK,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.RECORD_HISTORY),this.commonService.trackView(s.sn.KIOSK_VIEW),this.show=!0,this.url=this.router.url.split("/")[4],this.header=this.ColumnHeader.getEnterpriseAddressColumnHeaders(),this.getRecordById(this.recordId),this.dataJsonObj.selectedPage=s.hf.KIOSK,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(t){var i=this;return(0,M.Z)(function*(){for(let a of t)i.dataJsonObj[a.storingFieldName]=yield i.commonService.getDynamicJson(i.enterpriseId,a.folderName,a.jsonType);i.dataJsonObj.selectedObj={},i.dataJsonObj.selectedObj.recordId=i.recordId,i.dataJsonObj.selectedObj.pageObj=i.dataJsonObj.menuDataJson.filter(a=>a.menu_page.page_name===i.dataJsonObj.selectedPage),i.dataJsonObj.selectedObjEnabled=!0})()}getRecordById(t){try{this.kioskManagementService.get(this.recordId).subscribe(i=>{if(this.kioskViewData=i,this.dataJsonObj.pageTitle=this.statusPagetitle?[{key:"NEW_VARIABLES.KIOSK_MANAGEMENT",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}]:[{key:"NEW_VARIABLES.KIOSK_MANAGEMENT",value:this.kioskViewData.facility_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=this.kioskViewData.enterprise.enterprise_id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(a=>{this.dataJsonObj.lookupCodesListJSON=a,this.getReasonActiveOptions(this.enterpriseId),this.getReasonInactiveOptions(this.enterpriseId)}),this.createdUser=this.kioskViewData.created_by,this.lastUpdatedUser=this.kioskViewData.updated_by,this.status=this.kioskViewData.status?this.kioskViewData.status.lookup_name:"",this.status===s.oP.ACTIVE?this.reasonViewenable=!0:this.status===s.oP.INACTIVE&&(this.reasonViewenable=!1),"kioskmanagement-status"===this.url&&this.status===s.oP.ACTIVE&&(this.reasonInactiveDisable=!1,this.statusPagetitle=!0,this.reasonViewenable=!0,this.dataJsonObj.pageTitle=[{key:"",value:this.kioskViewData.facility_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_INACTIVATE",value:"",showSubMenuDisplayName:!1}]),"kioskmanagement-status"===this.url&&this.status===s.oP.INACTIVE&&(this.reasonActiveDisable=!1,this.statusPagetitle=!0,this.reasonViewenable=!1,this.dataJsonObj.pageTitle=[{key:"",value:this.kioskViewData.facility_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_ACTIVATE",value:"",showSubMenuDisplayName:!1}]),this.latitude=this.kioskViewData.address.geo_coordinates[0],this.kioskViewData.facilityTypeAttributes){this.facilityTypeViewObj=[];for(let a=0;a<this.kioskViewData.facilityTypeAttributes.length;a++)this.kioskViewData.facilityTypeAttributes[a].attribute_value=this.kioskViewData.facilityTypeAttributes[a].attribute_values[0],this.facilityTypeViewObj.push(this.kioskViewData.facilityTypeAttributes[a]);this.viewAttributes=this.facilityTypeViewObj,this.attributesList(this.enterpriseId)}},i=>{this.loggerService.setLoggerError(this.constructor.name,"get",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",i)}}attributesList(t){try{this.userService.AttributesList(t,s.ox.FACILITY_TYPE).then(i=>{this.attributes=i},i=>{this.loggerService.setLoggerError(this.constructor.name,"AttributesList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"attributesList",i)}}Close(){this.commonService.redirectToPreviousUrl()}changeReasonActive(t){try{this.reasonActiveDrop=t.value,this.reasonActiveObj=this.reasonActiveOptions.find(i=>i.ID===parseInt(this.reasonActiveDrop,10)),this.enterpriseStatusName=s.oP.ACTIVE,this.getStatusOptions()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeReasonActive",i)}}changeReasonInactive(t){try{this.reasonInactiveDrop=t.value,this.reasonInactiveObj=this.reasonInactiveOptions.find(i=>i.ID===parseInt(this.reasonInactiveDrop,10)),this.enterpriseStatusName=s.oP.INACTIVE,this.getStatusOptions()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeReasonInactive",i)}}getReasonActiveOptions(t){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[s.ox.REASONS_FACILITY_ACTIVATE],"").then(i=>{this.reasonActiveOptions=i})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getReasonActiveOptions",i)}}getReasonInactiveOptions(t){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[s.ox.REASONS_FACILITY_INACTIVATE],"").then(i=>{this.reasonInactiveOptions=i})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getReasonInactiveOptions",i)}}getStatusOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[s.ox.FACILITY_STATUSES],"").then(t=>{this.statusOptions=t,this.statusObj=this.statusOptions.find(i=>i.lookup_name===this.enterpriseStatusName)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",t)}}updateRecord(){try{!1===this.reasonActiveDisable&&!1===this.reasonViewenable?this.activedropdown.isValid()&&(this.kioskEditObj.reason_activate=this.reasonActiveObj,this.kioskEditObj.reason_inactivate=this.reasonInactiveObj,this.kioskEditObj.status=this.statusObj,this.kioskManagementService.statusUpdate(this.kioskEditObj,this.recordId,this.enterpriseId).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_ACTIVATE"),this.getRecordById(this.recordId),this.commonService.redirectToPreviousUrl()},t=>{this.commonErrorCodes(JSON.parse(t))})):this.activedropdown.isValid()&&(this.kioskEditObj.reason_activate=this.reasonActiveObj,this.kioskEditObj.reason_inactivate=this.reasonInactiveObj,this.kioskEditObj.status=this.statusObj,this.kioskManagementService.statusUpdate(this.kioskEditObj,this.recordId,this.enterpriseId).then(t=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_INACTIVATE"),this.getRecordById(this.recordId),this.commonService.redirectToPreviousUrl()},t=>{this.commonErrorCodes(JSON.parse(t))}))}catch(t){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",t)}}commonErrorCodes(t){const i=JSON.parse(t[s.BU.STATUS]);switch(i){case 500:case 404:default:break;case 409:this.error="COMMON_STATUS_CODES."+i}}static \u0275fac=function(i){return new(i||r)(e.Y36(y),e.Y36(p.gz),e.Y36(p.F0),e.Y36(D.f),e.Y36(v.sK),e.Y36(f.v),e.Y36(C.Y),e.Y36(A.m),e.Y36(k.s),e.Y36(E.K))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-kiosk-management-view"]],viewQuery:function(i,a){if(1&i&&e.Gf(ee,5),2&i){let n;e.iGM(n=e.CRH())&&(a.activedropdown=n.first)}},features:[e._Bn([y,f.v,C.Y,k.s,E.K]),e.qOj],decls:45,vars:51,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","kiosk-management-view-enterprisesname",3,"label","value"],["id","disaplyname","mandatory","false","disabled","true","id","kiosk-management-view-facility-type",3,"label","value"],["disabled","true","id","kiosk-management-view-floor",3,"label","value"],["mandatory","true","disabled","true","id","kiosk-management-view-kioskname",3,"label","value"],["disabled","true","id","kiosk-management-view-latitude",3,"label","value"],["disabled","true","id","kiosk-management-view-longitude",3,"label","value"],["mandatory","false","disabled","true","id","kiosk-management-view-status",3,"label","value"],["class","col-md-4 order-md-1 order-2",4,"ngIf"],[1,"col-md-10","order-md-1","order-2"],["mandatory","true","disabled","true","id","kiosk-management-view-description",3,"label","defaultvalue"],["class","col-md-2 text-end mt-2 order-md-1 order-2",4,"ngIf"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","kiosk-management-view-viewpreferencesId1",3,"selected",4,"ngIf"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[1,"col-md-4","order-md-1","order-2"],["disabled","true","id","kiosk-management-view-reasonactive",3,"label","value"],["disabled","false","mandatory","true","id","kiosk-management-view-reasonactive",3,"label","defaultValue","options","valueChange"],["activedropdown",""],["disabled","false","mandatory","true","id","kiosk-management-view-reasoninactive",3,"label","defaultValue","options","valueChange"],["disabled","true","id","kiosk-management-view-reasoninactive",3,"label","value"],[1,"col-md-2","text-end","mt-2","order-md-1","order-2"],["id","user-create-submit","className","btn btn-primary btn-sm","class","mgr-5","id","kiosk-management-edit-updateRecordstatus",3,"label","buttonOnClick",4,"ngIf"],["id","kiosk-management-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick",4,"ngIf"],["id","user-create-submit","className","btn btn-primary btn-sm","id","kiosk-management-edit-updateRecordstatus",1,"mgr-5",3,"label","buttonOnClick"],["id","kiosk-management-view-close","className","btn btn-danger btn-sm",3,"label","buttonOnClick"],["id","kiosk-management-view-viewpreferencesId1",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["action","View","disabled","true",3,"viewAttributes","attributes"],["attributesComponent",""]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",13),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"div",9),e._UZ(22,"app-input",14),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",9),e._UZ(25,"app-input",15),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",9),e._UZ(28,"app-input",16),e.ALo(29,"translate"),e.qZA(),e.YNc(30,te,3,4,"div",17),e.YNc(31,ae,4,5,"div",17),e.YNc(32,ie,4,5,"div",17),e.YNc(33,se,3,4,"div",17),e.TgZ(34,"div",18),e._UZ(35,"app-textarea",19),e.ALo(36,"translate"),e.qZA(),e.YNc(37,le,4,3,"div",20),e.YNc(38,de,3,3,"div",20),e.qZA()()()(),e.TgZ(39,"div",3)(40,"div",21)(41,"div",22)(42,"p-accordion",23),e.YNc(43,ce,7,6,"p-accordionTab",24),e._UZ(44,"app-recordhistory",25),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0),e.xp6(4),e.s9C("label",e.lcZ(11,35,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.kioskViewData||null==a.kioskViewData.enterprise?null:a.kioskViewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,37,"FACILITIES.FACILITY_TYPE")),e.s9C("value",null==a.kioskViewData||null==a.kioskViewData.facility_type?null:a.kioskViewData.facility_type.facility_type_name),e.xp6(3),e.s9C("label",e.lcZ(17,39,"NEW_VARIABLES.FLOOR")),e.s9C("value",null==a.kioskViewData?null:a.kioskViewData.parent_facility_hierarchy),e.xp6(3),e.s9C("label",e.lcZ(20,41,"NEW_VARIABLES.KIOSK_NAME")),e.s9C("value",null==a.kioskViewData?null:a.kioskViewData.facility_name),e.xp6(3),e.s9C("label",e.lcZ(23,43,"NEW_VARIABLES.LATITUDE")),e.s9C("value",null==a.kioskViewData||null==a.kioskViewData.address?null:a.kioskViewData.address.geo_coordinates[0]),e.xp6(3),e.s9C("label",e.lcZ(26,45,"NEW_VARIABLES.LONGITUDE")),e.s9C("value",null==a.kioskViewData||null==a.kioskViewData.address?null:a.kioskViewData.address.geo_coordinates[1]),e.xp6(3),e.s9C("label",e.lcZ(29,47,"COMMON_FIELDS.STATUS")),e.s9C("value",a.lookupLanguageTranslations(null==a.kioskViewData?null:a.kioskViewData.status.lookup_id)),e.xp6(2),e.Q6J("ngIf",!0===a.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===a.reasonActiveDisable&&!1===a.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===a.reasonInactiveDisable&&!0===a.reasonViewenable),e.xp6(1),e.Q6J("ngIf",!1===a.reasonViewenable),e.xp6(2),e.s9C("label",e.lcZ(36,49,"COMMON_FIELDS.NOTES")),e.s9C("defaultvalue",null==a.kioskViewData?null:a.kioskViewData.notes),e.xp6(2),e.Q6J("ngIf",!1===a.reasonActiveDisable||!1===a.reasonInactiveDisable),e.xp6(1),e.Q6J("ngIf",!0===a.reasonActiveDisable&&!0===a.reasonInactiveDisable),e.xp6(4),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngIf",a.attributes.length>0),e.xp6(1),e.Q6J("createdBy",a.createdUser)("lastUpdatedBy",a.lastUpdatedUser)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",null==a.kioskViewData?null:a.kioskViewData.createdAt)("lastUpdatedDate",null==a.kioskViewData?null:a.kioskViewData.updatedAt))},dependencies:[_.O5,L.r,V.a,P.k,j.R,Y.W,Z.$,I.q,O.UQ,O.US,U.h4,v.X$]})}return r})();class ue{status;reason_inactivate;reason_activate}var G=l(75023);const pe=["validkioskName"],he=["validLatitude"],ge=["validLongitude"],me=["attributesComponent"];function be(r,u){if(1&r&&(e.TgZ(0,"div",31),e._UZ(1,"app-input",32),e.ALo(2,"translate"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_ACTIVATE")),e.s9C("value",t.reasonEnabled)}}function ve(r,u){if(1&r&&(e.TgZ(0,"div",31),e._UZ(1,"app-input",33),e.ALo(2,"translate"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.s9C("label",e.lcZ(2,2,"COMMON_FIELDS.REASON_INACTIVATE")),e.s9C("value",t.defaultReasonDisabled)}}function ye(r,u){if(1&r&&(e.TgZ(0,"p-accordionTab",34)(1,"p-header",35)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"app-attribute-values",36,37),e.qZA()),2&r){const t=e.oxw();e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(4,4,"COMMON_PAGE_TITLES.ATTRIBUTES")),e.xp6(2),e.Q6J("attributes",t.attributes)("savedattributes",t.savedattributes)}}let Oe=(()=>{class r extends w.O{facilitiesService;loggerService;navigationService;router;translateService;uiUtils;userService;kioskManagementService;commonService;route;validkioskName;validLatitude;validLongitude;attributesComponent;addressObj;attributeValues=[];attributes=[];defaultReasonDisabled;defaultStatus;description;enterpriseId;error;facilityId;facilityObj;facilityOptions;facilityTypeAttributes=[];facilityTypeDisplayName;facilityTypeId;facilityTypeObj;facilityTypeOptions;facilityTypeViewObj=[];kioskName;latitude;longitude;newFacilityTypeAttributes=[];reasonEnabled;recordId;savedattributes;statusFlag=!0;statusObj;statusOptions;viewData;dataJsonObj={};constructor(t,i,a,n,o,d,h,m,g,b){super(b,g),this.facilitiesService=t,this.loggerService=i,this.navigationService=a,this.router=n,this.translateService=o,this.uiUtils=d,this.userService=h,this.kioskManagementService=m,this.commonService=g,this.route=b}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=s.hf.KIOSK,this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(s.hf.KIOSK,s.AM.ACTIONS,s.In.RECORD_HISTORY),this.route.params.subscribe(t=>{this.recordId=t.id,this.getRecordById()})}cancelBtn(){this.commonService.redirectToPreviousUrl()}getRecordById(){try{this.kioskManagementService.get(this.recordId).subscribe(t=>{if(this.viewData=t,this.dataJsonObj.pageTitle=[{key:"NEW_VARIABLES.KIOSK_MANAGEMENT",value:this.viewData.facility_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=this.viewData.enterprise.enterprise_id,this.description=this.viewData.notes,this.kioskName=this.viewData.facility_name,"ACTIVE"===this.viewData.status.lookup_name?(this.statusFlag=!0,this.reasonEnabled=this.viewData.reason_activate?this.lookupLanguageTranslations(this.viewData.reason_activate.lookup_id):""):(this.statusFlag=!1,this.defaultReasonDisabled=this.viewData.reason_inactivate?this.lookupLanguageTranslations(this.viewData.reason_inactivate.lookup_id):""),this.facilityTypeObj=this.viewData.facility_type,this.facilityTypeId=this.viewData.facility_type.facility_type_id,this.facilityTypeDisplayName=this.viewData.facility_type.facility_type_name,this.addressObj=this.viewData.address,this.latitude=this.viewData.address.geo_coordinates[0],this.longitude=this.viewData.address.geo_coordinates[1],this.statusObj=this.viewData.status,this.attributesList(this.enterpriseId),this.viewData.facilityTypeAttributes){this.facilityTypeViewObj=[];for(let i=0;i<this.viewData.facilityTypeAttributes.length;i++)this.viewData.facilityTypeAttributes[i].attribute_value=this.viewData.facilityTypeAttributes[i].attribute_values[0],this.facilityTypeViewObj.push(this.viewData.facilityTypeAttributes[i]);this.savedattributes=this.facilityTypeViewObj}},t=>{this.loggerService.setLoggerError(this.constructor.name,"get",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getRecordById",t)}}attributesList(t){try{this.userService.AttributesList(t,s.ox.FACILITY_TYPE).then(i=>{this.attributes=i},i=>{this.loggerService.setLoggerError(this.constructor.name,"AttributesList",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"attributesList",i)}}seperateAttributeArrays(t){try{if(this.newFacilityTypeAttributes=[],this.facilityTypeAttributes=[],t.length>0)for(let i=0;i<t.length;i++)t[i]&&t[i]._id&&(this.attributeValues=[],this.attributeValues.push(t[i].attribute_value),t[i].attribute_values=this.attributeValues,this.facilityTypeAttributes.push(t[i])),!S.L.isEmpty(t[i].attribute_value)&&S.L.isEmpty(t[i]._id)&&(this.attributeValues=[],this.attributeValues.push(t[i].attribute_value),t[i].attribute_values=this.attributeValues,this.newFacilityTypeAttributes.push(t[i]))}catch(i){this.loggerService.setLoggerError(this.constructor.name,"seperateAttributeArrays",i)}}changeKioskName(t){this.kioskName=t.value}changeLatitude(t){this.latitude=t.value}changeLongitude(t){this.longitude=t.value}changeDescription(t){this.description=t.value}updateRecord(){try{if(this.validkioskName.isValid()&&this.validLatitude.isValid()&&this.validLongitude.isValid()&&(!(this.attributes.length>0)||this.attributesComponent.isValidEditedAttributes())){if(this.attributes.length>0){const a=this.attributesComponent.getEditAttributeValues();this.seperateAttributeArrays(a),this.facilityTypeAttributes=this.facilityTypeAttributes,this.newFacilityTypeAttributes=this.newFacilityTypeAttributes}else this.newFacilityTypeAttributes=[],this.facilityTypeAttributes=[];this.kioskManagementService.update({enterprise:this.viewData.enterprise,facility_name:this.kioskName,facility_type:this.facilityTypeObj,notes:this.description,facilityTypeAttributes:this.facilityTypeAttributes,newFacilityTypeAttributes:this.newFacilityTypeAttributes,address:{state:this.addressObj.state,country:this.addressObj.country,address_label:this.addressObj.address_label,address_line1:this.addressObj.address_line1,address_line2:this.addressObj.address_line2,city:this.addressObj.city,ZIP:this.addressObj.ZIP,geo_coordinates:[this.latitude,this.longitude]}},this.recordId).then(i=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},i=>{this.commonErrorCodes(JSON.parse(i))})}}catch(t){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",t)}}commonErrorCodes(t){409===JSON.parse(t[s.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}static \u0275fac=function(i){return new(i||r)(e.Y36(G.g),e.Y36(A.m),e.Y36(D.f),e.Y36(p.F0),e.Y36(v.sK),e.Y36(k.s),e.Y36(E.K),e.Y36(y),e.Y36(f.v),e.Y36(p.gz))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-kiosk-management-edit"]],viewQuery:function(i,a){if(1&i&&(e.Gf(pe,5),e.Gf(he,5),e.Gf(ge,5),e.Gf(me,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.validkioskName=n.first),e.iGM(n=e.CRH())&&(a.validLatitude=n.first),e.iGM(n=e.CRH())&&(a.validLongitude=n.first),e.iGM(n=e.CRH())&&(a.attributesComponent=n.first)}},features:[e._Bn([y]),e.qOj],decls:49,vars:55,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","beacon-mgt-view-enterprise",3,"label","value"],["id","disaplyname","mandatory","false","disabled","true","id","kiosk-management-view-facility-type",3,"label","value"],["disabled","true","id","kiosk-management-view-floor",3,"label","value"],["autoCaseFlag","true","mandatory","true","disabled","false","id","kioskmanagement-create-kioskname",3,"label","maxlength","value","valueChange"],["validkioskName",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","kioskmanagement-create-latitude",3,"label","maxlength","value","valueChange"],["validLatitude",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","kioskmanagement-create-longitude",3,"label","maxlength","value","valueChange"],["validLongitude",""],["autoCaseFlag","true","mandatory","true","disabled","true","id","beacon-mgt-edit-macaddress",3,"label","value"],["class","col-md-3",4,"ngIf"],[1,"col-lg-12","col-md-9"],["mandatory","false","disabled","false","id","funfacts-edit-notes",3,"label","defaultvalue","maxlength","valueChange"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","beacon-mgt-edit-submit",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","beacon-mgt-edit-close",3,"label","buttonOnClick"],[1,"card"],[1,"card-content"],[3,"multiple"],["id","createpreferencesId1",3,"selected",4,"ngIf"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[1,"col-md-3"],["disabled","true","id","branches-edit-reasonactive",3,"label","value"],["disabled","true","id","branches-edit-reasoninactive",3,"label","value"],["id","createpreferencesId1",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["action","Edit","disabled","true",3,"attributes","savedattributes"],["attributesComponent",""]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",9),e._UZ(16,"app-input",12),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",9)(19,"app-input",13,14),e.NdJ("valueChange",function(o){return a.changeKioskName(o)}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",9)(23,"app-input",15,16),e.NdJ("valueChange",function(o){return a.changeLatitude(o)}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",9)(27,"app-input",17,18),e.NdJ("valueChange",function(o){return a.changeLongitude(o)}),e.ALo(29,"translate"),e.qZA()(),e.TgZ(30,"div",9),e._UZ(31,"app-input",19),e.ALo(32,"translate"),e.qZA(),e.YNc(33,be,3,4,"div",20),e.YNc(34,ve,3,4,"div",20),e.TgZ(35,"div",21)(36,"app-textarea",22),e.NdJ("valueChange",function(o){return a.changeDescription(o)}),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"div",23)(39,"app-button",24),e.NdJ("buttonOnClick",function(){return a.updateRecord()}),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"app-button",25),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(42,"translate"),e.qZA()()()()()(),e.TgZ(43,"div",3)(44,"div",26)(45,"div",27)(46,"p-accordion",28),e.YNc(47,ye,7,6,"p-accordionTab",29),e._UZ(48,"app-recordhistory",30),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),e.xp6(4),e.s9C("label",e.lcZ(11,35,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",null==a.viewData?null:a.viewData.enterprise.short_name),e.xp6(3),e.s9C("label",e.lcZ(14,37,"FACILITIES.FACILITY_TYPE")),e.s9C("value",null==a.viewData||null==a.viewData.facility_type?null:a.viewData.facility_type.facility_type_name),e.xp6(3),e.s9C("label",e.lcZ(17,39,"NEW_VARIABLES.FLOOR")),e.s9C("value",null==a.viewData?null:a.viewData.parent_facility_hierarchy),e.xp6(3),e.s9C("label",e.lcZ(21,41,"NEW_VARIABLES.KIOSK_NAME")),e.s9C("value",a.kioskName),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(25,43,"NEW_VARIABLES.LATITUDE")),e.s9C("value",a.latitude),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(29,45,"NEW_VARIABLES.LONGITUDE")),e.s9C("value",a.longitude),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(32,47,"COMMON_FIELDS.STATUS")),e.s9C("value",a.lookupLanguageTranslations(null==a.statusObj?null:a.statusObj.lookup_id)),e.xp6(2),e.Q6J("ngIf",!0===a.statusFlag),e.xp6(1),e.Q6J("ngIf",!1===a.statusFlag),e.xp6(2),e.s9C("label",e.lcZ(37,49,"COMMON_FIELDS.NOTES")),e.s9C("defaultvalue",a.description),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(40,51,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.xp6(2),e.s9C("label",e.lcZ(42,53,"COMMON_BUTTONS.BUTTON_CLOSE")),e.xp6(5),e.Q6J("multiple",!0),e.xp6(1),e.Q6J("ngIf",a.attributes&&a.attributes.length>0),e.xp6(1),e.Q6J("createdBy",null==a.viewData?null:a.viewData.created_by)("lastUpdatedBy",null==a.viewData?null:a.viewData.updated_by)("showrecordhistory",a.dataJsonObj.showrecordhistory)("creationDate",null==a.viewData?null:a.viewData.createdAt)("lastUpdatedDate",null==a.viewData?null:a.viewData.updatedAt))},dependencies:[_.O5,L.r,V.a,j.R,Y.W,Z.$,I.q,O.UQ,O.US,U.h4,v.X$]})}return r})();var Te=l(57936);const ke=["validkioskName"],fe=["validLatitude"],Se=["validLongitude"],_e=["validFacilityType"],Ce=["validFacility"],Ae=["attributesComponent"];function Ie(r,u){if(1&r&&(e.TgZ(0,"p-accordionTab",32)(1,"p-header",33)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"app-attribute-values",34,35),e.qZA()),2&r){const t=e.oxw();e.Q6J("selected",!0),e.xp6(3),e.Oqu(e.lcZ(4,3,"COMMON_PAGE_TITLES.ATTRIBUTES")),e.xp6(2),e.Q6J("attributes",t.attributes)}}const Ne=[{path:"",data:{title:"kisok-management"},children:[{path:"kioskmanagements-list",canActivate:[T.P],component:B,data:{object_type:s.hf.KIOSK,title:"",responsibilityParam:s.bP.MENUS+"."+s.w1.ENTERPRISES+"."+s.bP.SUBMENUS+"."+s.w1.KIOSK+"."+s.Iu.ENABLED,pageName:s.hf.KIOSK}},{path:":id/kioskmanagement-edit",canActivate:[T.P],component:Oe,data:{object_type:s.hf.KIOSK,title:"",responsibilityParam:s.bP.MENUS+"."+s.w1.ENTERPRISES+"."+s.bP.SUBMENUS+"."+s.w1.KIOSK+"."+s.In.EDIT,pageName:s.hf.KIOSK,pageSetting:s.AM.ACTIONS,settingField:s.In.EDIT}},{path:"kioskmanagement-create",canActivate:[T.P],component:(()=>{class r{facilitiesService;loggerService;navigationService;router;translateService;uiUtils;userService;commonService;enterprisesService;kioskManagementService;route;toastController;validkioskName;validLatitude;validLongitude;validFacilityType;validFacility;attributesComponent;addressObj;attributeValues=[];attributes=[];branchObj;contactDetailsObj;defaultStatus;description;disableSubmitBtn=!1;enterpriseId;enterpriseName;enterpriseShortName;enterpriseViewId;error;facilityIconFileName;facilityId;facilityObj;facilityOptions;facilityTypeAttributes=[];facilityTypeName;facilityTypeId;facilityTypeObj;facilityTypeOptions;kioskName;latitude;longitude;statusObj;statusOptions;headerAction;dataJsonObj={};facilityTypeDisplayName="";constructor(t,i,a,n,o,d,h,m,g,b,c,De){this.facilitiesService=t,this.loggerService=i,this.navigationService=a,this.router=n,this.translateService=o,this.uiUtils=d,this.userService=h,this.commonService=m,this.enterprisesService=g,this.kioskManagementService=b,this.route=c,this.toastController=De,this.route.params.subscribe(Le=>{this.enterpriseId=Le.parentId})}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=s.hf.KIOSK,this.headerAction={BACK:!0},this.dataJsonObj.pageTitle=[{key:"NEW_VARIABLES.KIOSK_MANAGEMENT",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.getEnterprisesViewData(),this.getDynamicJson([{folderName:s.sb.FACILITY_TYPES,jsonType:"list",storingFieldName:"facilityTypesListJson"}]),this.attributesList(this.enterpriseId)}getDynamicJson(t){var i=this;return(0,M.Z)(function*(){for(let a of t)i.dataJsonObj[a.storingFieldName]=yield i.commonService.getDynamicJson(i.enterpriseId,a.folderName,a.jsonType);i.getFacilityTypes("")})()}getEnterprisesViewData(){try{this.enterprisesService.getEnterprisesViewData(this.enterpriseId).subscribe(t=>{this.enterpriseName=t.enterprise_name,this.enterpriseViewId=t._id,this.enterpriseShortName=t.short_name},t=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getEnterprisesViewData",t)}this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(t=>{this.dataJsonObj.lookupCodesListJSON=t,this.getStatusOptions()})}changeKioskName(t){this.kioskName=t.value}changeDescription(t){this.description=t.value}getFacilityTypes(t){try{this.facilityTypeOptions=[],this.commonService.getFilteredDynamicJSONData(this.dataJsonObj.facilityTypesListJson,"facility_type_display_name",t).then(i=>{this.facilityTypeOptions=i,this.facilityTypeOptions?.length>0&&(this.facilityTypeObj=i[0],this.facilityTypeName=i[0].facility_type_name,this.facilityTypeId=i[0].ID,this.getFacility())}).catch(i=>{this.loggerService.setLoggerError(this.constructor.name,"getFacilityOptions",i)})}catch(i){this.loggerService.setLoggerError(this.constructor.name,"getFacilityTypes",i)}}changeFacilityType(t){this.facilityTypeId=t.value,this.facilityTypeObj=this.facilityTypeOptions.find(i=>i.ID===parseInt(this.facilityTypeId,10)),this.facilityTypeName=this.facilityTypeObj.facility_type_name}getFacility(){try{this.kioskManagementService.getFloors(this.enterpriseId,this.facilityTypeId).then(t=>{this.facilityOptions=t,this.facilityObj=t[0],this.facilityId=t[0].ID},t=>{this.loggerService.setLoggerError(this.constructor.name,"getFacility",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getFacility",t)}}changeFacility(t){try{this.facilityId=t.value,this.facilityObj=this.facilityOptions.find(i=>i.ID===parseInt(this.facilityId,10)),this.getFacilitiesViewData()}catch(i){this.loggerService.setLoggerError(this.constructor.name,"changeFacility",i)}}changeLatitude(t){this.latitude=t.value}changeLongitude(t){this.longitude=t.value}getStatusOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[s.ox.FACILITY_STATUSES],"").then(t=>{t.sort((i,a)=>i.lookup_name.localeCompare(a.lookup_name)),t.length>0&&(this.statusOptions=t,this.defaultStatus=t[0].ID,this.statusObj=t[0])})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getStatusOptions",t)}}changeStatus(t){this.defaultStatus=t.value,this.statusObj=this.statusOptions.find(i=>i.ID===parseInt(this.defaultStatus,10))}getFacilitiesViewData(){try{this.kioskManagementService.getFacilityViewData(this.facilityId).subscribe(t=>{this.branchObj=t.branch,this.addressObj=t.address,this.latitude=this.addressObj.geo_coordinates[0],this.longitude=this.addressObj.geo_coordinates[1],this.contactDetailsObj=t.contact_details,this.facilityIconFileName=t.facility_icon_file_name}).catch(t=>{this.loggerService.setLoggerError(this.constructor.name,"getFacilitiesViewData",t)})}catch(t){this.loggerService.setLoggerError(this.constructor.name,"getFacilitiesViewData",t)}}attributesList(t){this.userService.AttributesList(t,s.ox.FACILITY_TYPE).then(i=>{this.attributes=i},i=>{this.loggerService.setLoggerError(this.constructor.name,"attributesList",i)})}createRecord(){try{if(this.validFacilityType.isValid()&&this.validFacility.isValid()&&this.validkioskName.isValid()&&this.validLatitude.isValid()&&this.validLongitude.isValid()&&(!(this.attributes.length>0)||this.attributesComponent.isValidEditedAttributes())){let t="";if(this.attributes.length>0){const n=this.attributesComponent.getAttributeValues();n&&n.error?t=n.error:this.facilityTypeAttributes=n}else this.facilityTypeAttributes=[];const i={enterprise:{enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},facility_name:this.kioskName,facility_display_name:this.kioskName,parent_facility_hierarchy:this.facilityObj.parent_path,facility_type:{facility_type_id:this.facilityTypeObj.ID,facility_type_name:this.facilityTypeObj.NAME,facility_display_name:this.facilityTypeObj.facility_type_display_name},status:{lookup_id:this.statusObj.lookup_id,lookup_name:this.statusObj.lookup_name},notes:this.description,branch:this.branchObj,contact_details:this.contactDetailsObj,address:{state:this.addressObj.state,country:this.addressObj.country,address_label:this.addressObj.address_label,address_line1:this.addressObj.address_line1,address_line2:this.addressObj.address_line2,city:this.addressObj.city,ZIP:this.addressObj.ZIP,geo_coordinates:[this.latitude,this.longitude]},facility_icon_file_name:this.facilityIconFileName,facilityTypeAttributes:this.facilityTypeAttributes};S.L.isEmpty(t)&&(this.attributes.length>0?this.kioskManagementService.create(i).then(a=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.commonService.redirectToPreviousUrl()},a=>{this.commonErrorCodes(JSON.parse(a)),this.loggerService.setLoggerError(this.constructor.name,"createRecord",a)}):this.error="Please create the attribute for Facilty Type")}}catch(t){this.loggerService.setLoggerError(this.constructor.name,"createRecord",t)}}commonErrorCodes(t){409===JSON.parse(t[s.BU.STATUS])&&(this.error=this.translateService.instant("COMMON_STATUS_CODES.409"))}cancelBtn(){this.commonService.redirectToPreviousUrl()}pageheadeActionClick(t){"BACK"==t.value&&this.cancelBtn()}static \u0275fac=function(i){return new(i||r)(e.Y36(G.g),e.Y36(A.m),e.Y36(D.f),e.Y36(p.F0),e.Y36(v.sK),e.Y36(k.s),e.Y36(E.K),e.Y36(f.v),e.Y36(Te.e),e.Y36(y),e.Y36(p.gz),e.Y36(N.yF))};static \u0275cmp=e.Xpm({type:r,selectors:[["app-kiosk-management-create"]],viewQuery:function(i,a){if(1&i&&(e.Gf(ke,5),e.Gf(fe,5),e.Gf(Se,5),e.Gf(_e,5),e.Gf(Ce,5),e.Gf(Ae,5)),2&i){let n;e.iGM(n=e.CRH())&&(a.validkioskName=n.first),e.iGM(n=e.CRH())&&(a.validLatitude=n.first),e.iGM(n=e.CRH())&&(a.validLongitude=n.first),e.iGM(n=e.CRH())&&(a.validFacilityType=n.first),e.iGM(n=e.CRH())&&(a.validFacility=n.first),e.iGM(n=e.CRH())&&(a.attributesComponent=n.first)}},features:[e._Bn([y])],decls:49,vars:50,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu","actions"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","beacon-mgt-create-enterprise",3,"label","value"],["id","disaplyname","mandatory","true","disabled","true","id","kiosk-management-view-facility-type",3,"label","value"],["validFacilityType",""],["disabled","false","mandatory","true","id","kioskmanagement-create-floor",3,"label","options","valueChange"],["validFacility",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","kioskmanagement-create-kioskname",3,"label","maxlength","valueChange"],["validkioskName",""],[1,"col-md-3"],["autoCaseFlag","true","mandatory","true","disabled","false","id","kioskmanagement-create-latitude",3,"label","maxlength","valueChange"],["validLatitude",""],["autoCaseFlag","true","mandatory","true","disabled","false","id","kioskmanagement-create-longitude",3,"label","maxlength","valueChange"],["validLongitude",""],[1,"col-md-2"],["mandatory","true","id","kioskmanagement-create-status",3,"label","options","defaultValue","valueChange"],["statusDropDown",""],[1,"col-lg-12","col-md-9"],["mandatory","false","disabled","false","id","funfacts-create-notes",3,"label","defaultvalue","maxlength","valueChange"],[1,"col-md-12","text-end","mt-2","btns-group","pdl-0"],["className","btn btn-primary btn-sm","id","kioskmanagement-create-submit",1,"mgr-5",3,"label","disabled","buttonOnClick"],["className","btn btn-danger btn-sm","id","kioskmanagement-create-cancel",3,"label","buttonOnClick"],[1,"text-danger","text-center"],["id","createpreferencesId1",3,"selected",4,"ngIf"],["id","createpreferencesId1",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["action","Create",3,"attributes"],["attributesComponent",""]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"app-pageheader",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9),e._UZ(10,"app-input",10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11,12),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div",9)(17,"app-dropdown-singleselect",13,14),e.NdJ("valueChange",function(o){return a.changeFacility(o)}),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",9)(21,"app-input",15,16),e.NdJ("valueChange",function(o){return a.changeKioskName(o)}),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",17)(25,"app-input",18,19),e.NdJ("valueChange",function(o){return a.changeLatitude(o)}),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",17)(29,"app-input",20,21),e.NdJ("valueChange",function(o){return a.changeLongitude(o)}),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",22)(33,"app-dropdown-singleselect",23,24),e.NdJ("valueChange",function(o){return a.changeStatus(o)}),e.ALo(35,"translate"),e.qZA()(),e.TgZ(36,"div",25)(37,"app-textarea",26),e.NdJ("valueChange",function(o){return a.changeDescription(o)}),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"div",27)(40,"app-button",28),e.NdJ("buttonOnClick",function(){return a.createRecord()}),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"app-button",29),e.NdJ("buttonOnClick",function(){return a.cancelBtn()}),e.ALo(43,"translate"),e.qZA()()(),e.TgZ(44,"div",30),e._uU(45),e.ALo(46,"translate"),e.qZA()()(),e.TgZ(47,"p-accordion"),e.YNc(48,Ie,7,5,"p-accordionTab",31),e.qZA()()()()()),2&i&&(e.xp6(6),e.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1)("actions",a.headerAction),e.xp6(4),e.s9C("label",e.lcZ(11,28,"COMMON_PAGE_TITLES.ENTERPRISE")),e.s9C("value",a.enterpriseShortName),e.xp6(3),e.s9C("label",e.lcZ(15,30,"FACILITIES.FACILITY_TYPE")),e.s9C("value",a.facilityTypeDisplayName),e.xp6(4),e.s9C("label",e.lcZ(19,32,"NEW_VARIABLES.FLOOR")),e.Q6J("options",a.facilityOptions),e.xp6(4),e.s9C("label",e.lcZ(23,34,"NEW_VARIABLES.KIOSK_NAME")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(27,36,"NEW_VARIABLES.LATITUDE")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(31,38,"NEW_VARIABLES.LONGITUDE")),e.Q6J("maxlength",30),e.xp6(4),e.s9C("label",e.lcZ(35,40,"COMMON_FIELDS.STATUS")),e.s9C("defaultValue",a.defaultStatus),e.Q6J("options",a.statusOptions),e.xp6(4),e.s9C("label",e.lcZ(38,42,"COMMON_FIELDS.NOTES")),e.s9C("defaultvalue",a.description),e.Q6J("maxlength",2e3),e.xp6(3),e.s9C("label",e.lcZ(41,44,"COMMON_BUTTONS.BUTTON_SUBMIT")),e.s9C("disabled",a.disableSubmitBtn),e.xp6(2),e.s9C("label",e.lcZ(43,46,"COMMON_BUTTONS.BUTTON_CANCEL")),e.xp6(3),e.hij(" ",e.lcZ(46,48,a.error)," "),e.xp6(3),e.Q6J("ngIf",a.attributes&&a.attributes.length>0))},dependencies:[_.O5,L.r,V.a,P.k,j.R,Z.$,I.q,O.UQ,O.US,U.h4,v.X$]})}return r})(),data:{object_type:s.hf.KIOSK,title:"",responsibilityParam:s.bP.MENUS+"."+s.w1.ENTERPRISES+"."+s.bP.SUBMENUS+"."+s.w1.KIOSK+"."+s.In.CREATE,pageName:s.hf.KIOSK,pageSetting:s.AM.ACTIONS,settingField:s.In.CREATE}},{path:"kioskmanagement-view",canActivate:[T.P],component:Q,data:{object_type:s.hf.KIOSK,title:"",responsibilityParam:s.bP.MENUS+"."+s.w1.ENTERPRISES+"."+s.bP.SUBMENUS+"."+s.w1.KIOSK+"."+s.In.VIEW,pageName:s.hf.KIOSK,pageSetting:s.AM.ACTIONS,settingField:s.In.VIEW}},{path:"kioskmanagement-status",canActivate:[T.P],component:Q,data:{responsibilityParam:s.bP.MENUS+"."+s.w1.ENTERPRISES+"."+s.bP.SUBMENUS+"."+s.w1.KIOSK+"."+s.In.ACTIVATE,pageName:s.hf.KIOSK,pageSetting:s.AM.ACTIONS,settingField:s.In.ACTIVATE}},{path:"enterpriseskiosks-list",canActivate:[T.P],component:B,data:{object_type:s.hf.KIOSK,title:"",responsibilityParam:s.bP.MENUS+"."+s.w1.ENTERPRISES+"."+s.bP.SUBMENUS+"."+s.w1.KIOSK+"."+s.Iu.ENABLED,pageName:s.hf.KIOSK,pageSetting:s.AM.ACTIONS}}]}];let Me=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[p.Bz.forChild(Ne),p.Bz]})}return r})(),we=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[_.ez,N.Pc,q.Q,v.aw,O.fx,K.UX,K.u5,H.U$,Me]})}return r})()}}]);