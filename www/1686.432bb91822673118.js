"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1686],{31686:(ge,j,c)=>{c.r(j),c.d(j,{WorkAttendancesModule:()=>me});var y=c(32174),O=c(36895),Z=c(70057),H=c(3848),S=c(93144),A=c(54463),Y=c(65673),_=c(62510),o=c(32236),f=c(11210),U=c(15861),p=c(15439),b=c(42863),E=c(71568),v=c(47561),q=c(28168),V=c(30578),C=c(42786),K=c(75875),R=c(90313),t=c(94650);let T=(()=>{class i{authService;constructor(a){this.authService=a}getAll(a,s,n,e,r,h,l,u){const D=l||"",m=R.L.isEmpty(u)?"":"&advSearchString="+JSON.stringify(u);return this.authService.getApiCall("api/v1/workattendances?skip="+a+"&limit="+s+"&type=list&sort="+n+"&search="+e+"&enterprise.enterprise_id="+r+D+m,h)}create(a){return new Promise((s,n)=>{this.authService.postApiCall("api/v1/workattendances",a).subscribe(e=>{s(e)},e=>{n(e)})})}get(a){return new Promise((s,n)=>{this.authService.getApiCall("api/v1/workattendances/"+a).subscribe(e=>{s(e)},e=>{n(e)})})}update(a,s){return new Promise((n,e)=>{this.authService.putApiCall("api/v1/workattendances/"+a,s).subscribe(r=>{n(r)},r=>{e(r)})})}getAttachmentsList(a,s,n,e,r){return new Promise((h,l)=>{this.authService.getApiCall("api/v1/attachments?type=list&object_type="+a+"&object_id="+s+(n?"&skip="+n:"")+(e?"&limit="+e:"")+(r?"&sort="+r:"")).subscribe(g=>{h(g)},g=>{l(g)})})}getAttendanceRefesh(a,s){return new Promise((n,e)=>{this.authService.patchApiCall("api/v1/workattendances/"+a+"?action=refreshed",s).subscribe(r=>{n(r)},r=>{e(r)})})}getDump(a,s){return new Promise((n,e)=>{this.authService.patchApiCall("api/v1/workattendances/"+a+"?action=reportdump",s).subscribe(r=>{n(r)},r=>{e(r)})})}getApprovaldataOptions(a,s){return new Promise((n,e)=>{this.authService.getApiCall("api/v1/configoptions?type=list&configoption_name="+a+"&enterprise.enterprise_id="+s).subscribe(r=>{n(r)},r=>{e(r)})})}getApproval(a,s){return new Promise((n,e)=>{this.authService.patchApiCall("api/v1/workattendances/"+a,s).subscribe(r=>{n(r)},r=>{e(r)})})}getReport(a){return this.authService.getReport(a)}static \u0275fac=function(s){return new(s||i)(t.LFG(K.e))};static \u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var N=c(27601),w=c(37415),G=c(88425);const Q=["datatableComponent"];let z=(()=>{class i extends v.O{commonService;loggerService;uiUtils;workAttendanceService;ColumnHeader;actionSheetController;router;listingVariables;route;translateService;datatableComponent;actions;apiSubscribe;defaultTimeZone;enterpriseAdminApprove;enterpriseId;forceRefresh;hrAdminApprove;hrExecutiveApprove;hrManagerApprove;loginApproverRole=[];loginUserDateFormat;mobileListData;mobileroutesArray=[];searchString;tableColumnheaders;utcTimezoneString;webListData;noDuplicates=void 0;logInEnterpriseId;dataJsonObj={};constructor(a,s,n,e,r,h,l,u,D,m){super(D,a),this.commonService=a,this.loggerService=s,this.uiUtils=n,this.workAttendanceService=e,this.ColumnHeader=r,this.actionSheetController=h,this.router=l,this.listingVariables=u,this.route=D,this.translateService=m,this.route.queryParams.subscribe(g=>{this.dataJsonObj.queryParamsObj={defaultView:g.default_view,selectedMenuId:g.selectedMenuId,selectedSubMenuId:g.selectedSubMenuId}})}ngOnInit(){this.initializeComponent()}initializeComponent(){if(this.dataJsonObj.pageName=o.hf.WORKATTENDANCE,this.dataJsonObj.advancedSearchObj={},this.dataJsonObj.pageTitle=[{key:"COMMON_FIELDS.ALL",value:"",showSubMenuDisplayName:!1},{key:"COMMON_PAGE_TITLES.WORK_ATTENDANCE",value:"",showSubMenuDisplayName:!0}],localStorage.getItem(o.BU.APPROVER_SETTINGS_DATA)){const h=JSON.parse(localStorage.getItem(o.BU.APPROVER_SETTINGS_DATA));for(let l=0;l<h.length;l++)localStorage.getItem(o.BU.LOG_IN_USER_ID)===h[l].user_profile_id&&(this.loginApproverRole=h[l].role.lookup_name,localStorage.setItem(o.BU.WORK_APPROVAL_ROLE,this.loginApproverRole))}if(localStorage.getItem(o.BU.APPROVAL_SETTINGS_DATA)){const h=JSON.parse(localStorage.getItem(o.BU.APPROVAL_SETTINGS_DATA));for(let l=0;l<h.length;l++)"W-Attendance"===h[l].page_name&&(this.hrExecutiveApprove=h[l].hrexecutive.create_edit_approve,this.hrManagerApprove=h[l].hrmanager.create_edit_approve,this.hrAdminApprove=h[l].hradmin.create_edit_approve,this.enterpriseAdminApprove=h[l].entarpriseadmin.create_edit_approve)}this.enterpriseId=localStorage.getItem(o.BU.SELECTED_ENTERPRISE),this.logInEnterpriseId=localStorage.getItem(o.BU.LOG_IN_ENTERPRISE_ID);const a=JSON.parse(localStorage.getItem(o.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(a.lookup_id);const s=JSON.parse(localStorage.getItem(o.BU.TIMEZONE_OBJ));this.defaultTimeZone=this.lookupLanguageTranslations(s.lookup_id);const r=s.description.split("(UTC")[1].split(")");this.utcTimezoneString=r[0].toString(),this.tableColumnheaders=this.ColumnHeader.getWorkAttendanceColumnHeaders(),this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.forceRefresh=!1,this.searchString="",this.actions={EDIT:this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.EDIT),REFRESH:this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.REFRESH),APPROVE:this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.APPROVE),DOWNLOAD:this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.DOWNLOAD)},this.commonService.currentEvent.subscribe(h=>{"workattendances"===h&&(this.forceRefresh=!0)}),this.dataJsonObj.addFiltersList=[],this.dataJsonObj.pageActionsList=[],this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.CREATE)&&this.dataJsonObj.pageActionsList.push({actionName:"CREATE",displayName:"COMMON_BUTTONS.BUTTON_CREATE",actionType:o.gL.URL,redirectURL:"workresourcetransactions/workattendance/create",queryParams:"",iconClass:"fas fa-plus"}),this.roleRightsValidation("EMPLOYEE_TRANSACTIONS","EMPTRANSACTIONS_WORK_ATTENDANCE","FILTERS")}getAllRecords(){try{this.apiSubscribe&&(this.apiSubscribe.unsubscribe(),this.apiSubscribe=void 0),this.apiSubscribe=this.workAttendanceService.getAll(this.listingVariables.pageNumbers,this.listingVariables.rowsPerPage,this.listingVariables.sortOrderColumn,this.searchString,this.enterpriseId,this.forceRefresh,this.dataJsonObj.selectedFilter?"&filtertype="+this.dataJsonObj.selectedFilter:"",this.dataJsonObj.advancedSearchObj.inputAdvSearchObj).subscribe(s=>{if(s.rows.length>0){this.mobileListData&&this.mobileListData.length>0||(this.mobileListData=[]),this.forceRefresh?this.forceRefresh&&(this.mobileListData=[]):(this.apiSubscribe.unsubscribe(),this.apiSubscribe=void 0);for(let n=0;n<s.rows.length;n++){s.rows[n].page_name="workttendanceslist";let e=s.rows[n].statuses;for(let u=0;u<e.length;u++)"HR_EXECUTIVE"===this.loginApproverRole?s.rows[n].approveAccess=!("APPROVED_HR_EXECUTIVE"===e[u].status.lookup_name&&this.hrExecutiveApprove||"APPROVED_HR_MANAGER"===e[u].status.lookup_name||"APPROVED_HR_ADMIN"===e[u].status.lookup_name||e[u].status.lookup_name===o.t3.CLOSED):"HR_MANAGER"===this.loginApproverRole&&this.hrManagerApprove?s.rows[n].approveAccess="APPROVED_HR_EXECUTIVE"===e[u].status.lookup_name:"HR_ADMIN"===this.loginApproverRole&&!0===this.hrAdminApprove?s.rows[n].approveAccess="APPROVED_HR_MANAGER"===e[u].status.lookup_name:this.loginApproverRole===o.ox.ENTERPRISE_ADMIN&&this.enterpriseAdminApprove&&("APPROVED_HR_ADMIN"===e[u].status.lookup_name?s.rows[n].approveAccess=!0:e[u].status.lookup_name===o.t3.CLOSED&&(s.rows[n].approveAccess=!1));s.rows[n].firstLineDisplay=s.rows[n].enterprise.short_name,s.rows[n].secondLineDisplay="Attendance Name: "+s.rows[n].attendance_name;const r={url:`workresourcetransactions/workattendance/${s.rows[n]._id}/view`,queryParams:this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:""},h=r.queryParams&&Object.keys(r.queryParams).length>0?`${r.url}?${JSON.stringify(r.queryParams)}`:r.url;s.rows[n].attendance_name=`<a class="enable" id="attendance_name${s.rows[n]._id}" href=${h}>${s.rows[n].attendance_name}`,s.rows[n].enterprise.short_name='<a class="enable" id="enterprise.short_name'+s.rows[n].enterprise.enterprise_id+'" href="enterprises/enterprises/'+s.rows[n]._id+'/view">'+s.rows[n].enterprise.short_name,s.rows[n].start_date=this.commonService.convertToUserTimeZone(s.rows[n].start_date,this.utcTimezoneString),s.rows[n].end_date=this.commonService.convertToUserTimeZone(s.rows[n].end_date,this.utcTimezoneString),s.rows[n].end_date=p(new Date(s.rows[n].end_date)).format(this.loginUserDateFormat),s.rows[n].start_date=p(new Date(s.rows[n].start_date)).format(this.loginUserDateFormat);let l=0;l=s.rows[n].statuses.length-1,s.rows[n].status=this.lookupLanguageTranslations(s.rows[n].statuses[l].status.lookup_id),this.mobileListData=this.mobileListData.filter(u=>u._id!==s.rows[n]._id),this.mobileListData.push(s.rows[n])}s.totalCount&&(this.listingVariables.totalRecords=s.totalCount),1===this.listingVariables.pageNumbers&&(this.listingVariables.totalpages=s.pages),this.dataJsonObj.isLoadMoreClicked?(this.dataJsonObj.isLoadMoreClicked=!1,this.webListData=this.webListData.concat(s.rows)):this.webListData=s.rows}else this.webListData=[],this.mobileListData=[]},s=>{this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",s)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getAllRecords",a)}}loadPageData(a){this.listingVariables.pageNumbers=a.listingVariables.pageNumbers,a.clearMobileData&&(this.mobileListData=this.noDuplicates),a.isPaginationChange&&(this.dataJsonObj.selectedFilter=a.selectedFilterType,this.dataJsonObj.isLoadMoreClicked=a.isLoadMoreClicked,this.dataJsonObj.advancedSearchObj.inputAdvSearchObj=a.selectedAdvancedSearchObj),this.getAllRecords()}create(){try{this.router.navigate(["workresourcetransactions/workattendance/create"])}catch(a){this.loggerService.setLoggerError(this.constructor.name,"create",a)}}getSearchResult(a){try{this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.searchString=a,this.getAllRecords(),this.datatableComponent.reset()}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getSearchResult",s)}}searchClose(){try{this.searchString="",this.listingVariables.pageNumbers=1,this.listingVariables.totalRecords=1,this.getAllRecords(),this.datatableComponent.reset()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"searchClose",a)}}onActionClicked(a){try{a.action===o.A0.EDIT?this.router.navigate(["workresourcetransactions/workattendance/"+a.data._id+"/edit"]):a.action===o.A0.VIEW?this.commonService.redirectToUrl(["..",a.data._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route):0!=this.logInEnterpriseId&&!0!==a.data.approveAccess||a.action!==o.A0.APPROVAL?a.action===o.A0.REFRESH?this.workAttendanceService.getAttendanceRefesh(a.data._id,void 0).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_REFRESH"),this.router.routeReuseStrategy.clearModuleRouteCache("workattendances"),this.forceRefresh=!0,this.getAllRecords()}):(0==this.logInEnterpriseId||!0===a.data.approveAccess)&&a.action===o.A0.DOWNLOAD&&this.downloadClick(a.data._id):this.router.navigate(["workresourcetransactions/workattendance/"+a.data._id+"/workattendances-approval/"+o.A0.APPROVAL])}catch(s){this.loggerService.setLoggerError(this.constructor.name,"onActionClicked",s)}}mobileEventAction(a){this.mobileroutesArray=[],(0==this.logInEnterpriseId||!0===a.approveAccess)&&this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.APPROVE)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_APPROVE"),handler:()=>{this.router.navigate(["workresourcetransactions/workattendance/"+a._id+"/workattendances-approval/"+o.A0.APPROVAL])}}),(0==this.logInEnterpriseId||!0===a.approveAccess)&&this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.DOWNLOAD)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_DOWNLOAD"),handler:()=>{this.downloadClick(a._id)}}),this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.EDIT)&&this.mobileroutesArray.push({text:this.translateService.instant("COMMON_BUTTONS.BUTTON_EDIT"),handler:()=>{this.router.navigate(["workresourcetransactions/workattendance/"+a._id+"/edit"])}}),this.presentActionSheet(a)}presentActionSheet(a){var s=this;return(0,U.Z)(function*(){try{s.mobileroutesArray.length>0&&(yield(yield s.actionSheetController.create({cssClass:"actionsheet",buttons:s.mobileroutesArray})).present())}catch(n){s.loggerService.setLoggerError(s.constructor.name,"presentActionSheet",n)}})()}getRedirectedToView(a){try{this.roleRightsValidationByPage(o.hf.WORK_ATTENDANCES,o.AM.ACTIONS,o.In.VIEW)&&this.commonService.redirectToUrl(["..",a._id,"view"],!0,!0,this.dataJsonObj.queryParamsObj?this.dataJsonObj.queryParamsObj:"",this.route)}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRedirectedToView",s)}}downloadClick(a){try{this.workAttendanceService.getDump(a,{action:"reportdump"}).then(n=>{const e=n.filePath;this.workAttendanceService.getReport(e).subscribe(r=>{this.downLoadFile(r,e,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;")},r=>{this.loggerService.setLoggerError(this.constructor.name,"getReport",r)})},n=>{this.loggerService.setLoggerError(this.constructor.name,"getDump",n)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"downloadClick",s)}}downLoadFile(a,s,n){const e=new Blob([a.body],{type:n}),r=document.createElement("a");r.href=URL.createObjectURL(e);let h=s.split("/").pop();r.download=h,document.body.appendChild(r),r.click()}selectedViewType(a){this.dataJsonObj.selectedDisplayView=a}selectedFilterType(a){a?this.dataJsonObj.selectedFilter=a:(this.dataJsonObj.selectedFilter="",this.dataJsonObj.selectedAdvancedSearchObj={})}onPageLevelActionClicked(a){}advancedSearchFilterClicked(a){this.dataJsonObj.selectedAdvancedSearchObj=a}onHeaderItemClick(a){switch(a.type){case"search":this.getSearchResult(a.event);break;case"search_close":this.searchClose();break;case"display_views":this.selectedViewType(a.event);break;case"filters":this.selectedFilterType(a.event);break;case"advanced_search":this.advancedSearchFilterClicked(a.event);break;case"page_actions":this.onPageLevelActionClicked(a.event)}}static \u0275fac=function(s){return new(s||i)(t.Y36(E.v),t.Y36(C.m),t.Y36(N.s),t.Y36(T),t.Y36(b.Y),t.Y36(Z.BX),t.Y36(_.F0),t.Y36(V.v),t.Y36(_.gz),t.Y36(A.sK))};static \u0275cmp=t.Xpm({type:i,selectors:[["app-work-attendances-list"]],viewQuery:function(s,n){if(1&s&&t.Gf(Q,5),2&s){let e;t.iGM(e=t.CRH())&&(n.datatableComponent=e.first)}},features:[t._Bn([b.Y,V.v,T]),t.qOj],decls:9,vars:26,consts:[[1,"container-fluid"],[1,"card","bd-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","defaultView","isFabDisplay","pageActionsList","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","headerItemClick"],["id","extraPaddingBottomID",1,"card-body","pdt-0"],["id","tagid",3,"header","actions","totalPages","totalRecords","paginator","data","mobileListData","expand","listingVariables","selectedDisplayViewType","selectedFilterType","selectedAdvancedSearchObj","pageName","selectedMenuId","selectedSubMenuId","actionClicked","itemClickEvent","redirectionEvent","loadPageData"],["datatableComponent",""],[1,"mgt-5"],[3,"isFabDisplay","actionsList","selectedAction"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-pageheader",3),t.NdJ("headerItemClick",function(r){return n.onHeaderItemClick(r)}),t.qZA()(),t.TgZ(4,"div",4)(5,"app-datatable",5,6),t.NdJ("actionClicked",function(r){return n.onActionClicked(r)})("itemClickEvent",function(r){return n.getRedirectedToView(r)})("redirectionEvent",function(r){return n.mobileEventAction(r)})("loadPageData",function(r){return n.loadPageData(r)}),t.qZA(),t.TgZ(7,"div",7)(8,"app-page-actions",8),t.NdJ("selectedAction",function(r){return n.onPageLevelActionClicked(r)}),t.qZA()()()()()),2&s&&(t.xp6(3),t.Q6J("pageName",n.dataJsonObj.pageName)("defaultView",null==n.dataJsonObj.queryParamsObj?null:n.dataJsonObj.queryParamsObj.defaultView)("isFabDisplay",!1)("pageActionsList",n.dataJsonObj.pageActionsList)("pageTitle",n.dataJsonObj.pageTitle)("selectedMenuId",null==n.dataJsonObj.queryParamsObj?null:n.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==n.dataJsonObj.queryParamsObj?null:n.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!0)("showDependencySubMenu",!1),t.xp6(2),t.Q6J("header",n.tableColumnheaders)("actions",n.actions)("totalPages",n.listingVariables.totalpages)("totalRecords",n.listingVariables.totalRecords)("paginator",!0)("data",n.webListData)("mobileListData",n.mobileListData)("expand",!1)("listingVariables",n.listingVariables)("selectedDisplayViewType",n.dataJsonObj.selectedDisplayView)("selectedFilterType",n.dataJsonObj.selectedFilter)("selectedAdvancedSearchObj",n.dataJsonObj.selectedAdvancedSearchObj)("pageName",n.dataJsonObj.pageName)("selectedMenuId",null==n.dataJsonObj.queryParamsObj?null:n.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==n.dataJsonObj.queryParamsObj?null:n.dataJsonObj.queryParamsObj.selectedSubMenuId),t.xp6(3),t.Q6J("isFabDisplay",!0)("actionsList",n.dataJsonObj.pageActionsList))},dependencies:[q.n,w.q,G.y]})}return i})();var J=c(71238),k=c(46448),I=c(10805),M=c(2387),L=c(56368),P=c(11735),W=c(68896);function $(i,d){if(1&i&&(t.TgZ(0,"div",31),t._UZ(1,"app-pageheader",32),t.qZA()),2&i){const a=t.oxw();t.xp6(1),t.Q6J("pageName",a.dataJsonObj.pageName)("pageTitle",a.dataJsonObj.pageTitle)("selectedMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedMenuId)("selectedSubMenuId",null==a.dataJsonObj.queryParamsObj?null:a.dataJsonObj.queryParamsObj.selectedSubMenuId)("showPageHeaderItems",!1)("showDependencySubMenu",!0)("isEditActionEnable",a.dataJsonObj.isEditAction)}}function X(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"div",33)(1,"app-button",34),t.NdJ("buttonOnClick",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.cancel())}),t.ALo(2,"translate"),t.qZA()()}2&i&&(t.xp6(1),t.s9C("label",t.lcZ(2,1,"COMMON_BUTTONS.BUTTON_CLOSE")))}function tt(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"div",33)(1,"app-button",35),t.NdJ("buttonOnClick",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.approvalButton())}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"app-button",34),t.NdJ("buttonOnClick",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.cancel())}),t.ALo(4,"translate"),t.qZA()()}2&i&&(t.xp6(1),t.s9C("label",t.lcZ(2,2,"COMMON_BUTTONS.BUTTON_APPROVE")),t.xp6(2),t.s9C("label",t.lcZ(4,4,"COMMON_BUTTONS.BUTTON_CANCEL")))}function et(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td",37),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.uIk("colspan",a[0].length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function at(i,d){if(1&i&&t.YNc(0,et,4,4,"tr",36),2&i){const a=t.oxw();t.Q6J("ngIf",a.attendanceDetailsData&&0==a.attendanceDetailsData.length)}}function st(i,d){if(1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=d.$implicit;t.Tol(a.class),t.xp6(1),t.hij(" ",t.lcZ(2,4,a.header)," ")}}function nt(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,st,3,6,"th",38),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.Q6J("ngForOf",a[0])}}function it(i,d){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.Tol(a.class),t.Q6J("pSelectableRow",s),t.xp6(1),t.hij(" ",s[a.field]," ")}}function ot(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,it,2,5,"td",40),t.qZA()),2&i){const a=d.columns;t.xp6(1),t.Q6J("ngForOf",a[0])}}function rt(i,d){if(1&i&&(t.TgZ(0,"div",3)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," : "),t._UZ(5,"span",43)(6,"br"),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,a.header)),t.xp6(3),t.Q6J("innerHTML",s[a.field],t.oJD)}}function dt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",2),t.YNc(3,rt,7,4,"div",42),t.qZA()()()),2&i){const a=d.columns,s=t.oxw();t.xp6(1),t.Tol(s.col.class),t.uIk("colspan",a[0].length+2),t.xp6(2),t.Q6J("ngForOf",a[1])}}function lt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td",37),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.uIk("colspan",a[0].length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function ct(i,d){if(1&i&&t.YNc(0,lt,4,4,"tr",36),2&i){const a=t.oxw();t.Q6J("ngIf",a.data1&&0==a.data1.length)}}function ht(i,d){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.header)," ")}}function ut(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,ht,3,3,"th",44),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.Q6J("ngForOf",a[0])}}function _t(i,d){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.Tol(a.class),t.Q6J("pSelectableRow",s),t.xp6(1),t.hij(" ",s[a.field]," ")}}function pt(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,_t,2,5,"td",40),t.qZA()),2&i){const a=d.columns;t.xp6(1),t.Q6J("ngForOf",a[0])}}function Dt(i,d){if(1&i&&(t.TgZ(0,"div",3)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," : "),t._UZ(5,"span",43)(6,"br"),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,a.header)),t.xp6(3),t.Q6J("innerHTML",s[a.field],t.oJD)}}function mt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",2),t.YNc(3,Dt,7,4,"div",42),t.qZA()()()),2&i){const a=d.columns;t.xp6(1),t.uIk("colspan",a[0].length+2),t.xp6(2),t.Q6J("ngForOf",a[1])}}let B=(()=>{class i extends v.O{_sharedService;columnHeader;uiUtils;route;commonService;navigationService;router;loggerService;workAttendanceService;translateService;actionType;attachmentColumnHeaders;attachmentsData;attendanceData;attendanceDetailsData=[];data1;defaultTimeZone;header1;header;loginUserDateFormat;loginUserId;object_type;recordId;roleStatusValue;spinner=!0;statusComment;statusValue;title;totalRecords;utcTimezoneString;dataJsonObj={};constructor(a,s,n,e,r,h,l,u,D,m){super(e,r),this._sharedService=a,this.columnHeader=s,this.uiUtils=n,this.route=e,this.commonService=r,this.navigationService=h,this.router=l,this.loggerService=u,this.workAttendanceService=D,this.translateService=m}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=o.hf.WORKATTENDANCE,this.object_type=this.route.snapshot.data.object_type,this.header=this.columnHeader.getWorkAttendanceViewColumnHeaders(),this.attachmentColumnHeaders=this.columnHeader.getAttachmentsColumnHeaders(),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(o.hf.WORKATTENDANCE,o.AM.ACTIONS,o.In.RECORD_HISTORY),this.loginUserId=localStorage.getItem(o.BU.LOG_IN_USER_ID);const a=JSON.parse(localStorage.getItem(o.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(a.lookup_id);const s=JSON.parse(localStorage.getItem(o.BU.TIMEZONE_OBJ));this.defaultTimeZone=this.lookupLanguageTranslations(s.lookup_id);const r=s.description.split("(UTC")[1].split(")");this.utcTimezoneString=r[0].toString(),this.header1=[[{field:"sno",header:"#",class:"w-50"},{field:"actionDate",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-180 text-end"},{field:"actionTaken",header:this.translateService.instant("ACTION_HISTORY.ACTION"),class:"w-100"},{field:"actedBy",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-150"},{field:"action_comment",header:this.translateService.instant("COMMON_FIELDS.NOTES"),class:""}],[]],this.actionType=o.In.VIEW,this.route.params.subscribe(l=>{this.recordId=l.id,this.title=l.title,this.getRecord(this.recordId),this.getAttachmentsList()}),this.route.queryParams.subscribe(l=>{this.dataJsonObj.queryParamsObj={defaultView:l.defaultView,selectedMenuId:l.selectedMenuId,selectedSubMenuId:l.selectedSubMenuId}}),this.dataJsonObj.enterpriseData=JSON.parse(localStorage.getItem(o.BU.ENTERPRISE)),this.dataJsonObj.enterpriseId=this.dataJsonObj.enterpriseData.enterprise_id,this.dataJsonObj.selectedPage=o.hf.WORKATTENDANCE,this.getDynamicJson([{folderName:"menu_manager",jsonType:"",storingFieldName:"menuDataJson"}])}getDynamicJson(a){var s=this;return(0,U.Z)(function*(){for(let n of a)s.dataJsonObj[n.storingFieldName]=yield s.commonService.getDynamicJson(s.dataJsonObj.enterpriseId,n.folderName,n.jsonType);s.dataJsonObj.selectedObj={},s.dataJsonObj.selectedObj.recordId=s.recordId,s.dataJsonObj.selectedObj.pageObj=s.dataJsonObj.menuDataJson.filter(n=>n.menu_page.page_name===s.dataJsonObj.selectedPage),s.dataJsonObj.selectedObjEnabled=!0})()}getRecord(a){try{this.workAttendanceService.get(a).then(s=>{this.attendanceData=s,this.dataJsonObj.isEditAction=this.getIsEditAction(this.attendanceData),this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_ATTENDANCE",value:this.attendanceData.attendance_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_VIEW",value:"",showSubMenuDisplayName:!1}],this.attendanceData.start_date=this.commonService.convertToUserTimeZone(this.attendanceData.start_date,this.utcTimezoneString),this.attendanceData.start_date=p(new Date(this.attendanceData.start_date)).format(this.loginUserDateFormat),this.attendanceData.end_date=this.commonService.convertToUserTimeZone(this.attendanceData.end_date,this.utcTimezoneString),this.attendanceData.end_date=p(new Date(this.attendanceData.end_date)).format(this.loginUserDateFormat);const n=this.attendanceData.statuses.length-1;this.statusValue=this.lookupLanguageTranslations(this.attendanceData.statuses[n].status.lookup_id),this.statusComment=this.attendanceData.statuses[n].comment,this.attendanceDetailsData=s.attendance_details;for(let e=0;e<this.attendanceDetailsData.length;e++)this.attendanceDetailsData[e].work_resource=this.attendanceDetailsData[e].work_resource.work_resource_name,this.attendanceDetailsData[e].start_date=p(this.attendanceDetailsData[e].start_date).format(this.loginUserDateFormat),this.attendanceDetailsData[e].left_date=this.attendanceDetailsData[e].left_date?p(this.attendanceDetailsData[e].left_date).format(this.loginUserDateFormat):"",this.attendanceDetailsData[e].saturday_off=this.attendanceDetailsData[e].saturday_off?"Yes":"No",0!==this.attendanceDetailsData[e].day1_hours&&this.attendanceDetailsData[e].day1_absences?this.attendanceDetailsData[e].day1_hours=this.attendanceDetailsData[e].day1_hours+"/"+this.attendanceDetailsData[e].day1_absences:0===this.attendanceDetailsData[e].day1_hours&&this.attendanceDetailsData[e].day1_absences?this.attendanceDetailsData[e].day1_hours=this.attendanceDetailsData[e].day1_absences:this.attendanceDetailsData[e].day1_hours&&(this.attendanceDetailsData[e].day1_hours=this.attendanceDetailsData[e].day1_hours),0!==this.attendanceDetailsData[e].day2_hours&&this.attendanceDetailsData[e].day2_absences?this.attendanceDetailsData[e].day2_hours=this.attendanceDetailsData[e].day2_hours+"/"+this.attendanceDetailsData[e].day2_absences:0===this.attendanceDetailsData[e].day2_hours&&this.attendanceDetailsData[e].day2_absences?this.attendanceDetailsData[e].day2_hours=this.attendanceDetailsData[e].day2_absences:this.attendanceDetailsData[e].day2_hours&&(this.attendanceDetailsData[e].day2_hours=this.attendanceDetailsData[e].day2_hours),0!==this.attendanceDetailsData[e].day3_hours&&this.attendanceDetailsData[e].day3_absences?this.attendanceDetailsData[e].day3_hours=this.attendanceDetailsData[e].day3_hours+"/"+this.attendanceDetailsData[e].day3_absences:0===this.attendanceDetailsData[e].day3_hours&&this.attendanceDetailsData[e].day3_absences?this.attendanceDetailsData[e].day3_hours=this.attendanceDetailsData[e].day3_absences:this.attendanceDetailsData[e].day3_hours&&(this.attendanceDetailsData[e].day3_hours=this.attendanceDetailsData[e].day3_hours),0!==this.attendanceDetailsData[e].day4_hours&&this.attendanceDetailsData[e].day4_absences?this.attendanceDetailsData[e].day4_hours=this.attendanceDetailsData[e].day4_hours+"/"+this.attendanceDetailsData[e].day4_absences:0===this.attendanceDetailsData[e].day4_hours&&this.attendanceDetailsData[e].day4_absences?this.attendanceDetailsData[e].day4_hours=this.attendanceDetailsData[e].day4_absences:this.attendanceDetailsData[e].day4_hours&&(this.attendanceDetailsData[e].day4_hours=this.attendanceDetailsData[e].day4_hours),0!==this.attendanceDetailsData[e].day5_hours&&this.attendanceDetailsData[e].day5_absences?this.attendanceDetailsData[e].day5_hours=this.attendanceDetailsData[e].day5_hours+"/"+this.attendanceDetailsData[e].day5_absences:0===this.attendanceDetailsData[e].day5_hours&&this.attendanceDetailsData[e].day5_absences?this.attendanceDetailsData[e].day5_hours=this.attendanceDetailsData[e].day5_absences:this.attendanceDetailsData[e].day5_hours&&(this.attendanceDetailsData[e].day5_hours=this.attendanceDetailsData[e].day5_hours),0!==this.attendanceDetailsData[e].day6_hours&&this.attendanceDetailsData[e].day6_absences?this.attendanceDetailsData[e].day6_hours=this.attendanceDetailsData[e].day6_hours+"/"+this.attendanceDetailsData[e].day6_absences:0===this.attendanceDetailsData[e].day6_hours&&this.attendanceDetailsData[e].day6_absences?this.attendanceDetailsData[e].day6_hours=this.attendanceDetailsData[e].day6_absences:this.attendanceDetailsData[e].day6_hours&&(this.attendanceDetailsData[e].day6_hours=this.attendanceDetailsData[e].day6_hours),0!==this.attendanceDetailsData[e].day7_hours&&this.attendanceDetailsData[e].day7_absences?this.attendanceDetailsData[e].day7_hours=this.attendanceDetailsData[e].day7_hours+"/"+this.attendanceDetailsData[e].day7_absences:0===this.attendanceDetailsData[e].day7_hours&&this.attendanceDetailsData[e].day7_absences?this.attendanceDetailsData[e].day7_hours=this.attendanceDetailsData[e].day7_absences:this.attendanceDetailsData[e].day7_hours&&(this.attendanceDetailsData[e].day7_hours=this.attendanceDetailsData[e].day7_hours),0!==this.attendanceDetailsData[e].day8_hours&&this.attendanceDetailsData[e].day8_absences?this.attendanceDetailsData[e].day8_hours=this.attendanceDetailsData[e].day8_hours+"/"+this.attendanceDetailsData[e].day8_absences:0===this.attendanceDetailsData[e].day8_hours&&this.attendanceDetailsData[e].day8_absences?this.attendanceDetailsData[e].day8_hours=this.attendanceDetailsData[e].day8_absences:this.attendanceDetailsData[e].day8_hours&&(this.attendanceDetailsData[e].day8_hours=this.attendanceDetailsData[e].day8_hours),0!==this.attendanceDetailsData[e].day9_hours&&this.attendanceDetailsData[e].day9_absences?this.attendanceDetailsData[e].day9_hours=this.attendanceDetailsData[e].day9_hours+"/"+this.attendanceDetailsData[e].day9_absences:0===this.attendanceDetailsData[e].day9_hours&&this.attendanceDetailsData[e].day9_absences?this.attendanceDetailsData[e].day9_hours=this.attendanceDetailsData[e].day9_absences:this.attendanceDetailsData[e].day9_hours&&(this.attendanceDetailsData[e].day9_hours=this.attendanceDetailsData[e].day9_hours),0!==this.attendanceDetailsData[e].day10_hours&&this.attendanceDetailsData[e].day10_absences?this.attendanceDetailsData[e].day10_hours=this.attendanceDetailsData[e].day10_hours+"/"+this.attendanceDetailsData[e].day10_absences:0===this.attendanceDetailsData[e].day10_hours&&this.attendanceDetailsData[e].day10_absences?this.attendanceDetailsData[e].day10_hours=this.attendanceDetailsData[e].day10_absences:this.attendanceDetailsData[e].day10_hours&&(this.attendanceDetailsData[e].day10_hours=this.attendanceDetailsData[e].day10_hours),0!==this.attendanceDetailsData[e].day11_hours&&this.attendanceDetailsData[e].day11_absences?this.attendanceDetailsData[e].day11_hours=this.attendanceDetailsData[e].day11_hours+"/"+this.attendanceDetailsData[e].day11_absences:0===this.attendanceDetailsData[e].day11_hours&&this.attendanceDetailsData[e].day11_absences?this.attendanceDetailsData[e].day11_hours=this.attendanceDetailsData[e].day11_absences:this.attendanceDetailsData[e].day11_hours&&(this.attendanceDetailsData[e].day11_hours=this.attendanceDetailsData[e].day11_hours),0!==this.attendanceDetailsData[e].day12_hours&&this.attendanceDetailsData[e].day12_absences?this.attendanceDetailsData[e].day12_hours=this.attendanceDetailsData[e].day12_hours+"/"+this.attendanceDetailsData[e].day12_absences:0===this.attendanceDetailsData[e].day12_hours&&this.attendanceDetailsData[e].day12_absences?this.attendanceDetailsData[e].day12_hours=this.attendanceDetailsData[e].day12_absences:this.attendanceDetailsData[e].day12_hours&&(this.attendanceDetailsData[e].day12_hours=this.attendanceDetailsData[e].day12_hours),0!==this.attendanceDetailsData[e].day13_hours&&this.attendanceDetailsData[e].day13_absences?this.attendanceDetailsData[e].day13_hours=this.attendanceDetailsData[e].day13_hours+"/"+this.attendanceDetailsData[e].day13_absences:0===this.attendanceDetailsData[e].day13_hours&&this.attendanceDetailsData[e].day13_absences?this.attendanceDetailsData[e].day13_hours=this.attendanceDetailsData[e].day13_absences:this.attendanceDetailsData[e].day13_hours&&(this.attendanceDetailsData[e].day13_hours=this.attendanceDetailsData[e].day13_hours),0!==this.attendanceDetailsData[e].day14_hours&&this.attendanceDetailsData[e].day14_absences?this.attendanceDetailsData[e].day14_hours=this.attendanceDetailsData[e].day14_hours+"/"+this.attendanceDetailsData[e].day14_absences:0===this.attendanceDetailsData[e].day14_hours&&this.attendanceDetailsData[e].day14_absences?this.attendanceDetailsData[e].day14_hours=this.attendanceDetailsData[e].day14_absences:this.attendanceDetailsData[e].day14_hours&&(this.attendanceDetailsData[e].day14_hours=this.attendanceDetailsData[e].day14_hours),0!==this.attendanceDetailsData[e].day15_hours&&this.attendanceDetailsData[e].day15_absences?this.attendanceDetailsData[e].day15_hours=this.attendanceDetailsData[e].day15_hours+"/"+this.attendanceDetailsData[e].day15_absences:0===this.attendanceDetailsData[e].day15_hours&&this.attendanceDetailsData[e].day15_absences?this.attendanceDetailsData[e].day15_hours=this.attendanceDetailsData[e].day15_absences:this.attendanceDetailsData[e].day15_hours&&(this.attendanceDetailsData[e].day15_hours=this.attendanceDetailsData[e].day15_hours),0!==this.attendanceDetailsData[e].day16_hours&&this.attendanceDetailsData[e].day16_absences?this.attendanceDetailsData[e].day16_hours=this.attendanceDetailsData[e].day16_hours+"/"+this.attendanceDetailsData[e].day16_absences:0===this.attendanceDetailsData[e].day16_hours&&this.attendanceDetailsData[e].day16_absences?this.attendanceDetailsData[e].day16_hours=this.attendanceDetailsData[e].day16_absences:this.attendanceDetailsData[e].day16_hours&&(this.attendanceDetailsData[e].day16_hours=this.attendanceDetailsData[e].day16_hours),0!==this.attendanceDetailsData[e].day17_hours&&this.attendanceDetailsData[e].day17_absences?this.attendanceDetailsData[e].day17_hours=this.attendanceDetailsData[e].day17_hours+"/"+this.attendanceDetailsData[e].day17_absences:0===this.attendanceDetailsData[e].day17_hours&&this.attendanceDetailsData[e].day17_absences?this.attendanceDetailsData[e].day17_hours=this.attendanceDetailsData[e].day17_absences:this.attendanceDetailsData[e].day17_hours&&(this.attendanceDetailsData[e].day17_hours=this.attendanceDetailsData[e].day17_hours),0!==this.attendanceDetailsData[e].day18_hours&&this.attendanceDetailsData[e].day18_absences?this.attendanceDetailsData[e].day18_hours=this.attendanceDetailsData[e].day18_hours+"/"+this.attendanceDetailsData[e].day18_absences:0===this.attendanceDetailsData[e].day18_hours&&this.attendanceDetailsData[e].day18_absences?this.attendanceDetailsData[e].day18_hours=this.attendanceDetailsData[e].day18_absences:this.attendanceDetailsData[e].day18_hours&&(this.attendanceDetailsData[e].day18_hours=this.attendanceDetailsData[e].day18_hours),0!==this.attendanceDetailsData[e].day19_hours&&this.attendanceDetailsData[e].day19_absences?this.attendanceDetailsData[e].day19_hours=this.attendanceDetailsData[e].day19_hours+"/"+this.attendanceDetailsData[e].day19_absences:0===this.attendanceDetailsData[e].day19_hours&&this.attendanceDetailsData[e].day19_absences?this.attendanceDetailsData[e].day19_hours=this.attendanceDetailsData[e].day19_absences:this.attendanceDetailsData[e].day19_hours&&(this.attendanceDetailsData[e].day19_hours=this.attendanceDetailsData[e].day19_hours),0!==this.attendanceDetailsData[e].day20_hours&&this.attendanceDetailsData[e].day20_absences?this.attendanceDetailsData[e].day20_hours=this.attendanceDetailsData[e].day20_hours+"/"+this.attendanceDetailsData[e].day20_absences:0===this.attendanceDetailsData[e].day20_hours&&this.attendanceDetailsData[e].day20_absences?this.attendanceDetailsData[e].day20_hours=this.attendanceDetailsData[e].day20_absences:this.attendanceDetailsData[e].day20_hours&&(this.attendanceDetailsData[e].day20_hours=this.attendanceDetailsData[e].day20_hours),0!==this.attendanceDetailsData[e].day21_hours&&this.attendanceDetailsData[e].day21_absences?this.attendanceDetailsData[e].day21_hours=this.attendanceDetailsData[e].day21_hours+"/"+this.attendanceDetailsData[e].day21_absences:0===this.attendanceDetailsData[e].day21_hours&&this.attendanceDetailsData[e].day21_absences?this.attendanceDetailsData[e].day21_hours=this.attendanceDetailsData[e].day21_absences:this.attendanceDetailsData[e].day21_hours&&(this.attendanceDetailsData[e].day21_hours=this.attendanceDetailsData[e].day21_hours),0!==this.attendanceDetailsData[e].day22_hours&&this.attendanceDetailsData[e].day22_absences?this.attendanceDetailsData[e].day22_hours=this.attendanceDetailsData[e].day22_hours+"/"+this.attendanceDetailsData[e].day22_absences:0===this.attendanceDetailsData[e].day22_hours&&this.attendanceDetailsData[e].day22_absences?this.attendanceDetailsData[e].day22_hours=this.attendanceDetailsData[e].day22_absences:this.attendanceDetailsData[e].day22_hours&&(this.attendanceDetailsData[e].day22_hours=this.attendanceDetailsData[e].day22_hours),0!==this.attendanceDetailsData[e].day23_hours&&this.attendanceDetailsData[e].day23_absences?this.attendanceDetailsData[e].day23_hours=this.attendanceDetailsData[e].day23_hours+"/"+this.attendanceDetailsData[e].day23_absences:0===this.attendanceDetailsData[e].day23_hours&&this.attendanceDetailsData[e].day23_absences?this.attendanceDetailsData[e].day23_hours=this.attendanceDetailsData[e].day23_absences:this.attendanceDetailsData[e].day23_hours&&(this.attendanceDetailsData[e].day23_hours=this.attendanceDetailsData[e].day23_hours),0!==this.attendanceDetailsData[e].day24_hours&&this.attendanceDetailsData[e].day24_absences?this.attendanceDetailsData[e].day24_hours=this.attendanceDetailsData[e].day24_hours+"/"+this.attendanceDetailsData[e].day24_absences:0===this.attendanceDetailsData[e].day24_hours&&this.attendanceDetailsData[e].day24_absences?this.attendanceDetailsData[e].day24_hours=this.attendanceDetailsData[e].day24_absences:this.attendanceDetailsData[e].day24_hours&&(this.attendanceDetailsData[e].day24_hours=this.attendanceDetailsData[e].day24_hours),0!==this.attendanceDetailsData[e].day25_hours&&this.attendanceDetailsData[e].day25_absences?this.attendanceDetailsData[e].day25_hours=this.attendanceDetailsData[e].day25_hours+"/"+this.attendanceDetailsData[e].day25_absences:0===this.attendanceDetailsData[e].day25_hours&&this.attendanceDetailsData[e].day25_absences?this.attendanceDetailsData[e].day25_hours=this.attendanceDetailsData[e].day25_absences:this.attendanceDetailsData[e].day25_hours&&(this.attendanceDetailsData[e].day25_hours=this.attendanceDetailsData[e].day25_hours),0!==this.attendanceDetailsData[e].day26_hours&&this.attendanceDetailsData[e].day26_absences?this.attendanceDetailsData[e].day26_hours=this.attendanceDetailsData[e].day26_hours+"/"+this.attendanceDetailsData[e].day26_absences:0===this.attendanceDetailsData[e].day26_hours&&this.attendanceDetailsData[e].day26_absences?this.attendanceDetailsData[e].day26_hours=this.attendanceDetailsData[e].day26_absences:this.attendanceDetailsData[e].day26_hours&&(this.attendanceDetailsData[e].day26_hours=this.attendanceDetailsData[e].day26_hours),0!==this.attendanceDetailsData[e].day27_hours&&this.attendanceDetailsData[e].day27_absences?this.attendanceDetailsData[e].day27_hours=this.attendanceDetailsData[e].day27_hours+"/"+this.attendanceDetailsData[e].day27_absences:0===this.attendanceDetailsData[e].day27_hours&&this.attendanceDetailsData[e].day27_absences?this.attendanceDetailsData[e].day27_hours=this.attendanceDetailsData[e].day27_absences:this.attendanceDetailsData[e].day27_hours&&(this.attendanceDetailsData[e].day27_hours=this.attendanceDetailsData[e].day27_hours),0!==this.attendanceDetailsData[e].day28_hours&&this.attendanceDetailsData[e].day28_absences?this.attendanceDetailsData[e].day28_hours=this.attendanceDetailsData[e].day28_hours+"/"+this.attendanceDetailsData[e].day28_absences:0===this.attendanceDetailsData[e].day28_hours&&this.attendanceDetailsData[e].day28_absences?this.attendanceDetailsData[e].day28_hours=this.attendanceDetailsData[e].day28_absences:this.attendanceDetailsData[e].day28_hours&&(this.attendanceDetailsData[e].day28_hours=this.attendanceDetailsData[e].day28_hours),0!==this.attendanceDetailsData[e].day29_hours&&this.attendanceDetailsData[e].day29_absences?this.attendanceDetailsData[e].day29_hours=this.attendanceDetailsData[e].day29_hours+"/"+this.attendanceDetailsData[e].day29_absences:0===this.attendanceDetailsData[e].day29_hours&&this.attendanceDetailsData[e].day29_absences?this.attendanceDetailsData[e].day29_hours=this.attendanceDetailsData[e].day29_absences:this.attendanceDetailsData[e].day29_hours&&(this.attendanceDetailsData[e].day29_hours=this.attendanceDetailsData[e].day29_hours),0!==this.attendanceDetailsData[e].day30_hours&&this.attendanceDetailsData[e].day30_absences?this.attendanceDetailsData[e].day30_hours=this.attendanceDetailsData[e].day30_hours+"/"+this.attendanceDetailsData[e].day30_absences:0===this.attendanceDetailsData[e].day30_hours&&this.attendanceDetailsData[e].day30_absences?this.attendanceDetailsData[e].day30_hours=this.attendanceDetailsData[e].day30_absences:this.attendanceDetailsData[e].day30_hours&&(this.attendanceDetailsData[e].day30_hours=this.attendanceDetailsData[e].day30_hours),0!==this.attendanceDetailsData[e].day31_hours&&this.attendanceDetailsData[e].day31_absences?this.attendanceDetailsData[e].day31_hours=this.attendanceDetailsData[e].day31_hours+"/"+this.attendanceDetailsData[e].day31_absences:0===this.attendanceDetailsData[e].day31_hours&&this.attendanceDetailsData[e].day31_absences?this.attendanceDetailsData[e].day31_hours=this.attendanceDetailsData[e].day31_absences:this.attendanceDetailsData[e].day31_hours&&(this.attendanceDetailsData[e].day31_hours=this.attendanceDetailsData[e].day31_hours),this.attendanceDetailsData[e].hr_action=this.lookupLanguageTranslations(this.attendanceDetailsData[e].hr_action.lookup_id);this.attendanceDetailsData=s.attendance_details;for(let e=0;e<this.attendanceData.statuses.length;e++)this.attendanceData.statuses[e].sno=e+1,this.attendanceData.statuses[e].actionDate=this.commonService.convertToUserTimeZone(this.attendanceData.statuses[e].last_updatedAt,this.utcTimezoneString),this.attendanceData.statuses[e].actionDate=p(new Date(this.attendanceData.statuses[e].actionDate)).format(this.loginUserDateFormat),this.attendanceData.statuses[e].actionTaken=this.lookupLanguageTranslations(this.attendanceData.statuses[e].status.lookup_id),this.attendanceData.statuses[e].actedBy=this.attendanceData.statuses[e].last_updated_by.f_name+" "+this.attendanceData.statuses[e].last_updated_by.l_name,this.attendanceData.statuses[e].action_comment=this.attendanceData.statuses[e].comment;this.data1=this.attendanceData.statuses})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getViewDetails",s)}}getIsEditAction(a){if(localStorage.getItem(o.BU.APPROVER_SETTINGS_DATA)){const n=JSON.parse(localStorage.getItem(o.BU.APPROVER_SETTINGS_DATA));for(let e=0;e<n.length;e++)localStorage.getItem(o.BU.LOG_IN_USER_ID)===n[e].user_profile_id&&(this.dataJsonObj.loginApproverRole=n[e].role.lookup_name,localStorage.setItem(o.BU.WORK_APPROVAL_ROLE,this.dataJsonObj.loginApproverRole))}if(localStorage.getItem(o.BU.APPROVAL_SETTINGS_DATA)){const n=JSON.parse(localStorage.getItem(o.BU.APPROVAL_SETTINGS_DATA));for(let e=0;e<n.length;e++)"W-Attendance"===n[e].page_name&&(this.dataJsonObj.hrExecutiveApprove=n[e].hrexecutive.create_edit_approve,this.dataJsonObj.hrManagerApprove=n[e].hrmanager.create_edit_approve,this.dataJsonObj.hrAdminApprove=n[e].hradmin.create_edit_approve,this.dataJsonObj.enterpriseAdminApprove=n[e].entarpriseadmin.create_edit_approve)}let s=a.statuses;for(let n=0;n<s.length;n++)"HR_EXECUTIVE"===this.dataJsonObj.loginApproverRole?a.approveAccess=!("APPROVED_HR_EXECUTIVE"===s[n].status.lookup_name&&this.dataJsonObj.hrExecutiveApprove||"APPROVED_HR_MANAGER"===s[n].status.lookup_name||"APPROVED_HR_ADMIN"===s[n].status.lookup_name||s[n].status.lookup_name===o.t3.CLOSED):"HR_MANAGER"===this.dataJsonObj.loginApproverRole&&this.dataJsonObj.hrManagerApprove?a.approveAccess="APPROVED_HR_EXECUTIVE"===s[n].status.lookup_name:"HR_ADMIN"===this.dataJsonObj.loginApproverRole&&!0===this.dataJsonObj.hrAdminApprove?a.approveAccess="APPROVED_HR_MANAGER"===s[n].status.lookup_name:this.dataJsonObj.loginApproverRole===o.ox.ENTERPRISE_ADMIN&&this.dataJsonObj.enterpriseAdminApprove&&("APPROVED_HR_ADMIN"===s[n].status.lookup_name?a.approveAccess=!0:s[n].status.lookup_name===o.t3.CLOSED&&(a.approveAccess=!1));return!0===a.approveAccess||"0"===this.dataJsonObj.enterpriseId}getAttachmentsList(){try{this.workAttendanceService.getAttachmentsList(this.object_type,this.recordId,"","","").then(a=>{if(this._sharedService.emitChangeLoaders(!1),a.rows.length>0)for(let s=0;s<a.rows.length;s++)a.rows[s].user_name=a.rows[s].f_name+", "+a.rows[s].l_name,a.rows[s].last_uploaded_date=this.commonService.dbTimezoneFormat(a.rows[s].last_uploaded_date),this.attachmentsData=a.rows;else this.attachmentsData=[];this.totalRecords=a.totalCount,this.spinner=!1}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)}}approvalButton(){try{"HR_EXECUTIVE"===localStorage.getItem(o.BU.LOGIN_APPROVER_ROLE)?this.roleStatusValue="APPROVED_HR_EXECUTIVE":"HR_MANAGER"===localStorage.getItem(o.BU.LOGIN_APPROVER_ROLE)?this.roleStatusValue="APPROVED_HR_MANAGER":"HR_ADMIN"===localStorage.getItem(o.BU.LOGIN_APPROVER_ROLE)?this.roleStatusValue="APPROVED_HR_ADMIN":localStorage.getItem(o.BU.LOGIN_APPROVER_ROLE)===o.ox.ENTERPRISE_ADMIN&&(this.roleStatusValue=o.t3.CLOSED),this.workAttendanceService.getApproval(this.recordId,{enterprise:{enterprise_id:this.attendanceData.enterprise.enterprise_id,enterprise_name:this.attendanceData.enterprise.enterprise_name,short_name:this.attendanceData.enterprise.short_name},status:this.roleStatusValue,user_profile_id:this.loginUserId}).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_APPROVE"),this.router.routeReuseStrategy.clearModuleRouteCache("workattendances"),this.commonService.changeEvent("workattendances"),this.cancel()}).catch(s=>{this.loggerService.setLoggerError(this.constructor.name,"approvalButton",s)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"approvalButton",a)}}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancel",a)}}static \u0275fac=function(s){return new(s||i)(t.Y36(J.F),t.Y36(b.Y),t.Y36(N.s),t.Y36(_.gz),t.Y36(E.v),t.Y36(k.f),t.Y36(_.F0),t.Y36(C.m),t.Y36(T),t.Y36(A.sK))};static \u0275cmp=t.Xpm({type:i,selectors:[["app-work-attendances-view"]],features:[t._Bn([T,b.Y]),t.qOj],decls:60,vars:66,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["class","card-header card-header-primary","id","stickyHeaderID",4,"ngIf"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","work-attendances-view-enterprise-shortname",3,"label","value"],["disabled","true","id","work-attendances-view-business-entity",3,"label","value"],["disabled","true","id","work-attendances-view-attendance-name",3,"label","value"],["disabled","true","id","work-attendances-view-attendances-basis",3,"label","value"],["disabled","true","id","work-attendances-view-attendances-startdate",3,"label","value"],["disabled","true","id","work-attendances-view-attendances-enddate",3,"label","value"],["disabled","true","id","work-attendances-view-attendances-status",3,"label","value"],["disabled","true","id","work-attendances-view-attendances-notes",3,"label","value"],["class","col-md-12 text-end mt-2",4,"ngIf"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],[1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","scrollabletable",3,"columns","value","rows","lazy"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],[3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","selectedMenuId","selectedSubMenuId","showPageHeaderItems","showDependencySubMenu","isEditActionEnable"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-danger btn-sm","id","work-attendances-view-closebutton",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","work-attendances-view-approvalbutton",3,"label","buttonOnClick"],[4,"ngIf"],[1,"text-center","text-danger"],["style","text-align: left !important;",3,"class",4,"ngFor","ngForOf"],[2,"text-align","left !important"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],[4,"ngFor","ngForOf"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.YNc(5,$,2,7,"div",5),t.TgZ(6,"div",6)(7,"div",7)(8,"div",8),t._UZ(9,"app-input",9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",8),t._UZ(12,"app-input",10),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",8),t._UZ(15,"app-input",11),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",8),t._UZ(18,"app-input",12),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",8),t._UZ(21,"app-input",13),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"div",8),t._UZ(24,"app-input",14),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"div",8),t._UZ(27,"app-input",15),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",8),t._UZ(30,"app-input",16),t.ALo(31,"translate"),t.qZA(),t.YNc(32,X,3,3,"div",17),t.YNc(33,tt,5,6,"div",17),t.qZA()()()(),t.TgZ(34,"div",3)(35,"div",18)(36,"div",19)(37,"p-accordion",20)(38,"p-accordionTab",21)(39,"p-header",22)(40,"span"),t._uU(41),t.ALo(42,"translate"),t.qZA()(),t.TgZ(43,"p-table",23),t.YNc(44,at,1,1,"ng-template",24),t.YNc(45,nt,2,1,"ng-template",25),t.YNc(46,ot,2,1,"ng-template",26),t.YNc(47,dt,4,5,"ng-template",27),t.qZA()(),t.TgZ(48,"p-accordionTab",21)(49,"p-header",22)(50,"span"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"p-table",28),t.YNc(54,ct,1,1,"ng-template",24),t.YNc(55,ut,2,1,"ng-template",25),t.YNc(56,pt,2,1,"ng-template",26),t.YNc(57,mt,4,2,"ng-template",27),t.qZA()(),t._UZ(58,"app-attachment",29)(59,"app-recordhistory",30),t.qZA()()()()()()()),2&s&&(t.xp6(5),t.Q6J("ngIf",n.attendanceData),t.xp6(4),t.s9C("label",t.lcZ(10,46,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",null==n.attendanceData||null==n.attendanceData.enterprise?null:n.attendanceData.enterprise.short_name),t.xp6(3),t.s9C("label",t.lcZ(13,48,"COMMON_FIELDS.BUSINESS_ENTITY")),t.s9C("value",n.lookupLanguageTranslations(null==n.attendanceData||null==n.attendanceData.business_entity_name?null:n.attendanceData.business_entity_name.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(16,50,"COMMON_PAGE_TITLES.WORK_ATTENDANCE")),t.s9C("value",null==n.attendanceData?null:n.attendanceData.attendance_name),t.xp6(3),t.s9C("label",t.lcZ(19,52,"COMMON_FIELDS.BASIS")),t.s9C("value",n.lookupLanguageTranslations(null==n.attendanceData||null==n.attendanceData.basis?null:n.attendanceData.basis.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(22,54,"COMMON_FIELDS.START_DATE")),t.s9C("value",null==n.attendanceData?null:n.attendanceData.start_date),t.xp6(3),t.s9C("label",t.lcZ(25,56,"COMMON_FIELDS.END_DATE")),t.s9C("value",null==n.attendanceData?null:n.attendanceData.end_date),t.xp6(3),t.s9C("label",t.lcZ(28,58,"COMMON_FIELDS.STATUS")),t.s9C("value",n.statusValue),t.xp6(3),t.s9C("label",t.lcZ(31,60,"COMMON_FIELDS.NOTES")),t.s9C("value",n.statusComment),t.xp6(2),t.Q6J("ngIf","APPROVAL"!==n.title),t.xp6(1),t.Q6J("ngIf","APPROVAL"===n.title),t.xp6(4),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("selected",!0),t.xp6(3),t.Oqu(t.lcZ(42,62,"COMMON_BLOCK_TITLES.WORK_ATTENDANCE_DETAILS")),t.xp6(2),t.Q6J("columns",n.header)("value",n.attendanceDetailsData)("rows",10)("lazy",!0),t.xp6(5),t.Q6J("selected",!0),t.xp6(3),t.Oqu(t.lcZ(52,64,"COMMON_BLOCK_TITLES.WORK_ATTENDANCE_ACTION_HISTORY")),t.xp6(2),t.Q6J("columns",n.header1)("value",n.data1)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),t.xp6(5),t.Q6J("header",n.attachmentColumnHeaders)("data",n.attachmentsData)("totalRecords",n.totalRecords)("objectType",n.object_type)("objectId",n.recordId)("actionType",n.actionType)("spinner",n.spinner),t.xp6(1),t.Q6J("createdBy",null==n.attendanceData?null:n.attendanceData.created_by)("lastUpdatedBy",null==n.attendanceData?null:n.attendanceData.updated_by)("showrecordhistory",n.dataJsonObj.showrecordhistory)("creationDate",null==n.attendanceData?null:n.attendanceData.createdAt)("lastUpdatedDate",null==n.attendanceData?null:n.attendanceData.updatedAt))},dependencies:[y.UQ,y.US,I.h4,I.jx,O.sg,O.O5,S.iA,S.Ei,M.r,L.a,P.W,W.Y,w.q,A.X$]})}return i})();var x=c(9851),gt=c(92634),F=c(17867);const At=["alBalPayValid"],Tt=["endDate"],bt=["hrActionValid"],yt=["miscAdjMinusValid"],Ot=["miscAdjPlusValid"],St=["rdAdjPlusValid"],ft=["startDate"],Et=["trainingAdjValid"];function vt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.uIk("colspan",a[0].length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Ct(i,d){if(1&i&&t.YNc(0,vt,4,4,"tr",38),2&i){const a=t.oxw();t.Q6J("ngIf",a.attendanceDetailsData&&0===a.attendanceDetailsData.length)}}function Nt(i,d){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.header)," ")}}function wt(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Nt,3,3,"th",40),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.Q6J("ngForOf",a[0])}}function It(i,d){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=t.oxw().$implicit,s=t.oxw().$implicit;t.xp6(1),t.Oqu(s[a.field])}}function Rt(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-inputnumber",43,44),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeMiscAdjMinus(n,e))}),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(3,2,"WORK_ATTENDANCE.WORK_MISC_HOURS_ADJUST_MINUS")),t.s9C("value",s.attendanceDetailsData[a].misc_hours_adjust_minus)}}function kt(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-inputnumber",45,46),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeTrainingAdj(n,e))}),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(3,2,"WORK_ATTENDANCE.WORK_TRAINING_HOURS_ADJUST_MINUS")),t.s9C("value",s.attendanceDetailsData[a].training_hours_adjust_minus)}}function Mt(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-inputnumber",47,48),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeResearchandDvelopmentAdj(n,e))}),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(3,2,"WORK_ATTENDANCE.WORK_RESEARCH_DEV_HOURS_ADJUST_MINUS")),t.s9C("value",s.attendanceDetailsData[a].research_dev_hours_adjust_minus)}}function Lt(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-inputnumber",49,50),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeMiscAdjPlus(n,e))}),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(3,2,"WORK_ATTENDANCE.WORK_MISC_HOURS_ADJUST_PLUS")),t.s9C("value",s.attendanceDetailsData[a].misc_hours_adjust_plus)}}function jt(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-inputnumber",51,52),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeAnnualBalanceToPay(n,e))}),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(3,2,"WORK_ATTENDANCE.WORK_ANNUAL_LEAVE_HOURS_BALANCE")),t.s9C("value",s.attendanceDetailsData[a].annual_leave_hours_balance)}}function Zt(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-dropdown-singleselect",53,54),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeHrActions(n,e))}),t.ALo(3,"translate"),t.qZA()()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(3,3,"WORK_ATTENDANCE.WORK_HR_ACTION")),t.s9C("defaultValue",s.attendanceDetailsData[a].defaultHrAction),t.Q6J("options",s.hrActionsOptions)}}function Ut(i,d){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,It,2,1,"span",38),t.YNc(2,Rt,4,4,"span",38),t.YNc(3,kt,4,4,"span",38),t.YNc(4,Mt,4,4,"span",38),t.YNc(5,Lt,4,4,"span",38),t.YNc(6,jt,4,4,"span",38),t.YNc(7,Zt,4,5,"span",38),t.qZA()),2&i){const a=d.$implicit,s=d.index,n=t.oxw().$implicit;t.Tol(a.class),t.Q6J("pSelectableRow",n),t.xp6(1),t.Q6J("ngIf",4!==s&&5!==s&&6!==s&&7!==s&&8!==s&&11!==s),t.xp6(1),t.Q6J("ngIf",4===s),t.xp6(1),t.Q6J("ngIf",5===s),t.xp6(1),t.Q6J("ngIf",6===s),t.xp6(1),t.Q6J("ngIf",7===s),t.xp6(1),t.Q6J("ngIf",8===s),t.xp6(1),t.Q6J("ngIf",11===s)}}function Vt(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Ut,8,11,"td",41),t.qZA()),2&i){const a=d.columns;t.xp6(1),t.Q6J("ngForOf",a[0])}}function Jt(i,d){if(1&i&&(t.TgZ(0,"div",3)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," : "),t._UZ(5,"span",56)(6,"br"),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,a.header)),t.xp6(3),t.Q6J("innerHTML",s[a.field],t.oJD)}}function Pt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",2),t.YNc(3,Jt,7,4,"div",55),t.qZA()()()),2&i){const a=d.columns;t.xp6(1),t.uIk("colspan",a[0].length+2),t.xp6(2),t.Q6J("ngForOf",a[1])}}function Wt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.uIk("colspan",a[0].length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Bt(i,d){if(1&i&&t.YNc(0,Wt,4,4,"tr",38),2&i){const a=t.oxw();t.Q6J("ngIf",a.attendanceHistoryData&&0===a.attendanceHistoryData.length)}}function xt(i,d){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.header)," ")}}function Ft(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,xt,3,3,"th",40),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.Q6J("ngForOf",a[0])}}function Ht(i,d){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.Tol(a.class),t.Q6J("pSelectableRow",s),t.xp6(1),t.hij(" ",s[a.field]," ")}}function Yt(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Ht,2,5,"td",57),t.qZA()),2&i){const a=d.columns;t.xp6(1),t.Q6J("ngForOf",a[0])}}function qt(i,d){if(1&i&&(t.TgZ(0,"div",3)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," : "),t._UZ(5,"span",56)(6,"br"),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,a.header)),t.xp6(3),t.Q6J("innerHTML",s[a.field],t.oJD)}}function Kt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",2),t.YNc(3,qt,7,4,"div",55),t.qZA()()()),2&i){const a=d.columns;t.xp6(1),t.uIk("colspan",a[0].length+2),t.xp6(2),t.Q6J("ngForOf",a[1])}}function Gt(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td",39),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i){const a=t.oxw().$implicit;t.xp6(1),t.uIk("colspan",a[0].length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"COMMON_VALIDATION_MESSAGES.VALID_NO_RESULTS_FOUND"),"")}}function Qt(i,d){if(1&i&&t.YNc(0,Gt,4,4,"tr",38),2&i){const a=t.oxw();t.Q6J("ngIf",a.attendanceBlockData&&0===a.attendanceBlockData.length)}}function zt(i,d){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.header)," ")}}function $t(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,zt,3,3,"th",40),t.qZA()),2&i){const a=d.$implicit;t.xp6(1),t.Q6J("ngForOf",a[0])}}function Xt(i,d){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.Tol(a.class),t.Q6J("pSelectableRow",s),t.xp6(1),t.hij(" ",s[a.field]," ")}}function te(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Xt,2,5,"td",57),t.qZA()),2&i){const a=d.columns;t.xp6(1),t.Q6J("ngForOf",a[0])}}function ee(i,d){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const a=t.oxw().$implicit,s=t.oxw().$implicit;t.xp6(1),t.Oqu(s[a.field])}}function ae(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-dropdown-singleselect",59),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeWorkAttendanceStatus(n,e))}),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"p",60),t.qZA()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(2,4,"ACTION_HISTORY.ACTION")),t.s9C("defaultValue",s.attendanceBlockData[a].actionTaken),t.Q6J("options",s.actionOptions),t.xp6(2),t.MGl("id","error_id",a,"")}}function se(i,d){if(1&i){const a=t.EpF();t.TgZ(0,"span")(1,"app-input",61),t.NdJ("valueChange",function(n){t.CHM(a);const e=t.oxw(2).rowIndex,r=t.oxw();return t.KtG(r.changeNotes(n,e))}),t.ALo(2,"translate"),t.qZA(),t._UZ(3,"p",60),t.qZA()}if(2&i){const a=t.oxw(2).rowIndex,s=t.oxw();t.xp6(1),t.s9C("label",t.lcZ(2,3,"COMMON_FIELDS.NOTES")),t.s9C("value",s.attendanceBlockData[a].comment),t.xp6(2),t.MGl("id","error_id",a,"")}}function ne(i,d){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,ee,2,1,"span",38),t.YNc(2,ae,4,6,"span",38),t.YNc(3,se,4,5,"span",38),t.qZA()),2&i){const a=d.$implicit,s=d.index,n=t.oxw().$implicit;t.Tol(a.class),t.Q6J("pSelectableRow",n),t.xp6(1),t.Q6J("ngIf",1!==s&&3!==s),t.xp6(1),t.Q6J("ngIf",1===s),t.xp6(1),t.Q6J("ngIf",3===s)}}function ie(i,d){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,ne,4,7,"td",41),t.qZA()),2&i){const a=d.columns;t.xp6(1),t.Q6J("ngForOf",a[0])}}function oe(i,d){if(1&i&&(t.TgZ(0,"div",3)(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," : "),t._UZ(5,"span",56)(6,"br"),t.qZA()),2&i){const a=d.$implicit,s=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,a.header)),t.xp6(3),t.Q6J("innerHTML",s[a.field],t.oJD)}}function re(i,d){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",2),t.YNc(3,oe,7,4,"div",55),t.qZA()()()),2&i){const a=d.columns;t.xp6(1),t.uIk("colspan",a[0].length+2),t.xp6(2),t.Q6J("ngForOf",a[1])}}const le=["businessEntity"],ce=["endDate"],he=["startDate"],ue=["validBasis"],pe=[{path:"",data:{title:"workattendances"},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:z,canActivate:[f.P],data:{object_type:o.hf.WORK_ATTENDANCE,title:"Work Absences List",responsibilityParam:o.bP.MENUS+"."+o.w1.EMPLOYEE_TRANSACTIONS+"."+o.bP.SUBMENUS+"."+o.w1.EMPTRANSACTIONS_WORK_ATTENDANCE+"."+o.Iu.ENABLED}},{path:":id/view",component:B,canActivate:[f.P],data:{object_type:o.hf.WORK_ATTENDANCE,title:"Work Absences List",responsibilityParam:o.bP.MENUS+"."+o.w1.EMPLOYEE_TRANSACTIONS+"."+o.bP.SUBMENUS+"."+o.w1.EMPTRANSACTIONS_WORK_ATTENDANCE+"."+o.In.VIEW}},{path:":id/edit",component:(()=>{class i extends v.O{_sharedService;columnHeader;uiUtils;route;commonService;navigationService;router;loggerService;translateService;workAtendanceService;alBalPayValid;endDate;hrActionValid;miscAdjMinusValid;miscAdjPlusValid;rdAdjPlusValid;startDate;trainingAdjValid;actedBy;actedById;actionBlockFlag=!1;actionOptions;actionTaken;actionType;attachmentColumnHeaders;attachmentsData;attendanceBlockData=[];attendanceData;attendanceDetailsData=[];attendanceHistoryData=[];defaultHrAction;defaultTimeZone;endDateValue;enterpriseId;error;header1=[];header2=[];header;hrActionsOptions;loginUserDateFormat;object_type;recordId;spinner;startDateValue;statusComment;statusObj;statusValue;statuses;totalRecords;utcTimezoneString;viewStatusObj;dataJsonObj={};constructor(a,s,n,e,r,h,l,u,D,m){super(e,r),this._sharedService=a,this.columnHeader=s,this.uiUtils=n,this.route=e,this.commonService=r,this.navigationService=h,this.router=l,this.loggerService=u,this.translateService=D,this.workAtendanceService=m}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=o.hf.WORKATTENDANCE,this.object_type=this.route.snapshot.data.object_type,this.attachmentColumnHeaders=this.columnHeader.getAttachmentsColumnHeaders(),this.enterpriseId=localStorage.getItem(o.BU.SELECTED_ENTERPRISE),this.dataJsonObj.showrecordhistory=this.roleRightsValidationByPage(o.hf.WORKATTENDANCE,o.AM.ACTIONS,o.In.RECORD_HISTORY),this.actedBy=localStorage.getItem(o.BU.FIRST_NAME)+" "+localStorage.getItem(o.BU.LAST_NAME),this.actedById=localStorage.getItem(o.BU.LOG_IN_USER_ID);const a=JSON.parse(localStorage.getItem(o.BU.DATE_FORMATE_OBJ));this.loginUserDateFormat=this.lookupLanguageTranslations(a.lookup_id);const s=JSON.parse(localStorage.getItem(o.BU.TIMEZONE_OBJ));this.defaultTimeZone=this.lookupLanguageTranslations(s.lookup_id);const r=s.description.split("(UTC")[1].split(")");this.utcTimezoneString=r[0].toString(),this.actionType=o.In.EDIT,this.route.params.subscribe(h=>{this.recordId=h.id,this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(l=>{this.dataJsonObj.lookupCodesListJSON=l,this.getRecord(this.recordId),this.getHrActionsOptions()})}),this.header=[[{field:"work_resource_displayname",header:this.translateService.instant("WORK_PROJECTS.WORK_RESOURCE"),class:"w-50"},{field:"resource_status",header:this.translateService.instant("COMMON_FIELDS.WORK_RESOURCE_STATUS"),class:""},{field:"pay_hours",header:this.translateService.instant("WORK_ATTENDANCE.WORK_PAY_HOURS"),class:"w-100 text-end"},{field:"expected_pay_hours",header:this.translateService.instant("WORK_ATTENDANCE.WORK_EXPECTED_PAY_HOURS"),class:"w-130 text-end"},{field:"misc_hours_adjust_minus",header:this.translateService.instant("WORK_ATTENDANCE.WORK_MISC_HOURS_ADJUST_MINUS"),class:"w-100 text-end"},{field:"training_hours_adjust_minus",header:this.translateService.instant("WORK_ATTENDANCE.WORK_TRAINING_HOURS_ADJUST_MINUS"),class:"text-end"},{field:"research_dev_hours_adjust_minus",header:this.translateService.instant("WORK_ATTENDANCE.WORK_RESEARCH_DEV_HOURS_ADJUST_MINUS"),class:"text-end"},{field:"misc_hours_adjust_plus",header:this.translateService.instant("WORK_ATTENDANCE.WORK_MISC_HOURS_ADJUST_PLUS"),class:"text-end"},{field:"annual_leave_hours_balance",header:this.translateService.instant("WORK_ATTENDANCE.WORK_ANNUAL_LEAVE_HOURS_BALANCE"),class:"text-end"},{field:"net_hours_adjust",header:this.translateService.instant("WORK_ATTENDANCE.WORK_NET_HOURS_ADJUST"),class:"w-60 text-end"},{field:"new_pay_hours",header:this.translateService.instant("WORK_ATTENDANCE.WORK_NEW_PAY_HOURS"),class:"text-end"},{field:"hr_action_displayname",header:this.translateService.instant("WORK_ATTENDANCE.WORK_HR_ACTION"),class:""}],[]],this.header1=[[{field:"sno",header:"#",class:"w-50"},{field:"actionViewDate",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-180 text-end"},{field:"viewActionTaken",header:this.translateService.instant("ACTION_HISTORY.ACTION"),class:"w-100"},{field:"viewActedBy",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-150"},{field:"viewActionComment",header:this.translateService.instant("COMMON_FIELDS.NOTES"),class:""}],[]],this.header2=[[{field:"actionDate",header:this.translateService.instant("COMMON_FIELDS.DATE"),class:"w-180 text-end"},{field:"actionTaken",header:this.translateService.instant("ACTION_HISTORY.ACTION"),class:"w-100"},{field:"actedBy",header:this.translateService.instant("ACTION_HISTORY.ACTED_BY"),class:"w-150"},{field:"action_comment",header:this.translateService.instant("COMMON_FIELDS.NOTES"),class:""}],[]],this.getAttachmentsList()}getRecord(a){try{this.workAtendanceService.get(a).then(s=>{this.attendanceBlockData=[],this.attendanceData=s,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_ATTENDANCE",value:this.attendanceData.attendance_name,showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_EDIT",value:"",showSubMenuDisplayName:!1}],this.getWorkAttendanceStatuses();const n=this.attendanceData.statuses.length-1;this.statusValue=this.lookupLanguageTranslations(this.attendanceData.statuses[n].status.lookup_id),this.statusComment=this.attendanceData.statuses[n].comment,this.startDateValue=this.attendanceData.start_date,this.endDateValue=this.attendanceData.end_date;for(let e=0;e<s.attendance_details.length;e++)s.attendance_details[e].work_resource_displayname=s.attendance_details[e].work_resource.work_resource_name,s.attendance_details[e].defaultHrAction=s.attendance_details[e].hr_action?s.attendance_details[e].hr_action.lookup_id:"";this.attendanceDetailsData=s.attendance_details;for(let e=0;e<s.attendance_details.length;e++)this.attendanceDetailsData[e].net_hours_adjust=-this.attendanceDetailsData[e].training_hours_adjust_minus-this.attendanceDetailsData[e].research_dev_hours_adjust_minus+this.attendanceDetailsData[e].misc_hours_adjust_plus-this.attendanceDetailsData[e].misc_hours_adjust_minus+this.attendanceDetailsData[e].annual_leave_hours_balance,this.attendanceDetailsData[e].new_pay_hours=this.attendanceDetailsData[e].pay_hours-this.attendanceDetailsData[e].total_week_ends+this.attendanceDetailsData[e].net_hours_adjust;for(let e=0;e<this.attendanceData.statuses.length;e++)this.attendanceData.statuses[e].sno=e+1,this.attendanceData.statuses[e].actionViewDate=this.commonService.convertToUserTimeZone(this.attendanceData.statuses[e].last_updatedAt,this.utcTimezoneString),this.attendanceData.statuses[e].actionViewDate=p(new Date(this.attendanceData.statuses[e].actionViewDate)).format(this.loginUserDateFormat),this.attendanceData.statuses[e].viewActionTaken=this.lookupLanguageTranslations(this.attendanceData.statuses[e].status.lookup_id),this.attendanceData.statuses[e].viewActedBy=this.attendanceData.statuses[e].last_updated_by.f_name+" "+this.attendanceData.statuses[e].last_updated_by.l_name,this.attendanceData.statuses[e].viewActionComment=this.attendanceData.statuses[e].comment;this.statusObj={actionDate:this.commonService.dbTimezoneFormatWithOutHours(Date.now()),actionTaken:this.attendanceData.statuses[n].status.lookup_id,actedBy:this.actedBy,action_comment:""},this.viewStatusObj=this.attendanceData.statuses[n].status,this.attendanceBlockData.push(this.statusObj),this.attendanceHistoryData=this.attendanceData.statuses},s=>{this.loggerService.setLoggerError(this.constructor.name,"getRecord",s)})}catch(s){this.loggerService.setLoggerError(this.constructor.name,"getRecord",s)}}changeStartDate(a){try{this.startDateValue=a.value,this.error=p(this.startDateValue).format("YYYY-MM-DD")>p(this.endDateValue).format("YYYY-MM-DD")?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":""}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeStartDate",s)}}changeEndDate(a){try{this.endDateValue=a.value,this.error=new Date(this.startDateValue)>new Date(this.endDateValue)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":""}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeEndDate",s)}}changeMiscAdjMinus(a,s){try{a.value&&(this.attendanceDetailsData[s].misc_hours_adjust_minus=parseInt(a.value,10),this.attendanceDetailsData[s].net_hours_adjust=-this.attendanceDetailsData[s].training_hours_adjust_minus-this.attendanceDetailsData[s].research_dev_hours_adjust_minus+this.attendanceDetailsData[s].misc_hours_adjust_plus-this.attendanceDetailsData[s].misc_hours_adjust_minus+this.attendanceDetailsData[s].annual_leave_hours_balance,this.attendanceDetailsData[s].new_pay_hours=this.attendanceDetailsData[s].pay_hours-this.attendanceDetailsData[s].total_week_ends+this.attendanceDetailsData[s].net_hours_adjust)}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeMiscAdjMinus",n)}}changeTrainingAdj(a,s){try{a.value&&(this.attendanceDetailsData[s].training_hours_adjust_minus=parseInt(a.value,10),this.attendanceDetailsData[s].net_hours_adjust=-this.attendanceDetailsData[s].training_hours_adjust_minus-this.attendanceDetailsData[s].research_dev_hours_adjust_minus+this.attendanceDetailsData[s].misc_hours_adjust_plus-this.attendanceDetailsData[s].misc_hours_adjust_minus+this.attendanceDetailsData[s].annual_leave_hours_balance,this.attendanceDetailsData[s].new_pay_hours=this.attendanceDetailsData[s].pay_hours-this.attendanceDetailsData[s].total_week_ends+this.attendanceDetailsData[s].net_hours_adjust)}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeTrainingAdj",n)}}changeResearchandDvelopmentAdj(a,s){try{a.value&&(this.attendanceDetailsData[s].research_dev_hours_adjust_minus=parseInt(a.value,10),this.attendanceDetailsData[s].net_hours_adjust=-this.attendanceDetailsData[s].training_hours_adjust_minus-this.attendanceDetailsData[s].research_dev_hours_adjust_minus+this.attendanceDetailsData[s].misc_hours_adjust_plus-this.attendanceDetailsData[s].misc_hours_adjust_minus+this.attendanceDetailsData[s].annual_leave_hours_balance,this.attendanceDetailsData[s].new_pay_hours=this.attendanceDetailsData[s].pay_hours-this.attendanceDetailsData[s].total_week_ends+this.attendanceDetailsData[s].net_hours_adjust)}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeResearchandDvelopmentAdj",n)}}changeMiscAdjPlus(a,s){try{a.value&&(this.attendanceDetailsData[s].misc_hours_adjust_plus=parseInt(a.value,10),this.attendanceDetailsData[s].net_hours_adjust=-this.attendanceDetailsData[s].training_hours_adjust_minus-this.attendanceDetailsData[s].research_dev_hours_adjust_minus+this.attendanceDetailsData[s].misc_hours_adjust_plus-this.attendanceDetailsData[s].misc_hours_adjust_minus+this.attendanceDetailsData[s].annual_leave_hours_balance,this.attendanceDetailsData[s].new_pay_hours=this.attendanceDetailsData[s].pay_hours-this.attendanceDetailsData[s].total_week_ends+this.attendanceDetailsData[s].net_hours_adjust)}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeMiscAdjPlus",n)}}changeAnnualBalanceToPay(a,s){try{a.value&&(this.attendanceDetailsData[s].annual_leave_hours_balance=parseInt(a.value,10),this.attendanceDetailsData[s].net_hours_adjust=-this.attendanceDetailsData[s].training_hours_adjust_minus-this.attendanceDetailsData[s].research_dev_hours_adjust_minus+this.attendanceDetailsData[s].misc_hours_adjust_plus-this.attendanceDetailsData[s].misc_hours_adjust_minus+this.attendanceDetailsData[s].annual_leave_hours_balance,this.attendanceDetailsData[s].new_pay_hours=this.attendanceDetailsData[s].pay_hours-this.attendanceDetailsData[s].total_week_ends+this.attendanceDetailsData[s].net_hours_adjust)}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeAnnualBalanceToPay",n)}}getHrActionsOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[o.ox.WORK_ATTENDANCE_HR_ACTIONS],"").then(a=>{this.hrActionsOptions=a})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getHrActionsOptions",a)}}changeHrActions(a,s){try{this.defaultHrAction=a.value,this.attendanceDetailsData[s].defaultHrAction=a.value,this.attendanceDetailsData[s].hr_action=this.hrActionsOptions.find(n=>n.ID===parseInt(this.defaultHrAction,10))}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeHrActions",n)}}updateRecord(){try{this.startDate.isValid()&&this.endDate.isValid()&&this.miscAdjMinusValid.isValid()&&this.trainingAdjValid.isValid()&&this.rdAdjPlusValid.isValid()&&this.miscAdjPlusValid.isValid()&&this.alBalPayValid.isValid()&&this.hrActionValid.isValid()&&R.L.isEmpty(this.error)&&(!0===this.actionBlockFlag&&this.attendanceHistoryData.push(this.statusObj),this.workAtendanceService.update(this.recordId,{enterprise:{enterprise_id:this.attendanceData.enterprise.enterprise_id,enterprise_name:this.attendanceData.enterprise.enterprise_name,short_name:this.attendanceData.enterprise.short_name},business_entity_name:this.attendanceData.business_entity_name,attendance_name:this.attendanceData.attendance_name,basis:this.attendanceData.basis,start_date:this.startDateValue,end_date:this.endDateValue,statuses:this.attendanceHistoryData,attendance_details:this.attendanceDetailsData}).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_EDIT"),this.commonService.redirectToPreviousUrl()},s=>{this.commonErrorCodes(JSON.parse(s)),this.loggerService.setLoggerError(this.constructor.name,"updateRecord",s)}))}catch(a){this.loggerService.setLoggerError(this.constructor.name,"updateRecord",a)}}getWorkAttendanceStatuses(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[o.ox.WORK_ATTENDANCE_STATUSES],"").then(a=>{this.actionOptions=a})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getWorkAttendanceStatuses",a)}}changeWorkAttendanceStatus(a,s){try{this.actionBlockFlag=!0,this.actionTaken=a.value,this.attendanceBlockData[s].actionTaken=a.value,this.attendanceBlockData[s].status=this.actionOptions.find(n=>n.ID===parseInt(this.actionTaken,10)),a&&(this.statusObj={status:this.attendanceBlockData[s].status,comment:this.attendanceBlockData[s].comment,last_updatedAt:Date.now(),last_updated_by:this.actedById})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeWorkAttendanceStatus",n)}}changeNotes(a,s){try{this.actionBlockFlag=!0,this.attendanceBlockData[s].comment=a.value,this.statusValue=this.attendanceBlockData[s].status?this.attendanceBlockData[s].status:this.viewStatusObj,a&&(this.statusObj={status:this.statusValue,comment:this.attendanceBlockData[s].comment,last_updatedAt:Date.now(),last_updated_by:this.actedById})}catch(n){this.loggerService.setLoggerError(this.constructor.name,"changeNotes",n)}}getAttachmentsList(){try{this.workAtendanceService.getAttachmentsList(this.object_type,this.recordId,"","","").then(a=>{if(this._sharedService.emitChangeLoaders(!1),a.rows.length>0)for(let s=0;s<a.rows.length;s++)a.rows[s].user_name=a.rows[s].f_name+", "+a.rows[s].l_name,a.rows[s].last_uploaded_date=this.commonService.dbTimezoneFormat(a.rows[s].last_uploaded_date),this.attachmentsData=a.rows;else this.attachmentsData=[];this.totalRecords=a.totalCount,this.spinner=!1}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getAttachmentsList",a)}}commonErrorCodes(a){const s=JSON.parse(a[o.BU.STATUS]);409===s&&(this.error="COMMON_STATUS_CODES."+s)}cancel(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancel",a)}}static \u0275fac=function(s){return new(s||i)(t.Y36(J.F),t.Y36(b.Y),t.Y36(N.s),t.Y36(_.gz),t.Y36(E.v),t.Y36(k.f),t.Y36(_.F0),t.Y36(C.m),t.Y36(A.sK),t.Y36(T))};static \u0275cmp=t.Xpm({type:i,selectors:[["app-work-attendances-edit"]],viewQuery:function(s,n){if(1&s&&(t.Gf(At,5),t.Gf(Tt,5),t.Gf(bt,5),t.Gf(yt,5),t.Gf(Ot,5),t.Gf(St,5),t.Gf(ft,5),t.Gf(Et,5)),2&s){let e;t.iGM(e=t.CRH())&&(n.alBalPayValid=e.first),t.iGM(e=t.CRH())&&(n.endDate=e.first),t.iGM(e=t.CRH())&&(n.hrActionValid=e.first),t.iGM(e=t.CRH())&&(n.miscAdjMinusValid=e.first),t.iGM(e=t.CRH())&&(n.miscAdjPlusValid=e.first),t.iGM(e=t.CRH())&&(n.rdAdjPlusValid=e.first),t.iGM(e=t.CRH())&&(n.startDate=e.first),t.iGM(e=t.CRH())&&(n.trainingAdjValid=e.first)}},features:[t._Bn([T,b.Y]),t.qOj],decls:81,vars:88,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],[1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","work-attandance-edit-enterprise-shortname",3,"label","value"],["disabled","true","id","work-attandance-edit-business-entity",3,"label","value"],["disabled","true","id","work-attandance-edit-attendancename",3,"label","value"],["disabled","true","id","work-attandance-edit-work-basis",3,"label","value"],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","work-attendance-view-startdate",3,"placeholder","defaultDate","dateChangeValue"],["startDate",""],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","work-attendance-view-enddate",3,"placeholder","defaultDate","dateChangeValue"],["endDate",""],["disabled","true","id","work-attandance-edit-status",3,"label","value"],["disabled","true","id","work-attandance-edit-work-notes",3,"label","value"],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","work-attandance-edit-submitbutton",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","work-attandance-edit-cancelbutton",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"],[1,"card"],["id","extraPaddingBottomID",1,"card-content"],[3,"multiple"],["accordianBundle",""],["id","editComponentsId",1,"list-accordion-tab",3,"selected"],[1,"d-flex","justify-content-between","w-100","accordion-header"],["selectionMode","single","dataKey","LineNum",1,"ptable","max-height",3,"columns","value","rows","lazy","responsive","autoLayout"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"list-accordion-tab",3,"selected"],["id","editattachmentId",3,"header","data","totalRecords","objectType","objectId","actionType","spinner"],[3,"createdBy","lastUpdatedBy","showrecordhistory","creationDate","lastUpdatedDate"],[4,"ngIf"],[1,"text-center","text-danger"],[4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow","class",4,"ngFor","ngForOf"],["data-toggle","modal",3,"pSelectableRow"],["mandatory","true","disabled","false","id","work-attendance-edit-details-misc_hours_adjust_minus",3,"label","value","valueChange"],["miscAdjMinusValid",""],["mandatory","true","disabled","false","id","work-attendance-edit-details-training_hours_adjust_minus",3,"label","value","valueChange"],["trainingAdjValid",""],["mandatory","true","disabled","false","id","work-attendance-edit-details-research_dev_hours_adjust_minus",3,"label","value","valueChange"],["rdAdjPlusValid",""],["mandatory","true","disabled","false","id","work-attendance-edit-details-misc_hours_adjust_plus",3,"label","value","valueChange"],["miscAdjPlusValid",""],["mandatory","true","disabled","false","id","work-attendance-edit-details-annual_leave_hours_balance",3,"label","value","valueChange"],["alBalPayValid",""],["disabled","false","id","work-attendance-edit-details-hraction","mandatory","true",3,"label","options","defaultValue","valueChange"],["hrActionValid",""],["class","col-md-12",4,"ngFor","ngForOf"],[3,"innerHTML"],[3,"pSelectableRow","class",4,"ngFor","ngForOf"],[3,"pSelectableRow"],["disabled","false","mandatory","false","id","workattendance-edit-status",3,"label","options","defaultValue","valueChange"],[1,"error-msg","text-danger","mb-0",3,"id"],["mandatory","false","disabled","false","id","workattendance-edit-status",3,"label","value","valueChange"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"app-pageheader",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9),t._UZ(10,"app-input",10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",9),t._UZ(13,"app-input",11),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",9),t._UZ(16,"app-input",12),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",9),t._UZ(19,"app-input",13),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",9)(22,"app-advsearchdatepicker",14,15),t.NdJ("dateChangeValue",function(r){return n.changeStartDate(r)}),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"div",9)(26,"app-advsearchdatepicker",16,17),t.NdJ("dateChangeValue",function(r){return n.changeEndDate(r)}),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"div",9),t._UZ(30,"app-input",18),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",9),t._UZ(33,"app-input",19),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",20)(36,"app-button",21),t.NdJ("buttonOnClick",function(){return n.updateRecord()}),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"app-button",22),t.NdJ("buttonOnClick",function(){return n.cancel()}),t.ALo(39,"translate"),t.qZA()(),t.TgZ(40,"div",23),t._uU(41),t.ALo(42,"translate"),t.qZA()()()()(),t.TgZ(43,"div",3)(44,"div",24)(45,"div",25)(46,"p-accordion",26,27)(48,"p-accordionTab",28)(49,"p-header",29)(50,"span"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"p-table",30),t.YNc(54,Ct,1,1,"ng-template",31),t.YNc(55,wt,2,1,"ng-template",32),t.YNc(56,Vt,2,1,"ng-template",33),t.YNc(57,Pt,4,2,"ng-template",34),t.qZA()(),t.TgZ(58,"p-accordionTab",35)(59,"p-header",29)(60,"span"),t._uU(61),t.ALo(62,"translate"),t.qZA()(),t.TgZ(63,"p-table",30),t.YNc(64,Bt,1,1,"ng-template",31),t.YNc(65,Ft,2,1,"ng-template",32),t.YNc(66,Yt,2,1,"ng-template",33),t.YNc(67,Kt,4,2,"ng-template",34),t.qZA()(),t.TgZ(68,"p-accordionTab",35)(69,"p-header",29)(70,"span"),t._uU(71),t.ALo(72,"translate"),t.qZA()(),t.TgZ(73,"p-table",30),t.YNc(74,Qt,1,1,"ng-template",31),t.YNc(75,$t,2,1,"ng-template",32),t.YNc(76,te,2,1,"ng-template",33),t.YNc(77,ie,2,1,"ng-template",33),t.YNc(78,re,4,2,"ng-template",34),t.qZA()(),t._UZ(79,"app-attachment",36)(80,"app-recordhistory",37),t.qZA()()()()()()()),2&s&&(t.xp6(6),t.Q6J("pageName",n.dataJsonObj.pageName)("pageTitle",n.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),t.xp6(4),t.s9C("label",t.lcZ(11,60,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",null==n.attendanceData||null==n.attendanceData.enterprise?null:n.attendanceData.enterprise.short_name),t.xp6(3),t.s9C("label",t.lcZ(14,62,"COMMON_FIELDS.BUSINESS_ENTITY")),t.s9C("value",n.lookupLanguageTranslations(null==n.attendanceData||null==n.attendanceData.business_entity_name?null:n.attendanceData.business_entity_name.lookup_id)),t.xp6(3),t.s9C("label",t.lcZ(17,64,"COMMON_PAGE_TITLES.WORK_ATTENDANCE")),t.s9C("value",null==n.attendanceData?null:n.attendanceData.attendance_name),t.xp6(3),t.s9C("label",t.lcZ(20,66,"COMMON_FIELDS.BASIS")),t.s9C("value",n.lookupLanguageTranslations(null==n.attendanceData||null==n.attendanceData.basis?null:n.attendanceData.basis.lookup_id)),t.xp6(3),t.s9C("placeholder",t.lcZ(24,68,"COMMON_FIELDS.START_DATE")),t.s9C("defaultDate",n.startDateValue),t.xp6(4),t.s9C("placeholder",t.lcZ(28,70,"COMMON_FIELDS.END_DATE")),t.s9C("defaultDate",n.endDateValue),t.xp6(4),t.s9C("label",t.lcZ(31,72,"COMMON_FIELDS.STATUS")),t.s9C("value",n.statusValue),t.xp6(3),t.s9C("label",t.lcZ(34,74,"COMMON_FIELDS.NOTES")),t.s9C("value",n.statusComment),t.xp6(3),t.s9C("label",t.lcZ(37,76,"COMMON_BUTTONS.BUTTON_SUBMIT")),t.xp6(2),t.s9C("label",t.lcZ(39,78,"COMMON_BUTTONS.BUTTON_CANCEL")),t.xp6(3),t.hij(" ",t.lcZ(42,80,n.error)," "),t.xp6(5),t.Q6J("multiple",!0),t.xp6(2),t.Q6J("selected",!0),t.xp6(3),t.Oqu(t.lcZ(52,82,"COMMON_BLOCK_TITLES.WORK_ATTENDANCE_DETAILS")),t.xp6(2),t.Q6J("columns",n.header)("value",n.attendanceDetailsData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),t.xp6(5),t.Q6J("selected",!0),t.xp6(3),t.Oqu(t.lcZ(62,84,"COMMON_BLOCK_TITLES.WORK_ATTENDANCE_ACTION_HISTORY")),t.xp6(2),t.Q6J("columns",n.header1)("value",n.attendanceHistoryData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),t.xp6(5),t.Q6J("selected",!0),t.xp6(3),t.Oqu(t.lcZ(72,86,"COMMON_BLOCK_TITLES.WORK_ATTENDANCE_ACTION_BLOCK")),t.xp6(2),t.Q6J("columns",n.header2)("value",n.attendanceBlockData)("rows",10)("lazy",!0)("responsive",!0)("autoLayout",!0),t.xp6(6),t.Q6J("header",n.attachmentColumnHeaders)("data",n.attachmentsData)("totalRecords",n.totalRecords)("objectType",n.object_type)("objectId",n.recordId)("actionType",n.actionType)("spinner",n.spinner),t.xp6(1),t.Q6J("createdBy",null==n.attendanceData?null:n.attendanceData.created_by)("lastUpdatedBy",null==n.attendanceData?null:n.attendanceData.updated_by)("showrecordhistory",n.dataJsonObj.showrecordhistory)("creationDate",null==n.attendanceData?null:n.attendanceData.createdAt)("lastUpdatedDate",null==n.attendanceData?null:n.attendanceData.updatedAt))},dependencies:[y.UQ,y.US,I.h4,I.jx,O.sg,O.O5,S.iA,S.Ei,M.r,L.a,x.k,gt.K,P.W,W.Y,F.H,w.q,A.X$]})}return i})(),canActivate:[f.P],data:{object_type:o.hf.WORK_ATTENDANCE,title:"Work Absences List",responsibilityParam:o.bP.MENUS+"."+o.w1.EMPLOYEE_TRANSACTIONS+"."+o.bP.SUBMENUS+"."+o.w1.EMPTRANSACTIONS_WORK_ATTENDANCE+"."+o.In.EDIT}},{path:":id/workattendances-approval/:title",component:B,canActivate:[f.P],data:{object_type:o.hf.WORK_ATTENDANCE,title:"Work Absences List",responsibilityParam:o.bP.MENUS+"."+o.w1.EMPLOYEE_TRANSACTIONS+"."+o.bP.SUBMENUS+"."+o.w1.EMPTRANSACTIONS_WORK_ATTENDANCE+"."+o.In.APPROVE}},{path:"create",component:(()=>{class i extends v.O{commonService;loggerService;navigationService;workAttendanceService;router;translateService;uiUtils;route;businessEntity;endDate;startDate;validBasis;basisObj;basisOptions;businessEntityId;businessEntityObj;businessEntityOptions;defaultBasisId;endDateValue;enterpriseId;enterpriseName;enterpriseShortName;error;startDateValue;utcTimezoneString;dataJsonObj={};constructor(a,s,n,e,r,h,l,u){super(u,a),this.commonService=a,this.loggerService=s,this.navigationService=n,this.workAttendanceService=e,this.router=r,this.translateService=h,this.uiUtils=l,this.route=u}ngOnInit(){this.initializeComponent()}initializeComponent(){this.dataJsonObj.pageName=o.hf.WORKATTENDANCE,this.dataJsonObj.pageTitle=[{key:"COMMON_PAGE_TITLES.WORK_ATTENDANCE",value:"",showSubMenuDisplayName:!1},{key:"",value:"-",showSubMenuDisplayName:!1},{key:"COMMON_BUTTONS.BUTTON_CREATE",value:"",showSubMenuDisplayName:!1}],this.enterpriseId=localStorage.getItem(o.BU.SELECTED_ENTERPRISE);const e=JSON.parse(localStorage.getItem(o.BU.TIMEZONE_OBJ)).description.split("(UTC")[1].split(")");this.utcTimezoneString=e[0].toString(),this.getEnterpriseData(),this.commonService.getLookupCodesListJson(this.enterpriseId,"list").then(r=>{this.dataJsonObj.lookupCodesListJSON=r,this.getBusinessEntityNameOptions(),this.getbasisNames()}),this.startDateValue=new Date((new Date).getFullYear(),(new Date).getMonth()-1,1),this.endDateValue=new Date((new Date).getFullYear(),(new Date).getMonth(),0)}getEnterpriseData(){try{this.commonService.getEnterprisesViewData(this.enterpriseId).then(a=>{this.enterpriseName=a.enterprise_name,this.enterpriseShortName=a.short_name}).catch(a=>{this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseData",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getEnterpriseData",a)}}getBusinessEntityNameOptions(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[o.ox.BUSINESS_ENTITY_NAMES],"").then(a=>{a&&(this.businessEntityOptions=a,this.businessEntityId=this.businessEntityOptions[0].ID,this.businessEntityObj=a[0])},a=>{this.loggerService.setLoggerError(this.constructor.name,"getBusinessEntityNameOptions",a)})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getBusinessEntityNameOptions",a)}}changeSelectedBusinessEntityName(a){try{a.value&&(this.businessEntityId=a.value,this.businessEntityObj=this.businessEntityOptions.find(s=>s.ID===parseInt(this.businessEntityId,10))),this.error=""}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeSelectedBusinessEntityName",s)}}getbasisNames(){try{this.commonService.getFilteredLookupCodes(this.dataJsonObj.lookupCodesListJSON[o.ox.WORK_ATTENDANCE_BASIS],"").then(a=>{this.basisOptions=a,this.defaultBasisId=a[0].ID,this.basisObj=a[0]})}catch(a){this.loggerService.setLoggerError(this.constructor.name,"getbasisNames",a)}}changebasisName(a){try{this.defaultBasisId=a.value,this.basisObj=this.basisOptions.find(s=>s.ID===parseInt(this.defaultBasisId,10))}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changebasisName",s)}}changeStartDateChange(a){try{this.startDateValue=a.value,a.value&&(this.error=new Date(this.startDateValue)>new Date(this.endDateValue)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":"")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeStartDateChange",s)}}changeEndDateChange(a){try{this.endDateValue=a.value,a.value&&(this.error=new Date(this.startDateValue)>new Date(this.endDateValue)?"COMMON_VALIDATION_MESSAGES.VALID_NOBLANK_END_DATE_GREATER_START":"")}catch(s){this.loggerService.setLoggerError(this.constructor.name,"changeEndDateChange",s)}}createRecord(){try{if(this.businessEntity.isValid()&&this.validBasis.isValid()&&this.startDate.isValid()&&this.endDate.isValid()&&R.L.isEmpty(this.error)){const a={enterprise:{enterprise_id:this.enterpriseId,enterprise_name:this.enterpriseName,short_name:this.enterpriseShortName},business_entity_name:this.businessEntityObj,basis:this.basisObj,start_date:this.commonService.convertToUtcTimeZone(this.startDateValue,this.utcTimezoneString),end_date:this.commonService.convertToUtcTimeZone(this.endDateValue,this.utcTimezoneString),statuses:[]};this.workAttendanceService.create(a).then(s=>{this.uiUtils.displaytoastMessage("COMMON_TOAST_MESSAGES.TOAST_SUCCESS_CREATE"),this.cancelButton(),this.router.routeReuseStrategy.clearModuleRouteCache("workattendances"),this.commonService.changeEvent("workattendances")},s=>{this.commonErrorCodes(JSON.parse(s)),this.loggerService.setLoggerError(this.constructor.name,"createRecord",s)})}}catch(a){this.loggerService.setLoggerError(this.constructor.name,"createRecord",a)}}cancelButton(){try{this.commonService.redirectToPreviousUrl()}catch(a){this.loggerService.setLoggerError(this.constructor.name,"cancelBtn",a)}}commonErrorCodes(a){const s=JSON.parse(a[o.BU.STATUS]);409===s&&(this.error="COMMON_STATUS_CODES."+s)}static \u0275fac=function(s){return new(s||i)(t.Y36(E.v),t.Y36(C.m),t.Y36(k.f),t.Y36(T),t.Y36(_.F0),t.Y36(A.sK),t.Y36(N.s),t.Y36(_.gz))};static \u0275cmp=t.Xpm({type:i,selectors:[["app-work-attendances-create"]],viewQuery:function(s,n){if(1&s&&(t.Gf(le,5),t.Gf(ce,5),t.Gf(he,5),t.Gf(ue,5)),2&s){let e;t.iGM(e=t.CRH())&&(n.businessEntity=e.first),t.iGM(e=t.CRH())&&(n.endDate=e.first),t.iGM(e=t.CRH())&&(n.startDate=e.first),t.iGM(e=t.CRH())&&(n.validBasis=e.first)}},features:[t._Bn([T]),t.qOj],decls:39,vars:38,consts:[[1,"container-fluid"],[1,"forms-wrapper"],[1,"row","g-0"],[1,"col-md-12"],[1,"card","bdt-0"],["id","stickyHeaderID",1,"card-header","card-header-primary"],[1,"subpage-header-title","w-100",3,"pageName","pageTitle","showPageHeaderItems","showDependencySubMenu"],["id","extraPaddingBottomID",1,"card-body"],[1,"row","form-bs"],[1,"col-md-4"],["disabled","true","id","work-attendance-create-enterprise",3,"label","value"],["disabled","false","mandatory","true","id","work-attendance-create-business-entity",3,"label","defaultValue","options","valueChange"],["businessEntity",""],["disabled","true","value","","id","work-attendance-create-workattendance",3,"label"],["mandatory","true","id","work-attendance-create-basisname",3,"label","options","defaultValue","valueChange"],["validBasis",""],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","work-attendance-create-startdate",3,"placeholder","defaultDate","dateChangeValue"],["startDate",""],["dateformat","dd-MMM-yyyy","mandatory","true","disabled","false","id","work-attendance-create-enddate",3,"placeholder","defaultDate","dateChangeValue"],["endDate",""],[1,"col-md-12","text-end","mt-2"],["className","btn btn-primary btn-sm","id","work-attendance-create-submitbutton",1,"mgr-5",3,"label","buttonOnClick"],["className","btn btn-danger btn-sm","id","work-attendance-create-cancelbutton",3,"label","buttonOnClick"],[1,"error-msg","col-md-12","text-danger","text-center","mb-0"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t._UZ(6,"app-pageheader",6),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9),t._UZ(10,"app-input",10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",9)(13,"app-dropdown-singleselect",11,12),t.NdJ("valueChange",function(r){return n.changeSelectedBusinessEntityName(r)}),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"div",9),t._UZ(17,"app-input",13),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",9)(20,"app-dropdown-singleselect",14,15),t.NdJ("valueChange",function(r){return n.changebasisName(r)}),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"div",9)(24,"app-advsearchdatepicker",16,17),t.NdJ("dateChangeValue",function(r){return n.changeStartDateChange(r)}),t.ALo(26,"translate"),t.qZA()(),t.TgZ(27,"div",9)(28,"app-advsearchdatepicker",18,19),t.NdJ("dateChangeValue",function(r){return n.changeEndDateChange(r)}),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"div",20)(32,"app-button",21),t.NdJ("buttonOnClick",function(){return n.createRecord()}),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"app-button",22),t.NdJ("buttonOnClick",function(){return n.cancelButton()}),t.ALo(35,"translate"),t.qZA()(),t.TgZ(36,"div",23),t._uU(37),t.ALo(38,"translate"),t.qZA()()()()()()()()),2&s&&(t.xp6(6),t.Q6J("pageName",n.dataJsonObj.pageName)("pageTitle",n.dataJsonObj.pageTitle)("showPageHeaderItems",!1)("showDependencySubMenu",!1),t.xp6(4),t.s9C("label",t.lcZ(11,20,"COMMON_PAGE_TITLES.ENTERPRISE")),t.s9C("value",n.enterpriseShortName),t.xp6(3),t.s9C("label",t.lcZ(15,22,"COMMON_FIELDS.BUSINESS_ENTITY")),t.s9C("defaultValue",n.businessEntityId),t.Q6J("options",n.businessEntityOptions),t.xp6(4),t.s9C("label",t.lcZ(18,24,"COMMON_PAGE_TITLES.WORK_ATTENDANCE")),t.xp6(3),t.s9C("label",t.lcZ(22,26,"COMMON_FIELDS.BASIS")),t.s9C("defaultValue",n.defaultBasisId),t.Q6J("options",n.basisOptions),t.xp6(4),t.s9C("placeholder",t.lcZ(26,28,"COMMON_FIELDS.START_DATE")),t.s9C("defaultDate",n.startDateValue),t.xp6(4),t.s9C("placeholder",t.lcZ(30,30,"COMMON_FIELDS.END_DATE")),t.s9C("defaultDate",n.endDateValue),t.xp6(4),t.s9C("label",t.lcZ(33,32,"COMMON_BUTTONS.BUTTON_SUBMIT")),t.xp6(2),t.s9C("label",t.lcZ(35,34,"COMMON_BUTTONS.BUTTON_CANCEL")),t.xp6(3),t.hij(" ",t.lcZ(38,36,n.error)," "))},dependencies:[M.r,L.a,x.k,F.H,w.q,A.X$]})}return i})(),canActivate:[f.P],data:{object_type:o.hf.WORK_ATTENDANCE,title:"Work Absences List",responsibilityParam:o.bP.MENUS+"."+o.w1.EMPLOYEE_TRANSACTIONS+"."+o.bP.SUBMENUS+"."+o.w1.EMPTRANSACTIONS_WORK_ATTENDANCE+"."+o.In.CREATE}}]}];let De=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=t.oAB({type:i});static \u0275inj=t.cJS({imports:[_.Bz.forChild(pe),_.Bz]})}return i})(),me=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=t.oAB({type:i});static \u0275inj=t.cJS({imports:[y.fx,O.ez,Z.Pc,H.Nh,S.U$,A.aw,Y.Q,De]})}return i})()}}]);